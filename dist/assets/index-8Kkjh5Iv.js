function Ov(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const l=Object.getOwnPropertyDescriptor(n,a);l&&Object.defineProperty(e,a,l.get?l:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(a){if(a.ep)return;a.ep=!0;const l=r(a);fetch(a.href,l)}})();var Gt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Vd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Lv(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var dp={exports:{}},Wo={},up={exports:{}},me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Va=Symbol.for("react.element"),Av=Symbol.for("react.portal"),$v=Symbol.for("react.fragment"),Mv=Symbol.for("react.strict_mode"),Fv=Symbol.for("react.profiler"),Uv=Symbol.for("react.provider"),Bv=Symbol.for("react.context"),zv=Symbol.for("react.forward_ref"),Wv=Symbol.for("react.suspense"),Vv=Symbol.for("react.memo"),qv=Symbol.for("react.lazy"),Th=Symbol.iterator;function Gv(e){return e===null||typeof e!="object"?null:(e=Th&&e[Th]||e["@@iterator"],typeof e=="function"?e:null)}var hp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},mp=Object.assign,pp={};function kn(e,t,r){this.props=e,this.context=t,this.refs=pp,this.updater=r||hp}kn.prototype.isReactComponent={};kn.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};kn.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function fp(){}fp.prototype=kn.prototype;function qd(e,t,r){this.props=e,this.context=t,this.refs=pp,this.updater=r||hp}var Gd=qd.prototype=new fp;Gd.constructor=qd;mp(Gd,kn.prototype);Gd.isPureReactComponent=!0;var Rh=Array.isArray,gp=Object.prototype.hasOwnProperty,Hd={current:null},xp={key:!0,ref:!0,__self:!0,__source:!0};function vp(e,t,r){var n,a={},l=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(l=""+t.key),t)gp.call(t,n)&&!xp.hasOwnProperty(n)&&(a[n]=t[n]);var i=arguments.length-2;if(i===1)a.children=r;else if(1<i){for(var c=Array(i),h=0;h<i;h++)c[h]=arguments[h+2];a.children=c}if(e&&e.defaultProps)for(n in i=e.defaultProps,i)a[n]===void 0&&(a[n]=i[n]);return{$$typeof:Va,type:e,key:l,ref:o,props:a,_owner:Hd.current}}function Hv(e,t){return{$$typeof:Va,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Kd(e){return typeof e=="object"&&e!==null&&e.$$typeof===Va}function Kv(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Oh=/\/+/g;function Li(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Kv(""+e.key):t.toString(36)}function Wl(e,t,r,n,a){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(l){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Va:case Av:o=!0}}if(o)return o=e,a=a(o),e=n===""?"."+Li(o,0):n,Rh(a)?(r="",e!=null&&(r=e.replace(Oh,"$&/")+"/"),Wl(a,t,r,"",function(h){return h})):a!=null&&(Kd(a)&&(a=Hv(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(Oh,"$&/")+"/")+e)),t.push(a)),1;if(o=0,n=n===""?".":n+":",Rh(e))for(var i=0;i<e.length;i++){l=e[i];var c=n+Li(l,i);o+=Wl(l,t,r,c,a)}else if(c=Gv(e),typeof c=="function")for(e=c.call(e),i=0;!(l=e.next()).done;)l=l.value,c=n+Li(l,i++),o+=Wl(l,t,r,c,a);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function fl(e,t,r){if(e==null)return e;var n=[],a=0;return Wl(e,n,"","",function(l){return t.call(r,l,a++)}),n}function Qv(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var mt={current:null},Vl={transition:null},Yv={ReactCurrentDispatcher:mt,ReactCurrentBatchConfig:Vl,ReactCurrentOwner:Hd};function yp(){throw Error("act(...) is not supported in production builds of React.")}me.Children={map:fl,forEach:function(e,t,r){fl(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return fl(e,function(){t++}),t},toArray:function(e){return fl(e,function(t){return t})||[]},only:function(e){if(!Kd(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};me.Component=kn;me.Fragment=$v;me.Profiler=Fv;me.PureComponent=qd;me.StrictMode=Mv;me.Suspense=Wv;me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Yv;me.act=yp;me.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=mp({},e.props),a=e.key,l=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,o=Hd.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var i=e.type.defaultProps;for(c in t)gp.call(t,c)&&!xp.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&i!==void 0?i[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){i=Array(c);for(var h=0;h<c;h++)i[h]=arguments[h+2];n.children=i}return{$$typeof:Va,type:e.type,key:a,ref:l,props:n,_owner:o}};me.createContext=function(e){return e={$$typeof:Bv,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Uv,_context:e},e.Consumer=e};me.createElement=vp;me.createFactory=function(e){var t=vp.bind(null,e);return t.type=e,t};me.createRef=function(){return{current:null}};me.forwardRef=function(e){return{$$typeof:zv,render:e}};me.isValidElement=Kd;me.lazy=function(e){return{$$typeof:qv,_payload:{_status:-1,_result:e},_init:Qv}};me.memo=function(e,t){return{$$typeof:Vv,type:e,compare:t===void 0?null:t}};me.startTransition=function(e){var t=Vl.transition;Vl.transition={};try{e()}finally{Vl.transition=t}};me.unstable_act=yp;me.useCallback=function(e,t){return mt.current.useCallback(e,t)};me.useContext=function(e){return mt.current.useContext(e)};me.useDebugValue=function(){};me.useDeferredValue=function(e){return mt.current.useDeferredValue(e)};me.useEffect=function(e,t){return mt.current.useEffect(e,t)};me.useId=function(){return mt.current.useId()};me.useImperativeHandle=function(e,t,r){return mt.current.useImperativeHandle(e,t,r)};me.useInsertionEffect=function(e,t){return mt.current.useInsertionEffect(e,t)};me.useLayoutEffect=function(e,t){return mt.current.useLayoutEffect(e,t)};me.useMemo=function(e,t){return mt.current.useMemo(e,t)};me.useReducer=function(e,t,r){return mt.current.useReducer(e,t,r)};me.useRef=function(e){return mt.current.useRef(e)};me.useState=function(e){return mt.current.useState(e)};me.useSyncExternalStore=function(e,t,r){return mt.current.useSyncExternalStore(e,t,r)};me.useTransition=function(){return mt.current.useTransition()};me.version="18.3.1";up.exports=me;var j=up.exports;const je=Vd(j),Jv=Ov({__proto__:null,default:je},[j]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xv=j,Zv=Symbol.for("react.element"),ey=Symbol.for("react.fragment"),ty=Object.prototype.hasOwnProperty,ry=Xv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,sy={key:!0,ref:!0,__self:!0,__source:!0};function bp(e,t,r){var n,a={},l=null,o=null;r!==void 0&&(l=""+r),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)ty.call(t,n)&&!sy.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:Zv,type:e,key:l,ref:o,props:a,_owner:ry.current}}Wo.Fragment=ey;Wo.jsx=bp;Wo.jsxs=bp;dp.exports=Wo;var s=dp.exports,wp={exports:{}},Lt={},jp={exports:{}},Np={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t($,G){var R=$.length;$.push(G);e:for(;0<R;){var M=R-1>>>1,F=$[M];if(0<a(F,G))$[M]=G,$[R]=F,R=M;else break e}}function r($){return $.length===0?null:$[0]}function n($){if($.length===0)return null;var G=$[0],R=$.pop();if(R!==G){$[0]=R;e:for(var M=0,F=$.length,A=F>>>1;M<A;){var T=2*(M+1)-1,W=$[T],Z=T+1,P=$[Z];if(0>a(W,R))Z<F&&0>a(P,W)?($[M]=P,$[Z]=R,M=Z):($[M]=W,$[T]=R,M=T);else if(Z<F&&0>a(P,R))$[M]=P,$[Z]=R,M=Z;else break e}}return G}function a($,G){var R=$.sortIndex-G.sortIndex;return R!==0?R:$.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var o=Date,i=o.now();e.unstable_now=function(){return o.now()-i}}var c=[],h=[],u=1,d=null,m=3,p=!1,f=!1,x=!1,b=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y($){for(var G=r(h);G!==null;){if(G.callback===null)n(h);else if(G.startTime<=$)n(h),G.sortIndex=G.expirationTime,t(c,G);else break;G=r(h)}}function w($){if(x=!1,y($),!f)if(r(c)!==null)f=!0,se(N);else{var G=r(h);G!==null&&de(w,G.startTime-$)}}function N($,G){f=!1,x&&(x=!1,g(C),C=-1),p=!0;var R=m;try{for(y(G),d=r(c);d!==null&&(!(d.expirationTime>G)||$&&!O());){var M=d.callback;if(typeof M=="function"){d.callback=null,m=d.priorityLevel;var F=M(d.expirationTime<=G);G=e.unstable_now(),typeof F=="function"?d.callback=F:d===r(c)&&n(c),y(G)}else n(c);d=r(c)}if(d!==null)var A=!0;else{var T=r(h);T!==null&&de(w,T.startTime-G),A=!1}return A}finally{d=null,m=R,p=!1}}var k=!1,D=null,C=-1,_=5,S=-1;function O(){return!(e.unstable_now()-S<_)}function E(){if(D!==null){var $=e.unstable_now();S=$;var G=!0;try{G=D(!0,$)}finally{G?I():(k=!1,D=null)}}else k=!1}var I;if(typeof v=="function")I=function(){v(E)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,te=z.port2;z.port1.onmessage=E,I=function(){te.postMessage(null)}}else I=function(){b(E,0)};function se($){D=$,k||(k=!0,I())}function de($,G){C=b(function(){$(e.unstable_now())},G)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function($){$.callback=null},e.unstable_continueExecution=function(){f||p||(f=!0,se(N))},e.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<$?Math.floor(1e3/$):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function($){switch(m){case 1:case 2:case 3:var G=3;break;default:G=m}var R=m;m=G;try{return $()}finally{m=R}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function($,G){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var R=m;m=$;try{return G()}finally{m=R}},e.unstable_scheduleCallback=function($,G,R){var M=e.unstable_now();switch(typeof R=="object"&&R!==null?(R=R.delay,R=typeof R=="number"&&0<R?M+R:M):R=M,$){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=R+F,$={id:u++,callback:G,priorityLevel:$,startTime:R,expirationTime:F,sortIndex:-1},R>M?($.sortIndex=R,t(h,$),r(c)===null&&$===r(h)&&(x?(g(C),C=-1):x=!0,de(w,R-M))):($.sortIndex=F,t(c,$),f||p||(f=!0,se(N))),$},e.unstable_shouldYield=O,e.unstable_wrapCallback=function($){var G=m;return function(){var R=m;m=G;try{return $.apply(this,arguments)}finally{m=R}}}})(Np);jp.exports=Np;var ny=jp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ay=j,Ot=ny;function V(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _p=new Set,ga={};function Rs(e,t){mn(e,t),mn(e+"Capture",t)}function mn(e,t){for(ga[e]=t,e=0;e<t.length;e++)_p.add(t[e])}var Cr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pc=Object.prototype.hasOwnProperty,ly=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Lh={},Ah={};function oy(e){return Pc.call(Ah,e)?!0:Pc.call(Lh,e)?!1:ly.test(e)?Ah[e]=!0:(Lh[e]=!0,!1)}function iy(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function cy(e,t,r,n){if(t===null||typeof t>"u"||iy(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function pt(e,t,r,n,a,l,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=o}var st={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){st[e]=new pt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];st[t]=new pt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){st[e]=new pt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){st[e]=new pt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){st[e]=new pt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){st[e]=new pt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){st[e]=new pt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){st[e]=new pt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){st[e]=new pt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Qd=/[\-:]([a-z])/g;function Yd(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Qd,Yd);st[t]=new pt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Qd,Yd);st[t]=new pt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Qd,Yd);st[t]=new pt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){st[e]=new pt(e,1,!1,e.toLowerCase(),null,!1,!1)});st.xlinkHref=new pt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){st[e]=new pt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Jd(e,t,r,n){var a=st.hasOwnProperty(t)?st[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(cy(t,r,a,n)&&(r=null),n||a===null?oy(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Tr=ay.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,gl=Symbol.for("react.element"),Hs=Symbol.for("react.portal"),Ks=Symbol.for("react.fragment"),Xd=Symbol.for("react.strict_mode"),Ic=Symbol.for("react.profiler"),Sp=Symbol.for("react.provider"),kp=Symbol.for("react.context"),Zd=Symbol.for("react.forward_ref"),Tc=Symbol.for("react.suspense"),Rc=Symbol.for("react.suspense_list"),eu=Symbol.for("react.memo"),Mr=Symbol.for("react.lazy"),Cp=Symbol.for("react.offscreen"),$h=Symbol.iterator;function Mn(e){return e===null||typeof e!="object"?null:(e=$h&&e[$h]||e["@@iterator"],typeof e=="function"?e:null)}var Re=Object.assign,Ai;function Yn(e){if(Ai===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Ai=t&&t[1]||""}return`
`+Ai+e}var $i=!1;function Mi(e,t){if(!e||$i)return"";$i=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(h){var n=h}Reflect.construct(e,[],t)}else{try{t.call()}catch(h){n=h}e.call(t.prototype)}else{try{throw Error()}catch(h){n=h}e()}}catch(h){if(h&&n&&typeof h.stack=="string"){for(var a=h.stack.split(`
`),l=n.stack.split(`
`),o=a.length-1,i=l.length-1;1<=o&&0<=i&&a[o]!==l[i];)i--;for(;1<=o&&0<=i;o--,i--)if(a[o]!==l[i]){if(o!==1||i!==1)do if(o--,i--,0>i||a[o]!==l[i]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=i);break}}}finally{$i=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Yn(e):""}function dy(e){switch(e.tag){case 5:return Yn(e.type);case 16:return Yn("Lazy");case 13:return Yn("Suspense");case 19:return Yn("SuspenseList");case 0:case 2:case 15:return e=Mi(e.type,!1),e;case 11:return e=Mi(e.type.render,!1),e;case 1:return e=Mi(e.type,!0),e;default:return""}}function Oc(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ks:return"Fragment";case Hs:return"Portal";case Ic:return"Profiler";case Xd:return"StrictMode";case Tc:return"Suspense";case Rc:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case kp:return(e.displayName||"Context")+".Consumer";case Sp:return(e._context.displayName||"Context")+".Provider";case Zd:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case eu:return t=e.displayName||null,t!==null?t:Oc(e.type)||"Memo";case Mr:t=e._payload,e=e._init;try{return Oc(e(t))}catch{}}return null}function uy(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Oc(t);case 8:return t===Xd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function as(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Dp(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function hy(e){var t=Dp(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,l=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,l.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function xl(e){e._valueTracker||(e._valueTracker=hy(e))}function Ep(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Dp(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function ro(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Lc(e,t){var r=t.checked;return Re({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Mh(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=as(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Pp(e,t){t=t.checked,t!=null&&Jd(e,"checked",t,!1)}function Ac(e,t){Pp(e,t);var r=as(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?$c(e,t.type,r):t.hasOwnProperty("defaultValue")&&$c(e,t.type,as(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Fh(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function $c(e,t,r){(t!=="number"||ro(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Jn=Array.isArray;function an(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+as(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Mc(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(V(91));return Re({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Uh(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(V(92));if(Jn(r)){if(1<r.length)throw Error(V(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:as(r)}}function Ip(e,t){var r=as(t.value),n=as(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Bh(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Tp(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fc(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Tp(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var vl,Rp=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(vl=vl||document.createElement("div"),vl.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=vl.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function xa(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var ta={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},my=["Webkit","ms","Moz","O"];Object.keys(ta).forEach(function(e){my.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ta[t]=ta[e]})});function Op(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||ta.hasOwnProperty(e)&&ta[e]?(""+t).trim():t+"px"}function Lp(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=Op(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var py=Re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Uc(e,t){if(t){if(py[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(V(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(V(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(V(61))}if(t.style!=null&&typeof t.style!="object")throw Error(V(62))}}function Bc(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zc=null;function tu(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Wc=null,ln=null,on=null;function zh(e){if(e=Ha(e)){if(typeof Wc!="function")throw Error(V(280));var t=e.stateNode;t&&(t=Ko(t),Wc(e.stateNode,e.type,t))}}function Ap(e){ln?on?on.push(e):on=[e]:ln=e}function $p(){if(ln){var e=ln,t=on;if(on=ln=null,zh(e),t)for(e=0;e<t.length;e++)zh(t[e])}}function Mp(e,t){return e(t)}function Fp(){}var Fi=!1;function Up(e,t,r){if(Fi)return e(t,r);Fi=!0;try{return Mp(e,t,r)}finally{Fi=!1,(ln!==null||on!==null)&&(Fp(),$p())}}function va(e,t){var r=e.stateNode;if(r===null)return null;var n=Ko(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(V(231,t,typeof r));return r}var Vc=!1;if(Cr)try{var Fn={};Object.defineProperty(Fn,"passive",{get:function(){Vc=!0}}),window.addEventListener("test",Fn,Fn),window.removeEventListener("test",Fn,Fn)}catch{Vc=!1}function fy(e,t,r,n,a,l,o,i,c){var h=Array.prototype.slice.call(arguments,3);try{t.apply(r,h)}catch(u){this.onError(u)}}var ra=!1,so=null,no=!1,qc=null,gy={onError:function(e){ra=!0,so=e}};function xy(e,t,r,n,a,l,o,i,c){ra=!1,so=null,fy.apply(gy,arguments)}function vy(e,t,r,n,a,l,o,i,c){if(xy.apply(this,arguments),ra){if(ra){var h=so;ra=!1,so=null}else throw Error(V(198));no||(no=!0,qc=h)}}function Os(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Bp(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Wh(e){if(Os(e)!==e)throw Error(V(188))}function yy(e){var t=e.alternate;if(!t){if(t=Os(e),t===null)throw Error(V(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var l=a.alternate;if(l===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===r)return Wh(a),e;if(l===n)return Wh(a),t;l=l.sibling}throw Error(V(188))}if(r.return!==n.return)r=a,n=l;else{for(var o=!1,i=a.child;i;){if(i===r){o=!0,r=a,n=l;break}if(i===n){o=!0,n=a,r=l;break}i=i.sibling}if(!o){for(i=l.child;i;){if(i===r){o=!0,r=l,n=a;break}if(i===n){o=!0,n=l,r=a;break}i=i.sibling}if(!o)throw Error(V(189))}}if(r.alternate!==n)throw Error(V(190))}if(r.tag!==3)throw Error(V(188));return r.stateNode.current===r?e:t}function zp(e){return e=yy(e),e!==null?Wp(e):null}function Wp(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Wp(e);if(t!==null)return t;e=e.sibling}return null}var Vp=Ot.unstable_scheduleCallback,Vh=Ot.unstable_cancelCallback,by=Ot.unstable_shouldYield,wy=Ot.unstable_requestPaint,Me=Ot.unstable_now,jy=Ot.unstable_getCurrentPriorityLevel,ru=Ot.unstable_ImmediatePriority,qp=Ot.unstable_UserBlockingPriority,ao=Ot.unstable_NormalPriority,Ny=Ot.unstable_LowPriority,Gp=Ot.unstable_IdlePriority,Vo=null,fr=null;function _y(e){if(fr&&typeof fr.onCommitFiberRoot=="function")try{fr.onCommitFiberRoot(Vo,e,void 0,(e.current.flags&128)===128)}catch{}}var nr=Math.clz32?Math.clz32:Cy,Sy=Math.log,ky=Math.LN2;function Cy(e){return e>>>=0,e===0?32:31-(Sy(e)/ky|0)|0}var yl=64,bl=4194304;function Xn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function lo(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,l=e.pingedLanes,o=r&268435455;if(o!==0){var i=o&~a;i!==0?n=Xn(i):(l&=o,l!==0&&(n=Xn(l)))}else o=r&~a,o!==0?n=Xn(o):l!==0&&(n=Xn(l));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,l=t&-t,a>=l||a===16&&(l&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-nr(t),a=1<<r,n|=e[r],t&=~a;return n}function Dy(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ey(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,l=e.pendingLanes;0<l;){var o=31-nr(l),i=1<<o,c=a[o];c===-1?(!(i&r)||i&n)&&(a[o]=Dy(i,t)):c<=t&&(e.expiredLanes|=i),l&=~i}}function Gc(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Hp(){var e=yl;return yl<<=1,!(yl&4194240)&&(yl=64),e}function Ui(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function qa(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-nr(t),e[t]=r}function Py(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-nr(r),l=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~l}}function su(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-nr(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var be=0;function Kp(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Qp,nu,Yp,Jp,Xp,Hc=!1,wl=[],Hr=null,Kr=null,Qr=null,ya=new Map,ba=new Map,Br=[],Iy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qh(e,t){switch(e){case"focusin":case"focusout":Hr=null;break;case"dragenter":case"dragleave":Kr=null;break;case"mouseover":case"mouseout":Qr=null;break;case"pointerover":case"pointerout":ya.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ba.delete(t.pointerId)}}function Un(e,t,r,n,a,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:l,targetContainers:[a]},t!==null&&(t=Ha(t),t!==null&&nu(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function Ty(e,t,r,n,a){switch(t){case"focusin":return Hr=Un(Hr,e,t,r,n,a),!0;case"dragenter":return Kr=Un(Kr,e,t,r,n,a),!0;case"mouseover":return Qr=Un(Qr,e,t,r,n,a),!0;case"pointerover":var l=a.pointerId;return ya.set(l,Un(ya.get(l)||null,e,t,r,n,a)),!0;case"gotpointercapture":return l=a.pointerId,ba.set(l,Un(ba.get(l)||null,e,t,r,n,a)),!0}return!1}function Zp(e){var t=ws(e.target);if(t!==null){var r=Os(t);if(r!==null){if(t=r.tag,t===13){if(t=Bp(r),t!==null){e.blockedOn=t,Xp(e.priority,function(){Yp(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ql(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Kc(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);zc=n,r.target.dispatchEvent(n),zc=null}else return t=Ha(r),t!==null&&nu(t),e.blockedOn=r,!1;t.shift()}return!0}function Gh(e,t,r){ql(e)&&r.delete(t)}function Ry(){Hc=!1,Hr!==null&&ql(Hr)&&(Hr=null),Kr!==null&&ql(Kr)&&(Kr=null),Qr!==null&&ql(Qr)&&(Qr=null),ya.forEach(Gh),ba.forEach(Gh)}function Bn(e,t){e.blockedOn===t&&(e.blockedOn=null,Hc||(Hc=!0,Ot.unstable_scheduleCallback(Ot.unstable_NormalPriority,Ry)))}function wa(e){function t(a){return Bn(a,e)}if(0<wl.length){Bn(wl[0],e);for(var r=1;r<wl.length;r++){var n=wl[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Hr!==null&&Bn(Hr,e),Kr!==null&&Bn(Kr,e),Qr!==null&&Bn(Qr,e),ya.forEach(t),ba.forEach(t),r=0;r<Br.length;r++)n=Br[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Br.length&&(r=Br[0],r.blockedOn===null);)Zp(r),r.blockedOn===null&&Br.shift()}var cn=Tr.ReactCurrentBatchConfig,oo=!0;function Oy(e,t,r,n){var a=be,l=cn.transition;cn.transition=null;try{be=1,au(e,t,r,n)}finally{be=a,cn.transition=l}}function Ly(e,t,r,n){var a=be,l=cn.transition;cn.transition=null;try{be=4,au(e,t,r,n)}finally{be=a,cn.transition=l}}function au(e,t,r,n){if(oo){var a=Kc(e,t,r,n);if(a===null)Yi(e,t,n,io,r),qh(e,n);else if(Ty(a,e,t,r,n))n.stopPropagation();else if(qh(e,n),t&4&&-1<Iy.indexOf(e)){for(;a!==null;){var l=Ha(a);if(l!==null&&Qp(l),l=Kc(e,t,r,n),l===null&&Yi(e,t,n,io,r),l===a)break;a=l}a!==null&&n.stopPropagation()}else Yi(e,t,n,null,r)}}var io=null;function Kc(e,t,r,n){if(io=null,e=tu(n),e=ws(e),e!==null)if(t=Os(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Bp(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return io=e,null}function ef(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(jy()){case ru:return 1;case qp:return 4;case ao:case Ny:return 16;case Gp:return 536870912;default:return 16}default:return 16}}var Vr=null,lu=null,Gl=null;function tf(){if(Gl)return Gl;var e,t=lu,r=t.length,n,a="value"in Vr?Vr.value:Vr.textContent,l=a.length;for(e=0;e<r&&t[e]===a[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===a[l-n];n++);return Gl=a.slice(e,1<n?1-n:void 0)}function Hl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function jl(){return!0}function Hh(){return!1}function At(e){function t(r,n,a,l,o){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=l,this.target=o,this.currentTarget=null;for(var i in e)e.hasOwnProperty(i)&&(r=e[i],this[i]=r?r(l):l[i]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?jl:Hh,this.isPropagationStopped=Hh,this}return Re(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=jl)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=jl)},persist:function(){},isPersistent:jl}),t}var Cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ou=At(Cn),Ga=Re({},Cn,{view:0,detail:0}),Ay=At(Ga),Bi,zi,zn,qo=Re({},Ga,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:iu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==zn&&(zn&&e.type==="mousemove"?(Bi=e.screenX-zn.screenX,zi=e.screenY-zn.screenY):zi=Bi=0,zn=e),Bi)},movementY:function(e){return"movementY"in e?e.movementY:zi}}),Kh=At(qo),$y=Re({},qo,{dataTransfer:0}),My=At($y),Fy=Re({},Ga,{relatedTarget:0}),Wi=At(Fy),Uy=Re({},Cn,{animationName:0,elapsedTime:0,pseudoElement:0}),By=At(Uy),zy=Re({},Cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Wy=At(zy),Vy=Re({},Cn,{data:0}),Qh=At(Vy),qy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Hy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ky(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Hy[e])?!!t[e]:!1}function iu(){return Ky}var Qy=Re({},Ga,{key:function(e){if(e.key){var t=qy[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Hl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Gy[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:iu,charCode:function(e){return e.type==="keypress"?Hl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Hl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Yy=At(Qy),Jy=Re({},qo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yh=At(Jy),Xy=Re({},Ga,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:iu}),Zy=At(Xy),eb=Re({},Cn,{propertyName:0,elapsedTime:0,pseudoElement:0}),tb=At(eb),rb=Re({},qo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),sb=At(rb),nb=[9,13,27,32],cu=Cr&&"CompositionEvent"in window,sa=null;Cr&&"documentMode"in document&&(sa=document.documentMode);var ab=Cr&&"TextEvent"in window&&!sa,rf=Cr&&(!cu||sa&&8<sa&&11>=sa),Jh=" ",Xh=!1;function sf(e,t){switch(e){case"keyup":return nb.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Qs=!1;function lb(e,t){switch(e){case"compositionend":return nf(t);case"keypress":return t.which!==32?null:(Xh=!0,Jh);case"textInput":return e=t.data,e===Jh&&Xh?null:e;default:return null}}function ob(e,t){if(Qs)return e==="compositionend"||!cu&&sf(e,t)?(e=tf(),Gl=lu=Vr=null,Qs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return rf&&t.locale!=="ko"?null:t.data;default:return null}}var ib={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ib[e.type]:t==="textarea"}function af(e,t,r,n){Ap(n),t=co(t,"onChange"),0<t.length&&(r=new ou("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var na=null,ja=null;function cb(e){xf(e,0)}function Go(e){var t=Xs(e);if(Ep(t))return e}function db(e,t){if(e==="change")return t}var lf=!1;if(Cr){var Vi;if(Cr){var qi="oninput"in document;if(!qi){var e0=document.createElement("div");e0.setAttribute("oninput","return;"),qi=typeof e0.oninput=="function"}Vi=qi}else Vi=!1;lf=Vi&&(!document.documentMode||9<document.documentMode)}function t0(){na&&(na.detachEvent("onpropertychange",of),ja=na=null)}function of(e){if(e.propertyName==="value"&&Go(ja)){var t=[];af(t,ja,e,tu(e)),Up(cb,t)}}function ub(e,t,r){e==="focusin"?(t0(),na=t,ja=r,na.attachEvent("onpropertychange",of)):e==="focusout"&&t0()}function hb(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Go(ja)}function mb(e,t){if(e==="click")return Go(t)}function pb(e,t){if(e==="input"||e==="change")return Go(t)}function fb(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var or=typeof Object.is=="function"?Object.is:fb;function Na(e,t){if(or(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!Pc.call(t,a)||!or(e[a],t[a]))return!1}return!0}function r0(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function s0(e,t){var r=r0(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=r0(r)}}function cf(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?cf(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function df(){for(var e=window,t=ro();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=ro(e.document)}return t}function du(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function gb(e){var t=df(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&cf(r.ownerDocument.documentElement,r)){if(n!==null&&du(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,l=Math.min(n.start,a);n=n.end===void 0?l:Math.min(n.end,a),!e.extend&&l>n&&(a=n,n=l,l=a),a=s0(r,l);var o=s0(r,n);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),l>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var xb=Cr&&"documentMode"in document&&11>=document.documentMode,Ys=null,Qc=null,aa=null,Yc=!1;function n0(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Yc||Ys==null||Ys!==ro(n)||(n=Ys,"selectionStart"in n&&du(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),aa&&Na(aa,n)||(aa=n,n=co(Qc,"onSelect"),0<n.length&&(t=new ou("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Ys)))}function Nl(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Js={animationend:Nl("Animation","AnimationEnd"),animationiteration:Nl("Animation","AnimationIteration"),animationstart:Nl("Animation","AnimationStart"),transitionend:Nl("Transition","TransitionEnd")},Gi={},uf={};Cr&&(uf=document.createElement("div").style,"AnimationEvent"in window||(delete Js.animationend.animation,delete Js.animationiteration.animation,delete Js.animationstart.animation),"TransitionEvent"in window||delete Js.transitionend.transition);function Ho(e){if(Gi[e])return Gi[e];if(!Js[e])return e;var t=Js[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in uf)return Gi[e]=t[r];return e}var hf=Ho("animationend"),mf=Ho("animationiteration"),pf=Ho("animationstart"),ff=Ho("transitionend"),gf=new Map,a0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function is(e,t){gf.set(e,t),Rs(t,[e])}for(var Hi=0;Hi<a0.length;Hi++){var Ki=a0[Hi],vb=Ki.toLowerCase(),yb=Ki[0].toUpperCase()+Ki.slice(1);is(vb,"on"+yb)}is(hf,"onAnimationEnd");is(mf,"onAnimationIteration");is(pf,"onAnimationStart");is("dblclick","onDoubleClick");is("focusin","onFocus");is("focusout","onBlur");is(ff,"onTransitionEnd");mn("onMouseEnter",["mouseout","mouseover"]);mn("onMouseLeave",["mouseout","mouseover"]);mn("onPointerEnter",["pointerout","pointerover"]);mn("onPointerLeave",["pointerout","pointerover"]);Rs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Rs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Rs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Rs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Rs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Rs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bb=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zn));function l0(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,vy(n,t,void 0,e),e.currentTarget=null}function xf(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var l=void 0;if(t)for(var o=n.length-1;0<=o;o--){var i=n[o],c=i.instance,h=i.currentTarget;if(i=i.listener,c!==l&&a.isPropagationStopped())break e;l0(a,i,h),l=c}else for(o=0;o<n.length;o++){if(i=n[o],c=i.instance,h=i.currentTarget,i=i.listener,c!==l&&a.isPropagationStopped())break e;l0(a,i,h),l=c}}}if(no)throw e=qc,no=!1,qc=null,e}function Ce(e,t){var r=t[td];r===void 0&&(r=t[td]=new Set);var n=e+"__bubble";r.has(n)||(vf(t,e,2,!1),r.add(n))}function Qi(e,t,r){var n=0;t&&(n|=4),vf(r,e,n,t)}var _l="_reactListening"+Math.random().toString(36).slice(2);function _a(e){if(!e[_l]){e[_l]=!0,_p.forEach(function(r){r!=="selectionchange"&&(bb.has(r)||Qi(r,!1,e),Qi(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[_l]||(t[_l]=!0,Qi("selectionchange",!1,t))}}function vf(e,t,r,n){switch(ef(t)){case 1:var a=Oy;break;case 4:a=Ly;break;default:a=au}r=a.bind(null,t,r,e),a=void 0,!Vc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function Yi(e,t,r,n,a){var l=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var i=n.stateNode.containerInfo;if(i===a||i.nodeType===8&&i.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;i!==null;){if(o=ws(i),o===null)return;if(c=o.tag,c===5||c===6){n=l=o;continue e}i=i.parentNode}}n=n.return}Up(function(){var h=l,u=tu(r),d=[];e:{var m=gf.get(e);if(m!==void 0){var p=ou,f=e;switch(e){case"keypress":if(Hl(r)===0)break e;case"keydown":case"keyup":p=Yy;break;case"focusin":f="focus",p=Wi;break;case"focusout":f="blur",p=Wi;break;case"beforeblur":case"afterblur":p=Wi;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Kh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=My;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Zy;break;case hf:case mf:case pf:p=By;break;case ff:p=tb;break;case"scroll":p=Ay;break;case"wheel":p=sb;break;case"copy":case"cut":case"paste":p=Wy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Yh}var x=(t&4)!==0,b=!x&&e==="scroll",g=x?m!==null?m+"Capture":null:m;x=[];for(var v=h,y;v!==null;){y=v;var w=y.stateNode;if(y.tag===5&&w!==null&&(y=w,g!==null&&(w=va(v,g),w!=null&&x.push(Sa(v,w,y)))),b)break;v=v.return}0<x.length&&(m=new p(m,f,null,r,u),d.push({event:m,listeners:x}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",m&&r!==zc&&(f=r.relatedTarget||r.fromElement)&&(ws(f)||f[Dr]))break e;if((p||m)&&(m=u.window===u?u:(m=u.ownerDocument)?m.defaultView||m.parentWindow:window,p?(f=r.relatedTarget||r.toElement,p=h,f=f?ws(f):null,f!==null&&(b=Os(f),f!==b||f.tag!==5&&f.tag!==6)&&(f=null)):(p=null,f=h),p!==f)){if(x=Kh,w="onMouseLeave",g="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(x=Yh,w="onPointerLeave",g="onPointerEnter",v="pointer"),b=p==null?m:Xs(p),y=f==null?m:Xs(f),m=new x(w,v+"leave",p,r,u),m.target=b,m.relatedTarget=y,w=null,ws(u)===h&&(x=new x(g,v+"enter",f,r,u),x.target=y,x.relatedTarget=b,w=x),b=w,p&&f)t:{for(x=p,g=f,v=0,y=x;y;y=Ms(y))v++;for(y=0,w=g;w;w=Ms(w))y++;for(;0<v-y;)x=Ms(x),v--;for(;0<y-v;)g=Ms(g),y--;for(;v--;){if(x===g||g!==null&&x===g.alternate)break t;x=Ms(x),g=Ms(g)}x=null}else x=null;p!==null&&o0(d,m,p,x,!1),f!==null&&b!==null&&o0(d,b,f,x,!0)}}e:{if(m=h?Xs(h):window,p=m.nodeName&&m.nodeName.toLowerCase(),p==="select"||p==="input"&&m.type==="file")var N=db;else if(Zh(m))if(lf)N=pb;else{N=hb;var k=ub}else(p=m.nodeName)&&p.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(N=mb);if(N&&(N=N(e,h))){af(d,N,r,u);break e}k&&k(e,m,h),e==="focusout"&&(k=m._wrapperState)&&k.controlled&&m.type==="number"&&$c(m,"number",m.value)}switch(k=h?Xs(h):window,e){case"focusin":(Zh(k)||k.contentEditable==="true")&&(Ys=k,Qc=h,aa=null);break;case"focusout":aa=Qc=Ys=null;break;case"mousedown":Yc=!0;break;case"contextmenu":case"mouseup":case"dragend":Yc=!1,n0(d,r,u);break;case"selectionchange":if(xb)break;case"keydown":case"keyup":n0(d,r,u)}var D;if(cu)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Qs?sf(e,r)&&(C="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(C="onCompositionStart");C&&(rf&&r.locale!=="ko"&&(Qs||C!=="onCompositionStart"?C==="onCompositionEnd"&&Qs&&(D=tf()):(Vr=u,lu="value"in Vr?Vr.value:Vr.textContent,Qs=!0)),k=co(h,C),0<k.length&&(C=new Qh(C,e,null,r,u),d.push({event:C,listeners:k}),D?C.data=D:(D=nf(r),D!==null&&(C.data=D)))),(D=ab?lb(e,r):ob(e,r))&&(h=co(h,"onBeforeInput"),0<h.length&&(u=new Qh("onBeforeInput","beforeinput",null,r,u),d.push({event:u,listeners:h}),u.data=D))}xf(d,t)})}function Sa(e,t,r){return{instance:e,listener:t,currentTarget:r}}function co(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,l=a.stateNode;a.tag===5&&l!==null&&(a=l,l=va(e,r),l!=null&&n.unshift(Sa(e,l,a)),l=va(e,t),l!=null&&n.push(Sa(e,l,a))),e=e.return}return n}function Ms(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function o0(e,t,r,n,a){for(var l=t._reactName,o=[];r!==null&&r!==n;){var i=r,c=i.alternate,h=i.stateNode;if(c!==null&&c===n)break;i.tag===5&&h!==null&&(i=h,a?(c=va(r,l),c!=null&&o.unshift(Sa(r,c,i))):a||(c=va(r,l),c!=null&&o.push(Sa(r,c,i)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var wb=/\r\n?/g,jb=/\u0000|\uFFFD/g;function i0(e){return(typeof e=="string"?e:""+e).replace(wb,`
`).replace(jb,"")}function Sl(e,t,r){if(t=i0(t),i0(e)!==t&&r)throw Error(V(425))}function uo(){}var Jc=null,Xc=null;function Zc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ed=typeof setTimeout=="function"?setTimeout:void 0,Nb=typeof clearTimeout=="function"?clearTimeout:void 0,c0=typeof Promise=="function"?Promise:void 0,_b=typeof queueMicrotask=="function"?queueMicrotask:typeof c0<"u"?function(e){return c0.resolve(null).then(e).catch(Sb)}:ed;function Sb(e){setTimeout(function(){throw e})}function Ji(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),wa(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);wa(t)}function Yr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function d0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Dn=Math.random().toString(36).slice(2),pr="__reactFiber$"+Dn,ka="__reactProps$"+Dn,Dr="__reactContainer$"+Dn,td="__reactEvents$"+Dn,kb="__reactListeners$"+Dn,Cb="__reactHandles$"+Dn;function ws(e){var t=e[pr];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Dr]||r[pr]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=d0(e);e!==null;){if(r=e[pr])return r;e=d0(e)}return t}e=r,r=e.parentNode}return null}function Ha(e){return e=e[pr]||e[Dr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Xs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(V(33))}function Ko(e){return e[ka]||null}var rd=[],Zs=-1;function cs(e){return{current:e}}function De(e){0>Zs||(e.current=rd[Zs],rd[Zs]=null,Zs--)}function ke(e,t){Zs++,rd[Zs]=e.current,e.current=t}var ls={},it=cs(ls),wt=cs(!1),ks=ls;function pn(e,t){var r=e.type.contextTypes;if(!r)return ls;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},l;for(l in r)a[l]=t[l];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function jt(e){return e=e.childContextTypes,e!=null}function ho(){De(wt),De(it)}function u0(e,t,r){if(it.current!==ls)throw Error(V(168));ke(it,t),ke(wt,r)}function yf(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(V(108,uy(e)||"Unknown",a));return Re({},r,n)}function mo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ls,ks=it.current,ke(it,e),ke(wt,wt.current),!0}function h0(e,t,r){var n=e.stateNode;if(!n)throw Error(V(169));r?(e=yf(e,t,ks),n.__reactInternalMemoizedMergedChildContext=e,De(wt),De(it),ke(it,e)):De(wt),ke(wt,r)}var Nr=null,Qo=!1,Xi=!1;function bf(e){Nr===null?Nr=[e]:Nr.push(e)}function Db(e){Qo=!0,bf(e)}function ds(){if(!Xi&&Nr!==null){Xi=!0;var e=0,t=be;try{var r=Nr;for(be=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Nr=null,Qo=!1}catch(a){throw Nr!==null&&(Nr=Nr.slice(e+1)),Vp(ru,ds),a}finally{be=t,Xi=!1}}return null}var en=[],tn=0,po=null,fo=0,Ut=[],Bt=0,Cs=null,_r=1,Sr="";function gs(e,t){en[tn++]=fo,en[tn++]=po,po=e,fo=t}function wf(e,t,r){Ut[Bt++]=_r,Ut[Bt++]=Sr,Ut[Bt++]=Cs,Cs=e;var n=_r;e=Sr;var a=32-nr(n)-1;n&=~(1<<a),r+=1;var l=32-nr(t)+a;if(30<l){var o=a-a%5;l=(n&(1<<o)-1).toString(32),n>>=o,a-=o,_r=1<<32-nr(t)+a|r<<a|n,Sr=l+e}else _r=1<<l|r<<a|n,Sr=e}function uu(e){e.return!==null&&(gs(e,1),wf(e,1,0))}function hu(e){for(;e===po;)po=en[--tn],en[tn]=null,fo=en[--tn],en[tn]=null;for(;e===Cs;)Cs=Ut[--Bt],Ut[Bt]=null,Sr=Ut[--Bt],Ut[Bt]=null,_r=Ut[--Bt],Ut[Bt]=null}var It=null,Et=null,Ee=!1,rr=null;function jf(e,t){var r=zt(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function m0(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,It=e,Et=Yr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,It=e,Et=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Cs!==null?{id:_r,overflow:Sr}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=zt(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,It=e,Et=null,!0):!1;default:return!1}}function sd(e){return(e.mode&1)!==0&&(e.flags&128)===0}function nd(e){if(Ee){var t=Et;if(t){var r=t;if(!m0(e,t)){if(sd(e))throw Error(V(418));t=Yr(r.nextSibling);var n=It;t&&m0(e,t)?jf(n,r):(e.flags=e.flags&-4097|2,Ee=!1,It=e)}}else{if(sd(e))throw Error(V(418));e.flags=e.flags&-4097|2,Ee=!1,It=e}}}function p0(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;It=e}function kl(e){if(e!==It)return!1;if(!Ee)return p0(e),Ee=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Zc(e.type,e.memoizedProps)),t&&(t=Et)){if(sd(e))throw Nf(),Error(V(418));for(;t;)jf(e,t),t=Yr(t.nextSibling)}if(p0(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(V(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Et=Yr(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Et=null}}else Et=It?Yr(e.stateNode.nextSibling):null;return!0}function Nf(){for(var e=Et;e;)e=Yr(e.nextSibling)}function fn(){Et=It=null,Ee=!1}function mu(e){rr===null?rr=[e]:rr.push(e)}var Eb=Tr.ReactCurrentBatchConfig;function Wn(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(V(309));var n=r.stateNode}if(!n)throw Error(V(147,e));var a=n,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(o){var i=a.refs;o===null?delete i[l]:i[l]=o},t._stringRef=l,t)}if(typeof e!="string")throw Error(V(284));if(!r._owner)throw Error(V(290,e))}return e}function Cl(e,t){throw e=Object.prototype.toString.call(t),Error(V(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function f0(e){var t=e._init;return t(e._payload)}function _f(e){function t(g,v){if(e){var y=g.deletions;y===null?(g.deletions=[v],g.flags|=16):y.push(v)}}function r(g,v){if(!e)return null;for(;v!==null;)t(g,v),v=v.sibling;return null}function n(g,v){for(g=new Map;v!==null;)v.key!==null?g.set(v.key,v):g.set(v.index,v),v=v.sibling;return g}function a(g,v){return g=es(g,v),g.index=0,g.sibling=null,g}function l(g,v,y){return g.index=y,e?(y=g.alternate,y!==null?(y=y.index,y<v?(g.flags|=2,v):y):(g.flags|=2,v)):(g.flags|=1048576,v)}function o(g){return e&&g.alternate===null&&(g.flags|=2),g}function i(g,v,y,w){return v===null||v.tag!==6?(v=ac(y,g.mode,w),v.return=g,v):(v=a(v,y),v.return=g,v)}function c(g,v,y,w){var N=y.type;return N===Ks?u(g,v,y.props.children,w,y.key):v!==null&&(v.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Mr&&f0(N)===v.type)?(w=a(v,y.props),w.ref=Wn(g,v,y),w.return=g,w):(w=eo(y.type,y.key,y.props,null,g.mode,w),w.ref=Wn(g,v,y),w.return=g,w)}function h(g,v,y,w){return v===null||v.tag!==4||v.stateNode.containerInfo!==y.containerInfo||v.stateNode.implementation!==y.implementation?(v=lc(y,g.mode,w),v.return=g,v):(v=a(v,y.children||[]),v.return=g,v)}function u(g,v,y,w,N){return v===null||v.tag!==7?(v=Ss(y,g.mode,w,N),v.return=g,v):(v=a(v,y),v.return=g,v)}function d(g,v,y){if(typeof v=="string"&&v!==""||typeof v=="number")return v=ac(""+v,g.mode,y),v.return=g,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case gl:return y=eo(v.type,v.key,v.props,null,g.mode,y),y.ref=Wn(g,null,v),y.return=g,y;case Hs:return v=lc(v,g.mode,y),v.return=g,v;case Mr:var w=v._init;return d(g,w(v._payload),y)}if(Jn(v)||Mn(v))return v=Ss(v,g.mode,y,null),v.return=g,v;Cl(g,v)}return null}function m(g,v,y,w){var N=v!==null?v.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return N!==null?null:i(g,v,""+y,w);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case gl:return y.key===N?c(g,v,y,w):null;case Hs:return y.key===N?h(g,v,y,w):null;case Mr:return N=y._init,m(g,v,N(y._payload),w)}if(Jn(y)||Mn(y))return N!==null?null:u(g,v,y,w,null);Cl(g,y)}return null}function p(g,v,y,w,N){if(typeof w=="string"&&w!==""||typeof w=="number")return g=g.get(y)||null,i(v,g,""+w,N);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case gl:return g=g.get(w.key===null?y:w.key)||null,c(v,g,w,N);case Hs:return g=g.get(w.key===null?y:w.key)||null,h(v,g,w,N);case Mr:var k=w._init;return p(g,v,y,k(w._payload),N)}if(Jn(w)||Mn(w))return g=g.get(y)||null,u(v,g,w,N,null);Cl(v,w)}return null}function f(g,v,y,w){for(var N=null,k=null,D=v,C=v=0,_=null;D!==null&&C<y.length;C++){D.index>C?(_=D,D=null):_=D.sibling;var S=m(g,D,y[C],w);if(S===null){D===null&&(D=_);break}e&&D&&S.alternate===null&&t(g,D),v=l(S,v,C),k===null?N=S:k.sibling=S,k=S,D=_}if(C===y.length)return r(g,D),Ee&&gs(g,C),N;if(D===null){for(;C<y.length;C++)D=d(g,y[C],w),D!==null&&(v=l(D,v,C),k===null?N=D:k.sibling=D,k=D);return Ee&&gs(g,C),N}for(D=n(g,D);C<y.length;C++)_=p(D,g,C,y[C],w),_!==null&&(e&&_.alternate!==null&&D.delete(_.key===null?C:_.key),v=l(_,v,C),k===null?N=_:k.sibling=_,k=_);return e&&D.forEach(function(O){return t(g,O)}),Ee&&gs(g,C),N}function x(g,v,y,w){var N=Mn(y);if(typeof N!="function")throw Error(V(150));if(y=N.call(y),y==null)throw Error(V(151));for(var k=N=null,D=v,C=v=0,_=null,S=y.next();D!==null&&!S.done;C++,S=y.next()){D.index>C?(_=D,D=null):_=D.sibling;var O=m(g,D,S.value,w);if(O===null){D===null&&(D=_);break}e&&D&&O.alternate===null&&t(g,D),v=l(O,v,C),k===null?N=O:k.sibling=O,k=O,D=_}if(S.done)return r(g,D),Ee&&gs(g,C),N;if(D===null){for(;!S.done;C++,S=y.next())S=d(g,S.value,w),S!==null&&(v=l(S,v,C),k===null?N=S:k.sibling=S,k=S);return Ee&&gs(g,C),N}for(D=n(g,D);!S.done;C++,S=y.next())S=p(D,g,C,S.value,w),S!==null&&(e&&S.alternate!==null&&D.delete(S.key===null?C:S.key),v=l(S,v,C),k===null?N=S:k.sibling=S,k=S);return e&&D.forEach(function(E){return t(g,E)}),Ee&&gs(g,C),N}function b(g,v,y,w){if(typeof y=="object"&&y!==null&&y.type===Ks&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case gl:e:{for(var N=y.key,k=v;k!==null;){if(k.key===N){if(N=y.type,N===Ks){if(k.tag===7){r(g,k.sibling),v=a(k,y.props.children),v.return=g,g=v;break e}}else if(k.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Mr&&f0(N)===k.type){r(g,k.sibling),v=a(k,y.props),v.ref=Wn(g,k,y),v.return=g,g=v;break e}r(g,k);break}else t(g,k);k=k.sibling}y.type===Ks?(v=Ss(y.props.children,g.mode,w,y.key),v.return=g,g=v):(w=eo(y.type,y.key,y.props,null,g.mode,w),w.ref=Wn(g,v,y),w.return=g,g=w)}return o(g);case Hs:e:{for(k=y.key;v!==null;){if(v.key===k)if(v.tag===4&&v.stateNode.containerInfo===y.containerInfo&&v.stateNode.implementation===y.implementation){r(g,v.sibling),v=a(v,y.children||[]),v.return=g,g=v;break e}else{r(g,v);break}else t(g,v);v=v.sibling}v=lc(y,g.mode,w),v.return=g,g=v}return o(g);case Mr:return k=y._init,b(g,v,k(y._payload),w)}if(Jn(y))return f(g,v,y,w);if(Mn(y))return x(g,v,y,w);Cl(g,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,v!==null&&v.tag===6?(r(g,v.sibling),v=a(v,y),v.return=g,g=v):(r(g,v),v=ac(y,g.mode,w),v.return=g,g=v),o(g)):r(g,v)}return b}var gn=_f(!0),Sf=_f(!1),go=cs(null),xo=null,rn=null,pu=null;function fu(){pu=rn=xo=null}function gu(e){var t=go.current;De(go),e._currentValue=t}function ad(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function dn(e,t){xo=e,pu=rn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(yt=!0),e.firstContext=null)}function Ht(e){var t=e._currentValue;if(pu!==e)if(e={context:e,memoizedValue:t,next:null},rn===null){if(xo===null)throw Error(V(308));rn=e,xo.dependencies={lanes:0,firstContext:e}}else rn=rn.next=e;return t}var js=null;function xu(e){js===null?js=[e]:js.push(e)}function kf(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,xu(t)):(r.next=a.next,a.next=r),t.interleaved=r,Er(e,n)}function Er(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Fr=!1;function vu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Cf(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function kr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Jr(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,xe&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,Er(e,r)}return a=n.interleaved,a===null?(t.next=t,xu(n)):(t.next=a.next,a.next=t),n.interleaved=t,Er(e,r)}function Kl(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,su(e,r)}}function g0(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,l=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};l===null?a=l=o:l=l.next=o,r=r.next}while(r!==null);l===null?a=l=t:l=l.next=t}else a=l=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:l,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function vo(e,t,r,n){var a=e.updateQueue;Fr=!1;var l=a.firstBaseUpdate,o=a.lastBaseUpdate,i=a.shared.pending;if(i!==null){a.shared.pending=null;var c=i,h=c.next;c.next=null,o===null?l=h:o.next=h,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,i=u.lastBaseUpdate,i!==o&&(i===null?u.firstBaseUpdate=h:i.next=h,u.lastBaseUpdate=c))}if(l!==null){var d=a.baseState;o=0,u=h=c=null,i=l;do{var m=i.lane,p=i.eventTime;if((n&m)===m){u!==null&&(u=u.next={eventTime:p,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var f=e,x=i;switch(m=t,p=r,x.tag){case 1:if(f=x.payload,typeof f=="function"){d=f.call(p,d,m);break e}d=f;break e;case 3:f.flags=f.flags&-65537|128;case 0:if(f=x.payload,m=typeof f=="function"?f.call(p,d,m):f,m==null)break e;d=Re({},d,m);break e;case 2:Fr=!0}}i.callback!==null&&i.lane!==0&&(e.flags|=64,m=a.effects,m===null?a.effects=[i]:m.push(i))}else p={eventTime:p,lane:m,tag:i.tag,payload:i.payload,callback:i.callback,next:null},u===null?(h=u=p,c=d):u=u.next=p,o|=m;if(i=i.next,i===null){if(i=a.shared.pending,i===null)break;m=i,i=m.next,m.next=null,a.lastBaseUpdate=m,a.shared.pending=null}}while(!0);if(u===null&&(c=d),a.baseState=c,a.firstBaseUpdate=h,a.lastBaseUpdate=u,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else l===null&&(a.shared.lanes=0);Es|=o,e.lanes=o,e.memoizedState=d}}function x0(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(V(191,a));a.call(n)}}}var Ka={},gr=cs(Ka),Ca=cs(Ka),Da=cs(Ka);function Ns(e){if(e===Ka)throw Error(V(174));return e}function yu(e,t){switch(ke(Da,t),ke(Ca,e),ke(gr,Ka),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Fc(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Fc(t,e)}De(gr),ke(gr,t)}function xn(){De(gr),De(Ca),De(Da)}function Df(e){Ns(Da.current);var t=Ns(gr.current),r=Fc(t,e.type);t!==r&&(ke(Ca,e),ke(gr,r))}function bu(e){Ca.current===e&&(De(gr),De(Ca))}var Pe=cs(0);function yo(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Zi=[];function wu(){for(var e=0;e<Zi.length;e++)Zi[e]._workInProgressVersionPrimary=null;Zi.length=0}var Ql=Tr.ReactCurrentDispatcher,ec=Tr.ReactCurrentBatchConfig,Ds=0,Te=null,ze=null,Ge=null,bo=!1,la=!1,Ea=0,Pb=0;function nt(){throw Error(V(321))}function ju(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!or(e[r],t[r]))return!1;return!0}function Nu(e,t,r,n,a,l){if(Ds=l,Te=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ql.current=e===null||e.memoizedState===null?Ob:Lb,e=r(n,a),la){l=0;do{if(la=!1,Ea=0,25<=l)throw Error(V(301));l+=1,Ge=ze=null,t.updateQueue=null,Ql.current=Ab,e=r(n,a)}while(la)}if(Ql.current=wo,t=ze!==null&&ze.next!==null,Ds=0,Ge=ze=Te=null,bo=!1,t)throw Error(V(300));return e}function _u(){var e=Ea!==0;return Ea=0,e}function mr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ge===null?Te.memoizedState=Ge=e:Ge=Ge.next=e,Ge}function Kt(){if(ze===null){var e=Te.alternate;e=e!==null?e.memoizedState:null}else e=ze.next;var t=Ge===null?Te.memoizedState:Ge.next;if(t!==null)Ge=t,ze=e;else{if(e===null)throw Error(V(310));ze=e,e={memoizedState:ze.memoizedState,baseState:ze.baseState,baseQueue:ze.baseQueue,queue:ze.queue,next:null},Ge===null?Te.memoizedState=Ge=e:Ge=Ge.next=e}return Ge}function Pa(e,t){return typeof t=="function"?t(e):t}function tc(e){var t=Kt(),r=t.queue;if(r===null)throw Error(V(311));r.lastRenderedReducer=e;var n=ze,a=n.baseQueue,l=r.pending;if(l!==null){if(a!==null){var o=a.next;a.next=l.next,l.next=o}n.baseQueue=a=l,r.pending=null}if(a!==null){l=a.next,n=n.baseState;var i=o=null,c=null,h=l;do{var u=h.lane;if((Ds&u)===u)c!==null&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),n=h.hasEagerState?h.eagerState:e(n,h.action);else{var d={lane:u,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};c===null?(i=c=d,o=n):c=c.next=d,Te.lanes|=u,Es|=u}h=h.next}while(h!==null&&h!==l);c===null?o=n:c.next=i,or(n,t.memoizedState)||(yt=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do l=a.lane,Te.lanes|=l,Es|=l,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function rc(e){var t=Kt(),r=t.queue;if(r===null)throw Error(V(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,l=t.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do l=e(l,o.action),o=o.next;while(o!==a);or(l,t.memoizedState)||(yt=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),r.lastRenderedState=l}return[l,n]}function Ef(){}function Pf(e,t){var r=Te,n=Kt(),a=t(),l=!or(n.memoizedState,a);if(l&&(n.memoizedState=a,yt=!0),n=n.queue,Su(Rf.bind(null,r,n,e),[e]),n.getSnapshot!==t||l||Ge!==null&&Ge.memoizedState.tag&1){if(r.flags|=2048,Ia(9,Tf.bind(null,r,n,a,t),void 0,null),He===null)throw Error(V(349));Ds&30||If(r,t,a)}return a}function If(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Te.updateQueue,t===null?(t={lastEffect:null,stores:null},Te.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Tf(e,t,r,n){t.value=r,t.getSnapshot=n,Of(t)&&Lf(e)}function Rf(e,t,r){return r(function(){Of(t)&&Lf(e)})}function Of(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!or(e,r)}catch{return!0}}function Lf(e){var t=Er(e,1);t!==null&&ar(t,e,1,-1)}function v0(e){var t=mr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Pa,lastRenderedState:e},t.queue=e,e=e.dispatch=Rb.bind(null,Te,e),[t.memoizedState,e]}function Ia(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Te.updateQueue,t===null?(t={lastEffect:null,stores:null},Te.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Af(){return Kt().memoizedState}function Yl(e,t,r,n){var a=mr();Te.flags|=e,a.memoizedState=Ia(1|t,r,void 0,n===void 0?null:n)}function Yo(e,t,r,n){var a=Kt();n=n===void 0?null:n;var l=void 0;if(ze!==null){var o=ze.memoizedState;if(l=o.destroy,n!==null&&ju(n,o.deps)){a.memoizedState=Ia(t,r,l,n);return}}Te.flags|=e,a.memoizedState=Ia(1|t,r,l,n)}function y0(e,t){return Yl(8390656,8,e,t)}function Su(e,t){return Yo(2048,8,e,t)}function $f(e,t){return Yo(4,2,e,t)}function Mf(e,t){return Yo(4,4,e,t)}function Ff(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Uf(e,t,r){return r=r!=null?r.concat([e]):null,Yo(4,4,Ff.bind(null,t,e),r)}function ku(){}function Bf(e,t){var r=Kt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&ju(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function zf(e,t){var r=Kt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&ju(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Wf(e,t,r){return Ds&21?(or(r,t)||(r=Hp(),Te.lanes|=r,Es|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,yt=!0),e.memoizedState=r)}function Ib(e,t){var r=be;be=r!==0&&4>r?r:4,e(!0);var n=ec.transition;ec.transition={};try{e(!1),t()}finally{be=r,ec.transition=n}}function Vf(){return Kt().memoizedState}function Tb(e,t,r){var n=Zr(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},qf(e))Gf(t,r);else if(r=kf(e,t,r,n),r!==null){var a=ht();ar(r,e,n,a),Hf(r,t,n)}}function Rb(e,t,r){var n=Zr(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(qf(e))Gf(t,a);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var o=t.lastRenderedState,i=l(o,r);if(a.hasEagerState=!0,a.eagerState=i,or(i,o)){var c=t.interleaved;c===null?(a.next=a,xu(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=kf(e,t,a,n),r!==null&&(a=ht(),ar(r,e,n,a),Hf(r,t,n))}}function qf(e){var t=e.alternate;return e===Te||t!==null&&t===Te}function Gf(e,t){la=bo=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Hf(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,su(e,r)}}var wo={readContext:Ht,useCallback:nt,useContext:nt,useEffect:nt,useImperativeHandle:nt,useInsertionEffect:nt,useLayoutEffect:nt,useMemo:nt,useReducer:nt,useRef:nt,useState:nt,useDebugValue:nt,useDeferredValue:nt,useTransition:nt,useMutableSource:nt,useSyncExternalStore:nt,useId:nt,unstable_isNewReconciler:!1},Ob={readContext:Ht,useCallback:function(e,t){return mr().memoizedState=[e,t===void 0?null:t],e},useContext:Ht,useEffect:y0,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Yl(4194308,4,Ff.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Yl(4194308,4,e,t)},useInsertionEffect:function(e,t){return Yl(4,2,e,t)},useMemo:function(e,t){var r=mr();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=mr();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Tb.bind(null,Te,e),[n.memoizedState,e]},useRef:function(e){var t=mr();return e={current:e},t.memoizedState=e},useState:v0,useDebugValue:ku,useDeferredValue:function(e){return mr().memoizedState=e},useTransition:function(){var e=v0(!1),t=e[0];return e=Ib.bind(null,e[1]),mr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Te,a=mr();if(Ee){if(r===void 0)throw Error(V(407));r=r()}else{if(r=t(),He===null)throw Error(V(349));Ds&30||If(n,t,r)}a.memoizedState=r;var l={value:r,getSnapshot:t};return a.queue=l,y0(Rf.bind(null,n,l,e),[e]),n.flags|=2048,Ia(9,Tf.bind(null,n,l,r,t),void 0,null),r},useId:function(){var e=mr(),t=He.identifierPrefix;if(Ee){var r=Sr,n=_r;r=(n&~(1<<32-nr(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Ea++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Pb++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Lb={readContext:Ht,useCallback:Bf,useContext:Ht,useEffect:Su,useImperativeHandle:Uf,useInsertionEffect:$f,useLayoutEffect:Mf,useMemo:zf,useReducer:tc,useRef:Af,useState:function(){return tc(Pa)},useDebugValue:ku,useDeferredValue:function(e){var t=Kt();return Wf(t,ze.memoizedState,e)},useTransition:function(){var e=tc(Pa)[0],t=Kt().memoizedState;return[e,t]},useMutableSource:Ef,useSyncExternalStore:Pf,useId:Vf,unstable_isNewReconciler:!1},Ab={readContext:Ht,useCallback:Bf,useContext:Ht,useEffect:Su,useImperativeHandle:Uf,useInsertionEffect:$f,useLayoutEffect:Mf,useMemo:zf,useReducer:rc,useRef:Af,useState:function(){return rc(Pa)},useDebugValue:ku,useDeferredValue:function(e){var t=Kt();return ze===null?t.memoizedState=e:Wf(t,ze.memoizedState,e)},useTransition:function(){var e=rc(Pa)[0],t=Kt().memoizedState;return[e,t]},useMutableSource:Ef,useSyncExternalStore:Pf,useId:Vf,unstable_isNewReconciler:!1};function Zt(e,t){if(e&&e.defaultProps){t=Re({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function ld(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Re({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Jo={isMounted:function(e){return(e=e._reactInternals)?Os(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=ht(),a=Zr(e),l=kr(n,a);l.payload=t,r!=null&&(l.callback=r),t=Jr(e,l,a),t!==null&&(ar(t,e,a,n),Kl(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=ht(),a=Zr(e),l=kr(n,a);l.tag=1,l.payload=t,r!=null&&(l.callback=r),t=Jr(e,l,a),t!==null&&(ar(t,e,a,n),Kl(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ht(),n=Zr(e),a=kr(r,n);a.tag=2,t!=null&&(a.callback=t),t=Jr(e,a,n),t!==null&&(ar(t,e,n,r),Kl(t,e,n))}};function b0(e,t,r,n,a,l,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,l,o):t.prototype&&t.prototype.isPureReactComponent?!Na(r,n)||!Na(a,l):!0}function Kf(e,t,r){var n=!1,a=ls,l=t.contextType;return typeof l=="object"&&l!==null?l=Ht(l):(a=jt(t)?ks:it.current,n=t.contextTypes,l=(n=n!=null)?pn(e,a):ls),t=new t(r,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Jo,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=l),t}function w0(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Jo.enqueueReplaceState(t,t.state,null)}function od(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},vu(e);var l=t.contextType;typeof l=="object"&&l!==null?a.context=Ht(l):(l=jt(t)?ks:it.current,a.context=pn(e,l)),a.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(ld(e,t,l,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Jo.enqueueReplaceState(a,a.state,null),vo(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function vn(e,t){try{var r="",n=t;do r+=dy(n),n=n.return;while(n);var a=r}catch(l){a=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:a,digest:null}}function sc(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function id(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var $b=typeof WeakMap=="function"?WeakMap:Map;function Qf(e,t,r){r=kr(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){No||(No=!0,vd=n),id(e,t)},r}function Yf(e,t,r){r=kr(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){id(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(r.callback=function(){id(e,t),typeof n!="function"&&(Xr===null?Xr=new Set([this]):Xr.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function j0(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new $b;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=Jb.bind(null,e,t,r),t.then(e,e))}function N0(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function _0(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=kr(-1,1),t.tag=2,Jr(r,t,1))),r.lanes|=1),e)}var Mb=Tr.ReactCurrentOwner,yt=!1;function ut(e,t,r,n){t.child=e===null?Sf(t,null,r,n):gn(t,e.child,r,n)}function S0(e,t,r,n,a){r=r.render;var l=t.ref;return dn(t,a),n=Nu(e,t,r,n,l,a),r=_u(),e!==null&&!yt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Pr(e,t,a)):(Ee&&r&&uu(t),t.flags|=1,ut(e,t,n,a),t.child)}function k0(e,t,r,n,a){if(e===null){var l=r.type;return typeof l=="function"&&!Ou(l)&&l.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=l,Jf(e,t,l,n,a)):(e=eo(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&a)){var o=l.memoizedProps;if(r=r.compare,r=r!==null?r:Na,r(o,n)&&e.ref===t.ref)return Pr(e,t,a)}return t.flags|=1,e=es(l,n),e.ref=t.ref,e.return=t,t.child=e}function Jf(e,t,r,n,a){if(e!==null){var l=e.memoizedProps;if(Na(l,n)&&e.ref===t.ref)if(yt=!1,t.pendingProps=n=l,(e.lanes&a)!==0)e.flags&131072&&(yt=!0);else return t.lanes=e.lanes,Pr(e,t,a)}return cd(e,t,r,n,a)}function Xf(e,t,r){var n=t.pendingProps,a=n.children,l=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ke(nn,Ct),Ct|=r;else{if(!(r&1073741824))return e=l!==null?l.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ke(nn,Ct),Ct|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=l!==null?l.baseLanes:r,ke(nn,Ct),Ct|=n}else l!==null?(n=l.baseLanes|r,t.memoizedState=null):n=r,ke(nn,Ct),Ct|=n;return ut(e,t,a,r),t.child}function Zf(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function cd(e,t,r,n,a){var l=jt(r)?ks:it.current;return l=pn(t,l),dn(t,a),r=Nu(e,t,r,n,l,a),n=_u(),e!==null&&!yt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Pr(e,t,a)):(Ee&&n&&uu(t),t.flags|=1,ut(e,t,r,a),t.child)}function C0(e,t,r,n,a){if(jt(r)){var l=!0;mo(t)}else l=!1;if(dn(t,a),t.stateNode===null)Jl(e,t),Kf(t,r,n),od(t,r,n,a),n=!0;else if(e===null){var o=t.stateNode,i=t.memoizedProps;o.props=i;var c=o.context,h=r.contextType;typeof h=="object"&&h!==null?h=Ht(h):(h=jt(r)?ks:it.current,h=pn(t,h));var u=r.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(i!==n||c!==h)&&w0(t,o,n,h),Fr=!1;var m=t.memoizedState;o.state=m,vo(t,n,o,a),c=t.memoizedState,i!==n||m!==c||wt.current||Fr?(typeof u=="function"&&(ld(t,r,u,n),c=t.memoizedState),(i=Fr||b0(t,r,i,n,m,c,h))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=h,n=i):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,Cf(e,t),i=t.memoizedProps,h=t.type===t.elementType?i:Zt(t.type,i),o.props=h,d=t.pendingProps,m=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=Ht(c):(c=jt(r)?ks:it.current,c=pn(t,c));var p=r.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(i!==d||m!==c)&&w0(t,o,n,c),Fr=!1,m=t.memoizedState,o.state=m,vo(t,n,o,a);var f=t.memoizedState;i!==d||m!==f||wt.current||Fr?(typeof p=="function"&&(ld(t,r,p,n),f=t.memoizedState),(h=Fr||b0(t,r,h,n,m,f,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,f,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,f,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=f),o.props=n,o.state=f,o.context=c,n=h):(typeof o.componentDidUpdate!="function"||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),n=!1)}return dd(e,t,r,n,l,a)}function dd(e,t,r,n,a,l){Zf(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return a&&h0(t,r,!1),Pr(e,t,l);n=t.stateNode,Mb.current=t;var i=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=gn(t,e.child,null,l),t.child=gn(t,null,i,l)):ut(e,t,i,l),t.memoizedState=n.state,a&&h0(t,r,!0),t.child}function eg(e){var t=e.stateNode;t.pendingContext?u0(e,t.pendingContext,t.pendingContext!==t.context):t.context&&u0(e,t.context,!1),yu(e,t.containerInfo)}function D0(e,t,r,n,a){return fn(),mu(a),t.flags|=256,ut(e,t,r,n),t.child}var ud={dehydrated:null,treeContext:null,retryLane:0};function hd(e){return{baseLanes:e,cachePool:null,transitions:null}}function tg(e,t,r){var n=t.pendingProps,a=Pe.current,l=!1,o=(t.flags&128)!==0,i;if((i=o)||(i=e!==null&&e.memoizedState===null?!1:(a&2)!==0),i?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),ke(Pe,a&1),e===null)return nd(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,l?(n=t.mode,l=t.child,o={mode:"hidden",children:o},!(n&1)&&l!==null?(l.childLanes=0,l.pendingProps=o):l=ei(o,n,0,null),e=Ss(e,n,r,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=hd(r),t.memoizedState=ud,e):Cu(t,o));if(a=e.memoizedState,a!==null&&(i=a.dehydrated,i!==null))return Fb(e,t,o,n,i,a,r);if(l){l=n.fallback,o=t.mode,a=e.child,i=a.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=es(a,c),n.subtreeFlags=a.subtreeFlags&14680064),i!==null?l=es(i,l):(l=Ss(l,o,r,null),l.flags|=2),l.return=t,n.return=t,n.sibling=l,t.child=n,n=l,l=t.child,o=e.child.memoizedState,o=o===null?hd(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},l.memoizedState=o,l.childLanes=e.childLanes&~r,t.memoizedState=ud,n}return l=e.child,e=l.sibling,n=es(l,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Cu(e,t){return t=ei({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Dl(e,t,r,n){return n!==null&&mu(n),gn(t,e.child,null,r),e=Cu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Fb(e,t,r,n,a,l,o){if(r)return t.flags&256?(t.flags&=-257,n=sc(Error(V(422))),Dl(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=n.fallback,a=t.mode,n=ei({mode:"visible",children:n.children},a,0,null),l=Ss(l,a,o,null),l.flags|=2,n.return=t,l.return=t,n.sibling=l,t.child=n,t.mode&1&&gn(t,e.child,null,o),t.child.memoizedState=hd(o),t.memoizedState=ud,l);if(!(t.mode&1))return Dl(e,t,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var i=n.dgst;return n=i,l=Error(V(419)),n=sc(l,n,void 0),Dl(e,t,o,n)}if(i=(o&e.childLanes)!==0,yt||i){if(n=He,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==l.retryLane&&(l.retryLane=a,Er(e,a),ar(n,e,a,-1))}return Ru(),n=sc(Error(V(421))),Dl(e,t,o,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=Xb.bind(null,e),a._reactRetry=t,null):(e=l.treeContext,Et=Yr(a.nextSibling),It=t,Ee=!0,rr=null,e!==null&&(Ut[Bt++]=_r,Ut[Bt++]=Sr,Ut[Bt++]=Cs,_r=e.id,Sr=e.overflow,Cs=t),t=Cu(t,n.children),t.flags|=4096,t)}function E0(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),ad(e.return,t,r)}function nc(e,t,r,n,a){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=n,l.tail=r,l.tailMode=a)}function rg(e,t,r){var n=t.pendingProps,a=n.revealOrder,l=n.tail;if(ut(e,t,n.children,r),n=Pe.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&E0(e,r,t);else if(e.tag===19)E0(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(ke(Pe,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&yo(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),nc(t,!1,a,r,l);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&yo(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}nc(t,!0,r,null,l);break;case"together":nc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Jl(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Pr(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Es|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(V(153));if(t.child!==null){for(e=t.child,r=es(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=es(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Ub(e,t,r){switch(t.tag){case 3:eg(t),fn();break;case 5:Df(t);break;case 1:jt(t.type)&&mo(t);break;case 4:yu(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;ke(go,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(ke(Pe,Pe.current&1),t.flags|=128,null):r&t.child.childLanes?tg(e,t,r):(ke(Pe,Pe.current&1),e=Pr(e,t,r),e!==null?e.sibling:null);ke(Pe,Pe.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return rg(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),ke(Pe,Pe.current),n)break;return null;case 22:case 23:return t.lanes=0,Xf(e,t,r)}return Pr(e,t,r)}var sg,md,ng,ag;sg=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};md=function(){};ng=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,Ns(gr.current);var l=null;switch(r){case"input":a=Lc(e,a),n=Lc(e,n),l=[];break;case"select":a=Re({},a,{value:void 0}),n=Re({},n,{value:void 0}),l=[];break;case"textarea":a=Mc(e,a),n=Mc(e,n),l=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=uo)}Uc(r,n);var o;r=null;for(h in a)if(!n.hasOwnProperty(h)&&a.hasOwnProperty(h)&&a[h]!=null)if(h==="style"){var i=a[h];for(o in i)i.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(ga.hasOwnProperty(h)?l||(l=[]):(l=l||[]).push(h,null));for(h in n){var c=n[h];if(i=a!=null?a[h]:void 0,n.hasOwnProperty(h)&&c!==i&&(c!=null||i!=null))if(h==="style")if(i){for(o in i)!i.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&i[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(l||(l=[]),l.push(h,r)),r=c;else h==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,i=i?i.__html:void 0,c!=null&&i!==c&&(l=l||[]).push(h,c)):h==="children"?typeof c!="string"&&typeof c!="number"||(l=l||[]).push(h,""+c):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(ga.hasOwnProperty(h)?(c!=null&&h==="onScroll"&&Ce("scroll",e),l||i===c||(l=[])):(l=l||[]).push(h,c))}r&&(l=l||[]).push("style",r);var h=l;(t.updateQueue=h)&&(t.flags|=4)}};ag=function(e,t,r,n){r!==n&&(t.flags|=4)};function Vn(e,t){if(!Ee)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function at(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Bb(e,t,r){var n=t.pendingProps;switch(hu(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return at(t),null;case 1:return jt(t.type)&&ho(),at(t),null;case 3:return n=t.stateNode,xn(),De(wt),De(it),wu(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(kl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,rr!==null&&(wd(rr),rr=null))),md(e,t),at(t),null;case 5:bu(t);var a=Ns(Da.current);if(r=t.type,e!==null&&t.stateNode!=null)ng(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(V(166));return at(t),null}if(e=Ns(gr.current),kl(t)){n=t.stateNode,r=t.type;var l=t.memoizedProps;switch(n[pr]=t,n[ka]=l,e=(t.mode&1)!==0,r){case"dialog":Ce("cancel",n),Ce("close",n);break;case"iframe":case"object":case"embed":Ce("load",n);break;case"video":case"audio":for(a=0;a<Zn.length;a++)Ce(Zn[a],n);break;case"source":Ce("error",n);break;case"img":case"image":case"link":Ce("error",n),Ce("load",n);break;case"details":Ce("toggle",n);break;case"input":Mh(n,l),Ce("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!l.multiple},Ce("invalid",n);break;case"textarea":Uh(n,l),Ce("invalid",n)}Uc(r,l),a=null;for(var o in l)if(l.hasOwnProperty(o)){var i=l[o];o==="children"?typeof i=="string"?n.textContent!==i&&(l.suppressHydrationWarning!==!0&&Sl(n.textContent,i,e),a=["children",i]):typeof i=="number"&&n.textContent!==""+i&&(l.suppressHydrationWarning!==!0&&Sl(n.textContent,i,e),a=["children",""+i]):ga.hasOwnProperty(o)&&i!=null&&o==="onScroll"&&Ce("scroll",n)}switch(r){case"input":xl(n),Fh(n,l,!0);break;case"textarea":xl(n),Bh(n);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(n.onclick=uo)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Tp(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[pr]=t,e[ka]=n,sg(e,t,!1,!1),t.stateNode=e;e:{switch(o=Bc(r,n),r){case"dialog":Ce("cancel",e),Ce("close",e),a=n;break;case"iframe":case"object":case"embed":Ce("load",e),a=n;break;case"video":case"audio":for(a=0;a<Zn.length;a++)Ce(Zn[a],e);a=n;break;case"source":Ce("error",e),a=n;break;case"img":case"image":case"link":Ce("error",e),Ce("load",e),a=n;break;case"details":Ce("toggle",e),a=n;break;case"input":Mh(e,n),a=Lc(e,n),Ce("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=Re({},n,{value:void 0}),Ce("invalid",e);break;case"textarea":Uh(e,n),a=Mc(e,n),Ce("invalid",e);break;default:a=n}Uc(r,a),i=a;for(l in i)if(i.hasOwnProperty(l)){var c=i[l];l==="style"?Lp(e,c):l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Rp(e,c)):l==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&xa(e,c):typeof c=="number"&&xa(e,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(ga.hasOwnProperty(l)?c!=null&&l==="onScroll"&&Ce("scroll",e):c!=null&&Jd(e,l,c,o))}switch(r){case"input":xl(e),Fh(e,n,!1);break;case"textarea":xl(e),Bh(e);break;case"option":n.value!=null&&e.setAttribute("value",""+as(n.value));break;case"select":e.multiple=!!n.multiple,l=n.value,l!=null?an(e,!!n.multiple,l,!1):n.defaultValue!=null&&an(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=uo)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return at(t),null;case 6:if(e&&t.stateNode!=null)ag(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(V(166));if(r=Ns(Da.current),Ns(gr.current),kl(t)){if(n=t.stateNode,r=t.memoizedProps,n[pr]=t,(l=n.nodeValue!==r)&&(e=It,e!==null))switch(e.tag){case 3:Sl(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Sl(n.nodeValue,r,(e.mode&1)!==0)}l&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[pr]=t,t.stateNode=n}return at(t),null;case 13:if(De(Pe),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ee&&Et!==null&&t.mode&1&&!(t.flags&128))Nf(),fn(),t.flags|=98560,l=!1;else if(l=kl(t),n!==null&&n.dehydrated!==null){if(e===null){if(!l)throw Error(V(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(V(317));l[pr]=t}else fn(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;at(t),l=!1}else rr!==null&&(wd(rr),rr=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Pe.current&1?We===0&&(We=3):Ru())),t.updateQueue!==null&&(t.flags|=4),at(t),null);case 4:return xn(),md(e,t),e===null&&_a(t.stateNode.containerInfo),at(t),null;case 10:return gu(t.type._context),at(t),null;case 17:return jt(t.type)&&ho(),at(t),null;case 19:if(De(Pe),l=t.memoizedState,l===null)return at(t),null;if(n=(t.flags&128)!==0,o=l.rendering,o===null)if(n)Vn(l,!1);else{if(We!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=yo(e),o!==null){for(t.flags|=128,Vn(l,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)l=r,e=n,l.flags&=14680066,o=l.alternate,o===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=o.childLanes,l.lanes=o.lanes,l.child=o.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=o.memoizedProps,l.memoizedState=o.memoizedState,l.updateQueue=o.updateQueue,l.type=o.type,e=o.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return ke(Pe,Pe.current&1|2),t.child}e=e.sibling}l.tail!==null&&Me()>yn&&(t.flags|=128,n=!0,Vn(l,!1),t.lanes=4194304)}else{if(!n)if(e=yo(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Vn(l,!0),l.tail===null&&l.tailMode==="hidden"&&!o.alternate&&!Ee)return at(t),null}else 2*Me()-l.renderingStartTime>yn&&r!==1073741824&&(t.flags|=128,n=!0,Vn(l,!1),t.lanes=4194304);l.isBackwards?(o.sibling=t.child,t.child=o):(r=l.last,r!==null?r.sibling=o:t.child=o,l.last=o)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Me(),t.sibling=null,r=Pe.current,ke(Pe,n?r&1|2:r&1),t):(at(t),null);case 22:case 23:return Tu(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Ct&1073741824&&(at(t),t.subtreeFlags&6&&(t.flags|=8192)):at(t),null;case 24:return null;case 25:return null}throw Error(V(156,t.tag))}function zb(e,t){switch(hu(t),t.tag){case 1:return jt(t.type)&&ho(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return xn(),De(wt),De(it),wu(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return bu(t),null;case 13:if(De(Pe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(V(340));fn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return De(Pe),null;case 4:return xn(),null;case 10:return gu(t.type._context),null;case 22:case 23:return Tu(),null;case 24:return null;default:return null}}var El=!1,ot=!1,Wb=typeof WeakSet=="function"?WeakSet:Set,J=null;function sn(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Le(e,t,n)}else r.current=null}function pd(e,t,r){try{r()}catch(n){Le(e,t,n)}}var P0=!1;function Vb(e,t){if(Jc=oo,e=df(),du(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,l=n.focusNode;n=n.focusOffset;try{r.nodeType,l.nodeType}catch{r=null;break e}var o=0,i=-1,c=-1,h=0,u=0,d=e,m=null;t:for(;;){for(var p;d!==r||a!==0&&d.nodeType!==3||(i=o+a),d!==l||n!==0&&d.nodeType!==3||(c=o+n),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)m=d,d=p;for(;;){if(d===e)break t;if(m===r&&++h===a&&(i=o),m===l&&++u===n&&(c=o),(p=d.nextSibling)!==null)break;d=m,m=d.parentNode}d=p}r=i===-1||c===-1?null:{start:i,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Xc={focusedElem:e,selectionRange:r},oo=!1,J=t;J!==null;)if(t=J,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,J=e;else for(;J!==null;){t=J;try{var f=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(f!==null){var x=f.memoizedProps,b=f.memoizedState,g=t.stateNode,v=g.getSnapshotBeforeUpdate(t.elementType===t.type?x:Zt(t.type,x),b);g.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(V(163))}}catch(w){Le(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,J=e;break}J=t.return}return f=P0,P0=!1,f}function oa(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var l=a.destroy;a.destroy=void 0,l!==void 0&&pd(t,r,l)}a=a.next}while(a!==n)}}function Xo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function fd(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function lg(e){var t=e.alternate;t!==null&&(e.alternate=null,lg(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[pr],delete t[ka],delete t[td],delete t[kb],delete t[Cb])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function og(e){return e.tag===5||e.tag===3||e.tag===4}function I0(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||og(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function gd(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=uo));else if(n!==4&&(e=e.child,e!==null))for(gd(e,t,r),e=e.sibling;e!==null;)gd(e,t,r),e=e.sibling}function xd(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(xd(e,t,r),e=e.sibling;e!==null;)xd(e,t,r),e=e.sibling}var et=null,er=!1;function Ar(e,t,r){for(r=r.child;r!==null;)ig(e,t,r),r=r.sibling}function ig(e,t,r){if(fr&&typeof fr.onCommitFiberUnmount=="function")try{fr.onCommitFiberUnmount(Vo,r)}catch{}switch(r.tag){case 5:ot||sn(r,t);case 6:var n=et,a=er;et=null,Ar(e,t,r),et=n,er=a,et!==null&&(er?(e=et,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):et.removeChild(r.stateNode));break;case 18:et!==null&&(er?(e=et,r=r.stateNode,e.nodeType===8?Ji(e.parentNode,r):e.nodeType===1&&Ji(e,r),wa(e)):Ji(et,r.stateNode));break;case 4:n=et,a=er,et=r.stateNode.containerInfo,er=!0,Ar(e,t,r),et=n,er=a;break;case 0:case 11:case 14:case 15:if(!ot&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var l=a,o=l.destroy;l=l.tag,o!==void 0&&(l&2||l&4)&&pd(r,t,o),a=a.next}while(a!==n)}Ar(e,t,r);break;case 1:if(!ot&&(sn(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(i){Le(r,t,i)}Ar(e,t,r);break;case 21:Ar(e,t,r);break;case 22:r.mode&1?(ot=(n=ot)||r.memoizedState!==null,Ar(e,t,r),ot=n):Ar(e,t,r);break;default:Ar(e,t,r)}}function T0(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Wb),t.forEach(function(n){var a=Zb.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function Jt(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var l=e,o=t,i=o;e:for(;i!==null;){switch(i.tag){case 5:et=i.stateNode,er=!1;break e;case 3:et=i.stateNode.containerInfo,er=!0;break e;case 4:et=i.stateNode.containerInfo,er=!0;break e}i=i.return}if(et===null)throw Error(V(160));ig(l,o,a),et=null,er=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(h){Le(a,t,h)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)cg(t,e),t=t.sibling}function cg(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Jt(t,e),hr(e),n&4){try{oa(3,e,e.return),Xo(3,e)}catch(x){Le(e,e.return,x)}try{oa(5,e,e.return)}catch(x){Le(e,e.return,x)}}break;case 1:Jt(t,e),hr(e),n&512&&r!==null&&sn(r,r.return);break;case 5:if(Jt(t,e),hr(e),n&512&&r!==null&&sn(r,r.return),e.flags&32){var a=e.stateNode;try{xa(a,"")}catch(x){Le(e,e.return,x)}}if(n&4&&(a=e.stateNode,a!=null)){var l=e.memoizedProps,o=r!==null?r.memoizedProps:l,i=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{i==="input"&&l.type==="radio"&&l.name!=null&&Pp(a,l),Bc(i,o);var h=Bc(i,l);for(o=0;o<c.length;o+=2){var u=c[o],d=c[o+1];u==="style"?Lp(a,d):u==="dangerouslySetInnerHTML"?Rp(a,d):u==="children"?xa(a,d):Jd(a,u,d,h)}switch(i){case"input":Ac(a,l);break;case"textarea":Ip(a,l);break;case"select":var m=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!l.multiple;var p=l.value;p!=null?an(a,!!l.multiple,p,!1):m!==!!l.multiple&&(l.defaultValue!=null?an(a,!!l.multiple,l.defaultValue,!0):an(a,!!l.multiple,l.multiple?[]:"",!1))}a[ka]=l}catch(x){Le(e,e.return,x)}}break;case 6:if(Jt(t,e),hr(e),n&4){if(e.stateNode===null)throw Error(V(162));a=e.stateNode,l=e.memoizedProps;try{a.nodeValue=l}catch(x){Le(e,e.return,x)}}break;case 3:if(Jt(t,e),hr(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{wa(t.containerInfo)}catch(x){Le(e,e.return,x)}break;case 4:Jt(t,e),hr(e);break;case 13:Jt(t,e),hr(e),a=e.child,a.flags&8192&&(l=a.memoizedState!==null,a.stateNode.isHidden=l,!l||a.alternate!==null&&a.alternate.memoizedState!==null||(Pu=Me())),n&4&&T0(e);break;case 22:if(u=r!==null&&r.memoizedState!==null,e.mode&1?(ot=(h=ot)||u,Jt(t,e),ot=h):Jt(t,e),hr(e),n&8192){if(h=e.memoizedState!==null,(e.stateNode.isHidden=h)&&!u&&e.mode&1)for(J=e,u=e.child;u!==null;){for(d=J=u;J!==null;){switch(m=J,p=m.child,m.tag){case 0:case 11:case 14:case 15:oa(4,m,m.return);break;case 1:sn(m,m.return);var f=m.stateNode;if(typeof f.componentWillUnmount=="function"){n=m,r=m.return;try{t=n,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(x){Le(n,r,x)}}break;case 5:sn(m,m.return);break;case 22:if(m.memoizedState!==null){O0(d);continue}}p!==null?(p.return=m,J=p):O0(d)}u=u.sibling}e:for(u=null,d=e;;){if(d.tag===5){if(u===null){u=d;try{a=d.stateNode,h?(l=a.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(i=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,i.style.display=Op("display",o))}catch(x){Le(e,e.return,x)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=h?"":d.memoizedProps}catch(x){Le(e,e.return,x)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Jt(t,e),hr(e),n&4&&T0(e);break;case 21:break;default:Jt(t,e),hr(e)}}function hr(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(og(r)){var n=r;break e}r=r.return}throw Error(V(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(xa(a,""),n.flags&=-33);var l=I0(e);xd(e,l,a);break;case 3:case 4:var o=n.stateNode.containerInfo,i=I0(e);gd(e,i,o);break;default:throw Error(V(161))}}catch(c){Le(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function qb(e,t,r){J=e,dg(e)}function dg(e,t,r){for(var n=(e.mode&1)!==0;J!==null;){var a=J,l=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||El;if(!o){var i=a.alternate,c=i!==null&&i.memoizedState!==null||ot;i=El;var h=ot;if(El=o,(ot=c)&&!h)for(J=a;J!==null;)o=J,c=o.child,o.tag===22&&o.memoizedState!==null?L0(a):c!==null?(c.return=o,J=c):L0(a);for(;l!==null;)J=l,dg(l),l=l.sibling;J=a,El=i,ot=h}R0(e)}else a.subtreeFlags&8772&&l!==null?(l.return=a,J=l):R0(e)}}function R0(e){for(;J!==null;){var t=J;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ot||Xo(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!ot)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:Zt(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&x0(t,l,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}x0(t,o,r)}break;case 5:var i=t.stateNode;if(r===null&&t.flags&4){r=i;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var h=t.alternate;if(h!==null){var u=h.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&wa(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(V(163))}ot||t.flags&512&&fd(t)}catch(m){Le(t,t.return,m)}}if(t===e){J=null;break}if(r=t.sibling,r!==null){r.return=t.return,J=r;break}J=t.return}}function O0(e){for(;J!==null;){var t=J;if(t===e){J=null;break}var r=t.sibling;if(r!==null){r.return=t.return,J=r;break}J=t.return}}function L0(e){for(;J!==null;){var t=J;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Xo(4,t)}catch(c){Le(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){Le(t,a,c)}}var l=t.return;try{fd(t)}catch(c){Le(t,l,c)}break;case 5:var o=t.return;try{fd(t)}catch(c){Le(t,o,c)}}}catch(c){Le(t,t.return,c)}if(t===e){J=null;break}var i=t.sibling;if(i!==null){i.return=t.return,J=i;break}J=t.return}}var Gb=Math.ceil,jo=Tr.ReactCurrentDispatcher,Du=Tr.ReactCurrentOwner,Vt=Tr.ReactCurrentBatchConfig,xe=0,He=null,Be=null,rt=0,Ct=0,nn=cs(0),We=0,Ta=null,Es=0,Zo=0,Eu=0,ia=null,xt=null,Pu=0,yn=1/0,wr=null,No=!1,vd=null,Xr=null,Pl=!1,qr=null,_o=0,ca=0,yd=null,Xl=-1,Zl=0;function ht(){return xe&6?Me():Xl!==-1?Xl:Xl=Me()}function Zr(e){return e.mode&1?xe&2&&rt!==0?rt&-rt:Eb.transition!==null?(Zl===0&&(Zl=Hp()),Zl):(e=be,e!==0||(e=window.event,e=e===void 0?16:ef(e.type)),e):1}function ar(e,t,r,n){if(50<ca)throw ca=0,yd=null,Error(V(185));qa(e,r,n),(!(xe&2)||e!==He)&&(e===He&&(!(xe&2)&&(Zo|=r),We===4&&zr(e,rt)),Nt(e,n),r===1&&xe===0&&!(t.mode&1)&&(yn=Me()+500,Qo&&ds()))}function Nt(e,t){var r=e.callbackNode;Ey(e,t);var n=lo(e,e===He?rt:0);if(n===0)r!==null&&Vh(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Vh(r),t===1)e.tag===0?Db(A0.bind(null,e)):bf(A0.bind(null,e)),_b(function(){!(xe&6)&&ds()}),r=null;else{switch(Kp(n)){case 1:r=ru;break;case 4:r=qp;break;case 16:r=ao;break;case 536870912:r=Gp;break;default:r=ao}r=vg(r,ug.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function ug(e,t){if(Xl=-1,Zl=0,xe&6)throw Error(V(327));var r=e.callbackNode;if(un()&&e.callbackNode!==r)return null;var n=lo(e,e===He?rt:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=So(e,n);else{t=n;var a=xe;xe|=2;var l=mg();(He!==e||rt!==t)&&(wr=null,yn=Me()+500,_s(e,t));do try{Qb();break}catch(i){hg(e,i)}while(!0);fu(),jo.current=l,xe=a,Be!==null?t=0:(He=null,rt=0,t=We)}if(t!==0){if(t===2&&(a=Gc(e),a!==0&&(n=a,t=bd(e,a))),t===1)throw r=Ta,_s(e,0),zr(e,n),Nt(e,Me()),r;if(t===6)zr(e,n);else{if(a=e.current.alternate,!(n&30)&&!Hb(a)&&(t=So(e,n),t===2&&(l=Gc(e),l!==0&&(n=l,t=bd(e,l))),t===1))throw r=Ta,_s(e,0),zr(e,n),Nt(e,Me()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(V(345));case 2:xs(e,xt,wr);break;case 3:if(zr(e,n),(n&130023424)===n&&(t=Pu+500-Me(),10<t)){if(lo(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){ht(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=ed(xs.bind(null,e,xt,wr),t);break}xs(e,xt,wr);break;case 4:if(zr(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-nr(n);l=1<<o,o=t[o],o>a&&(a=o),n&=~l}if(n=a,n=Me()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Gb(n/1960))-n,10<n){e.timeoutHandle=ed(xs.bind(null,e,xt,wr),n);break}xs(e,xt,wr);break;case 5:xs(e,xt,wr);break;default:throw Error(V(329))}}}return Nt(e,Me()),e.callbackNode===r?ug.bind(null,e):null}function bd(e,t){var r=ia;return e.current.memoizedState.isDehydrated&&(_s(e,t).flags|=256),e=So(e,t),e!==2&&(t=xt,xt=r,t!==null&&wd(t)),e}function wd(e){xt===null?xt=e:xt.push.apply(xt,e)}function Hb(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],l=a.getSnapshot;a=a.value;try{if(!or(l(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function zr(e,t){for(t&=~Eu,t&=~Zo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-nr(t),n=1<<r;e[r]=-1,t&=~n}}function A0(e){if(xe&6)throw Error(V(327));un();var t=lo(e,0);if(!(t&1))return Nt(e,Me()),null;var r=So(e,t);if(e.tag!==0&&r===2){var n=Gc(e);n!==0&&(t=n,r=bd(e,n))}if(r===1)throw r=Ta,_s(e,0),zr(e,t),Nt(e,Me()),r;if(r===6)throw Error(V(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xs(e,xt,wr),Nt(e,Me()),null}function Iu(e,t){var r=xe;xe|=1;try{return e(t)}finally{xe=r,xe===0&&(yn=Me()+500,Qo&&ds())}}function Ps(e){qr!==null&&qr.tag===0&&!(xe&6)&&un();var t=xe;xe|=1;var r=Vt.transition,n=be;try{if(Vt.transition=null,be=1,e)return e()}finally{be=n,Vt.transition=r,xe=t,!(xe&6)&&ds()}}function Tu(){Ct=nn.current,De(nn)}function _s(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Nb(r)),Be!==null)for(r=Be.return;r!==null;){var n=r;switch(hu(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&ho();break;case 3:xn(),De(wt),De(it),wu();break;case 5:bu(n);break;case 4:xn();break;case 13:De(Pe);break;case 19:De(Pe);break;case 10:gu(n.type._context);break;case 22:case 23:Tu()}r=r.return}if(He=e,Be=e=es(e.current,null),rt=Ct=t,We=0,Ta=null,Eu=Zo=Es=0,xt=ia=null,js!==null){for(t=0;t<js.length;t++)if(r=js[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,l=r.pending;if(l!==null){var o=l.next;l.next=a,n.next=o}r.pending=n}js=null}return e}function hg(e,t){do{var r=Be;try{if(fu(),Ql.current=wo,bo){for(var n=Te.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}bo=!1}if(Ds=0,Ge=ze=Te=null,la=!1,Ea=0,Du.current=null,r===null||r.return===null){We=1,Ta=t,Be=null;break}e:{var l=e,o=r.return,i=r,c=t;if(t=rt,i.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=c,u=i,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=N0(o);if(p!==null){p.flags&=-257,_0(p,o,i,l,t),p.mode&1&&j0(l,h,t),t=p,c=h;var f=t.updateQueue;if(f===null){var x=new Set;x.add(c),t.updateQueue=x}else f.add(c);break e}else{if(!(t&1)){j0(l,h,t),Ru();break e}c=Error(V(426))}}else if(Ee&&i.mode&1){var b=N0(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),_0(b,o,i,l,t),mu(vn(c,i));break e}}l=c=vn(c,i),We!==4&&(We=2),ia===null?ia=[l]:ia.push(l),l=o;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var g=Qf(l,c,t);g0(l,g);break e;case 1:i=c;var v=l.type,y=l.stateNode;if(!(l.flags&128)&&(typeof v.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Xr===null||!Xr.has(y)))){l.flags|=65536,t&=-t,l.lanes|=t;var w=Yf(l,i,t);g0(l,w);break e}}l=l.return}while(l!==null)}fg(r)}catch(N){t=N,Be===r&&r!==null&&(Be=r=r.return);continue}break}while(!0)}function mg(){var e=jo.current;return jo.current=wo,e===null?wo:e}function Ru(){(We===0||We===3||We===2)&&(We=4),He===null||!(Es&268435455)&&!(Zo&268435455)||zr(He,rt)}function So(e,t){var r=xe;xe|=2;var n=mg();(He!==e||rt!==t)&&(wr=null,_s(e,t));do try{Kb();break}catch(a){hg(e,a)}while(!0);if(fu(),xe=r,jo.current=n,Be!==null)throw Error(V(261));return He=null,rt=0,We}function Kb(){for(;Be!==null;)pg(Be)}function Qb(){for(;Be!==null&&!by();)pg(Be)}function pg(e){var t=xg(e.alternate,e,Ct);e.memoizedProps=e.pendingProps,t===null?fg(e):Be=t,Du.current=null}function fg(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=zb(r,t),r!==null){r.flags&=32767,Be=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{We=6,Be=null;return}}else if(r=Bb(r,t,Ct),r!==null){Be=r;return}if(t=t.sibling,t!==null){Be=t;return}Be=t=e}while(t!==null);We===0&&(We=5)}function xs(e,t,r){var n=be,a=Vt.transition;try{Vt.transition=null,be=1,Yb(e,t,r,n)}finally{Vt.transition=a,be=n}return null}function Yb(e,t,r,n){do un();while(qr!==null);if(xe&6)throw Error(V(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(V(177));e.callbackNode=null,e.callbackPriority=0;var l=r.lanes|r.childLanes;if(Py(e,l),e===He&&(Be=He=null,rt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Pl||(Pl=!0,vg(ao,function(){return un(),null})),l=(r.flags&15990)!==0,r.subtreeFlags&15990||l){l=Vt.transition,Vt.transition=null;var o=be;be=1;var i=xe;xe|=4,Du.current=null,Vb(e,r),cg(r,e),gb(Xc),oo=!!Jc,Xc=Jc=null,e.current=r,qb(r),wy(),xe=i,be=o,Vt.transition=l}else e.current=r;if(Pl&&(Pl=!1,qr=e,_o=a),l=e.pendingLanes,l===0&&(Xr=null),_y(r.stateNode),Nt(e,Me()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(No)throw No=!1,e=vd,vd=null,e;return _o&1&&e.tag!==0&&un(),l=e.pendingLanes,l&1?e===yd?ca++:(ca=0,yd=e):ca=0,ds(),null}function un(){if(qr!==null){var e=Kp(_o),t=Vt.transition,r=be;try{if(Vt.transition=null,be=16>e?16:e,qr===null)var n=!1;else{if(e=qr,qr=null,_o=0,xe&6)throw Error(V(331));var a=xe;for(xe|=4,J=e.current;J!==null;){var l=J,o=l.child;if(J.flags&16){var i=l.deletions;if(i!==null){for(var c=0;c<i.length;c++){var h=i[c];for(J=h;J!==null;){var u=J;switch(u.tag){case 0:case 11:case 15:oa(8,u,l)}var d=u.child;if(d!==null)d.return=u,J=d;else for(;J!==null;){u=J;var m=u.sibling,p=u.return;if(lg(u),u===h){J=null;break}if(m!==null){m.return=p,J=m;break}J=p}}}var f=l.alternate;if(f!==null){var x=f.child;if(x!==null){f.child=null;do{var b=x.sibling;x.sibling=null,x=b}while(x!==null)}}J=l}}if(l.subtreeFlags&2064&&o!==null)o.return=l,J=o;else e:for(;J!==null;){if(l=J,l.flags&2048)switch(l.tag){case 0:case 11:case 15:oa(9,l,l.return)}var g=l.sibling;if(g!==null){g.return=l.return,J=g;break e}J=l.return}}var v=e.current;for(J=v;J!==null;){o=J;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,J=y;else e:for(o=v;J!==null;){if(i=J,i.flags&2048)try{switch(i.tag){case 0:case 11:case 15:Xo(9,i)}}catch(N){Le(i,i.return,N)}if(i===o){J=null;break e}var w=i.sibling;if(w!==null){w.return=i.return,J=w;break e}J=i.return}}if(xe=a,ds(),fr&&typeof fr.onPostCommitFiberRoot=="function")try{fr.onPostCommitFiberRoot(Vo,e)}catch{}n=!0}return n}finally{be=r,Vt.transition=t}}return!1}function $0(e,t,r){t=vn(r,t),t=Qf(e,t,1),e=Jr(e,t,1),t=ht(),e!==null&&(qa(e,1,t),Nt(e,t))}function Le(e,t,r){if(e.tag===3)$0(e,e,r);else for(;t!==null;){if(t.tag===3){$0(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Xr===null||!Xr.has(n))){e=vn(r,e),e=Yf(t,e,1),t=Jr(t,e,1),e=ht(),t!==null&&(qa(t,1,e),Nt(t,e));break}}t=t.return}}function Jb(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=ht(),e.pingedLanes|=e.suspendedLanes&r,He===e&&(rt&r)===r&&(We===4||We===3&&(rt&130023424)===rt&&500>Me()-Pu?_s(e,0):Eu|=r),Nt(e,t)}function gg(e,t){t===0&&(e.mode&1?(t=bl,bl<<=1,!(bl&130023424)&&(bl=4194304)):t=1);var r=ht();e=Er(e,t),e!==null&&(qa(e,t,r),Nt(e,r))}function Xb(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),gg(e,r)}function Zb(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(V(314))}n!==null&&n.delete(t),gg(e,r)}var xg;xg=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||wt.current)yt=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return yt=!1,Ub(e,t,r);yt=!!(e.flags&131072)}else yt=!1,Ee&&t.flags&1048576&&wf(t,fo,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Jl(e,t),e=t.pendingProps;var a=pn(t,it.current);dn(t,r),a=Nu(null,t,n,e,a,r);var l=_u();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,jt(n)?(l=!0,mo(t)):l=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,vu(t),a.updater=Jo,t.stateNode=a,a._reactInternals=t,od(t,n,e,r),t=dd(null,t,n,!0,l,r)):(t.tag=0,Ee&&l&&uu(t),ut(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Jl(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=tw(n),e=Zt(n,e),a){case 0:t=cd(null,t,n,e,r);break e;case 1:t=C0(null,t,n,e,r);break e;case 11:t=S0(null,t,n,e,r);break e;case 14:t=k0(null,t,n,Zt(n.type,e),r);break e}throw Error(V(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Zt(n,a),cd(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Zt(n,a),C0(e,t,n,a,r);case 3:e:{if(eg(t),e===null)throw Error(V(387));n=t.pendingProps,l=t.memoizedState,a=l.element,Cf(e,t),vo(t,n,null,r);var o=t.memoizedState;if(n=o.element,l.isDehydrated)if(l={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){a=vn(Error(V(423)),t),t=D0(e,t,n,r,a);break e}else if(n!==a){a=vn(Error(V(424)),t),t=D0(e,t,n,r,a);break e}else for(Et=Yr(t.stateNode.containerInfo.firstChild),It=t,Ee=!0,rr=null,r=Sf(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(fn(),n===a){t=Pr(e,t,r);break e}ut(e,t,n,r)}t=t.child}return t;case 5:return Df(t),e===null&&nd(t),n=t.type,a=t.pendingProps,l=e!==null?e.memoizedProps:null,o=a.children,Zc(n,a)?o=null:l!==null&&Zc(n,l)&&(t.flags|=32),Zf(e,t),ut(e,t,o,r),t.child;case 6:return e===null&&nd(t),null;case 13:return tg(e,t,r);case 4:return yu(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=gn(t,null,n,r):ut(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Zt(n,a),S0(e,t,n,a,r);case 7:return ut(e,t,t.pendingProps,r),t.child;case 8:return ut(e,t,t.pendingProps.children,r),t.child;case 12:return ut(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,l=t.memoizedProps,o=a.value,ke(go,n._currentValue),n._currentValue=o,l!==null)if(or(l.value,o)){if(l.children===a.children&&!wt.current){t=Pr(e,t,r);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var i=l.dependencies;if(i!==null){o=l.child;for(var c=i.firstContext;c!==null;){if(c.context===n){if(l.tag===1){c=kr(-1,r&-r),c.tag=2;var h=l.updateQueue;if(h!==null){h=h.shared;var u=h.pending;u===null?c.next=c:(c.next=u.next,u.next=c),h.pending=c}}l.lanes|=r,c=l.alternate,c!==null&&(c.lanes|=r),ad(l.return,r,t),i.lanes|=r;break}c=c.next}}else if(l.tag===10)o=l.type===t.type?null:l.child;else if(l.tag===18){if(o=l.return,o===null)throw Error(V(341));o.lanes|=r,i=o.alternate,i!==null&&(i.lanes|=r),ad(o,r,t),o=l.sibling}else o=l.child;if(o!==null)o.return=l;else for(o=l;o!==null;){if(o===t){o=null;break}if(l=o.sibling,l!==null){l.return=o.return,o=l;break}o=o.return}l=o}ut(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,dn(t,r),a=Ht(a),n=n(a),t.flags|=1,ut(e,t,n,r),t.child;case 14:return n=t.type,a=Zt(n,t.pendingProps),a=Zt(n.type,a),k0(e,t,n,a,r);case 15:return Jf(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Zt(n,a),Jl(e,t),t.tag=1,jt(n)?(e=!0,mo(t)):e=!1,dn(t,r),Kf(t,n,a),od(t,n,a,r),dd(null,t,n,!0,e,r);case 19:return rg(e,t,r);case 22:return Xf(e,t,r)}throw Error(V(156,t.tag))};function vg(e,t){return Vp(e,t)}function ew(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zt(e,t,r,n){return new ew(e,t,r,n)}function Ou(e){return e=e.prototype,!(!e||!e.isReactComponent)}function tw(e){if(typeof e=="function")return Ou(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Zd)return 11;if(e===eu)return 14}return 2}function es(e,t){var r=e.alternate;return r===null?(r=zt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function eo(e,t,r,n,a,l){var o=2;if(n=e,typeof e=="function")Ou(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Ks:return Ss(r.children,a,l,t);case Xd:o=8,a|=8;break;case Ic:return e=zt(12,r,t,a|2),e.elementType=Ic,e.lanes=l,e;case Tc:return e=zt(13,r,t,a),e.elementType=Tc,e.lanes=l,e;case Rc:return e=zt(19,r,t,a),e.elementType=Rc,e.lanes=l,e;case Cp:return ei(r,a,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Sp:o=10;break e;case kp:o=9;break e;case Zd:o=11;break e;case eu:o=14;break e;case Mr:o=16,n=null;break e}throw Error(V(130,e==null?e:typeof e,""))}return t=zt(o,r,t,a),t.elementType=e,t.type=n,t.lanes=l,t}function Ss(e,t,r,n){return e=zt(7,e,n,t),e.lanes=r,e}function ei(e,t,r,n){return e=zt(22,e,n,t),e.elementType=Cp,e.lanes=r,e.stateNode={isHidden:!1},e}function ac(e,t,r){return e=zt(6,e,null,t),e.lanes=r,e}function lc(e,t,r){return t=zt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function rw(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ui(0),this.expirationTimes=Ui(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ui(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Lu(e,t,r,n,a,l,o,i,c){return e=new rw(e,t,r,i,c),t===1?(t=1,l===!0&&(t|=8)):t=0,l=zt(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},vu(l),e}function sw(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Hs,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function yg(e){if(!e)return ls;e=e._reactInternals;e:{if(Os(e)!==e||e.tag!==1)throw Error(V(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(jt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(V(171))}if(e.tag===1){var r=e.type;if(jt(r))return yf(e,r,t)}return t}function bg(e,t,r,n,a,l,o,i,c){return e=Lu(r,n,!0,e,a,l,o,i,c),e.context=yg(null),r=e.current,n=ht(),a=Zr(r),l=kr(n,a),l.callback=t??null,Jr(r,l,a),e.current.lanes=a,qa(e,a,n),Nt(e,n),e}function ti(e,t,r,n){var a=t.current,l=ht(),o=Zr(a);return r=yg(r),t.context===null?t.context=r:t.pendingContext=r,t=kr(l,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Jr(a,t,o),e!==null&&(ar(e,a,o,l),Kl(e,a,o)),o}function ko(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function M0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Au(e,t){M0(e,t),(e=e.alternate)&&M0(e,t)}function nw(){return null}var wg=typeof reportError=="function"?reportError:function(e){console.error(e)};function $u(e){this._internalRoot=e}ri.prototype.render=$u.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(V(409));ti(e,t,null,null)};ri.prototype.unmount=$u.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ps(function(){ti(null,e,null,null)}),t[Dr]=null}};function ri(e){this._internalRoot=e}ri.prototype.unstable_scheduleHydration=function(e){if(e){var t=Jp();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Br.length&&t!==0&&t<Br[r].priority;r++);Br.splice(r,0,e),r===0&&Zp(e)}};function Mu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function si(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function F0(){}function aw(e,t,r,n,a){if(a){if(typeof n=="function"){var l=n;n=function(){var h=ko(o);l.call(h)}}var o=bg(t,n,e,0,null,!1,!1,"",F0);return e._reactRootContainer=o,e[Dr]=o.current,_a(e.nodeType===8?e.parentNode:e),Ps(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var i=n;n=function(){var h=ko(c);i.call(h)}}var c=Lu(e,0,!1,null,null,!1,!1,"",F0);return e._reactRootContainer=c,e[Dr]=c.current,_a(e.nodeType===8?e.parentNode:e),Ps(function(){ti(t,c,r,n)}),c}function ni(e,t,r,n,a){var l=r._reactRootContainer;if(l){var o=l;if(typeof a=="function"){var i=a;a=function(){var c=ko(o);i.call(c)}}ti(t,o,e,a)}else o=aw(r,t,e,a,n);return ko(o)}Qp=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Xn(t.pendingLanes);r!==0&&(su(t,r|1),Nt(t,Me()),!(xe&6)&&(yn=Me()+500,ds()))}break;case 13:Ps(function(){var n=Er(e,1);if(n!==null){var a=ht();ar(n,e,1,a)}}),Au(e,1)}};nu=function(e){if(e.tag===13){var t=Er(e,134217728);if(t!==null){var r=ht();ar(t,e,134217728,r)}Au(e,134217728)}};Yp=function(e){if(e.tag===13){var t=Zr(e),r=Er(e,t);if(r!==null){var n=ht();ar(r,e,t,n)}Au(e,t)}};Jp=function(){return be};Xp=function(e,t){var r=be;try{return be=e,t()}finally{be=r}};Wc=function(e,t,r){switch(t){case"input":if(Ac(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=Ko(n);if(!a)throw Error(V(90));Ep(n),Ac(n,a)}}}break;case"textarea":Ip(e,r);break;case"select":t=r.value,t!=null&&an(e,!!r.multiple,t,!1)}};Mp=Iu;Fp=Ps;var lw={usingClientEntryPoint:!1,Events:[Ha,Xs,Ko,Ap,$p,Iu]},qn={findFiberByHostInstance:ws,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ow={bundleType:qn.bundleType,version:qn.version,rendererPackageName:qn.rendererPackageName,rendererConfig:qn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Tr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=zp(e),e===null?null:e.stateNode},findFiberByHostInstance:qn.findFiberByHostInstance||nw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Il.isDisabled&&Il.supportsFiber)try{Vo=Il.inject(ow),fr=Il}catch{}}Lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lw;Lt.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Mu(t))throw Error(V(200));return sw(e,t,null,r)};Lt.createRoot=function(e,t){if(!Mu(e))throw Error(V(299));var r=!1,n="",a=wg;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=Lu(e,1,!1,null,null,r,!1,n,a),e[Dr]=t.current,_a(e.nodeType===8?e.parentNode:e),new $u(t)};Lt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(V(188)):(e=Object.keys(e).join(","),Error(V(268,e)));return e=zp(t),e=e===null?null:e.stateNode,e};Lt.flushSync=function(e){return Ps(e)};Lt.hydrate=function(e,t,r){if(!si(t))throw Error(V(200));return ni(null,e,t,!0,r)};Lt.hydrateRoot=function(e,t,r){if(!Mu(e))throw Error(V(405));var n=r!=null&&r.hydratedSources||null,a=!1,l="",o=wg;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=bg(t,null,e,1,r??null,a,!1,l,o),e[Dr]=t.current,_a(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new ri(t)};Lt.render=function(e,t,r){if(!si(t))throw Error(V(200));return ni(null,e,t,!1,r)};Lt.unmountComponentAtNode=function(e){if(!si(e))throw Error(V(40));return e._reactRootContainer?(Ps(function(){ni(null,null,e,!1,function(){e._reactRootContainer=null,e[Dr]=null})}),!0):!1};Lt.unstable_batchedUpdates=Iu;Lt.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!si(r))throw Error(V(200));if(e==null||e._reactInternals===void 0)throw Error(V(38));return ni(e,t,r,!1,n)};Lt.version="18.3.1-next-f1338f8080-20240426";function jg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(jg)}catch(e){console.error(e)}}jg(),wp.exports=Lt;var Fu=wp.exports;const iw=Vd(Fu);var Ng,U0=Fu;Ng=U0.createRoot,U0.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ra(){return Ra=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ra.apply(this,arguments)}var Gr;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Gr||(Gr={}));const B0="popstate";function cw(e){e===void 0&&(e={});function t(n,a){let{pathname:l,search:o,hash:i}=n.location;return jd("",{pathname:l,search:o,hash:i},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:Co(a)}return uw(t,r,null,e)}function Ue(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function _g(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function dw(){return Math.random().toString(36).substr(2,8)}function z0(e,t){return{usr:e.state,key:e.key,idx:t}}function jd(e,t,r,n){return r===void 0&&(r=null),Ra({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?En(t):t,{state:r,key:t&&t.key||n||dw()})}function Co(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function En(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function uw(e,t,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:l=!1}=n,o=a.history,i=Gr.Pop,c=null,h=u();h==null&&(h=0,o.replaceState(Ra({},o.state,{idx:h}),""));function u(){return(o.state||{idx:null}).idx}function d(){i=Gr.Pop;let b=u(),g=b==null?null:b-h;h=b,c&&c({action:i,location:x.location,delta:g})}function m(b,g){i=Gr.Push;let v=jd(x.location,b,g);h=u()+1;let y=z0(v,h),w=x.createHref(v);try{o.pushState(y,"",w)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;a.location.assign(w)}l&&c&&c({action:i,location:x.location,delta:1})}function p(b,g){i=Gr.Replace;let v=jd(x.location,b,g);h=u();let y=z0(v,h),w=x.createHref(v);o.replaceState(y,"",w),l&&c&&c({action:i,location:x.location,delta:0})}function f(b){let g=a.location.origin!=="null"?a.location.origin:a.location.href,v=typeof b=="string"?b:Co(b);return v=v.replace(/ $/,"%20"),Ue(g,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,g)}let x={get action(){return i},get location(){return e(a,o)},listen(b){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(B0,d),c=b,()=>{a.removeEventListener(B0,d),c=null}},createHref(b){return t(a,b)},createURL:f,encodeLocation(b){let g=f(b);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:m,replace:p,go(b){return o.go(b)}};return x}var W0;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(W0||(W0={}));function hw(e,t,r){return r===void 0&&(r="/"),mw(e,t,r,!1)}function mw(e,t,r,n){let a=typeof t=="string"?En(t):t,l=Uu(a.pathname||"/",r);if(l==null)return null;let o=Sg(e);pw(o);let i=null;for(let c=0;i==null&&c<o.length;++c){let h=Sw(l);i=Nw(o[c],h,n)}return i}function Sg(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(l,o,i)=>{let c={relativePath:i===void 0?l.path||"":i,caseSensitive:l.caseSensitive===!0,childrenIndex:o,route:l};c.relativePath.startsWith("/")&&(Ue(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let h=ts([n,c.relativePath]),u=r.concat(c);l.children&&l.children.length>0&&(Ue(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),Sg(l.children,t,u,h)),!(l.path==null&&!l.index)&&t.push({path:h,score:ww(h,l.index),routesMeta:u})};return e.forEach((l,o)=>{var i;if(l.path===""||!((i=l.path)!=null&&i.includes("?")))a(l,o);else for(let c of kg(l.path))a(l,o,c)}),t}function kg(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),l=r.replace(/\?$/,"");if(n.length===0)return a?[l,""]:[l];let o=kg(n.join("/")),i=[];return i.push(...o.map(c=>c===""?l:[l,c].join("/"))),a&&i.push(...o),i.map(c=>e.startsWith("/")&&c===""?"/":c)}function pw(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:jw(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const fw=/^:[\w-]+$/,gw=3,xw=2,vw=1,yw=10,bw=-2,V0=e=>e==="*";function ww(e,t){let r=e.split("/"),n=r.length;return r.some(V0)&&(n+=bw),t&&(n+=xw),r.filter(a=>!V0(a)).reduce((a,l)=>a+(fw.test(l)?gw:l===""?vw:yw),n)}function jw(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function Nw(e,t,r){let{routesMeta:n}=e,a={},l="/",o=[];for(let i=0;i<n.length;++i){let c=n[i],h=i===n.length-1,u=l==="/"?t:t.slice(l.length)||"/",d=q0({path:c.relativePath,caseSensitive:c.caseSensitive,end:h},u),m=c.route;if(!d&&h&&r&&!n[n.length-1].route.index&&(d=q0({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!d)return null;Object.assign(a,d.params),o.push({params:a,pathname:ts([l,d.pathname]),pathnameBase:Ew(ts([l,d.pathnameBase])),route:m}),d.pathnameBase!=="/"&&(l=ts([l,d.pathnameBase]))}return o}function q0(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=_w(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let l=a[0],o=l.replace(/(.)\/+$/,"$1"),i=a.slice(1);return{params:n.reduce((h,u,d)=>{let{paramName:m,isOptional:p}=u;if(m==="*"){let x=i[d]||"";o=l.slice(0,l.length-x.length).replace(/(.)\/+$/,"$1")}const f=i[d];return p&&!f?h[m]=void 0:h[m]=(f||"").replace(/%2F/g,"/"),h},{}),pathname:l,pathnameBase:o,pattern:e}}function _w(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),_g(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,i,c)=>(n.push({paramName:i,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function Sw(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return _g(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Uu(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function kw(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?En(e):e;return{pathname:r?r.startsWith("/")?r:Cw(r,t):t,search:Pw(n),hash:Iw(a)}}function Cw(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function oc(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Dw(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Bu(e,t){let r=Dw(e);return t?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function zu(e,t,r,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=En(e):(a=Ra({},e),Ue(!a.pathname||!a.pathname.includes("?"),oc("?","pathname","search",a)),Ue(!a.pathname||!a.pathname.includes("#"),oc("#","pathname","hash",a)),Ue(!a.search||!a.search.includes("#"),oc("#","search","hash",a)));let l=e===""||a.pathname==="",o=l?"/":a.pathname,i;if(o==null)i=r;else{let d=t.length-1;if(!n&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),d-=1;a.pathname=m.join("/")}i=d>=0?t[d]:"/"}let c=kw(a,i),h=o&&o!=="/"&&o.endsWith("/"),u=(l||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(h||u)&&(c.pathname+="/"),c}const ts=e=>e.join("/").replace(/\/\/+/g,"/"),Ew=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Pw=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Iw=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Tw(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Cg=["post","put","patch","delete"];new Set(Cg);const Rw=["get",...Cg];new Set(Rw);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Oa(){return Oa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Oa.apply(this,arguments)}const Wu=j.createContext(null),Ow=j.createContext(null),us=j.createContext(null),ai=j.createContext(null),Rr=j.createContext({outlet:null,matches:[],isDataRoute:!1}),Dg=j.createContext(null);function Lw(e,t){let{relative:r}=t===void 0?{}:t;Pn()||Ue(!1);let{basename:n,navigator:a}=j.useContext(us),{hash:l,pathname:o,search:i}=Pg(e,{relative:r}),c=o;return n!=="/"&&(c=o==="/"?n:ts([n,o])),a.createHref({pathname:c,search:i,hash:l})}function Pn(){return j.useContext(ai)!=null}function In(){return Pn()||Ue(!1),j.useContext(ai).location}function Eg(e){j.useContext(us).static||j.useLayoutEffect(e)}function Vu(){let{isDataRoute:e}=j.useContext(Rr);return e?Qw():Aw()}function Aw(){Pn()||Ue(!1);let e=j.useContext(Wu),{basename:t,future:r,navigator:n}=j.useContext(us),{matches:a}=j.useContext(Rr),{pathname:l}=In(),o=JSON.stringify(Bu(a,r.v7_relativeSplatPath)),i=j.useRef(!1);return Eg(()=>{i.current=!0}),j.useCallback(function(h,u){if(u===void 0&&(u={}),!i.current)return;if(typeof h=="number"){n.go(h);return}let d=zu(h,JSON.parse(o),l,u.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:ts([t,d.pathname])),(u.replace?n.replace:n.push)(d,u.state,u)},[t,n,o,l,e])}function $w(){let{matches:e}=j.useContext(Rr),t=e[e.length-1];return t?t.params:{}}function Pg(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=j.useContext(us),{matches:a}=j.useContext(Rr),{pathname:l}=In(),o=JSON.stringify(Bu(a,n.v7_relativeSplatPath));return j.useMemo(()=>zu(e,JSON.parse(o),l,r==="path"),[e,o,l,r])}function Mw(e,t){return Fw(e,t)}function Fw(e,t,r,n){Pn()||Ue(!1);let{navigator:a}=j.useContext(us),{matches:l}=j.useContext(Rr),o=l[l.length-1],i=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let h=In(),u;if(t){var d;let b=typeof t=="string"?En(t):t;c==="/"||(d=b.pathname)!=null&&d.startsWith(c)||Ue(!1),u=b}else u=h;let m=u.pathname||"/",p=m;if(c!=="/"){let b=c.replace(/^\//,"").split("/");p="/"+m.replace(/^\//,"").split("/").slice(b.length).join("/")}let f=hw(e,{pathname:p}),x=Vw(f&&f.map(b=>Object.assign({},b,{params:Object.assign({},i,b.params),pathname:ts([c,a.encodeLocation?a.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:ts([c,a.encodeLocation?a.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),l,r,n);return t&&x?j.createElement(ai.Provider,{value:{location:Oa({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Gr.Pop}},x):x}function Uw(){let e=Kw(),t=Tw(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},t),r?j.createElement("pre",{style:a},r):null,null)}const Bw=j.createElement(Uw,null);class zw extends j.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?j.createElement(Rr.Provider,{value:this.props.routeContext},j.createElement(Dg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Ww(e){let{routeContext:t,match:r,children:n}=e,a=j.useContext(Wu);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),j.createElement(Rr.Provider,{value:t},n)}function Vw(e,t,r,n){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var l;if(!r)return null;if(r.errors)e=r.matches;else if((l=n)!=null&&l.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,i=(a=r)==null?void 0:a.errors;if(i!=null){let u=o.findIndex(d=>d.route.id&&(i==null?void 0:i[d.route.id])!==void 0);u>=0||Ue(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,h=-1;if(r&&n&&n.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(h=u),d.route.id){let{loaderData:m,errors:p}=r,f=d.route.loader&&m[d.route.id]===void 0&&(!p||p[d.route.id]===void 0);if(d.route.lazy||f){c=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}return o.reduceRight((u,d,m)=>{let p,f=!1,x=null,b=null;r&&(p=i&&d.route.id?i[d.route.id]:void 0,x=d.route.errorElement||Bw,c&&(h<0&&m===0?(f=!0,b=null):h===m&&(f=!0,b=d.route.hydrateFallbackElement||null)));let g=t.concat(o.slice(0,m+1)),v=()=>{let y;return p?y=x:f?y=b:d.route.Component?y=j.createElement(d.route.Component,null):d.route.element?y=d.route.element:y=u,j.createElement(Ww,{match:d,routeContext:{outlet:u,matches:g,isDataRoute:r!=null},children:y})};return r&&(d.route.ErrorBoundary||d.route.errorElement||m===0)?j.createElement(zw,{location:r.location,revalidation:r.revalidation,component:x,error:p,children:v(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):v()},null)}var Ig=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Ig||{}),Do=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Do||{});function qw(e){let t=j.useContext(Wu);return t||Ue(!1),t}function Gw(e){let t=j.useContext(Ow);return t||Ue(!1),t}function Hw(e){let t=j.useContext(Rr);return t||Ue(!1),t}function Tg(e){let t=Hw(),r=t.matches[t.matches.length-1];return r.route.id||Ue(!1),r.route.id}function Kw(){var e;let t=j.useContext(Dg),r=Gw(Do.UseRouteError),n=Tg(Do.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function Qw(){let{router:e}=qw(Ig.UseNavigateStable),t=Tg(Do.UseNavigateStable),r=j.useRef(!1);return Eg(()=>{r.current=!0}),j.useCallback(function(a,l){l===void 0&&(l={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,Oa({fromRouteId:t},l)))},[e,t])}function Yw(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function G0(e){let{to:t,replace:r,state:n,relative:a}=e;Pn()||Ue(!1);let{future:l,static:o}=j.useContext(us),{matches:i}=j.useContext(Rr),{pathname:c}=In(),h=Vu(),u=zu(t,Bu(i,l.v7_relativeSplatPath),c,a==="path"),d=JSON.stringify(u);return j.useEffect(()=>h(JSON.parse(d),{replace:r,state:n,relative:a}),[h,d,a,r,n]),null}function fe(e){Ue(!1)}function Jw(e){let{basename:t="/",children:r=null,location:n,navigationType:a=Gr.Pop,navigator:l,static:o=!1,future:i}=e;Pn()&&Ue(!1);let c=t.replace(/^\/*/,"/"),h=j.useMemo(()=>({basename:c,navigator:l,static:o,future:Oa({v7_relativeSplatPath:!1},i)}),[c,i,l,o]);typeof n=="string"&&(n=En(n));let{pathname:u="/",search:d="",hash:m="",state:p=null,key:f="default"}=n,x=j.useMemo(()=>{let b=Uu(u,c);return b==null?null:{location:{pathname:b,search:d,hash:m,state:p,key:f},navigationType:a}},[c,u,d,m,p,f,a]);return x==null?null:j.createElement(us.Provider,{value:h},j.createElement(ai.Provider,{children:r,value:x}))}function H0(e){let{children:t,location:r}=e;return Mw(Nd(t),r)}new Promise(()=>{});function Nd(e,t){t===void 0&&(t=[]);let r=[];return j.Children.forEach(e,(n,a)=>{if(!j.isValidElement(n))return;let l=[...t,a];if(n.type===j.Fragment){r.push.apply(r,Nd(n.props.children,l));return}n.type!==fe&&Ue(!1),!n.props.index||!n.props.children||Ue(!1);let o={id:n.props.id||l.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Nd(n.props.children,l)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _d(){return _d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_d.apply(this,arguments)}function Xw(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,l;for(l=0;l<n.length;l++)a=n[l],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function Zw(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function ej(e,t){return e.button===0&&(!t||t==="_self")&&!Zw(e)}const tj=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],rj="6";try{window.__reactRouterVersion=rj}catch{}const sj="startTransition",K0=Jv[sj];function Q0(e){let{basename:t,children:r,future:n,window:a}=e,l=j.useRef();l.current==null&&(l.current=cw({window:a,v5Compat:!0}));let o=l.current,[i,c]=j.useState({action:o.action,location:o.location}),{v7_startTransition:h}=n||{},u=j.useCallback(d=>{h&&K0?K0(()=>c(d)):c(d)},[c,h]);return j.useLayoutEffect(()=>o.listen(u),[o,u]),j.useEffect(()=>Yw(n),[n]),j.createElement(Jw,{basename:t,children:r,location:i.location,navigationType:i.action,navigator:o,future:n})}const nj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",aj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Eo=j.forwardRef(function(t,r){let{onClick:n,relative:a,reloadDocument:l,replace:o,state:i,target:c,to:h,preventScrollReset:u,viewTransition:d}=t,m=Xw(t,tj),{basename:p}=j.useContext(us),f,x=!1;if(typeof h=="string"&&aj.test(h)&&(f=h,nj))try{let y=new URL(window.location.href),w=h.startsWith("//")?new URL(y.protocol+h):new URL(h),N=Uu(w.pathname,p);w.origin===y.origin&&N!=null?h=N+w.search+w.hash:x=!0}catch{}let b=Lw(h,{relative:a}),g=lj(h,{replace:o,state:i,target:c,preventScrollReset:u,relative:a,viewTransition:d});function v(y){n&&n(y),y.defaultPrevented||g(y)}return j.createElement("a",_d({},m,{href:f||b,onClick:x||l?n:v,ref:r,target:c}))});var Y0;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Y0||(Y0={}));var J0;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(J0||(J0={}));function lj(e,t){let{target:r,replace:n,state:a,preventScrollReset:l,relative:o,viewTransition:i}=t===void 0?{}:t,c=Vu(),h=In(),u=Pg(e,{relative:o});return j.useCallback(d=>{if(ej(d,r)){d.preventDefault();let m=n!==void 0?n:Co(h)===Co(u);c(e,{replace:m,state:a,preventScrollReset:l,relative:o,viewTransition:i})}},[h,c,u,n,a,r,e,l,o,i])}const oj="modulepreload",ij=function(e){return"/"+e},X0={},Qa=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),i=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(r.map(c=>{if(c=ij(c),c in X0)return;X0[c]=!0;const h=c.endsWith(".css"),u=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const d=document.createElement("link");if(d.rel=h?"stylesheet":oj,h||(d.as="script"),d.crossOrigin="",d.href=c,i&&d.setAttribute("nonce",i),document.head.appendChild(d),h)return new Promise((m,p)=>{d.addEventListener("load",m),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function l(o){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=o,window.dispatchEvent(i),!i.defaultPrevented)throw o}return a.then(o=>{for(const i of o||[])i.status==="rejected"&&l(i.reason);return t().catch(l)})},cj=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Qa(async()=>{const{default:n}=await Promise.resolve().then(()=>Tn);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class qu extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class dj extends qu{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Z0 extends qu{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class em extends qu{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Sd;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Sd||(Sd={}));var uj=function(e,t,r,n){function a(l){return l instanceof r?l:new r(function(o){o(l)})}return new(r||(r=Promise))(function(l,o){function i(u){try{h(n.next(u))}catch(d){o(d)}}function c(u){try{h(n.throw(u))}catch(d){o(d)}}function h(u){u.done?l(u.value):a(u.value).then(i,c)}h((n=n.apply(e,t||[])).next())})};class hj{constructor(t,{headers:r={},customFetch:n,region:a=Sd.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=cj(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return uj(this,void 0,void 0,function*(){try{const{headers:a,method:l,body:o}=r;let i={},{region:c}=r;c||(c=this.region);const h=new URL(`${this.url}/${t}`);c&&c!=="any"&&(i["x-region"]=c,h.searchParams.set("forceFunctionRegion",c));let u;o&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(i["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(i["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(i["Content-Type"]="application/json",u=JSON.stringify(o)));const d=yield this.fetch(h.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},i),this.headers),a),body:u}).catch(x=>{throw new dj(x)}),m=d.headers.get("x-relay-error");if(m&&m==="true")throw new Z0(d);if(!d.ok)throw new em(d);let p=((n=d.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),f;return p==="application/json"?f=yield d.json():p==="application/octet-stream"?f=yield d.blob():p==="text/event-stream"?f=d:p==="multipart/form-data"?f=yield d.formData():f=yield d.text(),{data:f,error:null,response:d}}catch(a){return{data:null,error:a,response:a instanceof em||a instanceof Z0?a.context:void 0}}})}}var vt={},Gu={},li={},Ya={},oi={},ii={},mj=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},bn=mj();const pj=bn.fetch,Rg=bn.fetch.bind(bn),Og=bn.Headers,fj=bn.Request,gj=bn.Response,Tn=Object.freeze(Object.defineProperty({__proto__:null,Headers:Og,Request:fj,Response:gj,default:Rg,fetch:pj},Symbol.toStringTag,{value:"Module"})),xj=Lv(Tn);var ci={};Object.defineProperty(ci,"__esModule",{value:!0});let vj=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};ci.default=vj;var Lg=Gt&&Gt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ii,"__esModule",{value:!0});const yj=Lg(xj),bj=Lg(ci);let wj=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=yj.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=Object.assign({},this.headers),this.headers[t]=r,this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let a=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{var o,i,c;let h=null,u=null,d=null,m=l.status,p=l.statusText;if(l.ok){if(this.method!=="HEAD"){const g=await l.text();g===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=g:u=JSON.parse(g))}const x=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),b=(i=l.headers.get("content-range"))===null||i===void 0?void 0:i.split("/");x&&b&&b.length>1&&(d=parseInt(b[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(h={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,d=null,m=406,p="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const x=await l.text();try{h=JSON.parse(x),Array.isArray(h)&&l.status===404&&(u=[],h=null,m=200,p="OK")}catch{l.status===404&&x===""?(m=204,p="No Content"):h={message:x}}if(h&&this.isMaybeSingle&&(!((c=h==null?void 0:h.details)===null||c===void 0)&&c.includes("0 rows"))&&(h=null,m=200,p="OK"),h&&this.shouldThrowOnError)throw new bj.default(h)}return{error:h,data:u,count:d,status:m,statusText:p}});return this.shouldThrowOnError||(a=a.catch(l=>{var o,i,c;return{error:{message:`${(o=l==null?void 0:l.name)!==null&&o!==void 0?o:"FetchError"}: ${l==null?void 0:l.message}`,details:`${(i=l==null?void 0:l.stack)!==null&&i!==void 0?i:""}`,hint:"",code:`${(c=l==null?void 0:l.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),a.then(t,r)}returns(){return this}overrideTypes(){return this}};ii.default=wj;var jj=Gt&&Gt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(oi,"__esModule",{value:!0});const Nj=jj(ii);let _j=class extends Nj.default{select(t){let r=!1;const n=(t??"*").split("").map(a=>/\s/.test(a)&&!r?"":(a==='"'&&(r=!r),a)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:a,referencedTable:l=a}={}){const o=l?`${l}.order`:"order",i=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${i?`${i},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const a=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(a,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:a=n}={}){const l=typeof a>"u"?"offset":`${a}.offset`,o=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${t}`),this.url.searchParams.set(o,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:a=!1,wal:l=!1,format:o="text"}={}){var i;const c=[t?"analyze":null,r?"verbose":null,n?"settings":null,a?"buffers":null,l?"wal":null].filter(Boolean).join("|"),h=(i=this.headers.Accept)!==null&&i!==void 0?i:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${h}"; options=${c};`,o==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};oi.default=_j;var Sj=Gt&&Gt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ya,"__esModule",{value:!0});const kj=Sj(oi);let Cj=class extends kj.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:a}={}){let l="";a==="plain"?l="pl":a==="phrase"?l="ph":a==="websearch"&&(l="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${l}fts${o}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const a=n?`${n}.or`:"or";return this.url.searchParams.append(a,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};Ya.default=Cj;var Dj=Gt&&Gt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(li,"__esModule",{value:!0});const Gn=Dj(Ya);let Ej=class{constructor(t,{headers:r={},schema:n,fetch:a}){this.url=t,this.headers=r,this.schema=n,this.fetch=a}select(t,{head:r=!1,count:n}={}){const a=r?"HEAD":"GET";let l=!1;const o=(t??"*").split("").map(i=>/\s/.test(i)&&!l?"":(i==='"'&&(l=!l),i)).join("");return this.url.searchParams.set("select",o),n&&(this.headers.Prefer=`count=${n}`),new Gn.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:r,defaultToNull:n=!0}={}){const a="POST",l=[];if(this.headers.Prefer&&l.push(this.headers.Prefer),r&&l.push(`count=${r}`),n||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const o=t.reduce((i,c)=>i.concat(Object.keys(c)),[]);if(o.length>0){const i=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",i.join(","))}}return new Gn.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:a,defaultToNull:l=!0}={}){const o="POST",i=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&i.push(this.headers.Prefer),a&&i.push(`count=${a}`),l||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(t)){const c=t.reduce((h,u)=>h.concat(Object.keys(u)),[]);if(c.length>0){const h=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",h.join(","))}}return new Gn.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:r}={}){const n="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),r&&a.push(`count=${r}`),this.headers.Prefer=a.join(","),new Gn.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const r="DELETE",n=[];return t&&n.push(`count=${t}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new Gn.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};li.default=Ej;var di={},ui={};Object.defineProperty(ui,"__esModule",{value:!0});ui.version=void 0;ui.version="0.0.0-automated";Object.defineProperty(di,"__esModule",{value:!0});di.DEFAULT_HEADERS=void 0;const Pj=ui;di.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Pj.version}`};var Ag=Gt&&Gt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Gu,"__esModule",{value:!0});const Ij=Ag(li),Tj=Ag(Ya),Rj=di;let Oj=class $g{constructor(t,{headers:r={},schema:n,fetch:a}={}){this.url=t,this.headers=Object.assign(Object.assign({},Rj.DEFAULT_HEADERS),r),this.schemaName=n,this.fetch=a}from(t){const r=new URL(`${this.url}/${t}`);return new Ij.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new $g(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:a=!1,count:l}={}){let o;const i=new URL(`${this.url}/rpc/${t}`);let c;n||a?(o=n?"HEAD":"GET",Object.entries(r).filter(([u,d])=>d!==void 0).map(([u,d])=>[u,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([u,d])=>{i.searchParams.append(u,d)})):(o="POST",c=r);const h=Object.assign({},this.headers);return l&&(h.Prefer=`count=${l}`),new Tj.default({method:o,url:i,headers:h,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};Gu.default=Oj;var Rn=Gt&&Gt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(vt,"__esModule",{value:!0});vt.PostgrestError=vt.PostgrestBuilder=vt.PostgrestTransformBuilder=vt.PostgrestFilterBuilder=vt.PostgrestQueryBuilder=vt.PostgrestClient=void 0;const Mg=Rn(Gu);vt.PostgrestClient=Mg.default;const Fg=Rn(li);vt.PostgrestQueryBuilder=Fg.default;const Ug=Rn(Ya);vt.PostgrestFilterBuilder=Ug.default;const Bg=Rn(oi);vt.PostgrestTransformBuilder=Bg.default;const zg=Rn(ii);vt.PostgrestBuilder=zg.default;const Wg=Rn(ci);vt.PostgrestError=Wg.default;var Lj=vt.default={PostgrestClient:Mg.default,PostgrestQueryBuilder:Fg.default,PostgrestFilterBuilder:Ug.default,PostgrestTransformBuilder:Bg.default,PostgrestBuilder:zg.default,PostgrestError:Wg.default};const{PostgrestClient:Aj,PostgrestQueryBuilder:$3,PostgrestFilterBuilder:M3,PostgrestTransformBuilder:F3,PostgrestBuilder:U3,PostgrestError:B3}=Lj;function $j(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const Mj=$j(),Fj="2.11.15",Uj=`realtime-js/${Fj}`,Bj="1.0.0",Vg=1e4,zj=1e3;var da;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(da||(da={}));var lt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(lt||(lt={}));var tr;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(tr||(tr={}));var kd;(function(e){e.websocket="websocket"})(kd||(kd={}));var bs;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(bs||(bs={}));class Wj{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const a=r.getUint8(1),l=r.getUint8(2);let o=this.HEADER_LENGTH+2;const i=n.decode(t.slice(o,o+a));o=o+a;const c=n.decode(t.slice(o,o+l));o=o+l;const h=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{ref:null,topic:i,event:c,payload:h}}}class qg{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Se;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Se||(Se={}));const tm=(e,t,r={})=>{var n;const a=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((l,o)=>(l[o]=Vj(o,e,t,a),l),{})},Vj=(e,t,r,n)=>{const a=t.find(i=>i.name===e),l=a==null?void 0:a.type,o=r[e];return l&&!n.includes(l)?Gg(l,o):Cd(o)},Gg=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return Kj(t,r)}switch(e){case Se.bool:return qj(t);case Se.float4:case Se.float8:case Se.int2:case Se.int4:case Se.int8:case Se.numeric:case Se.oid:return Gj(t);case Se.json:case Se.jsonb:return Hj(t);case Se.timestamp:return Qj(t);case Se.abstime:case Se.date:case Se.daterange:case Se.int4range:case Se.int8range:case Se.money:case Se.reltime:case Se.text:case Se.time:case Se.timestamptz:case Se.timetz:case Se.tsrange:case Se.tstzrange:return Cd(t);default:return Cd(t)}},Cd=e=>e,qj=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Gj=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Hj=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},Kj=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let l;const o=e.slice(1,r);try{l=JSON.parse("["+o+"]")}catch{l=o?o.split(","):[]}return l.map(i=>Gg(t,i))}return e},Qj=e=>typeof e=="string"?e.replace(" ","T"):e,Hg=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class ic{constructor(t,r,n={},a=Vg){this.channel=t,this.event=r,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var rm;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(rm||(rm={}));class ua{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:l,onLeave:o,onSync:i}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ua.syncState(this.state,a,l,o),this.pendingDiffs.forEach(c=>{this.state=ua.syncDiff(this.state,c,l,o)}),this.pendingDiffs=[],i()}),this.channel._on(n.diff,{},a=>{const{onJoin:l,onLeave:o,onSync:i}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=ua.syncDiff(this.state,a,l,o),i())}),this.onJoin((a,l,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:l,newPresences:o})}),this.onLeave((a,l,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:l,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,a){const l=this.cloneDeep(t),o=this.transformState(r),i={},c={};return this.map(l,(h,u)=>{o[h]||(c[h]=u)}),this.map(o,(h,u)=>{const d=l[h];if(d){const m=u.map(b=>b.presence_ref),p=d.map(b=>b.presence_ref),f=u.filter(b=>p.indexOf(b.presence_ref)<0),x=d.filter(b=>m.indexOf(b.presence_ref)<0);f.length>0&&(i[h]=f),x.length>0&&(c[h]=x)}else i[h]=u}),this.syncDiff(l,{joins:i,leaves:c},n,a)}static syncDiff(t,r,n,a){const{joins:l,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(l,(i,c)=>{var h;const u=(h=t[i])!==null&&h!==void 0?h:[];if(t[i]=this.cloneDeep(c),u.length>0){const d=t[i].map(p=>p.presence_ref),m=u.filter(p=>d.indexOf(p.presence_ref)<0);t[i].unshift(...m)}n(i,u,c)}),this.map(o,(i,c)=>{let h=t[i];if(!h)return;const u=c.map(d=>d.presence_ref);h=h.filter(d=>u.indexOf(d.presence_ref)<0),t[i]=h,a(i,h,c),h.length===0&&delete t[i]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const a=t[n];return"metas"in a?r[n]=a.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):r[n]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var sm;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(sm||(sm={}));var nm;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(nm||(nm={}));var jr;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(jr||(jr={}));class Hu{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=lt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new ic(this,tr.join,this.params,this.timeout),this.rejoinTimer=new qg(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=lt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=lt.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=lt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=lt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(tr.reply,{},(a,l)=>{this._trigger(this._replyEventName(l),a)}),this.presence=new ua(this),this.broadcastEndpointURL=Hg(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,a;if(this.socket.isConnected()||this.socket.connect(),this.state==lt.closed){const{config:{broadcast:l,presence:o,private:i}}=this.params;this._onError(u=>t==null?void 0:t(jr.CHANNEL_ERROR,u)),this._onClose(()=>t==null?void 0:t(jr.CLOSED));const c={},h={broadcast:l,presence:o,postgres_changes:(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(u=>u.filter))!==null&&a!==void 0?a:[],private:i};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:h},c)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:u})=>{var d;if(this.socket.setAuth(),u===void 0){t==null||t(jr.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,p=(d=m==null?void 0:m.length)!==null&&d!==void 0?d:0,f=[];for(let x=0;x<p;x++){const b=m[x],{filter:{event:g,schema:v,table:y,filter:w}}=b,N=u&&u[x];if(N&&N.event===g&&N.schema===v&&N.table===y&&N.filter===w)f.push(Object.assign(Object.assign({},b),{id:N.id}));else{this.unsubscribe(),this.state=lt.errored,t==null||t(jr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=f,t&&t(jr.SUBSCRIBED);return}}).receive("error",u=>{this.state=lt.errored,t==null||t(jr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(jr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this._on(t,r,n)}async send(t,r={}){var n,a;if(!this._canPush()&&t.type==="broadcast"){const{event:l,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:o,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=h.body)===null||a===void 0?void 0:a.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var o,i,c;const h=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(i=(o=this.params)===null||o===void 0?void 0:o.config)===null||i===void 0?void 0:i.broadcast)===null||c===void 0)&&c.ack)&&l("ok"),h.receive("ok",()=>l("ok")),h.receive("error",()=>l("error")),h.receive("timeout",()=>l("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=lt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(tr.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new ic(this,tr.leave,{},t),n.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,r,n){const a=new AbortController,l=setTimeout(()=>a.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(l),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new ic(this,t,r,n);return this._canPush()?a.send():(a.startTimeout(),this.pushBuffer.push(a)),a}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var a,l;const o=t.toLocaleLowerCase(),{close:i,error:c,leave:h,join:u}=tr;if(n&&[i,c,h,u].indexOf(o)>=0&&n!==this._joinRef())return;let m=this._onMessage(o,r,n);if(r&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(p=>{var f,x,b;return((f=p.filter)===null||f===void 0?void 0:f.event)==="*"||((b=(x=p.filter)===null||x===void 0?void 0:x.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(p=>p.callback(m,n)):(l=this.bindings[o])===null||l===void 0||l.filter(p=>{var f,x,b,g,v,y;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const w=p.id,N=(f=p.filter)===null||f===void 0?void 0:f.event;return w&&((x=r.ids)===null||x===void 0?void 0:x.includes(w))&&(N==="*"||(N==null?void 0:N.toLocaleLowerCase())===((b=r.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const w=(v=(g=p==null?void 0:p.filter)===null||g===void 0?void 0:g.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return w==="*"||w===((y=r==null?void 0:r.event)===null||y===void 0?void 0:y.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof m=="object"&&"ids"in m){const f=m.data,{schema:x,table:b,commit_timestamp:g,type:v,errors:y}=f;m=Object.assign(Object.assign({},{schema:x,table:b,commit_timestamp:g,eventType:v,new:{},old:{},errors:y}),this._getPayloadRecords(f))}p.callback(m,n)})}_isClosed(){return this.state===lt.closed}_isJoined(){return this.state===lt.joined}_isJoining(){return this.state===lt.joining}_isLeaving(){return this.state===lt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const a=t.toLocaleLowerCase(),l={type:a,filter:r,callback:n};return this.bindings[a]?this.bindings[a].push(l):this.bindings[a]=[l],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(a=>{var l;return!(((l=a.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===n&&Hu.isEqual(a.filter,r))}),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(tr.close,{},t)}_onError(t){this._on(tr.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=lt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=tm(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=tm(t.columns,t.old_record)),r}}const am=()=>{},Yj=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Jj{constructor(t,r){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Vg,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=am,this.ref=0,this.logger=am,this.conn=null,this.sendBuffer=[],this.serializer=new Wj,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=l=>{let o;return l?o=l:typeof fetch>"u"?o=(...i)=>Qa(async()=>{const{default:c}=await Promise.resolve().then(()=>Tn);return{default:c}},void 0).then(({default:c})=>c(...i)):o=fetch,(...i)=>o(...i)},this.endPoint=`${t}/${kd.websocket}`,this.httpEndpoint=Hg(t),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const a=(n=r==null?void 0:r.params)===null||n===void 0?void 0:n.apikey;if(a&&(this.accessTokenValue=a,this.apiKey=a),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:l=>[1e3,2e3,5e3,1e4][l-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(l,o)=>o(JSON.stringify(l)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new qg(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=Mj),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Bj}))}disconnect(t,r){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(n=>n.teardown()))}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case da.connecting:return bs.Connecting;case da.open:return bs.Open;case da.closing:return bs.Closing;default:return bs.Closed}}isConnected(){return this.connectionState()===bs.Open}channel(t,r={config:{}}){const n=`realtime:${t}`,a=this.getChannels().find(l=>l.topic===n);if(a)return a;{const l=new Hu(`realtime:${t}`,r,this);return this.channels.push(l),l}}push(t){const{topic:r,event:n,payload:a,ref:l}=t,o=()=>{this.encode(t,i=>{var c;(c=this.conn)===null||c===void 0||c.send(i)})};this.log("push",`${r} ${n} (${l})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){let r=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const a={access_token:r,version:Uj};r&&n.updateJoinPayload(a),n.joinedOnce&&n._isJoined()&&n._push(tr.access_token,{access_token:r})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(zj,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,r=>{let{topic:n,event:a,payload:l,ref:o}=r;n==="phoenix"&&a==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${l.status||""} ${n} ${a} ${o&&"("+o+")"||""}`,l),Array.from(this.channels).filter(i=>i._isMember(n)).forEach(i=>i._trigger(a,l,o)),this.stateChangeCallbacks.message.forEach(i=>i(r))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(t=>t())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(t))}_onConnError(t){this.log("transport",`${t}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(tr.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${n}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([Yj],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}}class Ku extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function qe(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class Xj extends Ku{constructor(t,r){super(t),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Dd extends Ku{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var Zj=function(e,t,r,n){function a(l){return l instanceof r?l:new r(function(o){o(l)})}return new(r||(r=Promise))(function(l,o){function i(u){try{h(n.next(u))}catch(d){o(d)}}function c(u){try{h(n.throw(u))}catch(d){o(d)}}function h(u){u.done?l(u.value):a(u.value).then(i,c)}h((n=n.apply(e,t||[])).next())})};const Kg=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Qa(async()=>{const{default:n}=await Promise.resolve().then(()=>Tn);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},eN=()=>Zj(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Qa(()=>Promise.resolve().then(()=>Tn),void 0)).Response:Response}),Ed=e=>{if(Array.isArray(e))return e.map(r=>Ed(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const a=r.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));t[a]=Ed(n)}),t};var Ls=function(e,t,r,n){function a(l){return l instanceof r?l:new r(function(o){o(l)})}return new(r||(r=Promise))(function(l,o){function i(u){try{h(n.next(u))}catch(d){o(d)}}function c(u){try{h(n.throw(u))}catch(d){o(d)}}function h(u){u.done?l(u.value):a(u.value).then(i,c)}h((n=n.apply(e,t||[])).next())})};const cc=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),tN=(e,t,r)=>Ls(void 0,void 0,void 0,function*(){const n=yield eN();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(a=>{t(new Xj(cc(a),e.status||500))}).catch(a=>{t(new Dd(cc(a),a))}):t(new Dd(cc(e),e))}),rN=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),n&&(a.body=JSON.stringify(n)),Object.assign(Object.assign({},a),r))};function Ja(e,t,r,n,a,l){return Ls(this,void 0,void 0,function*(){return new Promise((o,i)=>{e(r,rN(t,n,a,l)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>tN(c,i,n))})})}function Po(e,t,r,n){return Ls(this,void 0,void 0,function*(){return Ja(e,"GET",t,r,n)})}function Ur(e,t,r,n,a){return Ls(this,void 0,void 0,function*(){return Ja(e,"POST",t,n,a,r)})}function sN(e,t,r,n,a){return Ls(this,void 0,void 0,function*(){return Ja(e,"PUT",t,n,a,r)})}function nN(e,t,r,n){return Ls(this,void 0,void 0,function*(){return Ja(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function Qg(e,t,r,n,a){return Ls(this,void 0,void 0,function*(){return Ja(e,"DELETE",t,n,a,r)})}var ft=function(e,t,r,n){function a(l){return l instanceof r?l:new r(function(o){o(l)})}return new(r||(r=Promise))(function(l,o){function i(u){try{h(n.next(u))}catch(d){o(d)}}function c(u){try{h(n.throw(u))}catch(d){o(d)}}function h(u){u.done?l(u.value):a(u.value).then(i,c)}h((n=n.apply(e,t||[])).next())})};const aN={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},lm={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class lN{constructor(t,r={},n,a){this.url=t,this.headers=r,this.bucketId=n,this.fetch=Kg(a)}uploadOrUpdate(t,r,n,a){return ft(this,void 0,void 0,function*(){try{let l;const o=Object.assign(Object.assign({},lm),a);let i=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",o.cacheControl),c&&l.append("metadata",this.encodeMetadata(c)),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",o.cacheControl),c&&l.append("metadata",this.encodeMetadata(c))):(l=n,i["cache-control"]=`max-age=${o.cacheControl}`,i["content-type"]=o.contentType,c&&(i["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),a!=null&&a.headers&&(i=Object.assign(Object.assign({},i),a.headers));const h=this._removeEmptyFolders(r),u=this._getFinalPath(h),d=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:t,body:l,headers:i},o!=null&&o.duplex?{duplex:o.duplex}:{})),m=yield d.json();return d.ok?{data:{path:h,id:m.Id,fullPath:m.Key},error:null}:{data:null,error:m}}catch(l){if(qe(l))return{data:null,error:l};throw l}})}upload(t,r,n){return ft(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,a){return ft(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(t),o=this._getFinalPath(l),i=new URL(this.url+`/object/upload/sign/${o}`);i.searchParams.set("token",r);try{let c;const h=Object.assign({upsert:lm.upsert},a),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(h.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",h.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",h.cacheControl)):(c=n,u["cache-control"]=`max-age=${h.cacheControl}`,u["content-type"]=h.contentType);const d=yield this.fetch(i.toString(),{method:"PUT",body:c,headers:u}),m=yield d.json();return d.ok?{data:{path:l,fullPath:m.Key},error:null}:{data:null,error:m}}catch(c){if(qe(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return ft(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const a=Object.assign({},this.headers);r!=null&&r.upsert&&(a["x-upsert"]="true");const l=yield Ur(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:a}),o=new URL(this.url+l.url),i=o.searchParams.get("token");if(!i)throw new Ku("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:i},error:null}}catch(n){if(qe(n))return{data:null,error:n};throw n}})}update(t,r,n){return ft(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return ft(this,void 0,void 0,function*(){try{return{data:yield Ur(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(qe(a))return{data:null,error:a};throw a}})}copy(t,r,n){return ft(this,void 0,void 0,function*(){try{return{data:{path:(yield Ur(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(qe(a))return{data:null,error:a};throw a}})}createSignedUrl(t,r,n){return ft(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),l=yield Ur(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${o}`)},{data:l,error:null}}catch(a){if(qe(a))return{data:null,error:a};throw a}})}createSignedUrls(t,r,n){return ft(this,void 0,void 0,function*(){try{const a=yield Ur(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${l}`):null})),error:null}}catch(a){if(qe(a))return{data:null,error:a};throw a}})}download(t,r){return ft(this,void 0,void 0,function*(){const a=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=l?`?${l}`:"";try{const i=this._getFinalPath(t);return{data:yield(yield Po(this.fetch,`${this.url}/${a}/${i}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(i){if(qe(i))return{data:null,error:i};throw i}})}info(t){return ft(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield Po(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Ed(n),error:null}}catch(n){if(qe(n))return{data:null,error:n};throw n}})}exists(t){return ft(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield nN(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(qe(n)&&n instanceof Dd){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),a=[],l=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";l!==""&&a.push(l);const i=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&a.push(c);let h=a.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${n}${h}`)}}}remove(t){return ft(this,void 0,void 0,function*(){try{return{data:yield Qg(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(qe(r))return{data:null,error:r};throw r}})}list(t,r,n){return ft(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},aN),r),{prefix:t||""});return{data:yield Ur(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(qe(a))return{data:null,error:a};throw a}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const oN="2.7.1",iN={"X-Client-Info":`storage-js/${oN}`};var Fs=function(e,t,r,n){function a(l){return l instanceof r?l:new r(function(o){o(l)})}return new(r||(r=Promise))(function(l,o){function i(u){try{h(n.next(u))}catch(d){o(d)}}function c(u){try{h(n.throw(u))}catch(d){o(d)}}function h(u){u.done?l(u.value):a(u.value).then(i,c)}h((n=n.apply(e,t||[])).next())})};class cN{constructor(t,r={},n){this.url=t,this.headers=Object.assign(Object.assign({},iN),r),this.fetch=Kg(n)}listBuckets(){return Fs(this,void 0,void 0,function*(){try{return{data:yield Po(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(qe(t))return{data:null,error:t};throw t}})}getBucket(t){return Fs(this,void 0,void 0,function*(){try{return{data:yield Po(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(qe(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return Fs(this,void 0,void 0,function*(){try{return{data:yield Ur(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(qe(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return Fs(this,void 0,void 0,function*(){try{return{data:yield sN(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(qe(n))return{data:null,error:n};throw n}})}emptyBucket(t){return Fs(this,void 0,void 0,function*(){try{return{data:yield Ur(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(qe(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Fs(this,void 0,void 0,function*(){try{return{data:yield Qg(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(qe(r))return{data:null,error:r};throw r}})}}class dN extends cN{constructor(t,r={},n){super(t,r,n)}from(t){return new lN(this.url,this.headers,t,this.fetch)}}const uN="2.50.3";let ea="";typeof Deno<"u"?ea="deno":typeof document<"u"?ea="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ea="react-native":ea="node";const hN={"X-Client-Info":`supabase-js-${ea}/${uN}`},mN={headers:hN},pN={schema:"public"},fN={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},gN={};var xN=function(e,t,r,n){function a(l){return l instanceof r?l:new r(function(o){o(l)})}return new(r||(r=Promise))(function(l,o){function i(u){try{h(n.next(u))}catch(d){o(d)}}function c(u){try{h(n.throw(u))}catch(d){o(d)}}function h(u){u.done?l(u.value):a(u.value).then(i,c)}h((n=n.apply(e,t||[])).next())})};const vN=e=>{let t;return e?t=e:typeof fetch>"u"?t=Rg:t=fetch,(...r)=>t(...r)},yN=()=>typeof Headers>"u"?Og:Headers,bN=(e,t,r)=>{const n=vN(r),a=yN();return(l,o)=>xN(void 0,void 0,void 0,function*(){var i;const c=(i=yield t())!==null&&i!==void 0?i:e;let h=new a(o==null?void 0:o.headers);return h.has("apikey")||h.set("apikey",e),h.has("Authorization")||h.set("Authorization",`Bearer ${c}`),n(l,Object.assign(Object.assign({},o),{headers:h}))})};var wN=function(e,t,r,n){function a(l){return l instanceof r?l:new r(function(o){o(l)})}return new(r||(r=Promise))(function(l,o){function i(u){try{h(n.next(u))}catch(d){o(d)}}function c(u){try{h(n.throw(u))}catch(d){o(d)}}function h(u){u.done?l(u.value):a(u.value).then(i,c)}h((n=n.apply(e,t||[])).next())})};function jN(e){return e.endsWith("/")?e:e+"/"}function NN(e,t){var r,n;const{db:a,auth:l,realtime:o,global:i}=e,{db:c,auth:h,realtime:u,global:d}=t,m={db:Object.assign(Object.assign({},c),a),auth:Object.assign(Object.assign({},h),l),realtime:Object.assign(Object.assign({},u),o),global:Object.assign(Object.assign(Object.assign({},d),i),{headers:Object.assign(Object.assign({},(r=d==null?void 0:d.headers)!==null&&r!==void 0?r:{}),(n=i==null?void 0:i.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>wN(this,void 0,void 0,function*(){return""})};return e.accessToken?m.accessToken=e.accessToken:delete m.accessToken,m}const Yg="2.70.0",Gs=30*1e3,Pd=3,dc=Pd*Gs,_N="http://localhost:9999",SN="supabase.auth.token",kN={"X-Client-Info":`gotrue-js/${Yg}`},Id="X-Supabase-Api-Version",Jg={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},CN=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,DN=6e5;class Qu extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function ce(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class EN extends Qu{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function PN(e){return ce(e)&&e.name==="AuthApiError"}class Xg extends Qu{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class hs extends Qu{constructor(t,r,n,a){super(t,n,a),this.name=r,this.status=n}}class $r extends hs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function IN(e){return ce(e)&&e.name==="AuthSessionMissingError"}class Tl extends hs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Rl extends hs{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Ol extends hs{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function TN(e){return ce(e)&&e.name==="AuthImplicitGrantRedirectError"}class om extends hs{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Td extends hs{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function uc(e){return ce(e)&&e.name==="AuthRetryableFetchError"}class im extends hs{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class ha extends hs{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Io="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),cm=` 	
\r=`.split(""),RN=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<cm.length;t+=1)e[cm[t].charCodeAt(0)]=-2;for(let t=0;t<Io.length;t+=1)e[Io[t].charCodeAt(0)]=t;return e})();function dm(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Io[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Io[n]),t.queuedBits-=6}}function Zg(e,t,r){const n=RN[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function um(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},l=o=>{AN(o,n,r)};for(let o=0;o<e.length;o+=1)Zg(e.charCodeAt(o),a,l);return t.join("")}function ON(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function LN(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}ON(n,t)}}function AN(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function $N(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)Zg(e.charCodeAt(a),r,n);return new Uint8Array(t)}function MN(e){const t=[];return LN(e,r=>t.push(r)),new Uint8Array(t)}function FN(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};return e.forEach(a=>dm(a,r,n)),dm(null,r,n),t.join("")}function UN(e){return Math.round(Date.now()/1e3)+e}function BN(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Xt=()=>typeof window<"u"&&typeof document<"u",ps={tested:!1,writable:!1},ma=()=>{if(!Xt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ps.tested)return ps.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),ps.tested=!0,ps.writable=!0}catch{ps.tested=!0,ps.writable=!1}return ps.writable};function zN(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,l)=>{t[l]=a})}catch{}return r.searchParams.forEach((n,a)=>{t[a]=n}),t}const ex=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Qa(async()=>{const{default:n}=await Promise.resolve().then(()=>Tn);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},WN=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",tx=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Ll=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Al=async(e,t)=>{await e.removeItem(t)};class hi{constructor(){this.promise=new hi.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}hi.promiseConstructor=Promise;function hc(e){const t=e.split(".");if(t.length!==3)throw new ha("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!CN.test(t[n]))throw new ha("JWT not in base64url format");return{header:JSON.parse(um(t[0])),payload:JSON.parse(um(t[1])),signature:$N(t[2]),raw:{header:t[0],payload:t[1]}}}async function VN(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function qN(e,t){return new Promise((n,a)=>{(async()=>{for(let l=0;l<1/0;l++)try{const o=await e(l);if(!t(l,null,o)){n(o);return}}catch(o){if(!t(l,o)){a(o);return}}})()})}function GN(e){return("0"+e.toString(16)).substr(-2)}function HN(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let a="";for(let l=0;l<56;l++)a+=r.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(t),Array.from(t,GN).join("")}async function KN(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(n);return Array.from(a).map(l=>String.fromCharCode(l)).join("")}async function QN(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await KN(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Us(e,t,r=!1){const n=HN();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await tx(e,`${t}-code-verifier`,a);const l=await QN(n);return[l,n===l?"plain":"s256"]}const YN=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function JN(e){const t=e.headers.get(Id);if(!t||!t.match(YN))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function XN(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function ZN(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const e1=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Bs(e){if(!e1.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var t1=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r};const vs=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),r1=[502,503,504];async function hm(e){var t;if(!WN(e))throw new Td(vs(e),0);if(r1.includes(e.status))throw new Td(vs(e),e.status);let r;try{r=await e.json()}catch(l){throw new Xg(vs(l),l)}let n;const a=JN(e);if(a&&a.getTime()>=Jg["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new im(vs(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new $r}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((l,o)=>l&&typeof o=="string",!0))throw new im(vs(r),e.status,r.weak_password.reasons);throw new EN(vs(r),e.status||500,n)}const s1=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))};async function he(e,t,r,n){var a;const l=Object.assign({},n==null?void 0:n.headers);l[Id]||(l[Id]=Jg["2024-01-01"].name),n!=null&&n.jwt&&(l.Authorization=`Bearer ${n.jwt}`);const o=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const i=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await n1(e,t,r+i,{headers:l,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function n1(e,t,r,n,a,l){const o=s1(t,n,a,l);let i;try{i=await e(r,Object.assign({},o))}catch(c){throw console.error(c),new Td(vs(c),0)}if(i.ok||await hm(i),n!=null&&n.noResolveJson)return i;try{return await i.json()}catch(c){await hm(c)}}function br(e){var t;let r=null;i1(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=UN(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function mm(e){const t=br(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Wr(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function a1(e){return{data:e,error:null}}function l1(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:l}=e,o=t1(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),i={action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:l},c=Object.assign({},o);return{data:{properties:i,user:c},error:null}}function o1(e){return e}function i1(e){return e.access_token&&e.refresh_token&&e.expires_in}const mc=["global","local","others"];var c1=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r};class d1{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=ex(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=mc[0]){if(mc.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${mc.join(", ")}`);try{return await he(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ce(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await he(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Wr})}catch(n){if(ce(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=c1(t,["options"]),a=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await he(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:l1,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(ce(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await he(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Wr})}catch(r){if(ce(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,a,l,o,i,c;try{const h={nextPage:null,lastPage:0,total:0},u=await he(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(l=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:o1});if(u.error)throw u.error;const d=await u.json(),m=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(c=(i=u.headers.get("link"))===null||i===void 0?void 0:i.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(f=>{const x=parseInt(f.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(f.split(";")[1].split("=")[1]);h[`${b}Page`]=x}),h.total=parseInt(m)),{data:Object.assign(Object.assign({},d),h),error:null}}catch(h){if(ce(h))return{data:{users:[]},error:h};throw h}}async getUserById(t){Bs(t);try{return await he(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Wr})}catch(r){if(ce(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Bs(t);try{return await he(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Wr})}catch(n){if(ce(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Bs(t);try{return await he(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Wr})}catch(n){if(ce(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Bs(t.userId);try{const{data:r,error:n}=await he(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:n}}catch(r){if(ce(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Bs(t.userId),Bs(t.id);try{return{data:await he(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(ce(r))return{data:null,error:r};throw r}}}const u1={getItem:e=>ma()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{ma()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{ma()&&globalThis.localStorage.removeItem(e)}};function pm(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function h1(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const zs={debug:!!(globalThis&&ma()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class rx extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class m1 extends rx{}async function p1(e,t,r){zs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),zs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){zs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{zs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw zs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new m1(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(zs.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}h1();const f1={url:_N,storageKey:SN,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:kN,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function fm(e,t,r){return await r()}class La{constructor(t){var r,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=La.nextInstanceID,La.nextInstanceID+=1,this.instanceID>0&&Xt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},f1),t);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new d1({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=ex(a.fetch),this.lock=a.lock||fm,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:Xt()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=p1:this.lock=fm,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?a.storage?this.storage=a.storage:ma()?this.storage=u1:(this.memoryStorage={},this.storage=pm(this.memoryStorage)):(this.memoryStorage={},this.storage=pm(this.memoryStorage)),Xt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l),await this._notifyAllSubscribers(l.data.event,l.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Yg}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=zN(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Xt()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:l}=await this._getSessionFromURL(r,n);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),TN(l)){const c=(t=l.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:o,redirectType:i}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",i),await this._saveSession(o),setTimeout(async()=>{i==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return ce(r)?{error:r}:{error:new Xg("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,a;try{const l=await he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:br}),{data:o,error:i}=l;if(i||!o)return{data:{user:null,session:null},error:i};const c=o.session,h=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:h,session:c},error:null}}catch(l){if(ce(l))return{data:{user:null,session:null},error:l};throw l}}async signUp(t){var r,n,a;try{let l;if("email"in t){const{email:u,password:d,options:m}=t;let p=null,f=null;this.flowType==="pkce"&&([p,f]=await Us(this.storage,this.storageKey)),l=await he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:u,password:d,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:p,code_challenge_method:f},xform:br})}else if("phone"in t){const{phone:u,password:d,options:m}=t;l=await he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},channel:(a=m==null?void 0:m.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:br})}else throw new Rl("You must provide either an email or phone number and a password");const{data:o,error:i}=l;if(i||!o)return{data:{user:null,session:null},error:i};const c=o.session,h=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:h,session:c},error:null}}catch(l){if(ce(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithPassword(t){try{let r;if("email"in t){const{email:l,password:o,options:i}=t;r=await he(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:o,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},xform:mm})}else if("phone"in t){const{phone:l,password:o,options:i}=t;r=await he(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:o,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},xform:mm})}else throw new Rl("You must provide either an email or phone number and a password");const{data:n,error:a}=r;return a?{data:{user:null,session:null},error:a}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Tl}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(r){if(ce(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,a,l;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(l=t.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,n,a,l,o,i,c,h,u,d,m,p;let f,x;if("message"in t)f=t.message,x=t.signature;else{const{chain:b,wallet:g,statement:v,options:y}=t;let w;if(Xt())if(typeof g=="object")w=g;else{const k=window;if("solana"in k&&typeof k.solana=="object"&&("signIn"in k.solana&&typeof k.solana.signIn=="function"||"signMessage"in k.solana&&typeof k.solana.signMessage=="function"))w=k.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=g}const N=new URL((r=y==null?void 0:y.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in w&&w.signIn){const k=await w.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},y==null?void 0:y.signInWithSolana),{version:"1",domain:N.host,uri:N.href}),v?{statement:v}:null));let D;if(Array.isArray(k)&&k[0]&&typeof k[0]=="object")D=k[0];else if(k&&typeof k=="object"&&"signedMessage"in k&&"signature"in k)D=k;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in D&&"signature"in D&&(typeof D.signedMessage=="string"||D.signedMessage instanceof Uint8Array)&&D.signature instanceof Uint8Array)f=typeof D.signedMessage=="string"?D.signedMessage:new TextDecoder().decode(D.signedMessage),x=D.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in w)||typeof w.signMessage!="function"||!("publicKey"in w)||typeof w!="object"||!w.publicKey||!("toBase58"in w.publicKey)||typeof w.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");f=[`${N.host} wants you to sign in with your Solana account:`,w.publicKey.toBase58(),...v?["",v,""]:[""],"Version: 1",`URI: ${N.href}`,`Issued At: ${(a=(n=y==null?void 0:y.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((l=y==null?void 0:y.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${y.signInWithSolana.notBefore}`]:[],...!((o=y==null?void 0:y.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${y.signInWithSolana.expirationTime}`]:[],...!((i=y==null?void 0:y.signInWithSolana)===null||i===void 0)&&i.chainId?[`Chain ID: ${y.signInWithSolana.chainId}`]:[],...!((c=y==null?void 0:y.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${y.signInWithSolana.nonce}`]:[],...!((h=y==null?void 0:y.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${y.signInWithSolana.requestId}`]:[],...!((d=(u=y==null?void 0:y.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||d===void 0)&&d.length?["Resources",...y.signInWithSolana.resources.map(D=>`- ${D}`)]:[]].join(`
`);const k=await w.signMessage(new TextEncoder().encode(f),"utf8");if(!k||!(k instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=k}}try{const{data:b,error:g}=await he(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:f,signature:FN(x)},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:br});if(g)throw g;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new Tl}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:g})}catch(b){if(ce(b))return{data:{user:null,session:null},error:b};throw b}}async _exchangeCodeForSession(t){const r=await Ll(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(r??"").split("/");try{const{data:l,error:o}=await he(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:br});if(await Al(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!l||!l.session||!l.user?{data:{user:null,session:null,redirectType:null},error:new Tl}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:Object.assign(Object.assign({},l),{redirectType:a??null}),error:o})}catch(l){if(ce(l))return{data:{user:null,session:null,redirectType:null},error:l};throw l}}async signInWithIdToken(t){try{const{options:r,provider:n,token:a,access_token:l,nonce:o}=t,i=await he(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:l,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:br}),{data:c,error:h}=i;return h?{data:{user:null,session:null},error:h}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Tl}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:h})}catch(r){if(ce(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,a,l,o;try{if("email"in t){const{email:i,options:c}=t;let h=null,u=null;this.flowType==="pkce"&&([h,u]=await Us(this.storage,this.storageKey));const{error:d}=await he(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:i,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:h,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in t){const{phone:i,options:c}=t,{data:h,error:u}=await he(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:i,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(l=c==null?void 0:c.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:u}}throw new Rl("You must provide either an email or phone number.")}catch(i){if(ce(i))return{data:{user:null,session:null},error:i};throw i}}async verifyOtp(t){var r,n;try{let a,l;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,l=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:i}=await he(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:l}}),redirectTo:a,xform:br});if(i)throw i;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,h=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:h,session:c},error:null}}catch(a){if(ce(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(t){var r,n,a;try{let l=null,o=null;return this.flowType==="pkce"&&([l,o]=await Us(this.storage,this.storageKey)),await he(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:o}),headers:this.headers,xform:a1})}catch(l){if(ce(l))return{data:null,error:l};throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new $r;const{error:a}=await he(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:a}})}catch(t){if(ce(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:a,options:l}=t,{error:o}=await he(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:n,type:a,options:l}=t,{data:o,error:i}=await he(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:i}}throw new Rl("You must provide either an email or phone number and a type")}catch(r){if(ce(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Ll(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<dc:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.storage.isServer){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,h,u)=>(!o&&h==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,h,u))})}return{data:{session:t},error:null}}const{session:a,error:l}=await this._callRefreshToken(t.refresh_token);return l?{data:{session:null},error:l}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await he(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Wr}):await this._useSession(async r=>{var n,a,l;const{data:o,error:i}=r;if(i)throw i;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new $r}:await he(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&l!==void 0?l:void 0,xform:Wr})})}catch(r){if(ce(r))return IN(r)&&(await this._removeSession(),await Al(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:a,error:l}=n;if(l)throw l;if(!a.session)throw new $r;const o=a.session;let i=null,c=null;this.flowType==="pkce"&&t.email!=null&&([i,c]=await Us(this.storage,this.storageKey));const{data:h,error:u}=await he(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:i,code_challenge_method:c}),jwt:o.access_token,xform:Wr});if(u)throw u;return o.user=h.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(ce(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new $r;const r=Date.now()/1e3;let n=r,a=!0,l=null;const{payload:o}=hc(t.access_token);if(o.exp&&(n=o.exp,a=n<=r),a){const{session:i,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!i)return{data:{user:null,session:null},error:null};l=i}else{const{data:i,error:c}=await this._getUser(t.access_token);if(c)throw c;l={access_token:t.access_token,refresh_token:t.refresh_token,user:i.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return{data:{user:l.user,session:l},error:null}}catch(r){if(ce(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:i}=r;if(i)throw i;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new $r;const{session:a,error:l}=await this._callRefreshToken(t.refresh_token);return l?{data:{user:null,session:null},error:l}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(ce(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!Xt())throw new Ol("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Ol(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new om("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ol("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new om("No code detected.");const{data:v,error:y}=await this._exchangeCodeForSession(t.code);if(y)throw y;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:v.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:l,refresh_token:o,expires_in:i,expires_at:c,token_type:h}=t;if(!l||!i||!o||!h)throw new Ol("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(i);let m=u+d;c&&(m=parseInt(c));const p=m-u;p*1e3<=Gs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${d}s`);const f=m-d;u-f>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",f,m,u):u-f<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",f,m,u);const{data:x,error:b}=await this._getUser(l);if(b)throw b;const g={provider_token:n,provider_refresh_token:a,access_token:l,expires_in:d,expires_at:m,refresh_token:o,token_type:h,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:t.type},error:null}}catch(n){if(ce(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Ll(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:a,error:l}=r;if(l)return{error:l};const o=(n=a.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:i}=await this.admin.signOut(o,t);if(i&&!(PN(i)&&(i.status===404||i.status===401||i.status===403)))return{error:i}}return t!=="others"&&(await this._removeSession(),await Al(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=BN(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,a;try{const{data:{session:l},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",t,"session",l)}catch(l){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",l),console.error(l)}})}async resetPasswordForEmail(t,r={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await Us(this.storage,this.storageKey,!0));try{return await he(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(l){if(ce(l))return{data:null,error:l};throw l}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(ce(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:a}=await this._useSession(async l=>{var o,i,c,h,u;const{data:d,error:m}=l;if(m)throw m;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(i=t.options)===null||i===void 0?void 0:i.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await he(this.fetch,"GET",p,{headers:this.headers,jwt:(u=(h=d.session)===null||h===void 0?void 0:h.access_token)!==null&&u!==void 0?u:void 0})});if(a)throw a;return Xt()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(ce(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,a;const{data:l,error:o}=r;if(o)throw o;return await he(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(n=l.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(ce(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await qN(async a=>(a>0&&await VN(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await he(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:br})),(a,l)=>{const o=200*Math.pow(2,a);return l&&uc(l)&&Date.now()+o-n<Gs})}catch(n){if(this._debug(r,"error",n),ce(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Xt()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await Ll(this.storage,this.storageKey);if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}const a=((t=n.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<dc;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${dc}s`),a){if(this.autoRefreshToken&&n.refresh_token){const{error:l}=await this._callRefreshToken(n.refresh_token);l&&(console.error(l),uc(l)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new $r;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new hi;const{data:l,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!l.session)throw new $r;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const i={session:l.session,error:null};return this.refreshingDeferred.resolve(i),i}catch(l){if(this._debug(a,"error",l),ce(l)){const o={session:null,error:l};return uc(l)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(l),l}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,r,n=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const l=[],o=Array.from(this.stateChangeEmitters.values()).map(async i=>{try{await i.callback(t,r)}catch(c){l.push(c)}});if(await Promise.all(o),l.length>0){for(let i=0;i<l.length;i+=1)console.error(l[i]);throw l[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await tx(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await Al(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Xt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Gs);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-t)/Gs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Gs}ms, refresh threshold is ${Pd} ticks`),a<=Pd&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof rx)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Xt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const a=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[l,o]=await Us(this.storage,this.storageKey),i=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(i.toString())}if(n!=null&&n.queryParams){const l=new URLSearchParams(n.queryParams);a.push(l.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:a,error:l}=r;return l?{data:null,error:l}:await he(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(ce(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,a;const{data:l,error:o}=r;if(o)return{data:null,error:o};const i=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:h}=await he(this.fetch,"POST",`${this.url}/factors`,{body:i,headers:this.headers,jwt:(n=l==null?void 0:l.session)===null||n===void 0?void 0:n.access_token});return h?{data:null,error:h}:(t.factorType==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(ce(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:l}=r;if(l)return{data:null,error:l};const{data:o,error:i}=await he(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return i?{data:null,error:i}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:i})})}catch(r){if(ce(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:l}=r;return l?{data:null,error:l}:await he(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(ce(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],a=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),l=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:a,phone:l},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:a},error:l}=t;if(l)return{data:null,error:l};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=hc(a.access_token);let i=null;o.aal&&(i=o.aal);let c=i;((n=(r=a.user.factors)===null||r===void 0?void 0:r.filter(d=>d.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const u=o.amr||[];return{data:{currentLevel:i,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(o=>o.kid===t);if(n||(n=this.jwks.keys.find(o=>o.kid===t),n&&this.jwks_cached_at+DN>Date.now()))return n;const{data:a,error:l}=await he(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;if(!a.keys||a.keys.length===0)throw new ha("JWKS is empty");if(this.jwks=a,this.jwks_cached_at=Date.now(),n=a.keys.find(o=>o.kid===t),!n)throw new ha("No matching signing key found in JWKS");return n}async getClaims(t,r={keys:[]}){try{let n=t;if(!n){const{data:p,error:f}=await this.getSession();if(f||!p.session)return{data:null,error:f};n=p.session.access_token}const{header:a,payload:l,signature:o,raw:{header:i,payload:c}}=hc(n);if(XN(l.exp),!a.kid||a.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:l,header:a,signature:o},error:null}}const h=ZN(a.alg),u=await this.fetchJwk(a.kid,r),d=await crypto.subtle.importKey("jwk",u,h,!0,["verify"]);if(!await crypto.subtle.verify(h,d,o,MN(`${i}.${c}`)))throw new ha("Invalid JWT signature");return{data:{claims:l,header:a,signature:o},error:null}}catch(n){if(ce(n))return{data:null,error:n};throw n}}}La.nextInstanceID=0;const g1=La;class x1 extends g1{constructor(t){super(t)}}var v1=function(e,t,r,n){function a(l){return l instanceof r?l:new r(function(o){o(l)})}return new(r||(r=Promise))(function(l,o){function i(u){try{h(n.next(u))}catch(d){o(d)}}function c(u){try{h(n.throw(u))}catch(d){o(d)}}function h(u){u.done?l(u.value):a(u.value).then(i,c)}h((n=n.apply(e,t||[])).next())})};class y1{constructor(t,r,n){var a,l,o;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const i=jN(t),c=new URL(i);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const h=`sb-${c.hostname.split(".")[0]}-auth-token`,u={db:pN,realtime:gN,auth:Object.assign(Object.assign({},fN),{storageKey:h}),global:mN},d=NN(n??{},u);this.storageKey=(a=d.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(l=d.global.headers)!==null&&l!==void 0?l:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(m,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=bN(r,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new Aj(new URL("rest/v1",c).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new hj(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new dN(this.storageUrl.href,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return v1(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,storageKey:l,flowType:o,lock:i,debug:c},h,u){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new x1({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),h),storageKey:l,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,flowType:o,lock:i,debug:c,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new Jj(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const b1=(e,t,r)=>new y1(e,t,r),w1="https://gcavrtgbhpzevuycdlih.supabase.co",j1="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdjYXZydGdiaHB6ZXZ1eWNkbGloIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI4OTYxNzcsImV4cCI6MjA3ODQ3MjE3N30.55_X1oCukR9o7PovPVaAXI1VIgOBJ9KU1Lgiw62g9-A",K=b1(w1,j1),sx=j.createContext(void 0),Oe=()=>{const e=j.useContext(sx);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e},N1=({children:e})=>{var m;const[t,r]=j.useState(null),[n,a]=j.useState(null),[l,o]=j.useState(!0),i=(m=t==null?void 0:t.user_metadata)==null?void 0:m.role;j.useEffect(()=>{let p=!0,f;f=setTimeout(()=>{p&&o(!1)},5e3),(async()=>{try{const{data:{session:g},error:v}=await K.auth.getSession();p&&(v&&console.error("Error getting session:",v),a(g),r((g==null?void 0:g.user)??null),o(!1),clearTimeout(f))}catch(g){console.error("Error in getInitialSession:",g),p&&(o(!1),clearTimeout(f))}})();const{data:{subscription:b}}=K.auth.onAuthStateChange(async(g,v)=>{p&&(a(v),r((v==null?void 0:v.user)??null),o(!1),clearTimeout(f))});return()=>{p=!1,clearTimeout(f),b.unsubscribe()}},[]);const d={user:t,session:n,role:i,loading:l,signIn:async(p,f)=>{const{error:x}=await K.auth.signInWithPassword({email:p,password:f});return{error:x}},signUp:async(p,f,x)=>{const{error:b}=await K.auth.signUp({email:p,password:f,options:{data:{full_name:x.fullName,phone:x.phone,job_title:x.jobTitle,role:x.role}}});return{error:b}},signOut:async()=>{await K.auth.signOut()}};return s.jsx(sx.Provider,{value:d,children:e})},nx=j.createContext(void 0),_1=()=>{const e=j.useContext(nx);if(e===void 0)throw new Error("useApp must be used within an AppProvider");return e},S1=({children:e})=>{const[t,r]=j.useState({id:"1",email:"admin@verticalsystems.com",name:"Admin User"}),[n,a]=j.useState(!1),[l,o]=j.useState(null);return s.jsx(nx.Provider,{value:{user:t,setUser:r,sidebarCollapsed:n,setSidebarCollapsed:a,activeSidebarItem:l,setActiveSidebarItem:o},children:e})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var k1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C1=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ee=(e,t)=>{const r=j.forwardRef(({color:n="currentColor",size:a=24,strokeWidth:l=2,absoluteStrokeWidth:o,className:i="",children:c,...h},u)=>j.createElement("svg",{ref:u,...k1,width:a,height:a,stroke:n,strokeWidth:o?Number(l)*24/Number(a):l,className:["lucide",`lucide-${C1(e)}`,i].join(" "),...h},[...t.map(([d,m])=>j.createElement(d,m)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rd=ee("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D1=ee("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hn=ee("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xa=ee("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gm=ee("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Za=ee("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=ee("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=ee("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const el=ee("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=ee("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=ee("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aa=ee("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pc=ee("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xm=ee("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const To=ee("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Or=ee("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=ee("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E1=ee("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=ee("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tl=ee("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=ee("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rl=ee("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Od=ee("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=ee("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dt=ee("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ax=ee("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P1=ee("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vm=ee("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I1=ee("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T1=ee("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yu=ee("Infinity",[["path",{d:"M12 12c-2-2.67-4-4-6-4a4 4 0 1 0 0 8c2 0 4-1.33 6-4Zm0 0c2 2.67 4 4 6 4a4 4 0 0 0 0-8c-2 0-4 1.33-6 4Z",key:"1z0uae"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R1=ee("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ld=ee("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O1=ee("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L1=ee("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=ee("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A1=ee("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lx=ee("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wn=ee("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ro=ee("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=ee("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $1=ee("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=ee("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xr=ee("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=ee("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lr=ee("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ox=ee("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=ee("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ix=ee("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fc=ee("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cx=ee("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=ee("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ir=ee("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $a=ee("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=ee("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dx=ee("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ux=ee("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=ee("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=ee("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M1=ee("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cr=ee("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jn=ee("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),F1=()=>{var a;const{user:e,role:t,signOut:r}=Oe(),n=async()=>{await r()};return s.jsxs("header",{className:"h-16 bg-gray-900/50 backdrop-blur-sm border-b border-gray-800/50 flex items-center justify-between px-6",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Yu,{className:"h-8 w-8 text-transparent bg-gradient-to-r from-red-400 to-rose-600 bg-clip-text animate-spin-slow"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-red-400 to-rose-600 rounded-full blur opacity-30 animate-pulse-glow"})]}),s.jsx("h1",{className:"text-2xl font-bold gradient-text bg-gradient-to-r from-red-400 to-rose-600",children:"Vertical Systems"})]}),e&&s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex items-center space-x-2 text-gray-300",children:[s.jsx(Fe,{className:"h-5 w-5"}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm font-medium",children:((a=e.user_metadata)==null?void 0:a.full_name)||e.email}),t&&s.jsx("p",{className:"text-xs text-gray-400",children:t})]})]}),s.jsxs("button",{onClick:n,className:"flex items-center space-x-2 px-3 py-2 text-sm bg-gray-800 hover:bg-gray-700 rounded-lg transition-colors",children:[s.jsx(L1,{className:"h-4 w-4"}),s.jsx("span",{children:"Logout"})]})]})]})},Ad={User:{dashboard:!0,leads:!0,sales:!0,documents:!0,operations:!0,strategy:!0,tools:!0,finances:!1,team:!1,offer:!1,payment:!1},Finance:{dashboard:!0,leads:!0,sales:!0,documents:!0,operations:!0,strategy:!0,tools:!0,finances:!0,team:!0,offer:!1,payment:!1},Admin:{dashboard:!0,leads:!0,sales:!0,documents:!0,operations:!0,strategy:!0,tools:!0,finances:!0,team:!0,offer:!0,payment:!0}},U1=(e,t)=>e&&Ad[e][t]||!1,B1=e=>e?Ad[e]:Object.keys(Ad.User).reduce((t,r)=>(t[r]=!1,t),{}),hx=e=>{const t=j.useMemo(()=>B1(e),[e]),r=j.useMemo(()=>n=>U1(e,n),[e]);return{permissions:t,hasPermission:r,canAccess:r}},z1=[{id:"dashboard",label:"Dashboard",icon:T1,path:"/dashboard",gradient:"section-gradient-dashboard",section:"dashboard"},{id:"leads",label:"Leads",icon:bt,gradient:"section-gradient-leads",section:"leads",children:[{label:"Leads CRM",path:"/leads/crm"},{label:"Lead Metrics",path:"/leads/metrics"}]},{id:"sales",label:"Sales",icon:Ae,gradient:"section-gradient-sales",section:"sales",children:[{label:"Sales Pipeline",path:"/sales/pipeline"},{label:"Sales CRM",path:"/sales/crm"},{label:"Sales Metrics",path:"/sales/metrics"},{label:"Setter Reports",path:"/sales/setter-reports"},{label:"Closer Reports",path:"/sales/closer-reports"}]},{id:"documents",label:"Documents",icon:Dt,gradient:"section-gradient-documents",section:"documents",children:[{label:"Proposals",path:"/documents/proposals"},{label:"Contracts",path:"/documents/contracts"},{label:"Invoices",path:"/documents/invoices"}]},{id:"finances",label:"Finances",icon:oe,gradient:"section-gradient-finances",section:"finances",children:[{label:"Financial Dashboard",path:"/finances/dashboard"},{label:"Cash In",path:"/finances/cash-in"},{label:"Cash Out",path:"/finances/cash-out"},{label:"Receivables",path:"/finances/receivables"},{label:"Calendar",path:"/finances/calendar"}]},{id:"onboarding",label:"Operations",icon:ux,gradient:"section-gradient-onboarding",section:"operations",children:[{label:"One Click Onboarding",path:"/onboarding/one-click"},{label:"Employee Onboarding",path:"/onboarding/employee"}]}],W1=()=>{const{sidebarCollapsed:e,setSidebarCollapsed:t,activeSidebarItem:r,setActiveSidebarItem:n}=_1(),{role:a}=Oe(),{hasPermission:l}=hx(a),o=In(),i=()=>{t(!e)},c=d=>{n(r===d?null:d)},h=d=>o.pathname===d,u=z1.filter(d=>l(d.section));return s.jsxs(s.Fragment,{children:[!e&&s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40 lg:hidden",onClick:i}),s.jsxs("div",{className:`fixed left-0 top-16 h-[calc(100vh-4rem)] bg-gray-900/50 backdrop-blur-sm border-r border-gray-800/50 transition-all duration-300 z-50 ${e?"w-16":"w-64"}`,children:[s.jsx("button",{onClick:i,className:"absolute -right-3 top-4 w-6 h-6 bg-gray-800 hover:bg-gray-700 rounded-full flex items-center justify-center transition-colors",children:e?s.jsx(ir,{className:"h-4 w-4"}):s.jsx(To,{className:"h-4 w-4"})}),s.jsx("nav",{className:"p-4 space-y-2 overflow-y-auto h-full",children:u.map(d=>s.jsxs("div",{children:[s.jsx("div",{children:d.path?s.jsxs(Eo,{to:d.path,className:`flex items-center space-x-3 px-3 py-2 rounded-lg transition-all duration-200 group ${h(d.path)?"bg-gray-800 text-white":"hover:bg-gray-800/50 text-gray-300 hover:text-white"}`,children:[s.jsx(d.icon,{className:"h-5 w-5 flex-shrink-0"}),!e&&s.jsx("span",{className:"font-medium",children:d.label})]}):s.jsxs("button",{onClick:()=>c(d.id),className:`w-full flex items-center space-x-3 px-3 py-2 rounded-lg transition-all duration-200 group ${r===d.id?"bg-gray-800 text-white":"hover:bg-gray-800/50 text-gray-300 hover:text-white"}`,children:[s.jsx(d.icon,{className:"h-5 w-5 flex-shrink-0"}),!e&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"font-medium flex-1 text-left",children:d.label}),d.children&&s.jsx(To,{className:`h-4 w-4 transition-transform duration-200 ${r===d.id?"rotate-180":""}`})]})]})}),d.children&&!e&&s.jsx("div",{className:`overflow-hidden transition-all duration-200 ${r===d.id?"max-h-96 opacity-100":"max-h-0 opacity-0"}`,children:s.jsx("div",{className:"ml-8 mt-2 space-y-1",children:d.children.map(m=>s.jsx(Eo,{to:m.path,className:`block px-3 py-2 text-sm rounded-lg transition-all duration-200 ${h(m.path)?`gradient-text ${d.gradient} font-medium`:"text-gray-400 hover:text-white hover:bg-gray-800/30"}`,children:m.label},m.path))})})]},d.id))})]})]})},V1=()=>s.jsx("footer",{className:"h-12 bg-gray-900/50 backdrop-blur-sm border-t border-gray-800/50 flex items-center justify-center",children:s.jsxs("div",{className:"flex items-center space-x-2 text-gray-400 text-sm",children:[s.jsx("span",{children:"Made with"}),s.jsx(I1,{className:"h-4 w-4 text-red-400 animate-pulse"}),s.jsx("span",{className:"gradient-text bg-gradient-to-r from-blue-400 to-purple-600 font-medium",children:"Vertical Systems"})]})}),q1=()=>{const[e,t]=j.useState(""),[r,n]=j.useState(""),[a,l]=j.useState(!1),[o,i]=j.useState(!1),[c,h]=j.useState(""),{signIn:u}=Oe(),d=async m=>{m.preventDefault(),i(!0),h("");const{error:p}=await u(e,r);p&&h(p.message),i(!1)};return s.jsx("div",{className:"min-h-screen bg-gray-950 flex items-center justify-center p-4",children:s.jsxs("div",{className:"w-full max-w-md",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsxs("div",{className:"flex items-center justify-center space-x-3 mb-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Yu,{className:"h-10 w-10 text-transparent bg-gradient-to-r from-red-400 to-rose-600 bg-clip-text animate-spin-slow"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-red-400 to-rose-600 rounded-full blur opacity-30 animate-pulse-glow"})]}),s.jsx("h1",{className:"text-3xl font-bold gradient-text bg-gradient-to-r from-red-400 to-rose-600",children:"Vertical Systems"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h2",{className:"text-2xl font-semibold text-white",children:"Welcome Back"}),s.jsx("p",{className:"text-gray-400",children:"Sign in to your account"})]})]}),s.jsx("div",{className:"glass-card p-8",children:s.jsxs("form",{onSubmit:d,className:"space-y-6",children:[c&&s.jsx("div",{className:"p-4 bg-red-900/20 border border-red-500/30 rounded-lg",children:s.jsx("p",{className:"text-red-400 text-sm",children:c})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300",children:"Email Address"}),s.jsxs("div",{className:"relative",children:[s.jsx(Qt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{id:"email",type:"email",value:e,onChange:m=>t(m.target.value),className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent text-white placeholder-gray-400 transition-all duration-200",placeholder:"Enter your email",required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ld,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{id:"password",type:a?"text":"password",value:r,onChange:m=>n(m.target.value),className:"w-full pl-10 pr-12 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent text-white placeholder-gray-400 transition-all duration-200",placeholder:"Enter your password",required:!0}),s.jsx("button",{type:"button",onClick:()=>l(!a),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-300 transition-colors",children:a?s.jsx(Od,{className:"h-5 w-5"}):s.jsx(Is,{className:"h-5 w-5"})})]})]}),s.jsx("button",{type:"submit",disabled:o,className:"w-full flex items-center justify-center space-x-2 py-3 px-4 bg-gradient-to-r from-red-400 to-rose-600 hover:from-red-500 hover:to-rose-700 text-white font-medium rounded-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:o?s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):s.jsxs(s.Fragment,{children:[s.jsx(O1,{className:"h-5 w-5"}),s.jsx("span",{children:"Sign In"})]})}),s.jsx("div",{className:"text-center",children:s.jsxs("p",{className:"text-gray-400",children:["Don't have an account?"," ",s.jsx(Eo,{to:"/signup",className:"text-red-400 hover:text-red-300 font-medium transition-colors",children:"Sign up here"})]})})]})}),s.jsx("div",{className:"text-center mt-8",children:s.jsx("p",{className:"text-gray-500 text-sm",children:" 2024 Vertical Systems. All rights reserved."})})]})})},G1=()=>{const[e,t]=j.useState({email:"",password:"",confirmPassword:"",fullName:"",phone:"",jobTitle:"",role:""}),[r,n]=j.useState(!1),[a,l]=j.useState(!1),[o,i]=j.useState(!1),[c,h]=j.useState(""),{signUp:u}=Oe(),d=[{value:"User",label:"User",description:"Standard user access"},{value:"Finance",label:"Finance",description:"Financial management access"},{value:"Admin",label:"Admin",description:"Full system access"}],m=f=>{t(x=>({...x,[f.target.name]:f.target.value}))},p=async f=>{if(f.preventDefault(),i(!0),h(""),e.password!==e.confirmPassword){h("Passwords do not match"),i(!1);return}if(e.password.length<6){h("Password must be at least 6 characters long"),i(!1);return}if(!e.role){h("Please select a role"),i(!1);return}const{error:x}=await u(e.email,e.password,{fullName:e.fullName,phone:e.phone,jobTitle:e.jobTitle,role:e.role});x&&h(x.message),i(!1)};return s.jsx("div",{className:"min-h-screen bg-gray-950 flex items-center justify-center p-4",children:s.jsxs("div",{className:"w-full max-w-md",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsxs("div",{className:"flex items-center justify-center space-x-3 mb-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Yu,{className:"h-10 w-10 text-transparent bg-gradient-to-r from-red-400 to-rose-600 bg-clip-text animate-spin-slow"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-red-400 to-rose-600 rounded-full blur opacity-30 animate-pulse-glow"})]}),s.jsx("h1",{className:"text-3xl font-bold gradient-text bg-gradient-to-r from-red-400 to-rose-600",children:"Vertical Systems"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h2",{className:"text-2xl font-semibold text-white",children:"Create Account"}),s.jsx("p",{className:"text-gray-400",children:"Join Vertical Systems and start managing your agency"})]})]}),s.jsx("div",{className:"glass-card p-8",children:s.jsxs("form",{onSubmit:p,className:"space-y-6",children:[c&&s.jsx("div",{className:"p-4 bg-red-900/20 border border-red-500/30 rounded-lg",children:s.jsx("p",{className:"text-red-400 text-sm",children:c})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"fullName",className:"block text-sm font-medium text-gray-300",children:"Full Name"}),s.jsxs("div",{className:"relative",children:[s.jsx(Fe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{id:"fullName",name:"fullName",type:"text",value:e.fullName,onChange:m,className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent text-white placeholder-gray-400 transition-all duration-200",placeholder:"Enter your full name",required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300",children:"Email Address"}),s.jsxs("div",{className:"relative",children:[s.jsx(Qt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{id:"email",name:"email",type:"email",value:e.email,onChange:m,className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent text-white placeholder-gray-400 transition-all duration-200",placeholder:"Enter your email",required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-300",children:"Phone Number"}),s.jsxs("div",{className:"relative",children:[s.jsx(_t,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{id:"phone",name:"phone",type:"tel",value:e.phone,onChange:m,className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent text-white placeholder-gray-400 transition-all duration-200",placeholder:"Enter your phone number",required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"jobTitle",className:"block text-sm font-medium text-gray-300",children:"Job Title"}),s.jsxs("div",{className:"relative",children:[s.jsx(el,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{id:"jobTitle",name:"jobTitle",type:"text",value:e.jobTitle,onChange:m,className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent text-white placeholder-gray-400 transition-all duration-200",placeholder:"e.g., Sales Manager, Lead Generator, Account Executive",required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-300",children:"Role"}),s.jsxs("div",{className:"relative",children:[s.jsx(ox,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsxs("select",{id:"role",name:"role",value:e.role,onChange:m,className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent text-white transition-all duration-200",required:!0,children:[s.jsx("option",{value:"",children:"Select your role..."}),d.map(f=>s.jsxs("option",{value:f.value,children:[f.label," - ",f.description]},f.value))]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ld,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{id:"password",name:"password",type:r?"text":"password",value:e.password,onChange:m,className:"w-full pl-10 pr-12 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent text-white placeholder-gray-400 transition-all duration-200",placeholder:"Create a password",required:!0}),s.jsx("button",{type:"button",onClick:()=>n(!r),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-300 transition-colors",children:r?s.jsx(Od,{className:"h-5 w-5"}):s.jsx(Is,{className:"h-5 w-5"})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-300",children:"Confirm Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ld,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:a?"text":"password",value:e.confirmPassword,onChange:m,className:"w-full pl-10 pr-12 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent text-white placeholder-gray-400 transition-all duration-200",placeholder:"Confirm your password",required:!0}),s.jsx("button",{type:"button",onClick:()=>l(!a),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-300 transition-colors",children:a?s.jsx(Od,{className:"h-5 w-5"}):s.jsx(Is,{className:"h-5 w-5"})})]})]}),s.jsx("button",{type:"submit",disabled:o,className:"w-full flex items-center justify-center space-x-2 py-3 px-4 bg-gradient-to-r from-red-400 to-rose-600 hover:from-red-500 hover:to-rose-700 text-white font-medium rounded-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:o?s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):s.jsxs(s.Fragment,{children:[s.jsx(ux,{className:"h-5 w-5"}),s.jsx("span",{children:"Create Account"})]})}),s.jsx("div",{className:"text-center",children:s.jsxs("p",{className:"text-gray-400",children:["Already have an account?"," ",s.jsx(Eo,{to:"/login",className:"text-red-400 hover:text-red-300 font-medium transition-colors",children:"Sign in here"})]})})]})}),s.jsx("div",{className:"text-center mt-8",children:s.jsx("p",{className:"text-gray-500 text-sm",children:" 2024 Vertical Systems. All rights reserved."})})]})})},$l=({title:e,value:t,change:r,icon:n,trend:a})=>{const l={up:"text-green-400",down:"text-red-400",neutral:"text-gray-400"};return s.jsxs("div",{className:"glass-card p-6 hover:bg-gray-800/50 transition-all duration-300 group",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-r from-red-400 to-rose-600 opacity-80 group-hover:opacity-100 transition-opacity",children:s.jsx(n,{className:"h-6 w-6 text-white"})}),s.jsx("div",{className:`text-sm font-medium ${l[a]}`,children:r})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h3",{className:"text-gray-400 text-sm font-medium",children:e}),s.jsx("p",{className:"text-2xl font-bold text-white",children:t})]})]})},Ml=({title:e,children:t,className:r=""})=>s.jsxs("div",{className:`glass-card p-6 bg-gray-900/60 backdrop-blur-md ${r}`,children:[s.jsx("h3",{className:"text-lg font-semibold gradient-text section-gradient-dashboard mb-6",children:e}),s.jsx("div",{className:"h-64 flex items-center justify-center bg-gray-950/50 rounded-xl",children:t})]}),ym=({percentage:e,size:t,strokeWidth:r,color:n,label:a})=>{const l=(t-r)/2,o=l*2*Math.PI,i=o-e/100*o;return s.jsxs("div",{className:"flex flex-col items-center relative",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 rounded-full opacity-30 animate-pulse",style:{background:`radial-gradient(circle, ${n}40 0%, transparent 70%)`,filter:"blur(8px)",transform:"scale(1.2)"}}),s.jsxs("svg",{width:t,height:t,className:"transform -rotate-90 relative z-10",children:[s.jsx("circle",{cx:t/2,cy:t/2,r:l,stroke:"rgba(55, 65, 81, 0.3)",strokeWidth:r,fill:"transparent",className:"drop-shadow-lg"}),s.jsx("circle",{cx:t/2,cy:t/2,r:l,stroke:"url(#gradient)",strokeWidth:r,fill:"transparent",strokeDasharray:o,strokeDashoffset:i,strokeLinecap:"round",className:"transition-all duration-2000 ease-out drop-shadow-2xl",style:{filter:`drop-shadow(0 0 12px ${n}80)`}}),s.jsxs("defs",{children:[s.jsxs("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[s.jsx("stop",{offset:"0%",stopColor:n,stopOpacity:"1"}),s.jsx("stop",{offset:"50%",stopColor:n,stopOpacity:"0.8"}),s.jsx("stop",{offset:"100%",stopColor:n,stopOpacity:"0.6"})]}),s.jsxs("filter",{id:"glow",children:[s.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),s.jsxs("feMerge",{children:[s.jsx("feMergeNode",{in:"coloredBlur"}),s.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]})]}),s.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[s.jsxs("span",{className:"text-4xl font-bold text-white drop-shadow-lg",children:[e,"%"]}),s.jsx("div",{className:"w-8 h-0.5 mt-2 rounded-full opacity-60",style:{backgroundColor:n}})]}),s.jsx("div",{className:"absolute inset-0 pointer-events-none",children:[...Array(8)].map((c,h)=>{const u=h/8*360,d=h*.2;return s.jsx("div",{className:"absolute w-1 h-1 rounded-full animate-pulse",style:{backgroundColor:n,left:"50%",top:"50%",transform:`rotate(${u}deg) translateY(-${l+10}px) translateX(-50%)`,animationDelay:`${d}s`,opacity:.6}},h)})})]}),s.jsxs("div",{className:"mt-4 text-center",children:[s.jsx("span",{className:"text-lg font-semibold text-gray-200 drop-shadow-sm",children:a}),s.jsx("div",{className:"w-12 h-0.5 mx-auto mt-2 rounded-full opacity-40",style:{backgroundColor:n}})]})]})},Ws=({label:e,value:t,maxValue:r,color:n})=>{const a=t/r*100;return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm text-gray-400",children:e}),s.jsx("span",{className:"text-sm font-medium text-white",children:t})]}),s.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2 overflow-hidden",children:s.jsx("div",{className:"h-full rounded-full transition-all duration-1000 ease-out",style:{width:`${a}%`,backgroundColor:n,boxShadow:`0 0 8px ${n}`}})})]})},H1=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold gradient-text section-gradient-dashboard",children:"Dashboard"}),s.jsx("p",{className:"text-gray-400 mt-2",children:"Welcome back! Here's what's happening with your agency."})]}),s.jsx("div",{className:"flex items-center space-x-4",children:s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm text-gray-400",children:"Today"}),s.jsx("p",{className:"text-lg font-semibold text-white",children:new Date().toLocaleDateString()})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx($l,{title:"Total Revenue",value:"$127,450",change:"+12.5%",icon:oe,trend:"up"}),s.jsx($l,{title:"Active Leads",value:"1,247",change:"+8.2%",icon:bt,trend:"up"}),s.jsx($l,{title:"Conversion Rate",value:"18.7%",change:"+2.1%",icon:ye,trend:"up"}),s.jsx($l,{title:"Monthly Growth",value:"23.4%",change:"+5.3%",icon:Ae,trend:"up"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsx(Ml,{title:"Revenue Trend",children:s.jsxs("div",{className:"w-full space-y-4",children:[s.jsx(Ws,{label:"January",value:85,maxValue:100,color:"#ef4444"}),s.jsx(Ws,{label:"February",value:92,maxValue:100,color:"#f97316"}),s.jsx(Ws,{label:"March",value:78,maxValue:100,color:"#eab308"}),s.jsx(Ws,{label:"April",value:95,maxValue:100,color:"#22c55e"}),s.jsx(Ws,{label:"May",value:88,maxValue:100,color:"#06b6d4"}),s.jsx(Ws,{label:"June",value:100,maxValue:100,color:"#8b5cf6"})]})}),s.jsx(Ml,{title:"Performance Metrics",children:s.jsxs("div",{className:"grid grid-cols-2 gap-12 px-8",children:[s.jsx(ym,{percentage:87,size:140,strokeWidth:12,color:"#ef4444",label:"Lead Quality"}),s.jsx(ym,{percentage:92,size:140,strokeWidth:12,color:"#f97316",label:"Close Rate"})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsx("div",{className:"lg:col-span-2",children:s.jsx(Ml,{title:"Recent Activity",children:s.jsx("div",{className:"w-full space-y-4",children:[{icon:_t,text:"Call scheduled with John Doe",time:"2 hours ago",color:"text-blue-400"},{icon:Qt,text:"Proposal sent to ABC Corp",time:"4 hours ago",color:"text-green-400"},{icon:Ne,text:"Meeting with design team",time:"6 hours ago",color:"text-purple-400"},{icon:ct,text:"Deal closed with XYZ Inc",time:"1 day ago",color:"text-yellow-400"}].map((e,t)=>s.jsxs("div",{className:"flex items-center space-x-4 p-3 bg-gray-800/30 rounded-lg",children:[s.jsx(e.icon,{className:`h-5 w-5 ${e.color}`}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm text-white",children:e.text}),s.jsx("p",{className:"text-xs text-gray-400",children:e.time})]})]},t))})})}),s.jsx("div",{className:"space-y-6",children:s.jsx(Ml,{title:"Quick Actions",children:s.jsx("div",{className:"w-full space-y-3",children:[{label:"Add New Lead",color:"from-teal-400 to-cyan-600"},{label:"Create Proposal",color:"from-blue-400 to-purple-600"},{label:"Schedule Call",color:"from-emerald-500 to-indigo-600"},{label:"Generate Report",color:"from-rose-400 to-amber-500"}].map((e,t)=>s.jsx("button",{className:`w-full p-3 rounded-lg bg-gradient-to-r ${e.color} opacity-80 hover:opacity-100 transition-all duration-200 text-white font-medium`,children:e.label},t))})})})]})]});class K1{constructor(){this.webhookUrl=void 0,this.retryAttempts=3,this.retryDelay=1e3}async sendLeadAction(t){try{const r=await this.getLeadData(t.leadId);if(!r){console.error("Lead not found for webhook:",t.leadId);return}const n=await this.getUserData(t.userId);if(!n){console.error("User not found for webhook:",t.userId);return}const a={action:t,lead:this.sanitizeLeadData(r),user:this.sanitizeUserData(n),metadata:{timestamp:new Date().toISOString(),source:"vertical_systems_crm",version:"1.0",environment:"production"}};await this.sendWithRetry(a),console.log("Webhook sent successfully:",{leadId:t.leadId,actionType:t.actionType,timestamp:t.timestamp})}catch(r){console.error("Failed to send webhook:",r),this.logFailedWebhook(t,r)}}async getLeadData(t){try{const{data:r,error:n}=await K.from("leads").select("*").eq("id",t).single();if(n)throw n;if(!r)return null;let a=null;if(r.assigned_to){const{data:o,error:i}=await K.from("users").select("id, email, full_name, role").eq("id",r.assigned_to).single();!i&&o&&(a=o)}let l=null;if(r.created_by){const{data:o,error:i}=await K.from("users").select("id, email, full_name, role").eq("id",r.created_by).single();!i&&o&&(l=o)}return{...r,assigned_user:a,created_user:l}}catch(r){return console.error("Error fetching lead data:",r),null}}async getUserData(t){try{const{data:r,error:n}=await K.from("users").select("id, email, full_name, role, phone, job_title").eq("id",t).single();return n?(console.error("Error fetching user data:",n),null):r}catch(r){return console.error("Supabase request failed:",r),null}}sanitizeLeadData(t){return{id:t.id,first_name:t.first_name,last_name:t.last_name,email:t.email,phone:t.phone,company:t.company,job_title:t.job_title,status:t.status,lead_source:t.lead_source,lead_type:t.lead_type,priority:t.priority,probability:t.probability,revenue_generated:t.revenue_generated,cash_collected:t.cash_collected,notes:t.notes,tags:t.tags,website:t.website,address:t.address,city:t.city,state:t.state,country:t.country,zip_code:t.zip_code,created_at:t.created_at,updated_at:t.updated_at,first_contact_date:t.first_contact_date,last_contact_date:t.last_contact_date,next_follow_up_date:t.next_follow_up_date,conversion_date:t.conversion_date,lost_date:t.lost_date,lost_reason:t.lost_reason,follow_ups_completed:t.follow_ups_completed,follow_up_dates:t.follow_up_dates,lead_checklist:t.lead_checklist,checklist_dates:t.checklist_dates,assigned_user:t.assigned_user,created_user:t.created_user,follow_up_completion_rate:this.calculateFollowUpRate(t.follow_ups_completed),checklist_completion_rate:this.calculateChecklistRate(t.lead_checklist),outstanding_revenue:(t.revenue_generated||0)-(t.cash_collected||0),collection_rate:t.revenue_generated>0?(t.cash_collected||0)/t.revenue_generated*100:0}}sanitizeUserData(t){return{id:t.id,email:t.email,full_name:t.full_name,role:t.role,phone:t.phone,job_title:t.job_title}}calculateFollowUpRate(t){return!t||t.length===0?0:t.filter(Boolean).length/t.length*100}calculateChecklistRate(t){if(!t)return 0;const r=Object.values(t),n=r.filter(Boolean).length;return r.length>0?n/r.length*100:0}async sendWithRetry(t,r=1){try{const n=await fetch(this.webhookUrl,{method:"POST",headers:{"Content-Type":"application/json","User-Agent":"VerticalSystems-CRM/1.0"},body:JSON.stringify(t)});if(!n.ok)throw new Error(`Webhook failed with status: ${n.status} ${n.statusText}`);const a=await n.text();console.log("Webhook response:",a)}catch(n){if(console.error(`Webhook attempt ${r} failed:`,n),r<this.retryAttempts)return await new Promise(a=>setTimeout(a,this.retryDelay*r)),this.sendWithRetry(t,r+1);throw n}}logFailedWebhook(t,r){console.error("Failed webhook logged:",{leadId:t.leadId,actionType:t.actionType,timestamp:t.timestamp,error:r.message,userId:t.userId})}async trackStatusChange(t,r,n,a){const l={leadId:t,actionType:"status_change",actionDetails:{field:"status",oldValue:r,newValue:n},timestamp:new Date().toISOString(),userId:a};await this.sendLeadAction(l)}async trackChecklistUpdate(t,r,n,a,l){const o={leadId:t,actionType:"checklist_update",actionDetails:{checklistItem:r,oldValue:n,newValue:a,field:"lead_checklist"},timestamp:new Date().toISOString(),userId:l};await this.sendLeadAction(o)}async trackFollowUpUpdate(t,r,n,a,l){const o={leadId:t,actionType:"follow_up_update",actionDetails:{followUpIndex:r,oldValue:n,newValue:a,field:"follow_ups_completed"},timestamp:new Date().toISOString(),userId:l};await this.sendLeadAction(o)}async trackLeadCreated(t,r){const n={leadId:t,actionType:"lead_created",actionDetails:{},timestamp:new Date().toISOString(),userId:r};await this.sendLeadAction(n)}async trackLeadUpdated(t,r,n){const a={leadId:t,actionType:"lead_updated",actionDetails:{changes:r},timestamp:new Date().toISOString(),userId:n};await this.sendLeadAction(a)}async trackLeadDeleted(t,r){const n={leadId:t,actionType:"lead_deleted",actionDetails:{},timestamp:new Date().toISOString(),userId:r};await this.sendLeadAction(n)}}const Vs=new K1,mi=()=>{const{user:e}=Oe();return{trackStatusChange:async(i,c,h)=>{e&&await Vs.trackStatusChange(i,c,h,e.id)},trackChecklistUpdate:async(i,c,h,u)=>{e&&await Vs.trackChecklistUpdate(i,c,h,u,e.id)},trackFollowUpUpdate:async(i,c,h,u)=>{e&&await Vs.trackFollowUpUpdate(i,c,h,u,e.id)},trackLeadCreated:async i=>{e&&await Vs.trackLeadCreated(i,e.id)},trackLeadUpdated:async(i,c)=>{e&&await Vs.trackLeadUpdated(i,c,e.id)},trackLeadDeleted:async i=>{e&&await Vs.trackLeadDeleted(i,e.id)}}},Q1=({leadId:e,followUps:t,followUpDates:r,onUpdate:n,size:a="md"})=>{const[l,o]=j.useState(null),{trackFollowUpUpdate:i}=mi(),c={sm:"w-7 h-7 text-xs",md:"w-8 h-8 text-sm",lg:"w-10 h-10 text-base"},h=async d=>{o(d);try{const m=[...t],p=[...r],f=m[d];m[d]=!m[d],m[d]?p[d]=new Date().toISOString():p[d]=null;const{error:x}=await K.from("leads").update({follow_ups_completed:m,follow_up_dates:p,updated_at:new Date().toISOString()}).eq("id",e);if(x)throw x;await i(e,d,f,m[d]),n(m,p)}catch(m){console.error("Error updating follow-up:",m)}finally{o(null)}},u=t.filter(Boolean).length;return s.jsxs("div",{className:"flex items-center space-x-1.5",children:[s.jsx("div",{className:"flex space-x-1",children:t.map((d,m)=>s.jsxs("button",{onClick:()=>h(m),disabled:l===m,className:`
              ${c[a]} rounded-full font-semibold transition-all duration-300 relative overflow-hidden
              ${d?"bg-gradient-to-br from-teal-400 to-cyan-600 text-white shadow-lg shadow-teal-500/25 ring-2 ring-teal-400/30":"bg-gray-700/80 hover:bg-gray-600/80 text-gray-300 border border-gray-600/50 hover:border-gray-500/50"}
              ${l===m?"opacity-50 cursor-not-allowed":"hover:scale-110 hover:shadow-xl cursor-pointer"}
              ${d?"hover:shadow-teal-500/40 hover:ring-teal-400/50":"hover:shadow-gray-500/20"}
              group
            `,title:`Follow-up #${m+1}${d?" (Completed)":""}`,children:[d&&s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-teal-300/20 to-cyan-500/20 rounded-full animate-pulse"}),s.jsx("span",{className:"relative z-10",children:l===m?s.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border border-white border-t-transparent mx-auto"}):m+1}),s.jsx("div",{className:`
              absolute inset-0 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300
              ${d?"bg-gradient-to-br from-teal-300/30 to-cyan-500/30":"bg-gradient-to-br from-gray-400/20 to-gray-500/20"}
            `})]},m))}),s.jsxs("div",{className:"ml-2 flex items-center space-x-1",children:[s.jsx("div",{className:"w-8 bg-gray-700 rounded-full h-1.5 overflow-hidden",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-teal-400 to-cyan-600 transition-all duration-500 ease-out shadow-sm",style:{width:`${u/7*100}%`}})}),s.jsxs("span",{className:"text-xs text-gray-400 font-medium min-w-[2rem]",children:[u,"/7"]})]})]})},Ju=({leadId:e,checklist:t,checklistDates:r,onUpdate:n,size:a="md",showLabels:l=!0})=>{const[o,i]=j.useState(null),{trackChecklistUpdate:c}=mi(),h=[{key:"warm_lead",label:"Warm Lead",description:"Lead shows genuine interest",icon:""},{key:"quality_conversation",label:"Quality Conversation",description:"Had meaningful discussion",icon:""},{key:"lead_magnet_sent",label:"Lead Magnet Sent",description:"Sent valuable resource/content",icon:""},{key:"asset_consumed",label:"Asset Consumed",description:"Lead engaged with content",icon:""},{key:"booking_requested",label:"Booking Requested",description:"Lead requested meeting/call",icon:""},{key:"nurture_sequence",label:"Nurture Sequence",description:"Added to nurture campaign",icon:""}],u={sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"},d={sm:"text-xs",md:"text-sm",lg:"text-base"},m=async g=>{i(g);try{const v={...t},y={...r},w=v[g];v[g]=!v[g],v[g]?y[g]=new Date().toISOString():y[g]=null;const{error:N}=await K.from("leads").update({lead_checklist:v,checklist_dates:y,updated_at:new Date().toISOString()}).eq("id",e);if(N)throw N;await c(e,g,w,v[g]),n(v,y)}catch(v){console.error("Error updating checklist:",v)}finally{i(null)}},p=Object.values(t).filter(Boolean).length,f=h.length,x=p/f*100,b=g=>g?new Date(g).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):null;return a==="sm"&&!l?s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"grid grid-cols-3 gap-1",children:h.map(g=>{const v=t[g.key],y=o===g.key;return s.jsx("button",{onClick:()=>m(g.key),disabled:y,className:`
                  w-6 h-6 rounded-lg border transition-all duration-200 flex items-center justify-center text-xs
                  ${v?"bg-gradient-to-br from-teal-400 to-cyan-600 border-teal-400 text-white shadow-sm":"border-gray-600 hover:border-gray-500 bg-gray-800/80 hover:bg-gray-700/80 text-gray-400"}
                  ${y?"opacity-50 cursor-not-allowed":"hover:scale-110 cursor-pointer"}
                `,title:`${g.label}${v?" (Completed)":""}`,children:y?s.jsx("div",{className:"animate-spin rounded-full h-2 w-2 border border-white border-t-transparent"}):v?s.jsx(xm,{className:"h-3 w-3"}):s.jsx("span",{className:"opacity-60",children:g.icon})},g.key)})}),s.jsxs("div",{className:"text-xs text-gray-400 font-medium",children:[p,"/",f]})]}):s.jsxs("div",{className:"space-y-4",children:[l&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Yt,{className:"h-5 w-5 text-teal-400"}),s.jsx("h3",{className:`font-semibold gradient-text section-gradient-leads ${d[a]}`,children:"Lead Progression Checklist"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("span",{className:"text-sm text-gray-400 font-medium",children:[p,"/",f," completed"]}),s.jsx("div",{className:"w-20 bg-gray-700 rounded-full h-2.5 overflow-hidden shadow-inner",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-teal-400 to-cyan-600 rounded-full transition-all duration-700 ease-out shadow-sm",style:{width:`${x}%`}})}),s.jsxs("span",{className:"text-sm font-bold text-teal-400",children:[Math.round(x),"%"]})]})]}),s.jsx("div",{className:`grid ${l?"grid-cols-1 lg:grid-cols-2 gap-3":"grid-cols-2 gap-2"}`,children:h.map((g,v)=>{const y=t[g.key],w=o===g.key,N=r[g.key];return s.jsxs("div",{className:`
                flex items-center space-x-3 p-3 rounded-xl transition-all duration-300 group cursor-pointer
                ${y?"bg-gradient-to-r from-teal-900/30 to-cyan-900/30 border border-teal-500/30 shadow-lg shadow-teal-500/10":"bg-gray-800/40 hover:bg-gray-700/50 border border-gray-700/50 hover:border-gray-600/50"}
                hover:scale-[1.02] hover:shadow-xl
                ${y?"hover:shadow-teal-500/20":"hover:shadow-gray-500/10"}
              `,onClick:()=>m(g.key),children:[s.jsx("div",{className:"relative",children:s.jsxs("button",{disabled:w,className:`
                    ${u[a]} rounded-lg border-2 transition-all duration-300 flex items-center justify-center relative overflow-hidden
                    ${y?"bg-gradient-to-br from-teal-400 to-cyan-600 border-teal-400 text-white shadow-lg shadow-teal-500/30":"border-gray-600 hover:border-gray-500 bg-gray-800/80 hover:bg-gray-700/80"}
                    ${w?"opacity-50 cursor-not-allowed":"hover:scale-110 cursor-pointer"}
                    group-hover:shadow-xl
                  `,children:[y&&s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-teal-300/20 to-cyan-500/20 rounded-lg animate-pulse"}),s.jsx("span",{className:"relative z-10",children:w?s.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border border-white border-t-transparent"}):y?s.jsx(xm,{className:"h-3 w-3 drop-shadow-sm"}):s.jsx("span",{className:`${d[a]} opacity-60`,children:g.icon})}),s.jsx("div",{className:`
                    absolute inset-0 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300
                    ${y?"bg-gradient-to-br from-teal-300/30 to-cyan-500/30":"bg-gradient-to-br from-gray-400/20 to-gray-500/20"}
                  `})]})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:`
                    font-semibold transition-all duration-300
                    ${y?"text-white":"text-gray-300 group-hover:text-white"}
                    ${d[a]}
                  `,children:g.label}),y&&N&&l&&s.jsxs("div",{className:"flex items-center space-x-1 text-xs text-teal-400 bg-teal-900/30 px-2 py-1 rounded-full",children:[s.jsx(lr,{className:"h-3 w-3"}),s.jsx("span",{className:"font-medium",children:b(N)})]})]}),l&&s.jsx("p",{className:`
                    text-xs mt-1 transition-colors duration-300
                    ${y?"text-gray-300":"text-gray-500 group-hover:text-gray-400"}
                  `,children:g.description})]}),y&&s.jsx("div",{className:"flex-shrink-0",children:s.jsx(Aa,{className:"h-4 w-4 text-teal-400 animate-pulse"})})]},g.key)})}),l&&s.jsxs("div",{className:`
          mt-6 p-4 rounded-xl transition-all duration-300
          ${p===f?"bg-gradient-to-r from-teal-900/40 to-cyan-900/40 border border-teal-500/40 shadow-lg shadow-teal-500/20":"bg-gray-800/40 border border-gray-700/50"}
        `,children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Aa,{className:`
                h-6 w-6 transition-colors duration-300
                ${p===f?"text-teal-400 animate-pulse":"text-gray-400"}
              `}),s.jsxs("div",{children:[s.jsxs("span",{className:"text-base font-semibold text-gray-200",children:["Progress: ",Math.round(x),"%"]}),s.jsxs("p",{className:"text-xs text-gray-400 mt-0.5",children:[p," of ",f," milestones completed"]})]})]}),p===f&&s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Yt,{className:"h-4 w-4 text-yellow-400 animate-pulse"}),s.jsx("span",{className:"text-sm bg-gradient-to-r from-teal-400 to-cyan-600 bg-clip-text text-transparent font-bold",children:"All milestones completed!"})]})]}),s.jsx("div",{className:"mt-3 w-full bg-gray-700 rounded-full h-2 overflow-hidden shadow-inner",children:s.jsx("div",{className:`
                h-full rounded-full transition-all duration-700 ease-out
                ${p===f?"bg-gradient-to-r from-teal-400 via-cyan-500 to-teal-400 animate-pulse shadow-lg shadow-teal-500/30":"bg-gradient-to-r from-teal-400 to-cyan-600 shadow-sm"}
              `,style:{width:`${x}%`}})})]})]})},Xu=({lead:e,isOpen:t,onClose:r,onSave:n})=>{const{user:a}=Oe(),{trackLeadCreated:l,trackLeadUpdated:o,trackStatusChange:i}=mi(),[c,h]=j.useState(!1),[u,d]=j.useState(""),[m,p]=j.useState([]),[f,x]=j.useState({first_name:"",last_name:"",email:"",phone:"",company:"",job_title:"",status:"new",lead_source:"",lead_type:"",priority:"medium",revenue_generated:0,cash_collected:0,assigned_to:"",notes:""});j.useEffect(()=>{t&&(async()=>{try{const{data:C,error:_}=await K.from("users").select("id, email, full_name").order("full_name");if(_)throw _;p(C||[])}catch(C){console.error("Error fetching users:",C)}})()},[t]),j.useEffect(()=>{x(e?{first_name:e.first_name||"",last_name:e.last_name||"",email:e.email||"",phone:e.phone||"",company:e.company||"",job_title:e.job_title||"",status:e.status||"new",lead_source:e.lead_source||"",lead_type:e.lead_type||"",priority:e.priority||"medium",revenue_generated:e.revenue_generated||0,cash_collected:e.cash_collected||0,assigned_to:e.assigned_to||"",notes:e.notes||""}:{first_name:"",last_name:"",email:"",phone:"",company:"",job_title:"",status:"new",lead_source:"",lead_type:"",priority:"medium",revenue_generated:0,cash_collected:0,assigned_to:"",notes:""}),d("")},[e,t]);const b=[{value:"new",label:"New"},{value:"contacted",label:"Contacted"},{value:"qualified",label:"Qualified"},{value:"proposal_sent",label:"Proposal Sent"},{value:"closed_won",label:"Closed Won"},{value:"closed_lost",label:"Closed Lost"},{value:"nurturing",label:"Nurturing"},{value:"unqualified",label:"Unqualified"}],g=[{value:"inbound",label:"Inbound"},{value:"outbound",label:"Outbound"},{value:"referral",label:"Referral"},{value:"partner",label:"Partner"}],v=[{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"},{value:"urgent",label:"Urgent"}],y=["Website","Referral","Cold Call","LinkedIn","Facebook","Google Ads","Email Campaign","Trade Show","Networking","Skool Group","YouTube","Other"],w=D=>{const{name:C,value:_,type:S}=D.target;x(O=>({...O,[C]:S==="number"?parseFloat(_)||0:_}))},N=(D,C)=>{e&&{...e}},k=async D=>{if(D.preventDefault(),!!a){if(f.cash_collected>f.revenue_generated){d("Cash collected cannot exceed revenue generated");return}h(!0),d("");try{const C={...f,lead_type:f.lead_type||null,assigned_to:f.assigned_to||null,updated_at:new Date().toISOString()};if(e){e.status!==f.status&&await i(e.id,e.status,f.status);const _={};Object.keys(f).forEach(E=>{const I=E;e[I]!==f[I]&&(_[E]={old:e[I],new:f[I]})});const{data:S,error:O}=await K.from("leads").update(C).eq("id",e.id).select().single();if(O)throw O;Object.keys(_).length>0&&await o(e.id,_),n(S)}else{const{data:_,error:S}=await K.from("leads").insert({...C,created_by:a.id,follow_ups_completed:[!1,!1,!1,!1,!1,!1,!1],follow_up_dates:[null,null,null,null,null,null,null],lead_checklist:{warm_lead:!1,quality_conversation:!1,lead_magnet_sent:!1,asset_consumed:!1,booking_requested:!1,nurture_sequence:!1},checklist_dates:{warm_lead:null,quality_conversation:null,lead_magnet_sent:null,asset_consumed:null,booking_requested:null,nurture_sequence:null}}).select().single();if(S)throw S;await l(_.id),n(_)}r()}catch(C){d(C.message)}finally{h(!1)}}};return t?s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"glass-card w-full max-w-5xl max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-700",children:[s.jsx("h2",{className:"text-xl font-semibold gradient-text section-gradient-leads",children:e?"Edit Lead":"Add New Lead"}),s.jsx("button",{onClick:r,className:"text-gray-400 hover:text-white transition-colors",children:s.jsx(cr,{className:"h-6 w-6"})})]}),s.jsxs("form",{onSubmit:k,className:"p-6 space-y-6",children:[u&&s.jsx("div",{className:"p-4 bg-red-900/20 border border-red-500/30 rounded-lg",children:s.jsx("p",{className:"text-red-400 text-sm",children:u})}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"First Name *"}),s.jsxs("div",{className:"relative",children:[s.jsx(Fe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"text",name:"first_name",value:f.first_name,onChange:w,className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-white placeholder-gray-400",placeholder:"First name",required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Last Name *"}),s.jsxs("div",{className:"relative",children:[s.jsx(Fe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"text",name:"last_name",value:f.last_name,onChange:w,className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-white placeholder-gray-400",placeholder:"Last name",required:!0})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Email *"}),s.jsxs("div",{className:"relative",children:[s.jsx(Qt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"email",name:"email",value:f.email,onChange:w,className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-white placeholder-gray-400",placeholder:"Email address",required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Phone"}),s.jsxs("div",{className:"relative",children:[s.jsx(_t,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"tel",name:"phone",value:f.phone,onChange:w,className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-white placeholder-gray-400",placeholder:"Phone number"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Company"}),s.jsxs("div",{className:"relative",children:[s.jsx(As,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"text",name:"company",value:f.company,onChange:w,className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-white placeholder-gray-400",placeholder:"Company name"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Job Title"}),s.jsxs("div",{className:"relative",children:[s.jsx(el,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"text",name:"job_title",value:f.job_title,onChange:w,className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-white placeholder-gray-400",placeholder:"Job title"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Assign To"}),s.jsxs("div",{className:"relative",children:[s.jsx(dx,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsxs("select",{name:"assigned_to",value:f.assigned_to,onChange:w,className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-white",children:[s.jsx("option",{value:"",children:"Unassigned"}),m.map(D=>s.jsx("option",{value:D.id,children:D.full_name||D.email},D.id))]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Status"}),s.jsx("select",{name:"status",value:f.status,onChange:w,className:"w-full px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-white",children:b.map(D=>s.jsx("option",{value:D.value,children:D.label},D.value))})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Revenue Generated"}),s.jsxs("div",{className:"relative",children:[s.jsx(oe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"number",name:"revenue_generated",value:f.revenue_generated,onChange:w,min:"0",step:"0.01",className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-white placeholder-gray-400",placeholder:"0.00"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Cash Collected"}),s.jsxs("div",{className:"relative",children:[s.jsx(oe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-green-400"}),s.jsx("input",{type:"number",name:"cash_collected",value:f.cash_collected,onChange:w,min:"0",max:f.revenue_generated,step:"0.01",className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-white placeholder-gray-400",placeholder:"0.00"})]}),s.jsxs("p",{className:"text-xs text-gray-400",children:["Cannot exceed revenue generated ($",f.revenue_generated.toFixed(2),")"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Priority"}),s.jsx("select",{name:"priority",value:f.priority,onChange:w,className:"w-full px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-white",children:v.map(D=>s.jsx("option",{value:D.value,children:D.label},D.value))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Lead Type"}),s.jsxs("select",{name:"lead_type",value:f.lead_type,onChange:w,className:"w-full px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-white",children:[s.jsx("option",{value:"",children:"Select type..."}),g.map(D=>s.jsx("option",{value:D.value,children:D.label},D.value))]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Lead Source"}),s.jsxs("select",{name:"lead_source",value:f.lead_source,onChange:w,className:"w-full px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-white",children:[s.jsx("option",{value:"",children:"Select source..."}),y.map(D=>s.jsx("option",{value:D,children:D},D))]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Notes"}),s.jsx("textarea",{name:"notes",value:f.notes,onChange:w,rows:4,className:"w-full px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-white placeholder-gray-400 resize-none",placeholder:"Additional notes about this lead..."})]})]}),e&&e.lead_checklist&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"glass-card p-4",children:s.jsx(Ju,{leadId:e.id,checklist:e.lead_checklist,checklistDates:e.checklist_dates,onUpdate:N,size:"md",showLabels:!0})}),s.jsxs("div",{className:"glass-card p-4",children:[s.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[s.jsx(oe,{className:"h-5 w-5 mr-2 text-green-400"}),"Financial Summary"]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-400",children:"Revenue Generated:"}),s.jsxs("span",{className:"text-white font-semibold",children:["$",f.revenue_generated.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-400",children:"Cash Collected:"}),s.jsxs("span",{className:"text-green-400 font-semibold",children:["$",f.cash_collected.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-gray-700",children:[s.jsx("span",{className:"text-gray-400",children:"Outstanding:"}),s.jsxs("span",{className:"text-yellow-400 font-semibold",children:["$",(f.revenue_generated-f.cash_collected).toFixed(2)]})]}),f.revenue_generated>0&&s.jsxs("div",{className:"mt-3",children:[s.jsxs("div",{className:"flex justify-between text-sm text-gray-400 mb-1",children:[s.jsx("span",{children:"Collection Rate"}),s.jsxs("span",{children:[(f.cash_collected/f.revenue_generated*100).toFixed(1),"%"]})]}),s.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:s.jsx("div",{className:"h-2 bg-gradient-to-r from-green-400 to-emerald-600 rounded-full transition-all duration-500",style:{width:`${f.cash_collected/f.revenue_generated*100}%`}})})]})]})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t border-gray-700",children:[s.jsx("button",{type:"button",onClick:r,className:"px-6 py-2 text-gray-400 hover:text-white transition-colors",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:c,className:"flex items-center space-x-2 px-6 py-2 bg-gradient-to-r from-teal-400 to-cyan-600 hover:from-teal-500 hover:to-cyan-700 text-white font-medium rounded-lg transition-all duration-200 disabled:opacity-50",children:c?s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):s.jsxs(s.Fragment,{children:[s.jsx($s,{className:"h-5 w-5"}),s.jsx("span",{children:e?"Update Lead":"Create Lead"})]})})]})]})]})}):null},sl=()=>{const[e,t]=j.useState([]),[r,n]=j.useState(!1),[a,l]=j.useState(null);return{users:e,loading:r,error:a,fetchUsers:async()=>{n(!0),l(null);try{const{data:h,error:u}=await K.from("users").select("*").order("created_at",{ascending:!1});if(u)throw u;t(h||[])}catch(h){console.error("Error fetching users:",h),l(h.message)}finally{n(!1)}},createUserProfile:async h=>{try{const{data:u,error:d}=await K.from("users").insert(h).select().single();if(d)throw d;return t(m=>[u,...m]),{data:u,error:null}}catch(u){return console.error("Error creating user profile:",u),{data:null,error:u}}},updateUserProfile:async(h,u)=>{try{const{data:d,error:m}=await K.from("users").update(u).eq("id",h).select().single();if(m)throw m;return t(p=>p.map(f=>f.id===h?{...f,...d}:f)),{data:d,error:null}}catch(d){return console.error("Error updating user profile:",d),{data:null,error:d}}}}},Y1=({selectedLeadId:e,onLeadSelect:t,onCreateNewLead:r,disabled:n=!1})=>{const[a,l]=j.useState([]),[o,i]=j.useState([]),[c,h]=j.useState(""),[u,d]=j.useState(!1),[m,p]=j.useState(!1),f=a.find(y=>y.id===e);j.useEffect(()=>{x()},[]),j.useEffect(()=>{if(c){const y=a.filter(w=>w.first_name.toLowerCase().includes(c.toLowerCase())||w.last_name.toLowerCase().includes(c.toLowerCase())||w.email.toLowerCase().includes(c.toLowerCase())||w.company&&w.company.toLowerCase().includes(c.toLowerCase()));i(y)}else i(a)},[c,a]);const x=async()=>{p(!0);try{const{data:y,error:w}=await K.from("leads").select("*").order("created_at",{ascending:!1});if(w)throw w;l(y||[]),i(y||[])}catch(y){console.error("Error fetching leads:",y)}finally{p(!1)}},b=y=>{t(y.id),d(!1),h("")},g=()=>{t(null)},v=y=>{const w={new:"bg-blue-900/30 text-blue-400",contacted:"bg-yellow-900/30 text-yellow-400",qualified:"bg-green-900/30 text-green-400",proposal_sent:"bg-purple-900/30 text-purple-400",closed_won:"bg-emerald-900/30 text-emerald-400",closed_lost:"bg-red-900/30 text-red-400",nurturing:"bg-orange-900/30 text-orange-400",unqualified:"bg-gray-900/30 text-gray-400"};return w[y]||w.new};return s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Link to Lead (Optional)"}),s.jsxs("div",{className:"relative",children:[f?s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-800/50 border border-gray-700 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-teal-900/30 rounded-lg",children:s.jsx(Fe,{className:"h-5 w-5 text-teal-400"})}),s.jsxs("div",{children:[s.jsxs("div",{className:"font-semibold text-white",children:[f.first_name," ",f.last_name]}),s.jsx("div",{className:"text-sm text-gray-400",children:f.email}),f.company&&s.jsx("div",{className:"text-sm text-gray-500",children:f.company}),s.jsx("div",{className:"mt-1",children:s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${v(f.status)}`,children:f.status.replace("_"," ").toUpperCase()})})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{type:"button",onClick:()=>d(!0),disabled:n,className:"px-3 py-1 text-sm bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors disabled:opacity-50",children:"Change"}),s.jsx("button",{type:"button",onClick:g,disabled:n,className:"p-1 text-gray-400 hover:text-red-400 transition-colors disabled:opacity-50",children:s.jsx(cr,{className:"h-4 w-4"})})]})]}):s.jsxs("button",{type:"button",onClick:()=>d(!0),disabled:n,className:"w-full flex items-center justify-center space-x-2 p-4 bg-gray-800/50 border border-gray-700 rounded-lg hover:bg-gray-700/50 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(Fe,{className:"h-5 w-5 text-gray-400"}),s.jsx("span",{className:"text-gray-300",children:"Select Lead to Link"})]}),u&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50",onClick:()=>d(!1)}),s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"glass-card w-full max-w-4xl max-h-[80vh] overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-700",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Fe,{className:"h-6 w-6 text-teal-400"}),s.jsx("h3",{className:"text-lg font-semibold text-white",children:"Select Lead"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[r&&s.jsxs("button",{onClick:()=>{r(),d(!1)},className:"flex items-center space-x-2 px-4 py-2 bg-teal-600 hover:bg-teal-700 text-white rounded-lg transition-colors",children:[s.jsx(St,{className:"h-4 w-4"}),s.jsx("span",{children:"Create New Lead"})]}),s.jsx("button",{onClick:()=>d(!1),className:"text-gray-400 hover:text-white transition-colors",children:s.jsx(cr,{className:"h-6 w-6"})})]})]}),s.jsx("div",{className:"p-6 border-b border-gray-700",children:s.jsxs("div",{className:"relative",children:[s.jsx(Lr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search leads by name, email, or company...",value:c,onChange:y=>h(y.target.value),className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-white placeholder-gray-400",autoFocus:!0})]})}),s.jsx("div",{className:"p-6 max-h-96 overflow-y-auto",children:m?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-teal-400"})}):o.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Fe,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-400",children:c?"No leads found matching your search.":"No leads available."})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:o.map(y=>s.jsx("button",{onClick:()=>b(y),className:"text-left p-4 bg-gray-800/30 hover:bg-gray-700/50 border border-gray-700/50 hover:border-teal-500/50 rounded-lg transition-all duration-200 hover:scale-105",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"p-2 bg-teal-900/30 rounded-lg",children:s.jsx(Fe,{className:"h-5 w-5 text-teal-400"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"font-semibold text-white",children:[y.first_name," ",y.last_name]}),s.jsxs("div",{className:"text-sm text-gray-400 flex items-center space-x-1 mt-1",children:[s.jsx(Qt,{className:"h-3 w-3"}),s.jsx("span",{className:"truncate",children:y.email})]}),y.company&&s.jsxs("div",{className:"text-sm text-gray-400 flex items-center space-x-1 mt-1",children:[s.jsx(As,{className:"h-3 w-3"}),s.jsx("span",{className:"truncate",children:y.company})]}),y.phone&&s.jsxs("div",{className:"text-sm text-gray-400 flex items-center space-x-1 mt-1",children:[s.jsx(_t,{className:"h-3 w-3"}),s.jsx("span",{children:y.phone})]}),s.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${v(y.status)}`,children:y.status.replace("_"," ").toUpperCase()}),y.revenue_generated>0&&s.jsxs("span",{className:"text-xs text-green-400 font-medium",children:["$",y.revenue_generated.toLocaleString()]})]})]})]})},y.id))})}),s.jsx("div",{className:"p-6 border-t border-gray-700 bg-gray-800/30",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("p",{className:"text-sm text-gray-400",children:[o.length," lead",o.length!==1?"s":""," available"]}),s.jsx("button",{onClick:()=>d(!1),className:"px-4 py-2 text-gray-400 hover:text-white transition-colors",children:"Cancel"})]})})]})})]})]}),s.jsx("p",{className:"text-xs text-gray-500",children:"Link this deal to an existing lead to track the complete sales journey."})]})},Zu=({deal:e,isOpen:t,onClose:r,onSave:n,leadId:a})=>{const{user:l}=Oe(),{users:o,fetchUsers:i}=sl(),[c,h]=j.useState(!1),[u,d]=j.useState(""),[m,p]=j.useState(!1),[f,x]=j.useState({deal_name:"",deal_value:0,probability:50,expected_close_date:"",stage:"new_opportunity",deal_owner:"",service_type:"",deal_source:"",notes:"",lead_id:a||""});j.useEffect(()=>{t&&i()},[t,i]),j.useEffect(()=>{x(e?{deal_name:e.deal_name||"",deal_value:e.deal_value||0,probability:e.probability||50,expected_close_date:e.expected_close_date?e.expected_close_date.split("T")[0]:"",stage:e.stage||"new_opportunity",deal_owner:e.deal_owner||"",service_type:e.service_type||"",deal_source:e.deal_source||"",notes:e.notes||"",lead_id:e.lead_id||""}:{deal_name:"",deal_value:0,probability:50,expected_close_date:"",stage:"new_opportunity",deal_owner:(l==null?void 0:l.id)||"",service_type:"",deal_source:"",notes:"",lead_id:a||""}),d("")},[e,t,l,a]);const b=[{value:"new_opportunity",label:"New Opportunity"},{value:"discovery_call_scheduled",label:"Discovery Call Scheduled"},{value:"discovery_call_completed",label:"Discovery Call Completed"},{value:"proposal_preparation",label:"Proposal Preparation"},{value:"proposal_sent",label:"Proposal Sent"},{value:"proposal_review",label:"Proposal Review"},{value:"negotiation",label:"Negotiation"},{value:"contract_sent",label:"Contract Sent"},{value:"contract_signed",label:"Contract Signed"},{value:"project_kickoff",label:"Project Kickoff"},{value:"on_hold",label:"On Hold"},{value:"lost",label:"Lost"}],g=[{value:"Growth Creator",label:"Growth Creator"},{value:"AIGC Systems",label:"AIGC Systems"},{value:"Custom Projects",label:"Custom Projects"},{value:"Ongoing Support",label:"Ongoing Support"},{value:"Business Consulting",label:"Business Consulting"},{value:"System Optimization",label:"System Optimization"},{value:"CRM Implementation",label:"CRM Implementation"}],v=["Website","Referral","Cold Outreach","LinkedIn","Facebook","Google Ads","Email Campaign","Trade Show","Networking","Skool Group","YouTube","Existing Client","Partner","Lead Conversion","Other"],y=C=>{const{name:_,value:S,type:O}=C.target;x(E=>({...E,[_]:O==="number"?parseFloat(S)||0:S}))},w=C=>{x(_=>({..._,lead_id:C||""}))},N=()=>{p(!0)},k=C=>{x(_=>({..._,lead_id:C.id,deal_name:_.deal_name||`${C.company||`${C.first_name} ${C.last_name}`} - Consulting Project`})),p(!1)},D=async C=>{if(C.preventDefault(),!!l){h(!0),d("");try{const _={...f,deal_value:Number(f.deal_value),probability:Number(f.probability),expected_close_date:f.expected_close_date?new Date(f.expected_close_date).toISOString():null,service_type:f.service_type||null,deal_owner:f.deal_owner||null,lead_id:f.lead_id||null,updated_at:new Date().toISOString()};if(e){const{data:S,error:O}=await K.from("deals").update(_).eq("id",e.id).select(`
            *,
            lead:leads(id, first_name, last_name, email, company, phone),
            owner:deal_owner(id, email, full_name, role)
          `).single();if(O)throw O;n(S)}else{const{data:S,error:O}=await K.from("deals").insert({..._,created_by:l.id}).select(`
            *,
            lead:leads(id, first_name, last_name, email, company, phone),
            owner:deal_owner(id, email, full_name, role)
          `).single();if(O)throw O;f.lead_id&&await K.from("leads").update({status:"qualified",conversion_date:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("id",f.lead_id),n(S)}r()}catch(_){d(_.message)}finally{h(!1)}}};return t?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"glass-card w-full max-w-5xl max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-700",children:[s.jsx("h2",{className:"text-xl font-semibold gradient-text section-gradient-sales",children:e?"Edit Deal":a?"Convert Lead to Deal":"Create New Deal"}),s.jsx("button",{onClick:r,className:"text-gray-400 hover:text-white transition-colors",children:s.jsx(cr,{className:"h-6 w-6"})})]}),s.jsxs("form",{onSubmit:D,className:"p-6 space-y-6",children:[u&&s.jsx("div",{className:"p-4 bg-red-900/20 border border-red-500/30 rounded-lg",children:s.jsx("p",{className:"text-red-400 text-sm",children:u})}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsx(Y1,{selectedLeadId:f.lead_id,onLeadSelect:w,onCreateNewLead:N,disabled:c}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Deal Name *"}),s.jsxs("div",{className:"relative",children:[s.jsx(el,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"text",name:"deal_name",value:f.deal_name,onChange:y,className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-white placeholder-gray-400",placeholder:"Enter deal name",required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Deal Value *"}),s.jsxs("div",{className:"relative",children:[s.jsx(oe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"number",name:"deal_value",value:f.deal_value,onChange:y,min:"0",step:"100",className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-white placeholder-gray-400",placeholder:"0",required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Close Probability (%)"}),s.jsxs("div",{className:"relative",children:[s.jsx(ye,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"number",name:"probability",value:f.probability,onChange:y,min:"0",max:"100",className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-white placeholder-gray-400"})]}),s.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:s.jsx("div",{className:"h-2 bg-gradient-to-r from-red-400 via-yellow-400 to-green-400 rounded-full transition-all duration-300",style:{width:`${f.probability}%`}})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Expected Close Date"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ne,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"date",name:"expected_close_date",value:f.expected_close_date,onChange:y,className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-white"})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Stage"}),s.jsx("select",{name:"stage",value:f.stage,onChange:y,className:"w-full px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-white",children:b.map(C=>s.jsx("option",{value:C.value,children:C.label},C.value))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Deal Owner"}),s.jsxs("div",{className:"relative",children:[s.jsx(Fe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsxs("select",{name:"deal_owner",value:f.deal_owner,onChange:y,className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-white",children:[s.jsx("option",{value:"",children:"Unassigned"}),o.map(C=>s.jsx("option",{value:C.id,children:C.full_name||C.email},C.id))]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Service Type"}),s.jsxs("select",{name:"service_type",value:f.service_type,onChange:y,className:"w-full px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-white",children:[s.jsx("option",{value:"",children:"Select service type..."}),g.map(C=>s.jsx("option",{value:C.value,children:C.label},C.value))]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Deal Source"}),s.jsxs("select",{name:"deal_source",value:f.deal_source,onChange:y,className:"w-full px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-white",children:[s.jsx("option",{value:"",children:"Select source..."}),v.map(C=>s.jsx("option",{value:C,children:C},C))]})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Notes"}),s.jsxs("div",{className:"relative",children:[s.jsx(Dt,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),s.jsx("textarea",{name:"notes",value:f.notes,onChange:y,rows:4,className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-white placeholder-gray-400 resize-none",placeholder:"Additional notes about this deal..."})]})]}),s.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t border-gray-700",children:[s.jsx("button",{type:"button",onClick:r,className:"px-6 py-2 text-gray-400 hover:text-white transition-colors",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:c,className:"flex items-center space-x-2 px-6 py-2 bg-gradient-to-r from-teal-400 to-cyan-600 hover:from-teal-500 hover:to-cyan-700 text-white font-medium rounded-lg transition-all duration-200 disabled:opacity-50",children:c?s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):s.jsxs(s.Fragment,{children:[s.jsx($s,{className:"h-5 w-5"}),s.jsx("span",{children:e?"Update Deal":"Create Deal"})]})})]})]})]})}),s.jsx(Xu,{isOpen:m,onClose:()=>p(!1),onSave:k})]}):null},dr=({children:e,section:t,fallback:r,showFallback:n=!0})=>{const{role:a,loading:l}=Oe(),{hasPermission:o}=hx(a);return l?s.jsx("div",{className:"flex items-center justify-center p-4",children:s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-red-400"})}):o(t)?s.jsx(s.Fragment,{children:e}):n?r||s.jsxs("div",{className:"glass-card p-6 text-center",children:[s.jsx(ox,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-300 mb-2",children:"Access Restricted"}),s.jsx("p",{className:"text-gray-400 text-sm",children:"You don't have permission to access this section."})]}):null},J1=()=>{Oe();const{trackStatusChange:e,trackLeadDeleted:t}=mi(),[r,n]=j.useState([]),[a,l]=j.useState([]),[o,i]=j.useState(!0),[c,h]=j.useState(""),[u,d]=j.useState([]),[m,p]=j.useState(!1),[f,x]=j.useState(!1),[b,g]=j.useState(),[v,y]=j.useState(),[w,N]=j.useState(1),[k,D]=j.useState(10),[C,_]=j.useState(null),[S,O]=j.useState({search:"",status:"",lead_source:"",assigned_to:"",follow_up_completion:"all",checklist_completion:"all"}),E=[10,15,25,50],I=je.useCallback(async()=>{try{i(!0);const{data:L,error:Y}=await K.from("leads").select("*").order("created_at",{ascending:!1});if(Y)throw Y;n(L||[])}catch(L){h(L.message)}finally{i(!1)}},[]);j.useEffect(()=>{I()},[I]),j.useEffect(()=>{let L=[...r];if(S.search){const Y=S.search.toLowerCase();L=L.filter(ae=>ae.first_name.toLowerCase().includes(Y)||ae.last_name.toLowerCase().includes(Y)||ae.email.toLowerCase().includes(Y)||ae.company&&ae.company.toLowerCase().includes(Y))}S.status&&(L=L.filter(Y=>Y.status===S.status)),S.lead_source&&(L=L.filter(Y=>Y.lead_source===S.lead_source)),S.follow_up_completion!=="all"&&(L=L.filter(Y=>{const ae=Y.follow_ups_completed.filter(Boolean).length;return S.follow_up_completion==="complete"?ae===7:ae<7})),S.checklist_completion!=="all"&&(L=L.filter(Y=>{if(!Y.lead_checklist)return S.checklist_completion==="incomplete";const ae=Object.values(Y.lead_checklist).filter(Boolean).length;return S.checklist_completion==="complete"?ae===6:ae<6})),l(L),N(1)},[r,S]);const z=r.reduce((L,Y)=>({totalRevenue:L.totalRevenue+(Y.revenue_generated||0),totalCashCollected:L.totalCashCollected+(Y.cash_collected||0)}),{totalRevenue:0,totalCashCollected:0}),te=Math.ceil(a.length/k),se=(w-1)*k,de=a.slice(se,se+k),$=(L,Y)=>{O(ae=>({...ae,[L]:Y}))},G=L=>{D(L),N(1)},R=L=>{d(Y=>Y.includes(L)?Y.filter(ae=>ae!==L):[...Y,L])},M=()=>{u.length===de.length?d([]):d(de.map(L=>L.id))},F=async()=>{if(u.length&&confirm(`Delete ${u.length} selected leads?`))try{for(const Y of u)await t(Y);const{error:L}=await K.from("leads").delete().in("id",u);if(L)throw L;d([]),I()}catch(L){h(L.message)}},A=L=>{g(L),p(!0)},T=L=>{y(L),x(!0)},W=L=>{n(b?Y=>Y.map(ae=>ae.id===L.id?L:ae):Y=>[L,...Y]),g(void 0)},Z=L=>{I(),y(void 0)},P=(L,Y,ae)=>{n(q=>q.map(re=>re.id===L?{...re,follow_ups_completed:Y,follow_up_dates:ae}:re))},Q=(L,Y,ae)=>{n(q=>q.map(re=>re.id===L?{...re,lead_checklist:Y,checklist_dates:ae}:re))},ue=async(L,Y)=>{try{const ae=r.find(pe=>pe.id===L),q=ae==null?void 0:ae.status,{error:re}=await K.from("leads").update({status:Y,updated_at:new Date().toISOString()}).eq("id",L);if(re)throw re;q&&q!==Y&&await e(L,q,Y),n(pe=>pe.map($e=>$e.id===L?{...$e,status:Y}:$e)),_(null)}catch(ae){console.error("Error updating status:",ae)}},ve=({lead:L})=>{const[Y,ae]=j.useState(!1),q=[{value:"new",label:"New",color:"bg-blue-900/30 text-blue-400 border-blue-500/30"},{value:"contacted",label:"Contacted",color:"bg-yellow-900/30 text-yellow-400 border-yellow-500/30"},{value:"qualified",label:"Qualified",color:"bg-green-900/30 text-green-400 border-green-500/30"},{value:"proposal_sent",label:"Proposal Sent",color:"bg-purple-900/30 text-purple-400 border-purple-500/30"},{value:"closed_won",label:"Closed Won",color:"bg-emerald-900/30 text-emerald-400 border-emerald-500/30"},{value:"closed_lost",label:"Closed Lost",color:"bg-red-900/30 text-red-400 border-red-500/30"},{value:"nurturing",label:"Nurturing",color:"bg-orange-900/30 text-orange-400 border-orange-500/30"},{value:"unqualified",label:"Unqualified",color:"bg-gray-900/30 text-gray-400 border-gray-500/30"}],re=q.find(pe=>pe.value===L.status);return s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>ae(!Y),className:`
            group flex items-center space-x-2 px-3 py-1.5 rounded-full text-xs font-semibold border transition-all duration-200 
            hover:scale-105 hover:shadow-lg cursor-pointer
            ${(re==null?void 0:re.color)||q[0].color}
          `,children:[s.jsx("span",{children:(re==null?void 0:re.label)||"New"}),s.jsx(To,{className:`h-3 w-3 transition-transform duration-200 ${Y?"rotate-180":""}`})]}),Y&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>ae(!1)}),s.jsx("div",{className:"absolute top-full left-0 mt-1 w-48 bg-gray-800 border border-gray-700 rounded-lg shadow-xl z-20 overflow-hidden",children:q.map(pe=>s.jsx("button",{onClick:()=>{ue(L.id,pe.value),ae(!1)},className:`
                    w-full text-left px-4 py-3 text-sm transition-all duration-200 hover:bg-gray-700/50
                    ${pe.value===L.status?"bg-gray-700/30":""}
                    ${pe.color.includes("blue")?"hover:bg-blue-900/20":""}
                    ${pe.color.includes("yellow")?"hover:bg-yellow-900/20":""}
                    ${pe.color.includes("green")?"hover:bg-green-900/20":""}
                    ${pe.color.includes("purple")?"hover:bg-purple-900/20":""}
                    ${pe.color.includes("emerald")?"hover:bg-emerald-900/20":""}
                    ${pe.color.includes("red")?"hover:bg-red-900/20":""}
                    ${pe.color.includes("orange")?"hover:bg-orange-900/20":""}
                    ${pe.color.includes("gray")?"hover:bg-gray-700/20":""}
                  `,children:s.jsx("span",{className:`font-medium ${pe.color.split(" ")[1]}`,children:pe.label})},pe.value))})]})]})};return o?s.jsx("div",{className:"flex items-center justify-center p-8",children:s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-teal-400/30 border-t-teal-400"}),s.jsx("div",{className:"absolute inset-0 rounded-full bg-teal-400/10 animate-pulse"})]})}):s.jsx(dr,{section:"leads",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"space-y-2",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-gradient-to-br from-teal-400/20 to-cyan-600/20 rounded-xl",children:s.jsx(bt,{className:"h-8 w-8 text-teal-400"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold gradient-text section-gradient-leads",children:"Leads CRM"}),s.jsx("p",{className:"text-gray-400 mt-1",children:"Manage and track your leads through the sales pipeline with follow-up and progression tracking."})]})]})}),s.jsxs("button",{onClick:()=>{g(void 0),p(!0)},className:"group flex items-center space-x-2 px-6 py-3 bg-gradient-to-r from-teal-400 to-cyan-600 hover:from-teal-500 hover:to-cyan-700 text-white font-semibold rounded-xl transition-all duration-300 hover:scale-105 hover:shadow-xl hover:shadow-teal-500/25",children:[s.jsx(St,{className:"h-5 w-5 group-hover:rotate-90 transition-transform duration-300"}),s.jsx("span",{children:"Add Lead"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[s.jsx("div",{className:"glass-card p-6 hover:bg-gray-800/60 transition-all duration-300 group hover:scale-105 hover:shadow-xl hover:shadow-teal-500/10",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors",children:"Total Leads"}),s.jsx("p",{className:"text-3xl font-bold text-white mt-1",children:r.length}),s.jsxs("p",{className:"text-xs text-teal-400 mt-1 flex items-center",children:[s.jsx(Ae,{className:"h-3 w-3 mr-1"}),"Active pipeline"]})]}),s.jsx("div",{className:"p-3 bg-gradient-to-br from-teal-400/20 to-cyan-600/20 rounded-xl group-hover:scale-110 transition-transform duration-300",children:s.jsx(bt,{className:"h-8 w-8 text-teal-400"})})]})}),s.jsx("div",{className:"glass-card p-6 hover:bg-gray-800/60 transition-all duration-300 group hover:scale-105 hover:shadow-xl hover:shadow-blue-500/10",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors",children:"New Leads"}),s.jsx("p",{className:"text-3xl font-bold text-white mt-1",children:r.filter(L=>L.status==="new").length}),s.jsxs("p",{className:"text-xs text-blue-400 mt-1 flex items-center",children:[s.jsx(Yt,{className:"h-3 w-3 mr-1"}),"Fresh opportunities"]})]}),s.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-400/20 to-blue-600/20 rounded-xl group-hover:scale-110 transition-transform duration-300",children:s.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-white text-sm font-bold",children:"N"})})})]})}),s.jsx("div",{className:"glass-card p-6 hover:bg-gray-800/60 transition-all duration-300 group hover:scale-105 hover:shadow-xl hover:shadow-green-500/10",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors",children:"Qualified"}),s.jsx("p",{className:"text-3xl font-bold text-white mt-1",children:r.filter(L=>L.status==="qualified").length}),s.jsxs("p",{className:"text-xs text-green-400 mt-1 flex items-center",children:[s.jsx(ye,{className:"h-3 w-3 mr-1"}),"Ready to convert"]})]}),s.jsx("div",{className:"p-3 bg-gradient-to-br from-green-400/20 to-green-600/20 rounded-xl group-hover:scale-110 transition-transform duration-300",children:s.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-green-400 to-green-600 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-white text-sm font-bold",children:"Q"})})})]})}),s.jsx("div",{className:"glass-card p-6 hover:bg-gray-800/60 transition-all duration-300 group hover:scale-105 hover:shadow-xl hover:shadow-emerald-500/10",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors",children:"Total Revenue"}),s.jsxs("p",{className:"text-2xl font-bold text-white mt-1",children:["$",z.totalRevenue.toLocaleString()]}),s.jsxs("p",{className:"text-xs text-emerald-400 mt-1 flex items-center",children:[s.jsx(oe,{className:"h-3 w-3 mr-1"}),"Generated"]})]}),s.jsx("div",{className:"p-3 bg-gradient-to-br from-emerald-400/20 to-emerald-600/20 rounded-xl group-hover:scale-110 transition-transform duration-300",children:s.jsx(oe,{className:"h-8 w-8 text-emerald-400"})})]})}),s.jsx("div",{className:"glass-card p-6 hover:bg-gray-800/60 transition-all duration-300 group hover:scale-105 hover:shadow-xl hover:shadow-green-500/10",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors",children:"Cash Collected"}),s.jsxs("p",{className:"text-2xl font-bold text-green-400 mt-1",children:["$",z.totalCashCollected.toLocaleString()]}),s.jsxs("p",{className:"text-xs text-green-400 mt-1 flex items-center",children:[s.jsx(ct,{className:"h-3 w-3 mr-1"}),"Collected"]})]}),s.jsx("div",{className:"p-3 bg-gradient-to-br from-green-400/20 to-green-600/20 rounded-xl group-hover:scale-110 transition-transform duration-300",children:s.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-green-400 to-green-600 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-white text-sm font-bold",children:"$"})})})]})})]}),s.jsx("div",{className:"glass-card p-6 hover:bg-gray-800/40 transition-all duration-300",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[s.jsxs("div",{className:"relative group",children:[s.jsx(Lr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400 group-hover:text-gray-300 transition-colors"}),s.jsx("input",{type:"text",placeholder:"Search leads...",value:S.search,onChange:L=>$("search",L.target.value),className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-white placeholder-gray-400 hover:bg-gray-700/50 transition-all duration-200"})]}),s.jsxs("select",{value:S.status,onChange:L=>$("status",L.target.value),className:"px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-white hover:bg-gray-700/50 transition-all duration-200",children:[s.jsx("option",{value:"",children:"All Statuses"}),s.jsx("option",{value:"new",children:"New"}),s.jsx("option",{value:"contacted",children:"Contacted"}),s.jsx("option",{value:"qualified",children:"Qualified"}),s.jsx("option",{value:"proposal_sent",children:"Proposal Sent"}),s.jsx("option",{value:"closed_won",children:"Closed Won"}),s.jsx("option",{value:"closed_lost",children:"Closed Lost"}),s.jsx("option",{value:"nurturing",children:"Nurturing"}),s.jsx("option",{value:"unqualified",children:"Unqualified"})]}),s.jsxs("select",{value:S.lead_source,onChange:L=>$("lead_source",L.target.value),className:"px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-white hover:bg-gray-700/50 transition-all duration-200",children:[s.jsx("option",{value:"",children:"All Sources"}),s.jsx("option",{value:"Website",children:"Website"}),s.jsx("option",{value:"Referral",children:"Referral"}),s.jsx("option",{value:"Cold Call",children:"Cold Call"}),s.jsx("option",{value:"LinkedIn",children:"LinkedIn"}),s.jsx("option",{value:"Facebook",children:"Facebook"}),s.jsx("option",{value:"Google Ads",children:"Google Ads"}),s.jsx("option",{value:"Email Campaign",children:"Email Campaign"}),s.jsx("option",{value:"Trade Show",children:"Trade Show"}),s.jsx("option",{value:"Networking",children:"Networking"}),s.jsx("option",{value:"Skool Group",children:"Skool Group"}),s.jsx("option",{value:"YouTube",children:"YouTube"}),s.jsx("option",{value:"Other",children:"Other"})]}),s.jsxs("select",{value:S.follow_up_completion,onChange:L=>$("follow_up_completion",L.target.value),className:"px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-white hover:bg-gray-700/50 transition-all duration-200",children:[s.jsx("option",{value:"all",children:"All Follow-ups"}),s.jsx("option",{value:"incomplete",children:"Incomplete"}),s.jsx("option",{value:"complete",children:"Complete"})]}),s.jsxs("select",{value:S.checklist_completion,onChange:L=>$("checklist_completion",L.target.value),className:"px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-white hover:bg-gray-700/50 transition-all duration-200",children:[s.jsx("option",{value:"all",children:"All Checklists"}),s.jsx("option",{value:"incomplete",children:"Incomplete"}),s.jsx("option",{value:"complete",children:"Complete"})]}),s.jsx("div",{className:"flex space-x-2",children:u.length>0&&s.jsxs("button",{onClick:F,className:"flex items-center space-x-1 px-4 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-all duration-200 hover:scale-105 hover:shadow-lg hover:shadow-red-500/25",children:[s.jsx(Ir,{className:"h-4 w-4"}),s.jsxs("span",{children:["Delete (",u.length,")"]})]})})]})}),c&&s.jsx("div",{className:"p-4 bg-red-900/20 border border-red-500/30 rounded-lg animate-pulse",children:s.jsx("p",{className:"text-red-400 text-sm",children:c})}),s.jsxs("div",{className:"glass-card overflow-hidden hover:bg-gray-800/30 transition-all duration-300",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-800/60 backdrop-blur-sm",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-4 text-left",children:s.jsx("input",{type:"checkbox",checked:u.length===de.length&&de.length>0,onChange:M,className:"rounded border-gray-600 bg-gray-700 text-teal-500 focus:ring-teal-500 hover:scale-110 transition-transform duration-200"})}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300 hover:text-white transition-colors",children:"Name"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300 hover:text-white transition-colors",children:"Status"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300 hover:text-white transition-colors",children:"Lead Source"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300 hover:text-white transition-colors",children:"Revenue"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300 hover:text-white transition-colors",children:"Follow-ups"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300 hover:text-white transition-colors",children:"Checklist"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300 hover:text-white transition-colors",children:"Created"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300 hover:text-white transition-colors",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-800/50",children:de.map(L=>s.jsxs("tr",{className:"hover:bg-gray-800/40 transition-all duration-300 group hover:shadow-lg hover:shadow-gray-900/20",children:[s.jsx("td",{className:"px-6 py-5",children:s.jsx("input",{type:"checkbox",checked:u.includes(L.id),onChange:()=>R(L.id),className:"rounded border-gray-600 bg-gray-700 text-teal-500 focus:ring-teal-500 hover:scale-110 transition-transform duration-200"})}),s.jsx("td",{className:"px-6 py-5",children:s.jsxs("div",{className:"group-hover:scale-105 transition-transform duration-200",children:[s.jsxs("div",{className:"font-semibold text-white group-hover:text-teal-100 transition-colors",children:[L.first_name," ",L.last_name]}),s.jsx("div",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors",children:L.email}),L.company&&s.jsx("div",{className:"text-sm text-gray-500 group-hover:text-gray-400 transition-colors",children:L.company})]})}),s.jsx("td",{className:"px-6 py-5",children:s.jsx(ve,{lead:L})}),s.jsx("td",{className:"px-6 py-5 text-gray-300 group-hover:text-white transition-colors",children:L.lead_source||"-"}),s.jsx("td",{className:"px-6 py-5",children:s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"text-sm text-white font-semibold",children:["$",(L.revenue_generated||0).toFixed(0)]}),s.jsxs("div",{className:"text-xs text-green-400",children:["$",(L.cash_collected||0).toFixed(0)," collected"]})]})}),s.jsx("td",{className:"px-6 py-5",children:s.jsx(Q1,{leadId:L.id,followUps:L.follow_ups_completed,followUpDates:L.follow_up_dates,onUpdate:(Y,ae)=>P(L.id,Y,ae),size:"sm"})}),s.jsx("td",{className:"px-6 py-5",children:L.lead_checklist&&s.jsx(Ju,{leadId:L.id,checklist:L.lead_checklist,checklistDates:L.checklist_dates,onUpdate:(Y,ae)=>Q(L.id,Y,ae),size:"sm",showLabels:!1})}),s.jsx("td",{className:"px-6 py-5 text-gray-400 text-sm group-hover:text-gray-300 transition-colors",children:new Date(L.created_at).toLocaleDateString()}),s.jsx("td",{className:"px-6 py-5",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>A(L),className:"text-gray-400 hover:text-teal-400 transition-all duration-200 hover:scale-110 p-2 rounded-lg hover:bg-gray-700/50",title:"Edit lead",children:s.jsx(tl,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>T(L.id),className:"text-gray-400 hover:text-emerald-400 transition-all duration-200 hover:scale-110 p-2 rounded-lg hover:bg-gray-700/50",title:"Convert to deal",children:s.jsx(jn,{className:"h-4 w-4"})})]})})]},L.id))})]})}),s.jsxs("div",{className:"px-6 py-4 border-t border-gray-800/50 flex items-center justify-between bg-gray-800/20",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"text-sm text-gray-400",children:["Showing ",s.jsx("span",{className:"font-semibold text-white",children:se+1})," to"," ",s.jsx("span",{className:"font-semibold text-white",children:Math.min(se+k,a.length)})," of"," ",s.jsx("span",{className:"font-semibold text-white",children:a.length})," leads"]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-sm text-gray-400",children:"Show:"}),s.jsx("select",{value:k,onChange:L=>G(Number(L.target.value)),className:"px-3 py-1 bg-gray-700/50 border border-gray-600 rounded-lg text-white text-sm focus:ring-2 focus:ring-teal-500 focus:border-transparent hover:bg-gray-600/50 transition-all duration-200",children:E.map(L=>s.jsx("option",{value:L,children:L},L))}),s.jsx("span",{className:"text-sm text-gray-400",children:"per page"})]})]}),te>1&&s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("button",{onClick:()=>N(L=>Math.max(L-1,1)),disabled:w===1,className:"p-2 text-gray-400 hover:text-white disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 hover:scale-110 hover:bg-gray-700/50 rounded-lg",children:s.jsx(Or,{className:"h-5 w-5"})}),s.jsxs("span",{className:"text-sm text-gray-300 px-3 py-1 bg-gray-700/50 rounded-lg",children:["Page ",s.jsx("span",{className:"font-semibold text-white",children:w})," of"," ",s.jsx("span",{className:"font-semibold text-white",children:te})]}),s.jsx("button",{onClick:()=>N(L=>Math.min(L+1,te)),disabled:w===te,className:"p-2 text-gray-400 hover:text-white disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 hover:scale-110 hover:bg-gray-700/50 rounded-lg",children:s.jsx(ir,{className:"h-5 w-5"})})]})]})]}),s.jsx(Xu,{lead:b,isOpen:m,onClose:()=>{p(!1),g(void 0)},onSave:W}),s.jsx(Zu,{isOpen:f,leadId:v,onClose:()=>{x(!1),y(void 0)},onSave:Z})]})})},X1=({followUps:e,followUpDates:t})=>{const r=n=>n?new Date(n).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}):null;return s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Follow-up Timeline"}),s.jsx("div",{className:"space-y-3",children:e.map((n,a)=>s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"flex-shrink-0",children:n?s.jsx(Aa,{className:"h-6 w-6 text-green-500"}):s.jsx(E1,{className:"h-6 w-6 text-gray-500"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:`font-medium ${n?"text-white":"text-gray-400"}`,children:["Follow-up #",a+1]}),n&&t[a]&&s.jsxs("span",{className:"text-sm text-gray-400 flex items-center",children:[s.jsx(lr,{className:"h-4 w-4 mr-1"}),r(t[a])]})]}),n?s.jsx("p",{className:"text-sm text-green-400",children:"Completed"}):s.jsx("p",{className:"text-sm text-gray-500",children:"Pending"})]})]},a))}),s.jsxs("div",{className:"mt-6 p-4 bg-gray-800/50 rounded-lg",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-300",children:"Progress"}),s.jsxs("span",{className:"text-white font-semibold",children:[e.filter(Boolean).length,"/7 completed"]})]}),s.jsx("div",{className:"mt-2 w-full bg-gray-700 rounded-full h-2",children:s.jsx("div",{className:"h-2 bg-gradient-to-r from-green-500 to-emerald-600 rounded-full transition-all duration-500",style:{width:`${e.filter(Boolean).length/7*100}%`}})})]})]})},Z1=({followUps:e,showDetails:t=!1,size:r="md"})=>{const n=e.filter(Boolean).length,a=n/7*100,l={sm:"h-1",md:"h-2",lg:"h-3"},o={sm:"text-xs",md:"text-sm",lg:"text-base"},i=()=>a===100?"from-green-500 to-emerald-600":a>=70?"from-blue-500 to-cyan-600":a>=40?"from-yellow-500 to-orange-500":"from-red-500 to-rose-600";return s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:`w-full bg-gray-700 rounded-full overflow-hidden ${l[r]}`,children:s.jsx("div",{className:`${l[r]} bg-gradient-to-r ${i()} transition-all duration-500 ease-out`,style:{width:`${a}%`}})}),t&&s.jsxs("div",{className:`flex justify-between items-center ${o[r]} text-gray-400`,children:[s.jsxs("span",{children:[n,"/7 completed"]}),s.jsxs("span",{children:[Math.round(a),"%"]})]})]})},e_=()=>{var v,y;const{id:e}=$w(),t=Vu(),[r,n]=j.useState(null),[a,l]=j.useState(null),[o,i]=j.useState(!0),[c,h]=j.useState(""),[u,d]=j.useState(!1);j.useEffect(()=>{e&&m(e)},[e]);const m=async w=>{try{i(!0);const{data:N,error:k}=await K.from("leads").select("*").eq("id",w).single();if(k)throw k;if(n(N),N.assigned_to){const{data:D}=await K.from("users").select("id, email, full_name").eq("id",N.assigned_to).single();l(D)}}catch(N){h(N.message)}finally{i(!1)}},p=async()=>{if(r&&confirm("Are you sure you want to delete this lead?"))try{const{error:w}=await K.from("leads").delete().eq("id",r.id);if(w)throw w;t("/leads/crm")}catch(w){h(w.message)}},f=w=>{n(w)},x=(w,N)=>{r&&n({...r,lead_checklist:w,checklist_dates:N})},b=w=>{const N={new:"bg-blue-900/30 text-blue-400",contacted:"bg-yellow-900/30 text-yellow-400",qualified:"bg-green-900/30 text-green-400",proposal_sent:"bg-purple-900/30 text-purple-400",closed_won:"bg-emerald-900/30 text-emerald-400",closed_lost:"bg-red-900/30 text-red-400",nurturing:"bg-orange-900/30 text-orange-400",unqualified:"bg-gray-900/30 text-gray-400"};return s.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${N[w]||N.new}`,children:w.replace("_"," ").toUpperCase()})},g=w=>{const N={low:"bg-gray-900/30 text-gray-400",medium:"bg-blue-900/30 text-blue-400",high:"bg-orange-900/30 text-orange-400",urgent:"bg-red-900/30 text-red-400"};return s.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${N[w]||N.medium}`,children:w.toUpperCase()})};return o?s.jsx("div",{className:"flex items-center justify-center p-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-teal-400"})}):c||!r?s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex items-center space-x-4",children:s.jsxs("button",{onClick:()=>t("/leads/crm"),className:"flex items-center space-x-2 text-gray-400 hover:text-white transition-colors",children:[s.jsx(gm,{className:"h-5 w-5"}),s.jsx("span",{children:"Back to Leads"})]})}),s.jsxs("div",{className:"glass-card p-8 text-center",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-300 mb-4",children:c?"Error Loading Lead":"Lead Not Found"}),s.jsx("p",{className:"text-gray-400",children:c||"The lead you are looking for does not exist."})]})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("button",{onClick:()=>t("/leads/crm"),className:"flex items-center space-x-2 text-gray-400 hover:text-white transition-colors",children:[s.jsx(gm,{className:"h-5 w-5"}),s.jsx("span",{children:"Back to Leads"})]}),s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold gradient-text section-gradient-leads",children:[r.first_name," ",r.last_name]}),s.jsx("p",{className:"text-gray-400 mt-1",children:r.email})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("button",{onClick:()=>d(!0),className:"flex items-center space-x-2 px-4 py-2 bg-gray-800 hover:bg-gray-700 text-white rounded-lg transition-colors",children:[s.jsx(ix,{className:"h-4 w-4"}),s.jsx("span",{children:"Edit"})]}),s.jsxs("button",{onClick:p,className:"flex items-center space-x-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors",children:[s.jsx(Ir,{className:"h-4 w-4"}),s.jsx("span",{children:"Delete"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs("div",{className:"glass-card p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Contact Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Qt,{className:"h-5 w-5 text-gray-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400",children:"Email"}),s.jsx("p",{className:"text-white",children:r.email})]})]}),r.phone&&s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(_t,{className:"h-5 w-5 text-gray-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400",children:"Phone"}),s.jsx("p",{className:"text-white",children:r.phone})]})]}),r.company&&s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(As,{className:"h-5 w-5 text-gray-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400",children:"Company"}),s.jsx("p",{className:"text-white",children:r.company})]})]}),r.job_title&&s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Fe,{className:"h-5 w-5 text-gray-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400",children:"Job Title"}),s.jsx("p",{className:"text-white",children:r.job_title})]})]}),a&&s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(dx,{className:"h-5 w-5 text-gray-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400",children:"Assigned To"}),s.jsx("p",{className:"text-white",children:a.full_name||a.email})]})]}),r.website&&s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(P1,{className:"h-5 w-5 text-gray-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400",children:"Website"}),s.jsx("a",{href:r.website.startsWith("http")?r.website:`https://${r.website}`,target:"_blank",rel:"noopener noreferrer",className:"text-teal-400 hover:text-teal-300 transition-colors",children:r.website})]})]})]})]}),s.jsxs("div",{className:"glass-card p-6",children:[s.jsxs("h2",{className:"text-xl font-semibold text-white mb-4 flex items-center",children:[s.jsx(oe,{className:"h-5 w-5 mr-2 text-green-400"}),"Financial Information"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"text-center p-4 bg-gray-800/30 rounded-lg",children:[s.jsx("p",{className:"text-sm text-gray-400",children:"Revenue Generated"}),s.jsxs("p",{className:"text-2xl font-bold text-white mt-1",children:["$",((v=r.revenue_generated)==null?void 0:v.toFixed(2))||"0.00"]})]}),s.jsxs("div",{className:"text-center p-4 bg-green-900/20 rounded-lg",children:[s.jsx("p",{className:"text-sm text-gray-400",children:"Cash Collected"}),s.jsxs("p",{className:"text-2xl font-bold text-green-400 mt-1",children:["$",((y=r.cash_collected)==null?void 0:y.toFixed(2))||"0.00"]})]}),s.jsxs("div",{className:"text-center p-4 bg-yellow-900/20 rounded-lg",children:[s.jsx("p",{className:"text-sm text-gray-400",children:"Outstanding"}),s.jsxs("p",{className:"text-2xl font-bold text-yellow-400 mt-1",children:["$",((r.revenue_generated||0)-(r.cash_collected||0)).toFixed(2)]})]})]}),(r.revenue_generated||0)>0&&s.jsxs("div",{className:"mt-6",children:[s.jsxs("div",{className:"flex justify-between text-sm text-gray-400 mb-2",children:[s.jsx("span",{children:"Collection Rate"}),s.jsxs("span",{children:[((r.cash_collected||0)/(r.revenue_generated||1)*100).toFixed(1),"%"]})]}),s.jsx("div",{className:"w-full bg-gray-700 rounded-full h-3",children:s.jsx("div",{className:"h-3 bg-gradient-to-r from-green-400 to-emerald-600 rounded-full transition-all duration-500",style:{width:`${(r.cash_collected||0)/(r.revenue_generated||1)*100}%`}})})]})]}),s.jsxs("div",{className:"glass-card p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Lead Details"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400",children:"Status"}),s.jsx("div",{className:"mt-1",children:b(r.status)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400",children:"Priority"}),s.jsx("div",{className:"mt-1",children:g(r.priority)})]}),r.lead_source&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400",children:"Lead Source"}),s.jsx("p",{className:"text-white mt-1",children:r.lead_source})]}),r.lead_type&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400",children:"Lead Type"}),s.jsx("p",{className:"text-white mt-1 capitalize",children:r.lead_type})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400",children:"Probability"}),s.jsxs("p",{className:"text-white mt-1",children:[r.probability,"%"]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400",children:"Created"}),s.jsx("p",{className:"text-white mt-1",children:new Date(r.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]})]})]}),r.lead_checklist&&s.jsx("div",{className:"glass-card p-6",children:s.jsx(Ju,{leadId:r.id,checklist:r.lead_checklist,checklistDates:r.checklist_dates,onUpdate:x,size:"lg",showLabels:!0})}),(r.address||r.city||r.state||r.country)&&s.jsxs("div",{className:"glass-card p-6",children:[s.jsxs("h2",{className:"text-xl font-semibold text-white mb-4 flex items-center",children:[s.jsx(A1,{className:"h-5 w-5 mr-2"}),"Address"]}),s.jsxs("div",{className:"text-gray-300",children:[r.address&&s.jsx("p",{children:r.address}),s.jsx("p",{children:[r.city,r.state,r.zip_code].filter(Boolean).join(", ")}),r.country&&s.jsx("p",{children:r.country})]})]}),r.notes&&s.jsxs("div",{className:"glass-card p-6",children:[s.jsxs("h2",{className:"text-xl font-semibold text-white mb-4 flex items-center",children:[s.jsx(Dt,{className:"h-5 w-5 mr-2"}),"Notes"]}),s.jsx("div",{className:"text-gray-300 whitespace-pre-wrap",children:r.notes})]}),r.tags&&s.jsxs("div",{className:"glass-card p-6",children:[s.jsxs("h2",{className:"text-xl font-semibold text-white mb-4 flex items-center",children:[s.jsx(cx,{className:"h-5 w-5 mr-2"}),"Tags"]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:r.tags.split(",").map((w,N)=>s.jsx("span",{className:"px-3 py-1 bg-gray-800 text-gray-300 rounded-full text-sm",children:w.trim()},N))})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"glass-card p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Follow-up Progress"}),s.jsx(Z1,{followUps:r.follow_ups_completed,showDetails:!0,size:"lg"})]}),s.jsx("div",{className:"glass-card p-6",children:s.jsx(X1,{followUps:r.follow_ups_completed,followUpDates:r.follow_up_dates})}),s.jsxs("div",{className:"glass-card p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[s.jsx(Ne,{className:"h-5 w-5 mr-2"}),"Important Dates"]}),s.jsxs("div",{className:"space-y-3",children:[r.first_contact_date&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400",children:"First Contact"}),s.jsx("p",{className:"text-white",children:new Date(r.first_contact_date).toLocaleDateString()})]}),r.last_contact_date&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400",children:"Last Contact"}),s.jsx("p",{className:"text-white",children:new Date(r.last_contact_date).toLocaleDateString()})]}),r.next_follow_up_date&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400",children:"Next Follow-up"}),s.jsx("p",{className:"text-white",children:new Date(r.next_follow_up_date).toLocaleDateString()})]}),r.conversion_date&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400",children:"Conversion Date"}),s.jsx("p",{className:"text-white",children:new Date(r.conversion_date).toLocaleDateString()})]})]})]})]})]}),s.jsx(Xu,{lead:r,isOpen:u,onClose:()=>d(!1),onSave:f})]})},t_=({data:e,width:t=400,height:r=300,animated:n=!0})=>{const a=j.useRef(null),l=j.useRef(),[o,i]=j.useState([]);return j.useEffect(()=>{const c=e.nodes.map((h,u)=>{const d=u/e.nodes.length*2*Math.PI,m=Math.min(t,r)*.3,p=t/2,f=r/2;return{...h,x:p+Math.cos(d)*m,y:f+Math.sin(d)*m,pulse:Math.random()*Math.PI*2}});i(c)},[e,t,r]),j.useEffect(()=>{const c=a.current;if(!c)return;const h=c.getContext("2d");if(!h)return;const u=()=>{h.clearRect(0,0,t,r),i(d=>d.map(m=>({...m,pulse:m.pulse+.05}))),o.forEach(d=>{d.connections.forEach(m=>{const p=o.find(f=>f.id===m);if(p){const f=h.createLinearGradient(d.x,d.y,p.x,p.y);f.addColorStop(0,d.color+"40"),f.addColorStop(.5,"#ffffff20"),f.addColorStop(1,p.color+"40"),h.strokeStyle=f,h.lineWidth=2,h.setLineDash([5,5]),h.lineDashOffset=Date.now()*.01,h.beginPath(),h.moveTo(d.x,d.y),h.lineTo(p.x,p.y),h.stroke();const x=Date.now()*.002%1,b=d.x+(p.x-d.x)*x,g=d.y+(p.y-d.y)*x;h.fillStyle="#00ffff80",h.beginPath(),h.arc(b,g,2,0,Math.PI*2),h.fill()}})}),o.forEach(d=>{const m=Math.sin(d.pulse)*5+15,p=Math.max(.3,d.value/100),f=h.createRadialGradient(d.x,d.y,0,d.x,d.y,m+10);f.addColorStop(0,d.color+"60"),f.addColorStop(1,d.color+"00"),h.fillStyle=f,h.beginPath(),h.arc(d.x,d.y,m+10,0,Math.PI*2),h.fill();const x=h.createRadialGradient(d.x-5,d.y-5,0,d.x,d.y,m);x.addColorStop(0,"#ffffff"),x.addColorStop(.3,d.color),x.addColorStop(1,d.color+"80"),h.fillStyle=x,h.beginPath(),h.arc(d.x,d.y,m*p,0,Math.PI*2),h.fill(),h.fillStyle="#ffffff",h.beginPath(),h.arc(d.x,d.y,3,0,Math.PI*2),h.fill()}),n&&(l.current=requestAnimationFrame(u))};return u(),()=>{l.current&&cancelAnimationFrame(l.current)}},[o,t,r,n]),s.jsxs("div",{className:"relative",children:[s.jsx("canvas",{ref:a,width:t,height:r,className:"rounded-lg",style:{background:"radial-gradient(circle at center, #1f2937 0%, #111827 100%)"}}),s.jsx("div",{className:"absolute inset-0 pointer-events-none",children:o.map(c=>s.jsxs("div",{className:"absolute transform -translate-x-1/2 -translate-y-1/2 text-xs font-medium text-white bg-gray-900/80 px-2 py-1 rounded-full backdrop-blur-sm border border-gray-700/50",style:{left:c.x,top:c.y+25},children:[c.label,s.jsx("div",{className:"text-center text-xs text-gray-400 mt-1",children:c.value})]},c.id))})]})},r_=({data:e,width:t=300,height:r=300,levels:n=5,animated:a=!0,showGrid:l=!0,showLabels:o=!0})=>{const i=j.useRef(null),c=j.useRef(),[h,u]=j.useState(0),d=t/2,m=r/2,p=Math.min(t,r)*.35;return j.useEffect(()=>{if(a){u(0);const f=Date.now(),x=2e3,b=()=>{const g=Date.now()-f,v=Math.min(g/x,1),y=1-Math.pow(1-v,3);u(y),v<1&&(c.current=requestAnimationFrame(b))};b()}else u(1);return()=>{c.current&&cancelAnimationFrame(c.current)}},[a,e]),j.useEffect(()=>{const f=i.current;if(!f)return;const x=f.getContext("2d");if(x){if(x.clearRect(0,0,t,r),l){for(let b=1;b<=n;b++){const g=p*b/n;x.strokeStyle=`rgba(75, 85, 99, ${.3+b/n*.4})`,x.lineWidth=b===n?2:1,x.setLineDash(b===n?[]:[2,4]),x.beginPath();for(let v=0;v<=e.length;v++){const y=v/e.length*2*Math.PI-Math.PI/2,w=d+Math.cos(y)*g,N=m+Math.sin(y)*g;v===0?x.moveTo(w,N):x.lineTo(w,N)}x.stroke()}x.strokeStyle="rgba(75, 85, 99, 0.4)",x.lineWidth=1,x.setLineDash([]);for(let b=0;b<e.length;b++){const g=b/e.length*2*Math.PI-Math.PI/2,v=d+Math.cos(g)*p,y=m+Math.sin(g)*p;x.beginPath(),x.moveTo(d,m),x.lineTo(v,y),x.stroke()}}if(e.length>0){x.shadowColor="#14b8a6",x.shadowBlur=15,x.shadowOffsetX=0,x.shadowOffsetY=0;const b=x.createRadialGradient(d,m,0,d,m,p);b.addColorStop(0,"rgba(20, 184, 166, 0.3)"),b.addColorStop(1,"rgba(20, 184, 166, 0.1)"),x.fillStyle=b,x.beginPath();for(let g=0;g<=e.length;g++){const v=e[g%e.length],y=g/e.length*2*Math.PI-Math.PI/2,w=v.value/v.maxValue*h,N=p*w,k=d+Math.cos(y)*N,D=m+Math.sin(y)*N;g===0?x.moveTo(k,D):x.lineTo(k,D)}x.fill(),x.shadowColor="transparent",x.shadowBlur=0,x.strokeStyle="#14b8a6",x.lineWidth=2,x.stroke();for(let g=0;g<e.length;g++){const v=e[g],y=g/e.length*2*Math.PI-Math.PI/2,w=v.value/v.maxValue*h,N=p*w,k=d+Math.cos(y)*N,D=m+Math.sin(y)*N,C=x.createRadialGradient(k,D,0,k,D,12);C.addColorStop(0,v.color+"80"),C.addColorStop(1,v.color+"00"),x.fillStyle=C,x.beginPath(),x.arc(k,D,12,0,Math.PI*2),x.fill();const _=x.createRadialGradient(k-2,D-2,0,k,D,6);_.addColorStop(0,"#ffffff"),_.addColorStop(.3,v.color),_.addColorStop(1,v.color+"cc"),x.fillStyle=_,x.beginPath(),x.arc(k,D,6,0,Math.PI*2),x.fill(),x.fillStyle="#ffffff",x.beginPath(),x.arc(k,D,2,0,Math.PI*2),x.fill()}}}},[e,t,r,n,l,h,d,m,p]),s.jsxs("div",{className:"relative",children:[s.jsx("canvas",{ref:i,width:t,height:r,className:"rounded-lg",style:{background:"radial-gradient(circle at center, #1f2937 0%, #111827 100%)"}}),o&&s.jsx("div",{className:"absolute inset-0 pointer-events-none",children:e.map((f,x)=>{const b=x/e.length*2*Math.PI-Math.PI/2,g=p+30,v=d+Math.cos(b)*g,y=m+Math.sin(b)*g;return s.jsx("div",{className:"absolute transform -translate-x-1/2 -translate-y-1/2 text-xs font-medium text-white bg-gray-900/80 px-2 py-1 rounded-full backdrop-blur-sm border border-gray-700/50",style:{left:v,top:y},children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"font-semibold",children:f.label}),s.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:[Math.round(f.value/f.maxValue*100*h),"%"]})]})},x)})}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:s.jsxs("div",{className:"text-center bg-gray-900/90 px-3 py-2 rounded-lg backdrop-blur-sm border border-gray-700/50",children:[s.jsxs("div",{className:"text-lg font-bold text-white",children:[Math.round(e.reduce((f,x)=>f+x.value/x.maxValue,0)/e.length*100*h),"%"]}),s.jsx("div",{className:"text-xs text-gray-400",children:"Overall"})]})})]})},s_=({stages:e,width:t=400,height:r=300,animated:n=!0,showPercentages:a=!0})=>{const l=j.useRef(null),o=j.useRef(),[i,c]=j.useState(0);return j.useEffect(()=>{if(n){c(0);const h=Date.now(),u=2500,d=()=>{const m=Date.now()-h,p=Math.min(m/u,1),f=1-Math.pow(1-p,4);c(f),p<1&&(o.current=requestAnimationFrame(d))};d()}else c(1);return()=>{o.current&&cancelAnimationFrame(o.current)}},[n,e]),j.useEffect(()=>{const h=l.current;if(!h)return;const u=h.getContext("2d");if(!u||(u.clearRect(0,0,t,r),e.length===0))return;const d=Math.max(1,...e.map(b=>b.value)),m=(r-40)/e.length,p=t-80,f=20,x=Date.now()*.001;for(let b=0;b<f;b++){const g=(x+b*.5)%4,v=Math.floor(g),y=g-v;if(v<e.length-1){const w=e[v],N=e[v+1],k=40+v*m+m/2,D=40+(v+1)*m+m/2,C=w.value/d*p*i,_=N.value/d*p*i,S=k+(D-k)*y,E=40+(C+(_-C)*y)*(.8+Math.sin(x+b)*.1),I=u.createRadialGradient(E,S,0,E,S,8);I.addColorStop(0,"#00ffff80"),I.addColorStop(1,"#00ffff00"),u.fillStyle=I,u.beginPath(),u.arc(E,S,8,0,Math.PI*2),u.fill(),u.fillStyle="#00ffff",u.beginPath(),u.arc(E,S,2,0,Math.PI*2),u.fill()}}e.forEach((b,g)=>{const v=40+g*m,y=b.value/d*p*i,w=40;u.shadowColor=b.color,u.shadowBlur=15,u.shadowOffsetX=0,u.shadowOffsetY=0;const N=u.createLinearGradient(w,v,w+y,v);if(N.addColorStop(0,b.color+"80"),N.addColorStop(.5,b.color),N.addColorStop(1,b.color+"60"),u.fillStyle=N,u.fillRect(w,v,y,m-10),u.shadowColor="transparent",u.shadowBlur=0,u.strokeStyle=b.color,u.lineWidth=2,u.strokeRect(w,v,y,m-10),g<e.length-1){const k=e[g+1],D=k.value/d*p*i,C=u.createLinearGradient(w+y,v+m-10,w+D,v+m);C.addColorStop(0,b.color+"60"),C.addColorStop(1,k.color+"60"),u.strokeStyle=C,u.lineWidth=3,u.setLineDash([5,5]),u.lineDashOffset=x*10,u.beginPath(),u.moveTo(w+y,v+m-10),u.lineTo(w+D,v+m),u.stroke(),u.setLineDash([])}})},[e,t,r,i]),s.jsxs("div",{className:"relative",children:[s.jsx("canvas",{ref:l,width:t,height:r,className:"rounded-lg",style:{background:"linear-gradient(135deg, #1f2937 0%, #111827 100%)"}}),s.jsx("div",{className:"absolute inset-0 pointer-events-none",children:e.map((h,u)=>{const d=Math.max(...e.map(x=>x.value)),m=(r-40)/e.length,p=40+u*m,f=h.value/d*(t-80)*i;return s.jsxs("div",{className:"absolute flex items-center",children:[s.jsx("div",{className:"bg-gray-900/90 px-3 py-1 rounded-lg backdrop-blur-sm border border-gray-700/50 text-white text-sm font-medium",style:{left:10,top:p+(m-10)/2-15},children:h.label}),s.jsxs("div",{className:"bg-gray-900/90 px-2 py-1 rounded-lg backdrop-blur-sm border border-gray-700/50 text-white text-xs font-bold",style:{left:50+f+10,top:p+(m-10)/2-10},children:[Math.round(h.value*i),a&&u>0&&s.jsxs("span",{className:"text-gray-400 ml-1",children:["(",Math.round(h.value/e[0].value*100),"%)"]})]})]},h.id)})})]})},eh=({data:e,className:t=""})=>s.jsxs("div",{className:`grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6 ${t}`,children:[s.jsxs("div",{className:"glass-card p-6 hover:bg-gray-800/40 transition-all duration-300 group",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold gradient-text section-gradient-finances",children:"Financial Flow Network"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-2 h-2 bg-teal-400 rounded-full animate-pulse"}),s.jsx("span",{className:"text-xs text-gray-400",children:"Live Data"})]})]}),s.jsx("div",{className:"flex justify-center",children:s.jsx(t_,{data:e.neuronData,width:350,height:250,animated:!0})}),s.jsx("p",{className:"text-xs text-gray-400 mt-3 text-center",children:"Neural network visualization of financial interdependencies and value flow"})]}),s.jsxs("div",{className:"glass-card p-6 hover:bg-gray-800/40 transition-all duration-300 group",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold gradient-text section-gradient-leads",children:"Performance Radar"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-2 h-2 bg-cyan-400 rounded-full animate-pulse"}),s.jsx("span",{className:"text-xs text-gray-400",children:"Multi-Metric"})]})]}),s.jsx("div",{className:"flex justify-center",children:s.jsx(r_,{data:e.spiderData,width:300,height:250,levels:5,animated:!0,showGrid:!0,showLabels:!0})}),s.jsx("p",{className:"text-xs text-gray-400 mt-3 text-center",children:"Multi-dimensional performance analysis across key metrics"})]}),s.jsxs("div",{className:"glass-card p-6 hover:bg-gray-800/40 transition-all duration-300 group lg:col-span-2 xl:col-span-1",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold gradient-text section-gradient-leads",children:"Conversion Flow"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-2 h-2 bg-emerald-400 rounded-full animate-pulse"}),s.jsx("span",{className:"text-xs text-gray-400",children:"Real-time"})]})]}),s.jsx("div",{className:"flex justify-center",children:s.jsx(s_,{stages:e.funnelData,width:350,height:280,animated:!0,showPercentages:!0})}),s.jsx("p",{className:"text-xs text-gray-400 mt-3 text-center",children:"Dynamic funnel visualization with conversion flow analysis"})]})]}),n_=()=>{var D,C;const[e,t]=j.useState(null),[r,n]=j.useState(!0),[a,l]=j.useState(""),[o,i]=j.useState("thisMonth"),[c,h]=j.useState(new Date),u=[{key:"today",label:"Today",previousLabel:"Yesterday"},{key:"thisWeek",label:"This Week",previousLabel:"Last Week"},{key:"thisMonth",label:"This Month",previousLabel:"Last Month"},{key:"last30Days",label:"Last 30 Days",previousLabel:"Previous 30 Days"},{key:"thisQuarter",label:"This Quarter",previousLabel:"Last Quarter"},{key:"allTime",label:"All Time",previousLabel:"N/A"}],d=async()=>{try{n(!0);const{data:_,error:S}=await K.from("leads").select("*").order("created_at",{ascending:!1});if(S)throw S;const O=m(_||[]);t(O),h(new Date)}catch(_){l(_.message)}finally{n(!1)}},m=_=>{const S=new Date,O=new Date(S.getFullYear(),S.getMonth(),S.getDate()),E=new Date(O.getTime()-24*60*60*1e3),I=new Date(O.getTime()-O.getDay()*24*60*60*1e3),z=new Date(I.getTime()-7*24*60*60*1e3),te=new Date(I.getTime()-1),se=new Date(S.getFullYear(),S.getMonth(),1),de=new Date(S.getFullYear(),S.getMonth()-1,1),$=new Date(se.getTime()-1),G=new Date(S.getTime()-30*24*60*60*1e3),R=new Date(G.getTime()-30*24*60*60*1e3),M=new Date(G.getTime()-1),F=new Date(S.getFullYear(),Math.floor(S.getMonth()/3)*3,1),A=new Date(F.getFullYear(),F.getMonth()-3,1),T=new Date(F.getTime()-1),W=P=>{const Q=P.length,ue=P.filter(U=>U.status==="new").length,ve=P.filter(U=>U.status==="qualified").length,L=P.filter(U=>U.status==="proposal_sent").length,Y=P.filter(U=>U.status==="closed_won").length,ae=P.filter(U=>U.status==="closed_lost").length,q=P.filter(U=>U.status==="unqualified").length,re=P.filter(U=>{var ie;return((ie=U.lead_checklist)==null?void 0:ie.warm_lead)===!0}).length,pe=P.filter(U=>{var ie;return((ie=U.lead_checklist)==null?void 0:ie.quality_conversation)===!0}).length,$e=P.filter(U=>{var ie;return((ie=U.lead_checklist)==null?void 0:ie.lead_magnet_sent)===!0}).length,vr=P.filter(U=>{var ie;return((ie=U.lead_checklist)==null?void 0:ie.asset_consumed)===!0}).length,Ve=P.filter(U=>{var ie;return((ie=U.lead_checklist)==null?void 0:ie.nurture_sequence)===!0}).length,kt=P.filter(U=>{var ie;return((ie=U.lead_checklist)==null?void 0:ie.booking_requested)===!0}).length,B=P.reduce((U,ie)=>U+(ie.revenue_generated||0),0),X=P.reduce((U,ie)=>U+(ie.cash_collected||0),0);return{totalLeads:Q,newLeads:ue,warmLeads:re,qualityConversation:pe,leadMagnetSent:$e,assetConsumed:vr,nurtureSequence:Ve,bookingRequested:kt,qualified:ve,proposalSent:L,closedWon:Y,closedLost:ae,unqualified:q,revenueGenerated:B,cashCollected:X}},Z=(P,Q,ue)=>P.filter(ve=>{const L=new Date(ve.created_at);return ue?L>=Q&&L<=ue:L>=Q});return{today:{current:W(Z(_,O)),previous:W(Z(_,E,O))},thisWeek:{current:W(Z(_,I)),previous:W(Z(_,z,te))},thisMonth:{current:W(Z(_,se)),previous:W(Z(_,de,$))},last30Days:{current:W(Z(_,G)),previous:W(Z(_,R,M))},thisQuarter:{current:W(Z(_,F)),previous:W(Z(_,A,T))},allTime:{current:W(_),previous:{totalLeads:0,newLeads:0,warmLeads:0,qualityConversation:0,leadMagnetSent:0,assetConsumed:0,nurtureSequence:0,bookingRequested:0,qualified:0,proposalSent:0,closedWon:0,closedLost:0,unqualified:0,revenueGenerated:0,cashCollected:0}}}},p=(_,S)=>S===0?_>0?100:0:(_-S)/S*100,f=_=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(_),x=_=>`${_>=0?"+":""}${_.toFixed(1)}%`,b=_=>_>0?s.jsx(Za,{className:"h-4 w-4 text-green-400"}):_<0?s.jsx(Xa,{className:"h-4 w-4 text-red-400"}):s.jsx(wn,{className:"h-4 w-4 text-gray-400"}),g=_=>_>0?"text-green-400":_<0?"text-red-400":"text-gray-400",v=(_,S)=>S===0?0:_/S*100,y=_=>({neuronData:{nodes:[{id:"total",value:_.totalLeads,label:"Total Leads",color:"#3b82f6",connections:["warm","qualified"]},{id:"warm",value:_.warmLeads,label:"Warm Leads",color:"#f59e0b",connections:["conversation","magnet"]},{id:"conversation",value:_.qualityConversation,label:"Quality Conv.",color:"#8b5cf6",connections:["booking","qualified"]},{id:"magnet",value:_.leadMagnetSent,label:"Lead Magnet",color:"#ec4899",connections:["consumed","nurture"]},{id:"consumed",value:_.assetConsumed,label:"Asset Used",color:"#6366f1",connections:["booking"]},{id:"nurture",value:_.nurtureSequence,label:"Nurtured",color:"#10b981",connections:["qualified"]},{id:"booking",value:_.bookingRequested,label:"Booking Req.",color:"#f59e0b",connections:["qualified"]},{id:"qualified",value:_.qualified,label:"Qualified",color:"#10b981",connections:["won"]},{id:"won",value:_.closedWon,label:"Closed Won",color:"#059669",connections:[]}]},spiderData:[{label:"Lead Generation",value:_.totalLeads,maxValue:Math.max(_.totalLeads,100),color:"#3b82f6"},{label:"Engagement",value:_.warmLeads,maxValue:_.totalLeads||1,color:"#f59e0b"},{label:"Qualification",value:_.qualified,maxValue:_.totalLeads||1,color:"#10b981"},{label:"Conversion",value:_.closedWon,maxValue:_.qualified||1,color:"#059669"},{label:"Revenue",value:_.revenueGenerated,maxValue:Math.max(_.revenueGenerated,1e4),color:"#dc2626"},{label:"Collection",value:_.cashCollected,maxValue:_.revenueGenerated||1,color:"#16a34a"}],funnelData:[{id:"total",label:"Total Leads",value:_.totalLeads,color:"#3b82f6"},{id:"warm",label:"Warm Leads",value:_.warmLeads,color:"#f59e0b"},{id:"conversation",label:"Quality Conversation",value:_.qualityConversation,color:"#8b5cf6"},{id:"qualified",label:"Qualified",value:_.qualified,color:"#10b981"},{id:"proposal",label:"Proposal Sent",value:_.proposalSent,color:"#06b6d4"},{id:"won",label:"Closed Won",value:_.closedWon,color:"#059669"}]});if(j.useEffect(()=>{d()},[]),r)return s.jsx("div",{className:"flex items-center justify-center p-8",children:s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-teal-400/30 border-t-teal-400"}),s.jsx("div",{className:"absolute inset-0 rounded-full bg-teal-400/10 animate-pulse"})]})});if(a||!e)return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold gradient-text section-gradient-leads",children:"Lead Metrics"}),s.jsx("p",{className:"text-gray-400 mt-2",children:"Analyze lead performance and conversion rates."})]}),s.jsxs("div",{className:"glass-card p-8 text-center",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-300 mb-4",children:"Error Loading Metrics"}),s.jsx("p",{className:"text-gray-400 mb-4",children:a||"Unable to load metrics data."}),s.jsx("button",{onClick:d,className:"px-6 py-2 bg-gradient-to-r from-teal-400 to-cyan-600 hover:from-teal-500 hover:to-cyan-700 text-white font-medium rounded-lg transition-all duration-200",children:"Retry"})]})]});const w=e[o].current,N=e[o].previous,k=[{key:"totalLeads",label:"Total Leads",icon:bt,color:"text-blue-400"},{key:"newLeads",label:"New Leads",icon:jn,color:"text-cyan-400"},{key:"warmLeads",label:"Warm Leads",icon:Ae,color:"text-orange-400"},{key:"qualityConversation",label:"Quality Conversation",icon:ye,color:"text-purple-400"},{key:"leadMagnetSent",label:"Lead Magnet Sent",icon:Ie,color:"text-pink-400"},{key:"assetConsumed",label:"Asset Consumed",icon:lr,color:"text-indigo-400"},{key:"nurtureSequence",label:"Nurture Sequence",icon:Ae,color:"text-green-400"},{key:"bookingRequested",label:"Booking Requested",icon:Ne,color:"text-yellow-400"},{key:"qualified",label:"Qualified",icon:ye,color:"text-emerald-400"},{key:"proposalSent",label:"Proposal Sent",icon:Ie,color:"text-violet-400"},{key:"closedWon",label:"Closed Won",icon:Ae,color:"text-green-500"},{key:"closedLost",label:"Closed Lost",icon:$a,color:"text-red-400"},{key:"unqualified",label:"Unqualified",icon:wn,color:"text-gray-400"},{key:"revenueGenerated",label:"Revenue Generated",icon:oe,color:"text-emerald-500",isCurrency:!0},{key:"cashCollected",label:"Cash Collected",icon:oe,color:"text-green-500",isCurrency:!0}];return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"space-y-2",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-gradient-to-br from-teal-400/20 to-cyan-600/20 rounded-xl",children:s.jsx(Ie,{className:"h-8 w-8 text-teal-400"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold gradient-text section-gradient-leads",children:"Lead Metrics Dashboard"}),s.jsx("p",{className:"text-gray-400 mt-1",children:"Comprehensive funnel tracking with futuristic data visualization"})]})]})}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm text-gray-400",children:"Last Updated"}),s.jsx("p",{className:"text-sm font-semibold text-white",children:c.toLocaleTimeString()})]}),s.jsxs("button",{onClick:d,disabled:r,className:"flex items-center space-x-2 px-4 py-2 bg-gray-800 hover:bg-gray-700 text-white rounded-lg transition-all duration-200 hover:scale-105",children:[s.jsx(xr,{className:`h-4 w-4 ${r?"animate-spin":""}`}),s.jsx("span",{children:"Refresh"})]})]})]}),s.jsx("div",{className:"glass-card p-6",children:s.jsx("div",{className:"flex flex-wrap gap-2",children:u.map(_=>s.jsx("button",{onClick:()=>i(_.key),className:`
                px-4 py-2 rounded-lg font-medium transition-all duration-200 hover:scale-105
                ${o===_.key?"bg-gradient-to-r from-teal-400 to-cyan-600 text-white shadow-lg shadow-teal-500/25":"bg-gray-800/50 text-gray-300 hover:bg-gray-700/50 hover:text-white"}
              `,children:_.label},_.key))})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx("div",{className:"glass-card p-6 hover:bg-gray-800/60 transition-all duration-300 group hover:scale-105",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors",children:"Total Leads"}),s.jsx("p",{className:"text-3xl font-bold text-white mt-1",children:w.totalLeads}),s.jsxs("div",{className:"flex items-center space-x-1 mt-2",children:[b(p(w.totalLeads,N.totalLeads)),s.jsx("span",{className:`text-sm font-medium ${g(p(w.totalLeads,N.totalLeads))}`,children:x(p(w.totalLeads,N.totalLeads))})]})]}),s.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-400/20 to-blue-600/20 rounded-xl",children:s.jsx(bt,{className:"h-8 w-8 text-blue-400"})})]})}),s.jsx("div",{className:"glass-card p-6 hover:bg-gray-800/60 transition-all duration-300 group hover:scale-105",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors",children:"Conversion Rate"}),s.jsxs("p",{className:"text-3xl font-bold text-white mt-1",children:[w.totalLeads>0?(w.closedWon/w.totalLeads*100).toFixed(1):0,"%"]}),s.jsxs("div",{className:"flex items-center space-x-1 mt-2",children:[s.jsx(ye,{className:"h-4 w-4 text-green-400"}),s.jsxs("span",{className:"text-sm text-green-400 font-medium",children:[w.closedWon," won"]})]})]}),s.jsx("div",{className:"p-3 bg-gradient-to-br from-green-400/20 to-green-600/20 rounded-xl",children:s.jsx(ye,{className:"h-8 w-8 text-green-400"})})]})}),s.jsx("div",{className:"glass-card p-6 hover:bg-gray-800/60 transition-all duration-300 group hover:scale-105",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors",children:"Revenue Generated"}),s.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:f(w.revenueGenerated)}),s.jsxs("div",{className:"flex items-center space-x-1 mt-2",children:[b(p(w.revenueGenerated,N.revenueGenerated)),s.jsx("span",{className:`text-sm font-medium ${g(p(w.revenueGenerated,N.revenueGenerated))}`,children:x(p(w.revenueGenerated,N.revenueGenerated))})]})]}),s.jsx("div",{className:"p-3 bg-gradient-to-br from-emerald-400/20 to-emerald-600/20 rounded-xl",children:s.jsx(oe,{className:"h-8 w-8 text-emerald-400"})})]})}),s.jsx("div",{className:"glass-card p-6 hover:bg-gray-800/60 transition-all duration-300 group hover:scale-105",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors",children:"Cash Collected"}),s.jsx("p",{className:"text-2xl font-bold text-green-400 mt-1",children:f(w.cashCollected)}),s.jsx("div",{className:"flex items-center space-x-1 mt-2",children:s.jsxs("span",{className:"text-sm text-gray-400",children:[w.revenueGenerated>0?(w.cashCollected/w.revenueGenerated*100).toFixed(1):0,"% collected"]})})]}),s.jsx("div",{className:"p-3 bg-gradient-to-br from-green-400/20 to-green-600/20 rounded-xl",children:s.jsx(oe,{className:"h-8 w-8 text-green-400"})})]})})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Yt,{className:"h-6 w-6 text-teal-400"}),s.jsx("h2",{className:"text-2xl font-bold gradient-text section-gradient-leads",children:"Advanced Data Visualization"})]}),s.jsx(eh,{data:y(w)})]}),s.jsxs("div",{className:"glass-card overflow-hidden",children:[s.jsx("div",{className:"p-6 border-b border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h2",{className:"text-xl font-semibold gradient-text section-gradient-leads",children:["Sales Funnel Metrics - ",(D=u.find(_=>_.key===o))==null?void 0:D.label]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("span",{className:"text-sm text-gray-400",children:["vs ",(C=u.find(_=>_.key===o))==null?void 0:C.previousLabel]}),s.jsxs("button",{className:"flex items-center space-x-2 px-3 py-1 bg-gray-800 hover:bg-gray-700 text-white rounded-lg transition-colors",children:[s.jsx(rl,{className:"h-4 w-4"}),s.jsx("span",{children:"Export"})]})]})]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-800/60",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Funnel Stage"}),s.jsx("th",{className:"px-6 py-4 text-center text-sm font-semibold text-gray-300",children:"Current"}),s.jsx("th",{className:"px-6 py-4 text-center text-sm font-semibold text-gray-300",children:"Previous"}),s.jsx("th",{className:"px-6 py-4 text-center text-sm font-semibold text-gray-300",children:"Change"}),s.jsx("th",{className:"px-6 py-4 text-center text-sm font-semibold text-gray-300",children:"Conversion Rate"}),s.jsx("th",{className:"px-6 py-4 text-center text-sm font-semibold text-gray-300",children:"Drop-off"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-800/50",children:k.map((_,S)=>{const O=w[_.key],E=N[_.key],I=p(O,E),z=S>0?w[k[S-1].key]:O,te=v(O,z),se=S>0?100-te:0;return s.jsxs("tr",{className:"hover:bg-gray-800/30 transition-colors group",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-gray-800/50 rounded-lg group-hover:scale-110 transition-transform duration-200",children:s.jsx(_.icon,{className:`h-5 w-5 ${_.color}`})}),s.jsx("span",{className:"font-medium text-white group-hover:text-gray-100 transition-colors",children:_.label})]})}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("span",{className:"text-lg font-bold text-white",children:_.isCurrency?f(O):O.toLocaleString()})}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("span",{className:"text-gray-400",children:_.isCurrency?f(E):E.toLocaleString()})}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[b(I),s.jsx("span",{className:`font-medium ${g(I)}`,children:x(I)})]})}),s.jsx("td",{className:"px-6 py-4 text-center",children:S>0&&!_.isCurrency?s.jsxs("span",{className:"text-blue-400 font-medium",children:[te.toFixed(1),"%"]}):s.jsx("span",{className:"text-gray-500",children:"-"})}),s.jsx("td",{className:"px-6 py-4 text-center",children:S>0&&!_.isCurrency?s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsxs("span",{className:`font-medium ${se>50?"text-red-400":se>25?"text-yellow-400":"text-green-400"}`,children:[se.toFixed(1),"%"]}),s.jsx("div",{className:"w-16 bg-gray-700 rounded-full h-2",children:s.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${se>50?"bg-red-400":se>25?"bg-yellow-400":"bg-green-400"}`,style:{width:`${Math.min(se,100)}%`}})})]}):s.jsx("span",{className:"text-gray-500",children:"-"})})]},_.key)})})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"glass-card p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[s.jsx(lr,{className:"h-5 w-5 mr-2 text-teal-400"}),"Funnel Velocity Insights"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-800/30 rounded-lg",children:[s.jsx("span",{className:"text-gray-300",children:"Lead to Qualified Rate"}),s.jsxs("span",{className:"text-white font-semibold",children:[w.totalLeads>0?(w.qualified/w.totalLeads*100).toFixed(1):0,"%"]})]}),s.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-800/30 rounded-lg",children:[s.jsx("span",{className:"text-gray-300",children:"Qualified to Won Rate"}),s.jsxs("span",{className:"text-white font-semibold",children:[w.qualified>0?(w.closedWon/w.qualified*100).toFixed(1):0,"%"]})]}),s.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-800/30 rounded-lg",children:[s.jsx("span",{className:"text-gray-300",children:"Revenue per Lead"}),s.jsx("span",{className:"text-white font-semibold",children:f(w.totalLeads>0?w.revenueGenerated/w.totalLeads:0)})]}),s.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-800/30 rounded-lg",children:[s.jsx("span",{className:"text-gray-300",children:"Cash Collection Rate"}),s.jsxs("span",{className:"text-green-400 font-semibold",children:[w.revenueGenerated>0?(w.cashCollected/w.revenueGenerated*100).toFixed(1):0,"%"]})]})]})]}),s.jsxs("div",{className:"glass-card p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[s.jsx(Ie,{className:"h-5 w-5 mr-2 text-teal-400"}),"Performance Summary"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"p-4 bg-gradient-to-r from-green-900/30 to-emerald-900/30 border border-green-500/30 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-green-400 font-medium",children:"Top Performing Stage"}),s.jsx("span",{className:"text-white font-semibold",children:w.warmLeads>0?"Warm Leads":"New Leads"})]}),s.jsx("p",{className:"text-sm text-gray-300 mt-1",children:"Highest conversion rate in the funnel"})]}),s.jsxs("div",{className:"p-4 bg-gradient-to-r from-yellow-900/30 to-orange-900/30 border border-yellow-500/30 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-yellow-400 font-medium",children:"Needs Attention"}),s.jsx("span",{className:"text-white font-semibold",children:w.qualified>w.closedWon?"Closing":"Qualification"})]}),s.jsx("p",{className:"text-sm text-gray-300 mt-1",children:"Stage with highest drop-off rate"})]}),s.jsxs("div",{className:"p-4 bg-gradient-to-r from-blue-900/30 to-cyan-900/30 border border-blue-500/30 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-blue-400 font-medium",children:"Outstanding Revenue"}),s.jsx("span",{className:"text-white font-semibold",children:f(w.revenueGenerated-w.cashCollected)})]}),s.jsx("p",{className:"text-sm text-gray-300 mt-1",children:"Revenue yet to be collected"})]})]})]})]})]})},pi=()=>{const[e,t]=j.useState([]),[r,n]=j.useState(!1),[a,l]=j.useState(null);return{deals:e,loading:r,error:a,fetchDeals:async()=>{n(!0),l(null);try{const{data:d,error:m}=await K.from("deals").select(`
          *,
          lead:leads(id, first_name, last_name, email, company, phone),
          owner:deal_owner(id, email, full_name, role)
        `).order("created_at",{ascending:!1});if(m)throw m;t(d||[])}catch(d){console.error("Error fetching deals:",d),l(d.message)}finally{n(!1)}},createDeal:async d=>{try{const{data:m,error:p}=await K.from("deals").insert(d).select(`
          *,
          lead:leads(id, first_name, last_name, email, company, phone),
          owner:deal_owner(id, email, full_name, role)
        `).single();if(p)throw p;return t(f=>[m,...f]),{data:m,error:null}}catch(m){return console.error("Error creating deal:",m),{data:null,error:m}}},updateDeal:async(d,m)=>{try{const{data:p,error:f}=await K.from("deals").update({...m,updated_at:new Date().toISOString()}).eq("id",d).select(`
          *,
          lead:leads(id, first_name, last_name, email, company, phone),
          owner:deal_owner(id, email, full_name, role)
        `).single();if(f)throw f;return t(x=>x.map(b=>b.id===d?p:b)),{data:p,error:null}}catch(p){return console.error("Error updating deal:",p),{data:null,error:p}}},deleteDeal:async d=>{try{const{error:m}=await K.from("deals").delete().eq("id",d);if(m)throw m;return t(p=>p.filter(f=>f.id!==d)),{error:null}}catch(m){return console.error("Error deleting deal:",m),{error:m}}},convertLeadToDeal:async(d,m)=>{try{const{data:p,error:f}=await K.from("deals").insert({...m,lead_id:d}).select(`
          *,
          lead:leads(id, first_name, last_name, email, company, phone),
          owner:deal_owner(id, email, full_name, role)
        `).single();if(f)throw f;const{error:x}=await K.from("leads").update({status:"qualified",conversion_date:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("id",d);return x&&console.warn("Failed to update lead status:",x),t(b=>[p,...b]),{data:p,error:null}}catch(p){return console.error("Error converting lead to deal:",p),{data:null,error:p}}}}},a_=e=>({totalDeals:e.length,totalValue:e.reduce((t,r)=>t+r.deal_value,0),weightedValue:e.reduce((t,r)=>t+r.deal_value*r.probability/100,0),averageDealSize:e.length>0?e.reduce((t,r)=>t+r.deal_value,0)/e.length:0,conversionRate:e.length>0?e.filter(t=>t.stage==="contract_signed").length/e.length*100:0,averageSalesCycle:30,stageMetrics:e.reduce((t,r)=>(t[r.stage]||(t[r.stage]={count:0,value:0,averageProbability:0,averageTimeInStage:0}),t[r.stage].count+=1,t[r.stage].value+=r.deal_value,t[r.stage].averageProbability+=r.probability,t),{})});function $d(e,t){return $d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},$d(e,t)}function mx(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,$d(e,t)}function le(){return le=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},le.apply(null,arguments)}function Ma(e){"@babel/helpers - typeof";return Ma=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ma(e)}function l_(e,t){if(Ma(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Ma(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function o_(e){var t=l_(e,"string");return Ma(t)=="symbol"?t:t+""}function i_(e,t,r){return(t=o_(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function wm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bm(Object(r),!0).forEach(function(n){i_(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bm(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gt(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var jm=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),gc=function(){return Math.random().toString(36).substring(7).split("").join(".")},Nm={INIT:"@@redux/INIT"+gc(),REPLACE:"@@redux/REPLACE"+gc(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+gc()}};function c_(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function px(e,t,r){var n;if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(gt(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(gt(1));return r(px)(e,t)}if(typeof e!="function")throw new Error(gt(2));var a=e,l=t,o=[],i=o,c=!1;function h(){i===o&&(i=o.slice())}function u(){if(c)throw new Error(gt(3));return l}function d(x){if(typeof x!="function")throw new Error(gt(4));if(c)throw new Error(gt(5));var b=!0;return h(),i.push(x),function(){if(b){if(c)throw new Error(gt(6));b=!1,h();var v=i.indexOf(x);i.splice(v,1),o=null}}}function m(x){if(!c_(x))throw new Error(gt(7));if(typeof x.type>"u")throw new Error(gt(8));if(c)throw new Error(gt(9));try{c=!0,l=a(l,x)}finally{c=!1}for(var b=o=i,g=0;g<b.length;g++){var v=b[g];v()}return x}function p(x){if(typeof x!="function")throw new Error(gt(10));a=x,m({type:Nm.REPLACE})}function f(){var x,b=d;return x={subscribe:function(v){if(typeof v!="object"||v===null)throw new Error(gt(11));function y(){v.next&&v.next(u())}y();var w=b(y);return{unsubscribe:w}}},x[jm]=function(){return this},x}return m({type:Nm.INIT}),n={dispatch:m,subscribe:d,getState:u,replaceReducer:p},n[jm]=f,n}function _m(e,t){return function(){return t(e.apply(this,arguments))}}function Sm(e,t){if(typeof e=="function")return _m(e,t);if(typeof e!="object"||e===null)throw new Error(gt(16));var r={};for(var n in e){var a=e[n];typeof a=="function"&&(r[n]=_m(a,t))}return r}function fx(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length===0?function(n){return n}:t.length===1?t[0]:t.reduce(function(n,a){return function(){return n(a.apply(void 0,arguments))}})}function d_(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(n){return function(){var a=n.apply(void 0,arguments),l=function(){throw new Error(gt(15))},o={getState:a.getState,dispatch:function(){return l.apply(void 0,arguments)}},i=t.map(function(c){return c(o)});return l=fx.apply(void 0,i)(a.dispatch),wm(wm({},a),{},{dispatch:l})}}}var gx=je.createContext(null);function u_(e){e()}var xx=u_,h_=function(t){return xx=t},m_=function(){return xx};function p_(){var e=m_(),t=null,r=null;return{clear:function(){t=null,r=null},notify:function(){e(function(){for(var a=t;a;)a.callback(),a=a.next})},get:function(){for(var a=[],l=t;l;)a.push(l),l=l.next;return a},subscribe:function(a){var l=!0,o=r={callback:a,next:null,prev:r};return o.prev?o.prev.next=o:t=o,function(){!l||t===null||(l=!1,o.next?o.next.prev=o.prev:r=o.prev,o.prev?o.prev.next=o.next:t=o.next)}}}}var km={notify:function(){},get:function(){return[]}};function vx(e,t){var r,n=km;function a(d){return c(),n.subscribe(d)}function l(){n.notify()}function o(){u.onStateChange&&u.onStateChange()}function i(){return!!r}function c(){r||(r=t?t.addNestedSub(o):e.subscribe(o),n=p_())}function h(){r&&(r(),r=void 0,n.clear(),n=km)}var u={addNestedSub:a,notifyNestedSubs:l,handleChangeWrapper:o,isSubscribed:i,trySubscribe:c,tryUnsubscribe:h,getListeners:function(){return n}};return u}var yx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?j.useLayoutEffect:j.useEffect;function f_(e){var t=e.store,r=e.context,n=e.children,a=j.useMemo(function(){var i=vx(t);return{store:t,subscription:i}},[t]),l=j.useMemo(function(){return t.getState()},[t]);yx(function(){var i=a.subscription;return i.onStateChange=i.notifyNestedSubs,i.trySubscribe(),l!==t.getState()&&i.notifyNestedSubs(),function(){i.tryUnsubscribe(),i.onStateChange=null}},[a,l]);var o=r||gx;return je.createElement(o.Provider,{value:a},n)}function Oo(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var bx={exports:{}},we={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ye=typeof Symbol=="function"&&Symbol.for,th=Ye?Symbol.for("react.element"):60103,rh=Ye?Symbol.for("react.portal"):60106,fi=Ye?Symbol.for("react.fragment"):60107,gi=Ye?Symbol.for("react.strict_mode"):60108,xi=Ye?Symbol.for("react.profiler"):60114,vi=Ye?Symbol.for("react.provider"):60109,yi=Ye?Symbol.for("react.context"):60110,sh=Ye?Symbol.for("react.async_mode"):60111,bi=Ye?Symbol.for("react.concurrent_mode"):60111,wi=Ye?Symbol.for("react.forward_ref"):60112,ji=Ye?Symbol.for("react.suspense"):60113,g_=Ye?Symbol.for("react.suspense_list"):60120,Ni=Ye?Symbol.for("react.memo"):60115,_i=Ye?Symbol.for("react.lazy"):60116,x_=Ye?Symbol.for("react.block"):60121,v_=Ye?Symbol.for("react.fundamental"):60117,y_=Ye?Symbol.for("react.responder"):60118,b_=Ye?Symbol.for("react.scope"):60119;function $t(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case th:switch(e=e.type,e){case sh:case bi:case fi:case xi:case gi:case ji:return e;default:switch(e=e&&e.$$typeof,e){case yi:case wi:case _i:case Ni:case vi:return e;default:return t}}case rh:return t}}}function wx(e){return $t(e)===bi}we.AsyncMode=sh;we.ConcurrentMode=bi;we.ContextConsumer=yi;we.ContextProvider=vi;we.Element=th;we.ForwardRef=wi;we.Fragment=fi;we.Lazy=_i;we.Memo=Ni;we.Portal=rh;we.Profiler=xi;we.StrictMode=gi;we.Suspense=ji;we.isAsyncMode=function(e){return wx(e)||$t(e)===sh};we.isConcurrentMode=wx;we.isContextConsumer=function(e){return $t(e)===yi};we.isContextProvider=function(e){return $t(e)===vi};we.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===th};we.isForwardRef=function(e){return $t(e)===wi};we.isFragment=function(e){return $t(e)===fi};we.isLazy=function(e){return $t(e)===_i};we.isMemo=function(e){return $t(e)===Ni};we.isPortal=function(e){return $t(e)===rh};we.isProfiler=function(e){return $t(e)===xi};we.isStrictMode=function(e){return $t(e)===gi};we.isSuspense=function(e){return $t(e)===ji};we.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===fi||e===bi||e===xi||e===gi||e===ji||e===g_||typeof e=="object"&&e!==null&&(e.$$typeof===_i||e.$$typeof===Ni||e.$$typeof===vi||e.$$typeof===yi||e.$$typeof===wi||e.$$typeof===v_||e.$$typeof===y_||e.$$typeof===b_||e.$$typeof===x_)};we.typeOf=$t;bx.exports=we;var w_=bx.exports,nh=w_,j_={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},N_={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},__={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},jx={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},ah={};ah[nh.ForwardRef]=__;ah[nh.Memo]=jx;function Cm(e){return nh.isMemo(e)?jx:ah[e.$$typeof]||j_}var S_=Object.defineProperty,k_=Object.getOwnPropertyNames,Dm=Object.getOwnPropertySymbols,C_=Object.getOwnPropertyDescriptor,D_=Object.getPrototypeOf,Em=Object.prototype;function Nx(e,t,r){if(typeof t!="string"){if(Em){var n=D_(t);n&&n!==Em&&Nx(e,n,r)}var a=k_(t);Dm&&(a=a.concat(Dm(t)));for(var l=Cm(e),o=Cm(t),i=0;i<a.length;++i){var c=a[i];if(!N_[c]&&!(r&&r[c])&&!(o&&o[c])&&!(l&&l[c])){var h=C_(t,c);try{S_(e,c,h)}catch{}}}}return e}var E_=Nx;const Pm=Vd(E_);var _x={exports:{}},_e={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Si=60103,ki=60106,nl=60107,al=60108,ll=60114,ol=60109,il=60110,cl=60112,dl=60113,lh=60120,ul=60115,hl=60116,Sx=60121,kx=60122,Cx=60117,Dx=60129,Ex=60131;if(typeof Symbol=="function"&&Symbol.for){var Je=Symbol.for;Si=Je("react.element"),ki=Je("react.portal"),nl=Je("react.fragment"),al=Je("react.strict_mode"),ll=Je("react.profiler"),ol=Je("react.provider"),il=Je("react.context"),cl=Je("react.forward_ref"),dl=Je("react.suspense"),lh=Je("react.suspense_list"),ul=Je("react.memo"),hl=Je("react.lazy"),Sx=Je("react.block"),kx=Je("react.server.block"),Cx=Je("react.fundamental"),Dx=Je("react.debug_trace_mode"),Ex=Je("react.legacy_hidden")}function ur(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Si:switch(e=e.type,e){case nl:case ll:case al:case dl:case lh:return e;default:switch(e=e&&e.$$typeof,e){case il:case cl:case hl:case ul:case ol:return e;default:return t}}case ki:return t}}}var P_=ol,I_=Si,T_=cl,R_=nl,O_=hl,L_=ul,A_=ki,$_=ll,M_=al,F_=dl;_e.ContextConsumer=il;_e.ContextProvider=P_;_e.Element=I_;_e.ForwardRef=T_;_e.Fragment=R_;_e.Lazy=O_;_e.Memo=L_;_e.Portal=A_;_e.Profiler=$_;_e.StrictMode=M_;_e.Suspense=F_;_e.isAsyncMode=function(){return!1};_e.isConcurrentMode=function(){return!1};_e.isContextConsumer=function(e){return ur(e)===il};_e.isContextProvider=function(e){return ur(e)===ol};_e.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Si};_e.isForwardRef=function(e){return ur(e)===cl};_e.isFragment=function(e){return ur(e)===nl};_e.isLazy=function(e){return ur(e)===hl};_e.isMemo=function(e){return ur(e)===ul};_e.isPortal=function(e){return ur(e)===ki};_e.isProfiler=function(e){return ur(e)===ll};_e.isStrictMode=function(e){return ur(e)===al};_e.isSuspense=function(e){return ur(e)===dl};_e.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===nl||e===ll||e===Dx||e===al||e===dl||e===lh||e===Ex||typeof e=="object"&&e!==null&&(e.$$typeof===hl||e.$$typeof===ul||e.$$typeof===ol||e.$$typeof===il||e.$$typeof===cl||e.$$typeof===Cx||e.$$typeof===Sx||e[0]===kx)};_e.typeOf=ur;_x.exports=_e;var U_=_x.exports,B_=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],z_=["reactReduxForwardedRef"],W_=[],V_=[null,null];function q_(e,t){var r=e[1];return[t.payload,r+1]}function Im(e,t,r){yx(function(){return e.apply(void 0,t)},r)}function G_(e,t,r,n,a,l,o){e.current=n,t.current=a,r.current=!1,l.current&&(l.current=null,o())}function H_(e,t,r,n,a,l,o,i,c,h){if(e){var u=!1,d=null,m=function(){if(!u){var x=t.getState(),b,g;try{b=n(x,a.current)}catch(v){g=v,d=v}g||(d=null),b===l.current?o.current||c():(l.current=b,i.current=b,o.current=!0,h({type:"STORE_UPDATED",payload:{error:g}}))}};r.onStateChange=m,r.trySubscribe(),m();var p=function(){if(u=!0,r.tryUnsubscribe(),r.onStateChange=null,d)throw d};return p}}var K_=function(){return[null,0]};function Q_(e,t){t===void 0&&(t={});var r=t,n=r.getDisplayName,a=n===void 0?function(y){return"ConnectAdvanced("+y+")"}:n,l=r.methodName,o=l===void 0?"connectAdvanced":l,i=r.renderCountProp,c=i===void 0?void 0:i,h=r.shouldHandleStateChanges,u=h===void 0?!0:h,d=r.storeKey,m=d===void 0?"store":d;r.withRef;var p=r.forwardRef,f=p===void 0?!1:p,x=r.context,b=x===void 0?gx:x,g=Oo(r,B_),v=b;return function(w){var N=w.displayName||w.name||"Component",k=a(N),D=le({},g,{getDisplayName:a,methodName:o,renderCountProp:c,shouldHandleStateChanges:u,storeKey:m,displayName:k,wrappedComponentName:N,WrappedComponent:w}),C=g.pure;function _(z){return e(z.dispatch,D)}var S=C?j.useMemo:function(z){return z()};function O(z){var te=j.useMemo(function(){var Ve=z.reactReduxForwardedRef,kt=Oo(z,z_);return[z.context,Ve,kt]},[z]),se=te[0],de=te[1],$=te[2],G=j.useMemo(function(){return se&&se.Consumer&&U_.isContextConsumer(je.createElement(se.Consumer,null))?se:v},[se,v]),R=j.useContext(G),M=!!z.store&&!!z.store.getState&&!!z.store.dispatch;R&&R.store;var F=M?z.store:R.store,A=j.useMemo(function(){return _(F)},[F]),T=j.useMemo(function(){if(!u)return V_;var Ve=vx(F,M?null:R.subscription),kt=Ve.notifyNestedSubs.bind(Ve);return[Ve,kt]},[F,M,R]),W=T[0],Z=T[1],P=j.useMemo(function(){return M?R:le({},R,{subscription:W})},[M,R,W]),Q=j.useReducer(q_,W_,K_),ue=Q[0],ve=ue[0],L=Q[1];if(ve&&ve.error)throw ve.error;var Y=j.useRef(),ae=j.useRef($),q=j.useRef(),re=j.useRef(!1),pe=S(function(){return q.current&&$===ae.current?q.current:A(F.getState(),$)},[F,ve,$]);Im(G_,[ae,Y,re,$,pe,q,Z]),Im(H_,[u,F,W,A,ae,Y,re,q,Z,L],[F,W,A]);var $e=j.useMemo(function(){return je.createElement(w,le({},pe,{ref:de}))},[de,w,pe]),vr=j.useMemo(function(){return u?je.createElement(G.Provider,{value:P},$e):$e},[G,$e,P]);return vr}var E=C?je.memo(O):O;if(E.WrappedComponent=w,E.displayName=O.displayName=k,f){var I=je.forwardRef(function(te,se){return je.createElement(E,le({},te,{reactReduxForwardedRef:se}))});return I.displayName=k,I.WrappedComponent=w,Pm(I,w)}return Pm(E,w)}}function Tm(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function xc(e,t){if(Tm(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(var a=0;a<r.length;a++)if(!Object.prototype.hasOwnProperty.call(t,r[a])||!Tm(e[r[a]],t[r[a]]))return!1;return!0}function Y_(e,t){var r={},n=function(o){var i=e[o];typeof i=="function"&&(r[o]=function(){return t(i.apply(void 0,arguments))})};for(var a in e)n(a);return r}function oh(e){return function(r,n){var a=e(r,n);function l(){return a}return l.dependsOnOwnProps=!1,l}}function Rm(e){return e.dependsOnOwnProps!==null&&e.dependsOnOwnProps!==void 0?!!e.dependsOnOwnProps:e.length!==1}function Px(e,t){return function(n,a){a.displayName;var l=function(i,c){return l.dependsOnOwnProps?l.mapToProps(i,c):l.mapToProps(i)};return l.dependsOnOwnProps=!0,l.mapToProps=function(i,c){l.mapToProps=e,l.dependsOnOwnProps=Rm(e);var h=l(i,c);return typeof h=="function"&&(l.mapToProps=h,l.dependsOnOwnProps=Rm(h),h=l(i,c)),h},l}}function J_(e){return typeof e=="function"?Px(e):void 0}function X_(e){return e?void 0:oh(function(t){return{dispatch:t}})}function Z_(e){return e&&typeof e=="object"?oh(function(t){return Y_(e,t)}):void 0}const e2=[J_,X_,Z_];function t2(e){return typeof e=="function"?Px(e):void 0}function r2(e){return e?void 0:oh(function(){return{}})}const s2=[t2,r2];function n2(e,t,r){return le({},r,e,t)}function a2(e){return function(r,n){n.displayName;var a=n.pure,l=n.areMergedPropsEqual,o=!1,i;return function(h,u,d){var m=e(h,u,d);return o?(!a||!l(m,i))&&(i=m):(o=!0,i=m),i}}}function l2(e){return typeof e=="function"?a2(e):void 0}function o2(e){return e?void 0:function(){return n2}}const i2=[l2,o2];var c2=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function d2(e,t,r,n){return function(l,o){return r(e(l,o),t(n,o),o)}}function u2(e,t,r,n,a){var l=a.areStatesEqual,o=a.areOwnPropsEqual,i=a.areStatePropsEqual,c=!1,h,u,d,m,p;function f(y,w){return h=y,u=w,d=e(h,u),m=t(n,u),p=r(d,m,u),c=!0,p}function x(){return d=e(h,u),t.dependsOnOwnProps&&(m=t(n,u)),p=r(d,m,u),p}function b(){return e.dependsOnOwnProps&&(d=e(h,u)),t.dependsOnOwnProps&&(m=t(n,u)),p=r(d,m,u),p}function g(){var y=e(h,u),w=!i(y,d);return d=y,w&&(p=r(d,m,u)),p}function v(y,w){var N=!o(w,u),k=!l(y,h,w,u);return h=y,u=w,N&&k?x():N?b():k?g():p}return function(w,N){return c?v(w,N):f(w,N)}}function h2(e,t){var r=t.initMapStateToProps,n=t.initMapDispatchToProps,a=t.initMergeProps,l=Oo(t,c2),o=r(e,l),i=n(e,l),c=a(e,l),h=l.pure?u2:d2;return h(o,i,c,e,l)}var m2=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function vc(e,t,r){for(var n=t.length-1;n>=0;n--){var a=t[n](e);if(a)return a}return function(l,o){throw new Error("Invalid value of type "+typeof e+" for "+r+" argument when connecting component "+o.wrappedComponentName+".")}}function p2(e,t){return e===t}function f2(e){var t=e===void 0?{}:e,r=t.connectHOC,n=r===void 0?Q_:r,a=t.mapStateToPropsFactories,l=a===void 0?s2:a,o=t.mapDispatchToPropsFactories,i=o===void 0?e2:o,c=t.mergePropsFactories,h=c===void 0?i2:c,u=t.selectorFactory,d=u===void 0?h2:u;return function(p,f,x,b){b===void 0&&(b={});var g=b,v=g.pure,y=v===void 0?!0:v,w=g.areStatesEqual,N=w===void 0?p2:w,k=g.areOwnPropsEqual,D=k===void 0?xc:k,C=g.areStatePropsEqual,_=C===void 0?xc:C,S=g.areMergedPropsEqual,O=S===void 0?xc:S,E=Oo(g,m2),I=vc(p,l,"mapStateToProps"),z=vc(f,i,"mapDispatchToProps"),te=vc(x,h,"mergeProps");return n(d,le({methodName:"connect",getDisplayName:function(de){return"Connect("+de+")"},shouldHandleStateChanges:!!p,initMapStateToProps:I,initMapDispatchToProps:z,initMergeProps:te,pure:y,areStatesEqual:N,areOwnPropsEqual:D,areStatePropsEqual:_,areMergedPropsEqual:O},E))}}const Ix=f2();h_(Fu.unstable_batchedUpdates);function g2(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function Tx(e,t){var r=j.useState(function(){return{inputs:t,result:e()}})[0],n=j.useRef(!0),a=j.useRef(r),l=n.current||!!(t&&a.current.inputs&&g2(t,a.current.inputs)),o=l?a.current:{inputs:t,result:e()};return j.useEffect(function(){n.current=!1,a.current=o},[o]),o.result}function x2(e,t){return Tx(function(){return e},t)}var ge=Tx,ne=x2,v2="Invariant failed";function y2(e,t){throw new Error(v2)}var sr=function(t){var r=t.top,n=t.right,a=t.bottom,l=t.left,o=n-l,i=a-r,c={top:r,right:n,bottom:a,left:l,width:o,height:i,x:l,y:r,center:{x:(n+l)/2,y:(a+r)/2}};return c},ih=function(t,r){return{top:t.top-r.top,left:t.left-r.left,bottom:t.bottom+r.bottom,right:t.right+r.right}},Om=function(t,r){return{top:t.top+r.top,left:t.left+r.left,bottom:t.bottom-r.bottom,right:t.right-r.right}},b2=function(t,r){return{top:t.top+r.y,left:t.left+r.x,bottom:t.bottom+r.y,right:t.right+r.x}},yc={top:0,right:0,bottom:0,left:0},ch=function(t){var r=t.borderBox,n=t.margin,a=n===void 0?yc:n,l=t.border,o=l===void 0?yc:l,i=t.padding,c=i===void 0?yc:i,h=sr(ih(r,a)),u=sr(Om(r,o)),d=sr(Om(u,c));return{marginBox:h,borderBox:sr(r),paddingBox:u,contentBox:d,margin:a,border:o,padding:c}},Ft=function(t){var r=t.slice(0,-2),n=t.slice(-2);if(n!=="px")return 0;var a=Number(r);return isNaN(a)&&y2(),a},w2=function(){return{x:window.pageXOffset,y:window.pageYOffset}},Lo=function(t,r){var n=t.borderBox,a=t.border,l=t.margin,o=t.padding,i=b2(n,r);return ch({borderBox:i,border:a,margin:l,padding:o})},Ao=function(t,r){return r===void 0&&(r=w2()),Lo(t,r)},Rx=function(t,r){var n={top:Ft(r.marginTop),right:Ft(r.marginRight),bottom:Ft(r.marginBottom),left:Ft(r.marginLeft)},a={top:Ft(r.paddingTop),right:Ft(r.paddingRight),bottom:Ft(r.paddingBottom),left:Ft(r.paddingLeft)},l={top:Ft(r.borderTopWidth),right:Ft(r.borderRightWidth),bottom:Ft(r.borderBottomWidth),left:Ft(r.borderLeftWidth)};return ch({borderBox:t,margin:n,padding:a,border:l})},Ox=function(t){var r=t.getBoundingClientRect(),n=window.getComputedStyle(t);return Rx(r,n)},Lm=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function j2(e,t){return!!(e===t||Lm(e)&&Lm(t))}function N2(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!j2(e[r],t[r]))return!1;return!0}function Ke(e,t){t===void 0&&(t=N2);var r,n=[],a,l=!1;function o(){for(var i=[],c=0;c<arguments.length;c++)i[c]=arguments[c];return l&&r===this&&t(i,n)||(a=e.apply(this,i),l=!0,r=this,n=i),a}return o}var Fa=function(t){var r=[],n=null,a=function(){for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];r=i,!n&&(n=requestAnimationFrame(function(){n=null,t.apply(void 0,r)}))};return a.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},a};function Lx(e,t){}Lx.bind(null,"warn");Lx.bind(null,"error");function rs(){}function _2(e,t){return le({},e,{},t)}function Wt(e,t,r){var n=t.map(function(a){var l=_2(r,a.options);return e.addEventListener(a.eventName,a.fn,l),function(){e.removeEventListener(a.eventName,a.fn,l)}});return function(){n.forEach(function(l){l()})}}var S2="Invariant failed";function $o(e){this.message=e}$o.prototype.toString=function(){return this.message};function H(e,t){throw new $o(S2)}var k2=function(e){mx(t,e);function t(){for(var n,a=arguments.length,l=new Array(a),o=0;o<a;o++)l[o]=arguments[o];return n=e.call.apply(e,[this].concat(l))||this,n.callbacks=null,n.unbind=rs,n.onWindowError=function(i){var c=n.getCallbacks();c.isDragging()&&c.tryAbort();var h=i.error;h instanceof $o&&i.preventDefault()},n.getCallbacks=function(){if(!n.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return n.callbacks},n.setCallbacks=function(i){n.callbacks=i},n}var r=t.prototype;return r.componentDidMount=function(){this.unbind=Wt(window,[{eventName:"error",fn:this.onWindowError}])},r.componentDidCatch=function(a){if(a instanceof $o){this.setState({});return}throw a},r.componentWillUnmount=function(){this.unbind()},r.render=function(){return this.props.children(this.setCallbacks)},t}(je.Component),C2=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,Mo=function(t){return t+1},D2=function(t){return`
  You have lifted an item in position `+Mo(t.source.index)+`
`},Ax=function(t,r){var n=t.droppableId===r.droppableId,a=Mo(t.index),l=Mo(r.index);return n?`
      You have moved the item from position `+a+`
      to position `+l+`
    `:`
    You have moved the item from position `+a+`
    in list `+t.droppableId+`
    to list `+r.droppableId+`
    in position `+l+`
  `},$x=function(t,r,n){var a=r.droppableId===n.droppableId;return a?`
      The item `+t+`
      has been combined with `+n.draggableId:`
      The item `+t+`
      in list `+r.droppableId+`
      has been combined with `+n.draggableId+`
      in list `+n.droppableId+`
    `},E2=function(t){var r=t.destination;if(r)return Ax(t.source,r);var n=t.combine;return n?$x(t.draggableId,t.source,n):"You are over an area that cannot be dropped on"},Am=function(t){return`
  The item has returned to its starting position
  of `+Mo(t.index)+`
`},P2=function(t){if(t.reason==="CANCEL")return`
      Movement cancelled.
      `+Am(t.source)+`
    `;var r=t.destination,n=t.combine;return r?`
      You have dropped the item.
      `+Ax(t.source,r)+`
    `:n?`
      You have dropped the item.
      `+$x(t.draggableId,t.source,n)+`
    `:`
    The item has been dropped while not over a drop area.
    `+Am(t.source)+`
  `},to={dragHandleUsageInstructions:C2,onDragStart:D2,onDragUpdate:E2,onDragEnd:P2},Qe={x:0,y:0},tt=function(t,r){return{x:t.x+r.x,y:t.y+r.y}},Pt=function(t,r){return{x:t.x-r.x,y:t.y-r.y}},ss=function(t,r){return t.x===r.x&&t.y===r.y},On=function(t){return{x:t.x!==0?-t.x:0,y:t.y!==0?-t.y:0}},Ts=function(t,r,n){var a;return n===void 0&&(n=0),a={},a[t]=r,a[t==="x"?"y":"x"]=n,a},Ua=function(t,r){return Math.sqrt(Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2))},$m=function(t,r){return Math.min.apply(Math,r.map(function(n){return Ua(t,n)}))},Mx=function(t){return function(r){return{x:t(r.x),y:t(r.y)}}},I2=function(e,t){var r=sr({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return r.width<=0||r.height<=0?null:r},ml=function(t,r){return{top:t.top+r.y,left:t.left+r.x,bottom:t.bottom+r.y,right:t.right+r.x}},Mm=function(t){return[{x:t.left,y:t.top},{x:t.right,y:t.top},{x:t.left,y:t.bottom},{x:t.right,y:t.bottom}]},T2={top:0,right:0,bottom:0,left:0},R2=function(t,r){return r?ml(t,r.scroll.diff.displacement):t},O2=function(t,r,n){if(n&&n.increasedBy){var a;return le({},t,(a={},a[r.end]=t[r.end]+n.increasedBy[r.line],a))}return t},L2=function(t,r){return r&&r.shouldClipSubject?I2(r.pageMarginBox,t):sr(t)},Nn=function(e){var t=e.page,r=e.withPlaceholder,n=e.axis,a=e.frame,l=R2(t.marginBox,a),o=O2(l,n,r),i=L2(o,a);return{page:t,withPlaceholder:r,active:i}},dh=function(e,t){e.frame||H();var r=e.frame,n=Pt(t,r.scroll.initial),a=On(n),l=le({},r,{scroll:{initial:r.scroll.initial,current:t,diff:{value:n,displacement:a},max:r.scroll.max}}),o=Nn({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:l}),i=le({},e,{frame:l,subject:o});return i};function Fo(e){return Object.values?Object.values(e):Object.keys(e).map(function(t){return e[t]})}function uh(e,t){if(e.findIndex)return e.findIndex(t);for(var r=0;r<e.length;r++)if(t(e[r]))return r;return-1}function ms(e,t){if(e.find)return e.find(t);var r=uh(e,t);if(r!==-1)return e[r]}function Fx(e){return Array.prototype.slice.call(e)}var Ux=Ke(function(e){return e.reduce(function(t,r){return t[r.descriptor.id]=r,t},{})}),Bx=Ke(function(e){return e.reduce(function(t,r){return t[r.descriptor.id]=r,t},{})}),Ci=Ke(function(e){return Fo(e)}),A2=Ke(function(e){return Fo(e)}),Ln=Ke(function(e,t){var r=A2(t).filter(function(n){return e===n.descriptor.droppableId}).sort(function(n,a){return n.descriptor.index-a.descriptor.index});return r});function hh(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function Di(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var Ei=Ke(function(e,t){return t.filter(function(r){return r.descriptor.id!==e.descriptor.id})}),$2=function(e){var t=e.isMovingForward,r=e.draggable,n=e.destination,a=e.insideDestination,l=e.previousImpact;if(!n.isCombineEnabled)return null;var o=hh(l);if(!o)return null;function i(x){var b={type:"COMBINE",combine:{draggableId:x,droppableId:n.descriptor.id}};return le({},l,{at:b})}var c=l.displaced.all,h=c.length?c[0]:null;if(t)return h?i(h):null;var u=Ei(r,a);if(!h){if(!u.length)return null;var d=u[u.length-1];return i(d.descriptor.id)}var m=uh(u,function(x){return x.descriptor.id===h});m===-1&&H();var p=m-1;if(p<0)return null;var f=u[p];return i(f.descriptor.id)},An=function(e,t){return e.descriptor.droppableId===t.descriptor.id},zx={point:Qe,value:0},Ba={invisible:{},visible:{},all:[]},M2={displaced:Ba,displacedBy:zx,at:null},qt=function(e,t){return function(r){return e<=r&&r<=t}},Wx=function(e){var t=qt(e.top,e.bottom),r=qt(e.left,e.right);return function(n){var a=t(n.top)&&t(n.bottom)&&r(n.left)&&r(n.right);if(a)return!0;var l=t(n.top)||t(n.bottom),o=r(n.left)||r(n.right),i=l&&o;if(i)return!0;var c=n.top<e.top&&n.bottom>e.bottom,h=n.left<e.left&&n.right>e.right,u=c&&h;if(u)return!0;var d=c&&o||h&&l;return d}},F2=function(e){var t=qt(e.top,e.bottom),r=qt(e.left,e.right);return function(n){var a=t(n.top)&&t(n.bottom)&&r(n.left)&&r(n.right);return a}},mh={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},Vx={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},U2=function(e){return function(t){var r=qt(t.top,t.bottom),n=qt(t.left,t.right);return function(a){return e===mh?r(a.top)&&r(a.bottom):n(a.left)&&n(a.right)}}},B2=function(t,r){var n=r.frame?r.frame.scroll.diff.displacement:Qe;return ml(t,n)},z2=function(t,r,n){return r.subject.active?n(r.subject.active)(t):!1},W2=function(t,r,n){return n(r)(t)},ph=function(t){var r=t.target,n=t.destination,a=t.viewport,l=t.withDroppableDisplacement,o=t.isVisibleThroughFrameFn,i=l?B2(r,n):r;return z2(i,n,o)&&W2(i,a,o)},V2=function(t){return ph(le({},t,{isVisibleThroughFrameFn:Wx}))},qx=function(t){return ph(le({},t,{isVisibleThroughFrameFn:F2}))},q2=function(t){return ph(le({},t,{isVisibleThroughFrameFn:U2(t.destination.axis)}))},G2=function(t,r,n){if(typeof n=="boolean")return n;if(!r)return!0;var a=r.invisible,l=r.visible;if(a[t])return!1;var o=l[t];return o?o.shouldAnimate:!0};function H2(e,t){var r=e.page.marginBox,n={top:t.point.y,right:0,bottom:0,left:t.point.x};return sr(ih(r,n))}function za(e){var t=e.afterDragging,r=e.destination,n=e.displacedBy,a=e.viewport,l=e.forceShouldAnimate,o=e.last;return t.reduce(function(c,h){var u=H2(h,n),d=h.descriptor.id;c.all.push(d);var m=V2({target:u,destination:r,viewport:a,withDroppableDisplacement:!0});if(!m)return c.invisible[h.descriptor.id]=!0,c;var p=G2(d,o,l),f={draggableId:d,shouldAnimate:p};return c.visible[d]=f,c},{all:[],visible:{},invisible:{}})}function K2(e,t){if(!e.length)return 0;var r=e[e.length-1].descriptor.index;return t.inHomeList?r:r+1}function Fm(e){var t=e.insideDestination,r=e.inHomeList,n=e.displacedBy,a=e.destination,l=K2(t,{inHomeList:r});return{displaced:Ba,displacedBy:n,at:{type:"REORDER",destination:{droppableId:a.descriptor.id,index:l}}}}function Uo(e){var t=e.draggable,r=e.insideDestination,n=e.destination,a=e.viewport,l=e.displacedBy,o=e.last,i=e.index,c=e.forceShouldAnimate,h=An(t,n);if(i==null)return Fm({insideDestination:r,inHomeList:h,displacedBy:l,destination:n});var u=ms(r,function(x){return x.descriptor.index===i});if(!u)return Fm({insideDestination:r,inHomeList:h,displacedBy:l,destination:n});var d=Ei(t,r),m=r.indexOf(u),p=d.slice(m),f=za({afterDragging:p,destination:n,displacedBy:l,last:o,viewport:a.frame,forceShouldAnimate:c});return{displaced:f,displacedBy:l,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:i}}}}function os(e,t){return!!t.effected[e]}var Q2=function(e){var t=e.isMovingForward,r=e.destination,n=e.draggables,a=e.combine,l=e.afterCritical;if(!r.isCombineEnabled)return null;var o=a.draggableId,i=n[o],c=i.descriptor.index,h=os(o,l);return h?t?c:c-1:t?c+1:c},Y2=function(e){var t=e.isMovingForward,r=e.isInHomeList,n=e.insideDestination,a=e.location;if(!n.length)return null;var l=a.index,o=t?l+1:l-1,i=n[0].descriptor.index,c=n[n.length-1].descriptor.index,h=r?c:c+1;return o<i||o>h?null:o},J2=function(e){var t=e.isMovingForward,r=e.isInHomeList,n=e.draggable,a=e.draggables,l=e.destination,o=e.insideDestination,i=e.previousImpact,c=e.viewport,h=e.afterCritical,u=i.at;if(u||H(),u.type==="REORDER"){var d=Y2({isMovingForward:t,isInHomeList:r,location:u.destination,insideDestination:o});return d==null?null:Uo({draggable:n,insideDestination:o,destination:l,viewport:c,last:i.displaced,displacedBy:i.displacedBy,index:d})}var m=Q2({isMovingForward:t,destination:l,displaced:i.displaced,draggables:a,combine:u.combine,afterCritical:h});return m==null?null:Uo({draggable:n,insideDestination:o,destination:l,viewport:c,last:i.displaced,displacedBy:i.displacedBy,index:m})},X2=function(e){var t=e.displaced,r=e.afterCritical,n=e.combineWith,a=e.displacedBy,l=!!(t.visible[n]||t.invisible[n]);return os(n,r)?l?Qe:On(a.point):l?a.point:Qe},Z2=function(e){var t=e.afterCritical,r=e.impact,n=e.draggables,a=Di(r);a||H();var l=a.draggableId,o=n[l].page.borderBox.center,i=X2({displaced:r.displaced,afterCritical:t,combineWith:l,displacedBy:r.displacedBy});return tt(o,i)},Gx=function(t,r){return r.margin[t.start]+r.borderBox[t.size]/2},e4=function(t,r){return r.margin[t.end]+r.borderBox[t.size]/2},fh=function(t,r,n){return r[t.crossAxisStart]+n.margin[t.crossAxisStart]+n.borderBox[t.crossAxisSize]/2},Um=function(t){var r=t.axis,n=t.moveRelativeTo,a=t.isMoving;return Ts(r.line,n.marginBox[r.end]+Gx(r,a),fh(r,n.marginBox,a))},Bm=function(t){var r=t.axis,n=t.moveRelativeTo,a=t.isMoving;return Ts(r.line,n.marginBox[r.start]-e4(r,a),fh(r,n.marginBox,a))},t4=function(t){var r=t.axis,n=t.moveInto,a=t.isMoving;return Ts(r.line,n.contentBox[r.start]+Gx(r,a),fh(r,n.contentBox,a))},r4=function(e){var t=e.impact,r=e.draggable,n=e.draggables,a=e.droppable,l=e.afterCritical,o=Ln(a.descriptor.id,n),i=r.page,c=a.axis;if(!o.length)return t4({axis:c,moveInto:a.page,isMoving:i});var h=t.displaced,u=t.displacedBy,d=h.all[0];if(d){var m=n[d];if(os(d,l))return Bm({axis:c,moveRelativeTo:m.page,isMoving:i});var p=Lo(m.page,u.point);return Bm({axis:c,moveRelativeTo:p,isMoving:i})}var f=o[o.length-1];if(f.descriptor.id===r.descriptor.id)return i.borderBox.center;if(os(f.descriptor.id,l)){var x=Lo(f.page,On(l.displacedBy.point));return Um({axis:c,moveRelativeTo:x,isMoving:i})}return Um({axis:c,moveRelativeTo:f.page,isMoving:i})},Md=function(e,t){var r=e.frame;return r?tt(t,r.scroll.diff.displacement):t},s4=function(t){var r=t.impact,n=t.draggable,a=t.droppable,l=t.draggables,o=t.afterCritical,i=n.page.borderBox.center,c=r.at;return!a||!c?i:c.type==="REORDER"?r4({impact:r,draggable:n,draggables:l,droppable:a,afterCritical:o}):Z2({impact:r,draggables:l,afterCritical:o})},Pi=function(e){var t=s4(e),r=e.droppable,n=r?Md(r,t):t;return n},Hx=function(e,t){var r=Pt(t,e.scroll.initial),n=On(r),a=sr({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),l={frame:a,scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:r,displacement:n}}};return l};function zm(e,t){return e.map(function(r){return t[r]})}function n4(e,t){for(var r=0;r<t.length;r++){var n=t[r].visible[e];if(n)return n}return null}var a4=function(e){var t=e.impact,r=e.viewport,n=e.destination,a=e.draggables,l=e.maxScrollChange,o=Hx(r,tt(r.scroll.current,l)),i=n.frame?dh(n,tt(n.frame.scroll.current,l)):n,c=t.displaced,h=za({afterDragging:zm(c.all,a),destination:n,displacedBy:t.displacedBy,viewport:o.frame,last:c,forceShouldAnimate:!1}),u=za({afterDragging:zm(c.all,a),destination:i,displacedBy:t.displacedBy,viewport:r.frame,last:c,forceShouldAnimate:!1}),d={},m={},p=[c,h,u];c.all.forEach(function(x){var b=n4(x,p);if(b){m[x]=b;return}d[x]=!0});var f=le({},t,{displaced:{all:c.all,invisible:d,visible:m}});return f},l4=function(e,t){return tt(e.scroll.diff.displacement,t)},gh=function(e){var t=e.pageBorderBoxCenter,r=e.draggable,n=e.viewport,a=l4(n,t),l=Pt(a,r.page.borderBox.center);return tt(r.client.borderBox.center,l)},Kx=function(e){var t=e.draggable,r=e.destination,n=e.newPageBorderBoxCenter,a=e.viewport,l=e.withDroppableDisplacement,o=e.onlyOnMainAxis,i=o===void 0?!1:o,c=Pt(n,t.page.borderBox.center),h=ml(t.page.borderBox,c),u={target:h,destination:r,withDroppableDisplacement:l,viewport:a};return i?q2(u):qx(u)},o4=function(e){var t=e.isMovingForward,r=e.draggable,n=e.destination,a=e.draggables,l=e.previousImpact,o=e.viewport,i=e.previousPageBorderBoxCenter,c=e.previousClientSelection,h=e.afterCritical;if(!n.isEnabled)return null;var u=Ln(n.descriptor.id,a),d=An(r,n),m=$2({isMovingForward:t,draggable:r,destination:n,insideDestination:u,previousImpact:l})||J2({isMovingForward:t,isInHomeList:d,draggable:r,draggables:a,destination:n,insideDestination:u,previousImpact:l,viewport:o,afterCritical:h});if(!m)return null;var p=Pi({impact:m,draggable:r,droppable:n,draggables:a,afterCritical:h}),f=Kx({draggable:r,destination:n,newPageBorderBoxCenter:p,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});if(f){var x=gh({pageBorderBoxCenter:p,draggable:r,viewport:o});return{clientSelection:x,impact:m,scrollJumpRequest:null}}var b=Pt(p,i),g=a4({impact:m,viewport:o,destination:n,draggables:a,maxScrollChange:b});return{clientSelection:c,impact:g,scrollJumpRequest:b}},dt=function(t){var r=t.subject.active;return r||H(),r},i4=function(e){var t=e.isMovingForward,r=e.pageBorderBoxCenter,n=e.source,a=e.droppables,l=e.viewport,o=n.subject.active;if(!o)return null;var i=n.axis,c=qt(o[i.start],o[i.end]),h=Ci(a).filter(function(d){return d!==n}).filter(function(d){return d.isEnabled}).filter(function(d){return!!d.subject.active}).filter(function(d){return Wx(l.frame)(dt(d))}).filter(function(d){var m=dt(d);return t?o[i.crossAxisEnd]<m[i.crossAxisEnd]:m[i.crossAxisStart]<o[i.crossAxisStart]}).filter(function(d){var m=dt(d),p=qt(m[i.start],m[i.end]);return c(m[i.start])||c(m[i.end])||p(o[i.start])||p(o[i.end])}).sort(function(d,m){var p=dt(d)[i.crossAxisStart],f=dt(m)[i.crossAxisStart];return t?p-f:f-p}).filter(function(d,m,p){return dt(d)[i.crossAxisStart]===dt(p[0])[i.crossAxisStart]});if(!h.length)return null;if(h.length===1)return h[0];var u=h.filter(function(d){var m=qt(dt(d)[i.start],dt(d)[i.end]);return m(r[i.line])});return u.length===1?u[0]:u.length>1?u.sort(function(d,m){return dt(d)[i.start]-dt(m)[i.start]})[0]:h.sort(function(d,m){var p=$m(r,Mm(dt(d))),f=$m(r,Mm(dt(m)));return p!==f?p-f:dt(d)[i.start]-dt(m)[i.start]})[0]},Wm=function(t,r){var n=t.page.borderBox.center;return os(t.descriptor.id,r)?Pt(n,r.displacedBy.point):n},c4=function(t,r){var n=t.page.borderBox;return os(t.descriptor.id,r)?ml(n,On(r.displacedBy.point)):n},d4=function(e){var t=e.pageBorderBoxCenter,r=e.viewport,n=e.destination,a=e.insideDestination,l=e.afterCritical,o=a.filter(function(i){return qx({target:c4(i,l),destination:n,viewport:r.frame,withDroppableDisplacement:!0})}).sort(function(i,c){var h=Ua(t,Md(n,Wm(i,l))),u=Ua(t,Md(n,Wm(c,l)));return h<u?-1:u<h?1:i.descriptor.index-c.descriptor.index});return o[0]||null},pl=Ke(function(t,r){var n=r[t.line];return{value:n,point:Ts(t.line,n)}}),u4=function(t,r,n){var a=t.axis;if(t.descriptor.mode==="virtual")return Ts(a.line,r[a.line]);var l=t.subject.page.contentBox[a.size],o=Ln(t.descriptor.id,n),i=o.reduce(function(u,d){return u+d.client.marginBox[a.size]},0),c=i+r[a.line],h=c-l;return h<=0?null:Ts(a.line,h)},Qx=function(t,r){return le({},t,{scroll:le({},t.scroll,{max:r})})},Yx=function(t,r,n){var a=t.frame;An(r,t)&&H(),t.subject.withPlaceholder&&H();var l=pl(t.axis,r.displaceBy).point,o=u4(t,l,n),i={placeholderSize:l,increasedBy:o,oldFrameMaxScroll:t.frame?t.frame.scroll.max:null};if(!a){var c=Nn({page:t.subject.page,withPlaceholder:i,axis:t.axis,frame:t.frame});return le({},t,{subject:c})}var h=o?tt(a.scroll.max,o):a.scroll.max,u=Qx(a,h),d=Nn({page:t.subject.page,withPlaceholder:i,axis:t.axis,frame:u});return le({},t,{subject:d,frame:u})},h4=function(t){var r=t.subject.withPlaceholder;r||H();var n=t.frame;if(!n){var a=Nn({page:t.subject.page,axis:t.axis,frame:null,withPlaceholder:null});return le({},t,{subject:a})}var l=r.oldFrameMaxScroll;l||H();var o=Qx(n,l),i=Nn({page:t.subject.page,axis:t.axis,frame:o,withPlaceholder:null});return le({},t,{subject:i,frame:o})},m4=function(e){var t=e.previousPageBorderBoxCenter,r=e.moveRelativeTo,n=e.insideDestination,a=e.draggable,l=e.draggables,o=e.destination,i=e.viewport,c=e.afterCritical;if(!r){if(n.length)return null;var h={displaced:Ba,displacedBy:zx,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:0}}},u=Pi({impact:h,draggable:a,droppable:o,draggables:l,afterCritical:c}),d=An(a,o)?o:Yx(o,a,l),m=Kx({draggable:a,destination:d,newPageBorderBoxCenter:u,viewport:i.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});return m?h:null}var p=t[o.axis.line]<=r.page.borderBox.center[o.axis.line],f=function(){var b=r.descriptor.index;return r.descriptor.id===a.descriptor.id||p?b:b+1}(),x=pl(o.axis,a.displaceBy);return Uo({draggable:a,insideDestination:n,destination:o,viewport:i,displacedBy:x,last:Ba,index:f})},p4=function(e){var t=e.isMovingForward,r=e.previousPageBorderBoxCenter,n=e.draggable,a=e.isOver,l=e.draggables,o=e.droppables,i=e.viewport,c=e.afterCritical,h=i4({isMovingForward:t,pageBorderBoxCenter:r,source:a,droppables:o,viewport:i});if(!h)return null;var u=Ln(h.descriptor.id,l),d=d4({pageBorderBoxCenter:r,viewport:i,destination:h,insideDestination:u,afterCritical:c}),m=m4({previousPageBorderBoxCenter:r,destination:h,draggable:n,draggables:l,moveRelativeTo:d,insideDestination:u,viewport:i,afterCritical:c});if(!m)return null;var p=Pi({impact:m,draggable:n,droppable:h,draggables:l,afterCritical:c}),f=gh({pageBorderBoxCenter:p,draggable:n,viewport:i});return{clientSelection:f,impact:m,scrollJumpRequest:null}},Tt=function(e){var t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null},f4=function(t,r){var n=Tt(t);return n?r[n]:null},g4=function(e){var t=e.state,r=e.type,n=f4(t.impact,t.dimensions.droppables),a=!!n,l=t.dimensions.droppables[t.critical.droppable.id],o=n||l,i=o.axis.direction,c=i==="vertical"&&(r==="MOVE_UP"||r==="MOVE_DOWN")||i==="horizontal"&&(r==="MOVE_LEFT"||r==="MOVE_RIGHT");if(c&&!a)return null;var h=r==="MOVE_DOWN"||r==="MOVE_RIGHT",u=t.dimensions.draggables[t.critical.draggable.id],d=t.current.page.borderBoxCenter,m=t.dimensions,p=m.draggables,f=m.droppables;return c?o4({isMovingForward:h,previousPageBorderBoxCenter:d,draggable:u,destination:o,draggables:p,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):p4({isMovingForward:h,previousPageBorderBoxCenter:d,draggable:u,isOver:o,draggables:p,droppables:f,viewport:t.viewport,afterCritical:t.afterCritical})};function ys(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function Jx(e){var t=qt(e.top,e.bottom),r=qt(e.left,e.right);return function(a){return t(a.y)&&r(a.x)}}function x4(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function v4(e){var t=e.pageBorderBox,r=e.draggable,n=e.candidates,a=r.page.borderBox.center,l=n.map(function(o){var i=o.axis,c=Ts(o.axis.line,t.center[i.line],o.page.borderBox.center[i.crossAxisLine]);return{id:o.descriptor.id,distance:Ua(a,c)}}).sort(function(o,i){return i.distance-o.distance});return l[0]?l[0].id:null}function y4(e){var t=e.pageBorderBox,r=e.draggable,n=e.droppables,a=Ci(n).filter(function(l){if(!l.isEnabled)return!1;var o=l.subject.active;if(!o||!x4(t,o))return!1;if(Jx(o)(t.center))return!0;var i=l.axis,c=o.center[i.crossAxisLine],h=t[i.crossAxisStart],u=t[i.crossAxisEnd],d=qt(o[i.crossAxisStart],o[i.crossAxisEnd]),m=d(h),p=d(u);return!m&&!p?!0:m?h<c:u>c});return a.length?a.length===1?a[0].descriptor.id:v4({pageBorderBox:t,draggable:r,candidates:a}):null}var Xx=function(t,r){return sr(ml(t,r))},b4=function(e,t){var r=e.frame;return r?Xx(t,r.scroll.diff.value):t};function Zx(e){var t=e.displaced,r=e.id;return!!(t.visible[r]||t.invisible[r])}function w4(e){var t=e.draggable,r=e.closest,n=e.inHomeList;return r?n&&r.descriptor.index>t.descriptor.index?r.descriptor.index-1:r.descriptor.index:null}var j4=function(e){var t=e.pageBorderBoxWithDroppableScroll,r=e.draggable,n=e.destination,a=e.insideDestination,l=e.last,o=e.viewport,i=e.afterCritical,c=n.axis,h=pl(n.axis,r.displaceBy),u=h.value,d=t[c.start],m=t[c.end],p=Ei(r,a),f=ms(p,function(b){var g=b.descriptor.id,v=b.page.borderBox.center[c.line],y=os(g,i),w=Zx({displaced:l,id:g});return y?w?m<=v:d<v-u:w?m<=v+u:d<v}),x=w4({draggable:r,closest:f,inHomeList:An(r,n)});return Uo({draggable:r,insideDestination:a,destination:n,viewport:o,last:l,displacedBy:h,index:x})},N4=4,_4=function(e){var t=e.draggable,r=e.pageBorderBoxWithDroppableScroll,n=e.previousImpact,a=e.destination,l=e.insideDestination,o=e.afterCritical;if(!a.isCombineEnabled)return null;var i=a.axis,c=pl(a.axis,t.displaceBy),h=c.value,u=r[i.start],d=r[i.end],m=Ei(t,l),p=ms(m,function(x){var b=x.descriptor.id,g=x.page.borderBox,v=g[i.size],y=v/N4,w=os(b,o),N=Zx({displaced:n.displaced,id:b});return w?N?d>g[i.start]+y&&d<g[i.end]-y:u>g[i.start]-h+y&&u<g[i.end]-h-y:N?d>g[i.start]+h+y&&d<g[i.end]+h-y:u>g[i.start]+y&&u<g[i.end]-y});if(!p)return null;var f={displacedBy:c,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:p.descriptor.id,droppableId:a.descriptor.id}}};return f},ev=function(e){var t=e.pageOffset,r=e.draggable,n=e.draggables,a=e.droppables,l=e.previousImpact,o=e.viewport,i=e.afterCritical,c=Xx(r.page.borderBox,t),h=y4({pageBorderBox:c,draggable:r,droppables:a});if(!h)return M2;var u=a[h],d=Ln(u.descriptor.id,n),m=b4(u,c);return _4({pageBorderBoxWithDroppableScroll:m,draggable:r,previousImpact:l,destination:u,insideDestination:d,afterCritical:i})||j4({pageBorderBoxWithDroppableScroll:m,draggable:r,destination:u,insideDestination:d,last:l.displaced,viewport:o,afterCritical:i})},xh=function(e,t){var r;return le({},e,(r={},r[t.descriptor.id]=t,r))},S4=function(t){var r=t.previousImpact,n=t.impact,a=t.droppables,l=Tt(r),o=Tt(n);if(!l||l===o)return a;var i=a[l];if(!i.subject.withPlaceholder)return a;var c=h4(i);return xh(a,c)},k4=function(e){var t=e.draggable,r=e.draggables,n=e.droppables,a=e.previousImpact,l=e.impact,o=S4({previousImpact:a,impact:l,droppables:n}),i=Tt(l);if(!i)return o;var c=n[i];if(An(t,c)||c.subject.withPlaceholder)return o;var h=Yx(c,t,r);return xh(o,h)},pa=function(e){var t=e.state,r=e.clientSelection,n=e.dimensions,a=e.viewport,l=e.impact,o=e.scrollJumpRequest,i=a||t.viewport,c=n||t.dimensions,h=r||t.current.client.selection,u=Pt(h,t.initial.client.selection),d={offset:u,selection:h,borderBoxCenter:tt(t.initial.client.borderBoxCenter,u)},m={selection:tt(d.selection,i.scroll.current),borderBoxCenter:tt(d.borderBoxCenter,i.scroll.current),offset:tt(d.offset,i.scroll.diff.value)},p={client:d,page:m};if(t.phase==="COLLECTING")return le({phase:"COLLECTING"},t,{dimensions:c,viewport:i,current:p});var f=c.draggables[t.critical.draggable.id],x=l||ev({pageOffset:m.offset,draggable:f,draggables:c.draggables,droppables:c.droppables,previousImpact:t.impact,viewport:i,afterCritical:t.afterCritical}),b=k4({draggable:f,impact:x,previousImpact:t.impact,draggables:c.draggables,droppables:c.droppables}),g=le({},t,{current:p,dimensions:{draggables:c.draggables,droppables:b},impact:x,viewport:i,scrollJumpRequest:o||null,forceShouldAnimate:o?!1:null});return g};function C4(e,t){return e.map(function(r){return t[r]})}var tv=function(e){var t=e.impact,r=e.viewport,n=e.draggables,a=e.destination,l=e.forceShouldAnimate,o=t.displaced,i=C4(o.all,n),c=za({afterDragging:i,destination:a,displacedBy:t.displacedBy,viewport:r.frame,forceShouldAnimate:l,last:o});return le({},t,{displaced:c})},rv=function(e){var t=e.impact,r=e.draggable,n=e.droppable,a=e.draggables,l=e.viewport,o=e.afterCritical,i=Pi({impact:t,draggable:r,draggables:a,droppable:n,afterCritical:o});return gh({pageBorderBoxCenter:i,draggable:r,viewport:l})},sv=function(e){var t=e.state,r=e.dimensions,n=e.viewport;t.movementMode!=="SNAP"&&H();var a=t.impact,l=n||t.viewport,o=r||t.dimensions,i=o.draggables,c=o.droppables,h=i[t.critical.draggable.id],u=Tt(a);u||H();var d=c[u],m=tv({impact:a,viewport:l,destination:d,draggables:i}),p=rv({impact:m,draggable:h,droppable:d,draggables:i,viewport:l,afterCritical:t.afterCritical});return pa({impact:m,clientSelection:p,state:t,dimensions:o,viewport:l})},D4=function(e){return{index:e.index,droppableId:e.droppableId}},nv=function(e){var t=e.draggable,r=e.home,n=e.draggables,a=e.viewport,l=pl(r.axis,t.displaceBy),o=Ln(r.descriptor.id,n),i=o.indexOf(t);i===-1&&H();var c=o.slice(i+1),h=c.reduce(function(p,f){return p[f.descriptor.id]=!0,p},{}),u={inVirtualList:r.descriptor.mode==="virtual",displacedBy:l,effected:h},d=za({afterDragging:c,destination:r,displacedBy:l,last:null,viewport:a.frame,forceShouldAnimate:!1}),m={displaced:d,displacedBy:l,at:{type:"REORDER",destination:D4(t.descriptor)}};return{impact:m,afterCritical:u}},E4=function(e,t){return{draggables:e.draggables,droppables:xh(e.droppables,t)}},P4=function(e){var t=e.draggable,r=e.offset,n=e.initialWindowScroll,a=Lo(t.client,r),l=Ao(a,n),o=le({},t,{placeholder:le({},t.placeholder,{client:a}),client:a,page:l});return o},I4=function(e){var t=e.frame;return t||H(),t},T4=function(e){var t=e.additions,r=e.updatedDroppables,n=e.viewport,a=n.scroll.diff.value;return t.map(function(l){var o=l.descriptor.droppableId,i=r[o],c=I4(i),h=c.scroll.diff.value,u=tt(a,h),d=P4({draggable:l,offset:u,initialWindowScroll:n.scroll.initial});return d})},R4=function(e){var t=e.state,r=e.published,n=r.modified.map(function(y){var w=t.dimensions.droppables[y.droppableId],N=dh(w,y.scroll);return N}),a=le({},t.dimensions.droppables,{},Ux(n)),l=Bx(T4({additions:r.additions,updatedDroppables:a,viewport:t.viewport})),o=le({},t.dimensions.draggables,{},l);r.removals.forEach(function(y){delete o[y]});var i={droppables:a,draggables:o},c=Tt(t.impact),h=c?i.droppables[c]:null,u=i.draggables[t.critical.draggable.id],d=i.droppables[t.critical.droppable.id],m=nv({draggable:u,home:d,draggables:o,viewport:t.viewport}),p=m.impact,f=m.afterCritical,x=h&&h.isCombineEnabled?t.impact:p,b=ev({pageOffset:t.current.page.offset,draggable:i.draggables[t.critical.draggable.id],draggables:i.draggables,droppables:i.droppables,previousImpact:x,viewport:t.viewport,afterCritical:f}),g=le({phase:"DRAGGING"},t,{phase:"DRAGGING",impact:b,onLiftImpact:p,dimensions:i,afterCritical:f,forceShouldAnimate:!1});if(t.phase==="COLLECTING")return g;var v=le({phase:"DROP_PENDING"},g,{phase:"DROP_PENDING",reason:t.reason,isWaiting:!1});return v},Fd=function(t){return t.movementMode==="SNAP"},bc=function(t,r,n){var a=E4(t.dimensions,r);return!Fd(t)||n?pa({state:t,dimensions:a}):sv({state:t,dimensions:a})};function wc(e){return e.isDragging&&e.movementMode==="SNAP"?le({phase:"DRAGGING"},e,{scrollJumpRequest:null}):e}var Vm={phase:"IDLE",completed:null,shouldFlush:!1},O4=function(e,t){if(e===void 0&&(e=Vm),t.type==="FLUSH")return le({},Vm,{shouldFlush:!0});if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&H();var r=t.payload,n=r.critical,a=r.clientSelection,l=r.viewport,o=r.dimensions,i=r.movementMode,c=o.draggables[n.draggable.id],h=o.droppables[n.droppable.id],u={selection:a,borderBoxCenter:c.client.borderBox.center,offset:Qe},d={client:u,page:{selection:tt(u.selection,l.scroll.initial),borderBoxCenter:tt(u.selection,l.scroll.initial),offset:tt(u.selection,l.scroll.diff.value)}},m=Ci(o.droppables).every(function(L){return!L.isFixedOnPage}),p=nv({draggable:c,home:h,draggables:o.draggables,viewport:l}),f=p.impact,x=p.afterCritical,b={phase:"DRAGGING",isDragging:!0,critical:n,movementMode:i,dimensions:o,initial:d,current:d,isWindowScrollAllowed:m,impact:f,afterCritical:x,onLiftImpact:f,viewport:l,scrollJumpRequest:null,forceShouldAnimate:null};return b}if(t.type==="COLLECTION_STARTING"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&H();var g=le({phase:"COLLECTING"},e,{phase:"COLLECTING"});return g}if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||H(),R4({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;ys(e)||H();var v=t.payload.client;return ss(v,e.current.client.selection)?e:pa({state:e,clientSelection:v,impact:Fd(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return wc(e);ys(e)||H();var y=t.payload,w=y.id,N=y.newScroll,k=e.dimensions.droppables[w];if(!k)return e;var D=dh(k,N);return bc(e,D,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;ys(e)||H();var C=t.payload,_=C.id,S=C.isEnabled,O=e.dimensions.droppables[_];O||H(),O.isEnabled===S&&H();var E=le({},O,{isEnabled:S});return bc(e,E,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;ys(e)||H();var I=t.payload,z=I.id,te=I.isCombineEnabled,se=e.dimensions.droppables[z];se||H(),se.isCombineEnabled===te&&H();var de=le({},se,{isCombineEnabled:te});return bc(e,de,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;ys(e)||H(),e.isWindowScrollAllowed||H();var $=t.payload.newScroll;if(ss(e.viewport.scroll.current,$))return wc(e);var G=Hx(e.viewport,$);return Fd(e)?sv({state:e,viewport:G}):pa({state:e,viewport:G})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!ys(e))return e;var R=t.payload.maxScroll;if(ss(R,e.viewport.scroll.max))return e;var M=le({},e.viewport,{scroll:le({},e.viewport.scroll,{max:R})});return le({phase:"DRAGGING"},e,{viewport:M})}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&H();var F=g4({state:e,type:t.type});return F?pa({state:e,impact:F.impact,clientSelection:F.clientSelection,scrollJumpRequest:F.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){var A=t.payload.reason;e.phase!=="COLLECTING"&&H();var T=le({phase:"DROP_PENDING"},e,{phase:"DROP_PENDING",isWaiting:!0,reason:A});return T}if(t.type==="DROP_ANIMATE"){var W=t.payload,Z=W.completed,P=W.dropDuration,Q=W.newHomeClientOffset;e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||H();var ue={phase:"DROP_ANIMATING",completed:Z,dropDuration:P,newHomeClientOffset:Q,dimensions:e.dimensions};return ue}if(t.type==="DROP_COMPLETE"){var ve=t.payload.completed;return{phase:"IDLE",completed:ve,shouldFlush:!1}}return e},L4=function(t){return{type:"BEFORE_INITIAL_CAPTURE",payload:t}},A4=function(t){return{type:"LIFT",payload:t}},$4=function(t){return{type:"INITIAL_PUBLISH",payload:t}},M4=function(t){return{type:"PUBLISH_WHILE_DRAGGING",payload:t}},F4=function(){return{type:"COLLECTION_STARTING",payload:null}},U4=function(t){return{type:"UPDATE_DROPPABLE_SCROLL",payload:t}},B4=function(t){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:t}},z4=function(t){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:t}},av=function(t){return{type:"MOVE",payload:t}},W4=function(t){return{type:"MOVE_BY_WINDOW_SCROLL",payload:t}},V4=function(t){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:t}},q4=function(){return{type:"MOVE_UP",payload:null}},G4=function(){return{type:"MOVE_DOWN",payload:null}},H4=function(){return{type:"MOVE_RIGHT",payload:null}},K4=function(){return{type:"MOVE_LEFT",payload:null}},vh=function(){return{type:"FLUSH",payload:null}},Q4=function(t){return{type:"DROP_ANIMATE",payload:t}},yh=function(t){return{type:"DROP_COMPLETE",payload:t}},lv=function(t){return{type:"DROP",payload:t}},Y4=function(t){return{type:"DROP_PENDING",payload:t}},ov=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}},J4=function(e){return function(t){var r=t.getState,n=t.dispatch;return function(a){return function(l){if(l.type!=="LIFT"){a(l);return}var o=l.payload,i=o.id,c=o.clientSelection,h=o.movementMode,u=r();u.phase==="DROP_ANIMATING"&&n(yh({completed:u.completed})),r().phase!=="IDLE"&&H(),n(vh()),n(L4({draggableId:i,movementMode:h}));var d={shouldPublishImmediately:h==="SNAP"},m={draggableId:i,scrollOptions:d},p=e.startPublishing(m),f=p.critical,x=p.dimensions,b=p.viewport;n($4({critical:f,dimensions:x,clientSelection:c,movementMode:h,viewport:b}))}}}},X4=function(e){return function(){return function(t){return function(r){r.type==="INITIAL_PUBLISH"&&e.dragging(),r.type==="DROP_ANIMATE"&&e.dropping(r.payload.completed.result.reason),(r.type==="FLUSH"||r.type==="DROP_COMPLETE")&&e.resting(),t(r)}}}},bh={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},Wa={opacity:{drop:0,combining:.7},scale:{drop:.75}},wh={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},fs=wh.outOfTheWay+"s "+bh.outOfTheWay,fa={fluid:"opacity "+fs,snap:"transform "+fs+", opacity "+fs,drop:function(t){var r=t+"s "+bh.drop;return"transform "+r+", opacity "+r},outOfTheWay:"transform "+fs,placeholder:"height "+fs+", width "+fs+", margin "+fs},qm=function(t){return ss(t,Qe)?null:"translate("+t.x+"px, "+t.y+"px)"},Ud={moveTo:qm,drop:function(t,r){var n=qm(t);return n?r?n+" scale("+Wa.scale.drop+")":n:null}},Bd=wh.minDropTime,iv=wh.maxDropTime,Z4=iv-Bd,Gm=1500,eS=.6,tS=function(e){var t=e.current,r=e.destination,n=e.reason,a=Ua(t,r);if(a<=0)return Bd;if(a>=Gm)return iv;var l=a/Gm,o=Bd+Z4*l,i=n==="CANCEL"?o*eS:o;return Number(i.toFixed(2))},rS=function(e){var t=e.impact,r=e.draggable,n=e.dimensions,a=e.viewport,l=e.afterCritical,o=n.draggables,i=n.droppables,c=Tt(t),h=c?i[c]:null,u=i[r.descriptor.droppableId],d=rv({impact:t,draggable:r,draggables:o,afterCritical:l,droppable:h||u,viewport:a}),m=Pt(d,r.client.borderBox.center);return m},sS=function(e){var t=e.draggables,r=e.reason,n=e.lastImpact,a=e.home,l=e.viewport,o=e.onLiftImpact;if(!n.at||r!=="DROP"){var i=tv({draggables:t,impact:o,destination:a,viewport:l,forceShouldAnimate:!0});return{impact:i,didDropInsideDroppable:!1}}if(n.at.type==="REORDER")return{impact:n,didDropInsideDroppable:!0};var c=le({},n,{displaced:Ba});return{impact:c,didDropInsideDroppable:!0}},nS=function(e){var t=e.getState,r=e.dispatch;return function(n){return function(a){if(a.type!=="DROP"){n(a);return}var l=t(),o=a.payload.reason;if(l.phase==="COLLECTING"){r(Y4({reason:o}));return}if(l.phase!=="IDLE"){var i=l.phase==="DROP_PENDING"&&l.isWaiting;i&&H(),l.phase==="DRAGGING"||l.phase==="DROP_PENDING"||H();var c=l.critical,h=l.dimensions,u=h.draggables[l.critical.draggable.id],d=sS({reason:o,lastImpact:l.impact,afterCritical:l.afterCritical,onLiftImpact:l.onLiftImpact,home:l.dimensions.droppables[l.critical.droppable.id],viewport:l.viewport,draggables:l.dimensions.draggables}),m=d.impact,p=d.didDropInsideDroppable,f=p?hh(m):null,x=p?Di(m):null,b={index:c.draggable.index,droppableId:c.droppable.id},g={draggableId:u.descriptor.id,type:u.descriptor.type,source:b,reason:o,mode:l.movementMode,destination:f,combine:x},v=rS({impact:m,draggable:u,dimensions:h,viewport:l.viewport,afterCritical:l.afterCritical}),y={critical:l.critical,afterCritical:l.afterCritical,result:g,impact:m},w=!ss(l.current.client.offset,v)||!!g.combine;if(!w){r(yh({completed:y}));return}var N=tS({current:l.current.client.offset,destination:v,reason:o}),k={newHomeClientOffset:v,dropDuration:N,completed:y};r(Q4(k))}}}},cv=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function aS(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(r){r.target!==window&&r.target!==window.document||e()}}}function lS(e){var t=e.onWindowScroll;function r(){t(cv())}var n=Fa(r),a=aS(n),l=rs;function o(){return l!==rs}function i(){o()&&H(),l=Wt(window,[a])}function c(){o()||H(),n.cancel(),l(),l=rs}return{start:i,stop:c,isActive:o}}var oS=function(t){return t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH"},iS=function(e){var t=lS({onWindowScroll:function(n){e.dispatch(W4({newScroll:n}))}});return function(r){return function(n){!t.isActive()&&n.type==="INITIAL_PUBLISH"&&t.start(),t.isActive()&&oS(n)&&t.stop(),r(n)}}},cS=function(e){var t=!1,r=!1,n=setTimeout(function(){r=!0}),a=function(o){t||r||(t=!0,e(o),clearTimeout(n))};return a.wasCalled=function(){return t},a},dS=function(){var e=[],t=function(l){var o=uh(e,function(h){return h.timerId===l});o===-1&&H();var i=e.splice(o,1),c=i[0];c.callback()},r=function(l){var o=setTimeout(function(){return t(o)}),i={timerId:o,callback:l};e.push(i)},n=function(){if(e.length){var l=[].concat(e);e.length=0,l.forEach(function(o){clearTimeout(o.timerId),o.callback()})}};return{add:r,flush:n}},uS=function(t,r){return t==null&&r==null?!0:t==null||r==null?!1:t.droppableId===r.droppableId&&t.index===r.index},hS=function(t,r){return t==null&&r==null?!0:t==null||r==null?!1:t.draggableId===r.draggableId&&t.droppableId===r.droppableId},mS=function(t,r){if(t===r)return!0;var n=t.draggable.id===r.draggable.id&&t.draggable.droppableId===r.draggable.droppableId&&t.draggable.type===r.draggable.type&&t.draggable.index===r.draggable.index,a=t.droppable.id===r.droppable.id&&t.droppable.type===r.droppable.type;return n&&a},Hn=function(t,r){r()},Fl=function(t,r){return{draggableId:t.draggable.id,type:t.droppable.type,source:{droppableId:t.droppable.id,index:t.draggable.index},mode:r}},jc=function(t,r,n,a){if(!t){n(a(r));return}var l=cS(n),o={announce:l};t(r,o),l.wasCalled()||n(a(r))},pS=function(e,t){var r=dS(),n=null,a=function(m,p){n&&H(),Hn("onBeforeCapture",function(){var f=e().onBeforeCapture;if(f){var x={draggableId:m,mode:p};f(x)}})},l=function(m,p){n&&H(),Hn("onBeforeDragStart",function(){var f=e().onBeforeDragStart;f&&f(Fl(m,p))})},o=function(m,p){n&&H();var f=Fl(m,p);n={mode:p,lastCritical:m,lastLocation:f.source,lastCombine:null},r.add(function(){Hn("onDragStart",function(){return jc(e().onDragStart,f,t,to.onDragStart)})})},i=function(m,p){var f=hh(p),x=Di(p);n||H();var b=!mS(m,n.lastCritical);b&&(n.lastCritical=m);var g=!uS(n.lastLocation,f);g&&(n.lastLocation=f);var v=!hS(n.lastCombine,x);if(v&&(n.lastCombine=x),!(!b&&!g&&!v)){var y=le({},Fl(m,n.mode),{combine:x,destination:f});r.add(function(){Hn("onDragUpdate",function(){return jc(e().onDragUpdate,y,t,to.onDragUpdate)})})}},c=function(){n||H(),r.flush()},h=function(m){n||H(),n=null,Hn("onDragEnd",function(){return jc(e().onDragEnd,m,t,to.onDragEnd)})},u=function(){if(n){var m=le({},Fl(n.lastCritical,n.mode),{combine:null,destination:null,reason:"CANCEL"});h(m)}};return{beforeCapture:a,beforeStart:l,start:o,update:i,flush:c,drop:h,abort:u}},fS=function(e,t){var r=pS(e,t);return function(n){return function(a){return function(l){if(l.type==="BEFORE_INITIAL_CAPTURE"){r.beforeCapture(l.payload.draggableId,l.payload.movementMode);return}if(l.type==="INITIAL_PUBLISH"){var o=l.payload.critical;r.beforeStart(o,l.payload.movementMode),a(l),r.start(o,l.payload.movementMode);return}if(l.type==="DROP_COMPLETE"){var i=l.payload.completed.result;r.flush(),a(l),r.drop(i);return}if(a(l),l.type==="FLUSH"){r.abort();return}var c=n.getState();c.phase==="DRAGGING"&&r.update(c.critical,c.impact)}}}},gS=function(e){return function(t){return function(r){if(r.type!=="DROP_ANIMATION_FINISHED"){t(r);return}var n=e.getState();n.phase!=="DROP_ANIMATING"&&H(),e.dispatch(yh({completed:n.completed}))}}},xS=function(e){var t=null,r=null;function n(){r&&(cancelAnimationFrame(r),r=null),t&&(t(),t=null)}return function(a){return function(l){if((l.type==="FLUSH"||l.type==="DROP_COMPLETE"||l.type==="DROP_ANIMATION_FINISHED")&&n(),a(l),l.type==="DROP_ANIMATE"){var o={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){var c=e.getState();c.phase==="DROP_ANIMATING"&&e.dispatch(ov())}};r=requestAnimationFrame(function(){r=null,t=Wt(window,[o])})}}}},vS=function(e){return function(){return function(t){return function(r){(r.type==="DROP_COMPLETE"||r.type==="FLUSH"||r.type==="DROP_ANIMATE")&&e.stopPublishing(),t(r)}}}},yS=function(e){var t=!1;return function(){return function(r){return function(n){if(n.type==="INITIAL_PUBLISH"){t=!0,e.tryRecordFocus(n.payload.critical.draggable.id),r(n),e.tryRestoreFocusRecorded();return}if(r(n),!!t){if(n.type==="FLUSH"){t=!1,e.tryRestoreFocusRecorded();return}if(n.type==="DROP_COMPLETE"){t=!1;var a=n.payload.completed.result;a.combine&&e.tryShiftRecord(a.draggableId,a.combine.draggableId),e.tryRestoreFocusRecorded()}}}}}},bS=function(t){return t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH"},wS=function(e){return function(t){return function(r){return function(n){if(bS(n)){e.stop(),r(n);return}if(n.type==="INITIAL_PUBLISH"){r(n);var a=t.getState();a.phase!=="DRAGGING"&&H(),e.start(a);return}r(n),e.scroll(t.getState())}}}},jS=function(e){return function(t){return function(r){if(t(r),r.type==="PUBLISH_WHILE_DRAGGING"){var n=e.getState();n.phase==="DROP_PENDING"&&(n.isWaiting||e.dispatch(lv({reason:n.reason})))}}}},NS=fx,_S=function(e){var t=e.dimensionMarshal,r=e.focusMarshal,n=e.styleMarshal,a=e.getResponders,l=e.announce,o=e.autoScroller;return px(O4,NS(d_(X4(n),vS(t),J4(t),nS,gS,xS,jS,wS(o),iS,yS(r),fS(a,l))))},Nc=function(){return{additions:{},removals:{},modified:{}}};function SS(e){var t=e.registry,r=e.callbacks,n=Nc(),a=null,l=function(){a||(r.collectionStarting(),a=requestAnimationFrame(function(){a=null;var u=n,d=u.additions,m=u.removals,p=u.modified,f=Object.keys(d).map(function(g){return t.draggable.getById(g).getDimension(Qe)}).sort(function(g,v){return g.descriptor.index-v.descriptor.index}),x=Object.keys(p).map(function(g){var v=t.droppable.getById(g),y=v.callbacks.getScrollWhileDragging();return{droppableId:g,scroll:y}}),b={additions:f,removals:Object.keys(m),modified:x};n=Nc(),r.publish(b)}))},o=function(u){var d=u.descriptor.id;n.additions[d]=u,n.modified[u.descriptor.droppableId]=!0,n.removals[d]&&delete n.removals[d],l()},i=function(u){var d=u.descriptor;n.removals[d.id]=!0,n.modified[d.droppableId]=!0,n.additions[d.id]&&delete n.additions[d.id],l()},c=function(){a&&(cancelAnimationFrame(a),a=null,n=Nc())};return{add:o,remove:i,stop:c}}var dv=function(e){var t=e.scrollHeight,r=e.scrollWidth,n=e.height,a=e.width,l=Pt({x:r,y:t},{x:a,y:n}),o={x:Math.max(0,l.x),y:Math.max(0,l.y)};return o},uv=function(){var e=document.documentElement;return e||H(),e},hv=function(){var e=uv(),t=dv({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight});return t},kS=function(){var e=cv(),t=hv(),r=e.y,n=e.x,a=uv(),l=a.clientWidth,o=a.clientHeight,i=n+l,c=r+o,h=sr({top:r,left:n,right:i,bottom:c}),u={frame:h,scroll:{initial:e,current:e,max:t,diff:{value:Qe,displacement:Qe}}};return u},CS=function(e){var t=e.critical,r=e.scrollOptions,n=e.registry,a=kS(),l=a.scroll.current,o=t.droppable,i=n.droppable.getAllByType(o.type).map(function(d){return d.callbacks.getDimensionAndWatchScroll(l,r)}),c=n.draggable.getAllByType(t.draggable.type).map(function(d){return d.getDimension(l)}),h={draggables:Bx(c),droppables:Ux(i)},u={dimensions:h,critical:t,viewport:a};return u};function Hm(e,t,r){if(r.descriptor.id===t.id||r.descriptor.type!==t.type)return!1;var n=e.droppable.getById(r.descriptor.droppableId);return n.descriptor.mode==="virtual"}var DS=function(e,t){var r=null,n=SS({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),a=function(p,f){e.droppable.exists(p)||H(),r&&t.updateDroppableIsEnabled({id:p,isEnabled:f})},l=function(p,f){r&&(e.droppable.exists(p)||H(),t.updateDroppableIsCombineEnabled({id:p,isCombineEnabled:f}))},o=function(p,f){r&&(e.droppable.exists(p)||H(),t.updateDroppableScroll({id:p,newScroll:f}))},i=function(p,f){r&&e.droppable.getById(p).callbacks.scroll(f)},c=function(){if(r){n.stop();var p=r.critical.droppable;e.droppable.getAllByType(p.type).forEach(function(f){return f.callbacks.dragStopped()}),r.unsubscribe(),r=null}},h=function(p){r||H();var f=r.critical.draggable;p.type==="ADDITION"&&Hm(e,f,p.value)&&n.add(p.value),p.type==="REMOVAL"&&Hm(e,f,p.value)&&n.remove(p.value)},u=function(p){r&&H();var f=e.draggable.getById(p.draggableId),x=e.droppable.getById(f.descriptor.droppableId),b={draggable:f.descriptor,droppable:x.descriptor},g=e.subscribe(h);return r={critical:b,unsubscribe:g},CS({critical:b,registry:e,scrollOptions:p.scrollOptions})},d={updateDroppableIsEnabled:a,updateDroppableIsCombineEnabled:l,scrollDroppable:i,updateDroppableScroll:o,startPublishing:u,stopPublishing:c};return d},mv=function(e,t){return e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP"},ES=function(e){window.scrollBy(e.x,e.y)},PS=Ke(function(e){return Ci(e).filter(function(t){return!(!t.isEnabled||!t.frame)})}),IS=function(t,r){var n=ms(PS(r),function(a){return a.frame||H(),Jx(a.frame.pageMarginBox)(t)});return n},TS=function(e){var t=e.center,r=e.destination,n=e.droppables;if(r){var a=n[r];return a.frame?a:null}var l=IS(t,n);return l},ns={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:function(t){return Math.pow(t,2)},durationDampening:{stopDampeningAt:1200,accelerateAt:360}},RS=function(e,t){var r=e[t.size]*ns.startFromPercentage,n=e[t.size]*ns.maxScrollAtPercentage,a={startScrollingFrom:r,maxScrollValueAt:n};return a},pv=function(e){var t=e.startOfRange,r=e.endOfRange,n=e.current,a=r-t;if(a===0)return 0;var l=n-t,o=l/a;return o},jh=1,OS=function(e,t){if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return ns.maxPixelScroll;if(e===t.startScrollingFrom)return jh;var r=pv({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),n=1-r,a=ns.maxPixelScroll*ns.ease(n);return Math.ceil(a)},Km=ns.durationDampening.accelerateAt,Qm=ns.durationDampening.stopDampeningAt,LS=function(e,t){var r=t,n=Qm,a=Date.now(),l=a-r;if(l>=Qm)return e;if(l<Km)return jh;var o=pv({startOfRange:Km,endOfRange:n,current:l}),i=e*ns.ease(o);return Math.ceil(i)},Ym=function(e){var t=e.distanceToEdge,r=e.thresholds,n=e.dragStartTime,a=e.shouldUseTimeDampening,l=OS(t,r);return l===0?0:a?Math.max(LS(l,n),jh):l},Jm=function(e){var t=e.container,r=e.distanceToEdges,n=e.dragStartTime,a=e.axis,l=e.shouldUseTimeDampening,o=RS(t,a),i=r[a.end]<r[a.start];return i?Ym({distanceToEdge:r[a.end],thresholds:o,dragStartTime:n,shouldUseTimeDampening:l}):-1*Ym({distanceToEdge:r[a.start],thresholds:o,dragStartTime:n,shouldUseTimeDampening:l})},AS=function(e){var t=e.container,r=e.subject,n=e.proposedScroll,a=r.height>t.height,l=r.width>t.width;return!l&&!a?n:l&&a?null:{x:l?0:n.x,y:a?0:n.y}},$S=Mx(function(e){return e===0?0:e}),fv=function(e){var t=e.dragStartTime,r=e.container,n=e.subject,a=e.center,l=e.shouldUseTimeDampening,o={top:a.y-r.top,right:r.right-a.x,bottom:r.bottom-a.y,left:a.x-r.left},i=Jm({container:r,distanceToEdges:o,dragStartTime:t,axis:mh,shouldUseTimeDampening:l}),c=Jm({container:r,distanceToEdges:o,dragStartTime:t,axis:Vx,shouldUseTimeDampening:l}),h=$S({x:c,y:i});if(ss(h,Qe))return null;var u=AS({container:r,subject:n,proposedScroll:h});return u?ss(u,Qe)?null:u:null},MS=Mx(function(e){return e===0?0:e>0?1:-1}),Nh=function(){var e=function(r,n){return r<0?r:r>n?r-n:0};return function(t){var r=t.current,n=t.max,a=t.change,l=tt(r,a),o={x:e(l.x,n.x),y:e(l.y,n.y)};return ss(o,Qe)?null:o}}(),gv=function(t){var r=t.max,n=t.current,a=t.change,l={x:Math.max(n.x,r.x),y:Math.max(n.y,r.y)},o=MS(a),i=Nh({max:l,current:n,change:o});return!i||o.x!==0&&i.x===0||o.y!==0&&i.y===0},_h=function(t,r){return gv({current:t.scroll.current,max:t.scroll.max,change:r})},FS=function(t,r){if(!_h(t,r))return null;var n=t.scroll.max,a=t.scroll.current;return Nh({current:a,max:n,change:r})},Sh=function(t,r){var n=t.frame;return n?gv({current:n.scroll.current,max:n.scroll.max,change:r}):!1},US=function(t,r){var n=t.frame;return!n||!Sh(t,r)?null:Nh({current:n.scroll.current,max:n.scroll.max,change:r})},BS=function(e){var t=e.viewport,r=e.subject,n=e.center,a=e.dragStartTime,l=e.shouldUseTimeDampening,o=fv({dragStartTime:a,container:t.frame,subject:r,center:n,shouldUseTimeDampening:l});return o&&_h(t,o)?o:null},zS=function(e){var t=e.droppable,r=e.subject,n=e.center,a=e.dragStartTime,l=e.shouldUseTimeDampening,o=t.frame;if(!o)return null;var i=fv({dragStartTime:a,container:o.pageMarginBox,subject:r,center:n,shouldUseTimeDampening:l});return i&&Sh(t,i)?i:null},Xm=function(e){var t=e.state,r=e.dragStartTime,n=e.shouldUseTimeDampening,a=e.scrollWindow,l=e.scrollDroppable,o=t.current.page.borderBoxCenter,i=t.dimensions.draggables[t.critical.draggable.id],c=i.page.marginBox;if(t.isWindowScrollAllowed){var h=t.viewport,u=BS({dragStartTime:r,viewport:h,subject:c,center:o,shouldUseTimeDampening:n});if(u){a(u);return}}var d=TS({center:o,destination:Tt(t.impact),droppables:t.dimensions.droppables});if(d){var m=zS({dragStartTime:r,droppable:d,subject:c,center:o,shouldUseTimeDampening:n});m&&l(d.descriptor.id,m)}},WS=function(e){var t=e.scrollWindow,r=e.scrollDroppable,n=Fa(t),a=Fa(r),l=null,o=function(u){l||H();var d=l,m=d.shouldUseTimeDampening,p=d.dragStartTime;Xm({state:u,scrollWindow:n,scrollDroppable:a,dragStartTime:p,shouldUseTimeDampening:m})},i=function(u){l&&H();var d=Date.now(),m=!1,p=function(){m=!0};Xm({state:u,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:p,scrollDroppable:p}),l={dragStartTime:d,shouldUseTimeDampening:m},m&&o(u)},c=function(){l&&(n.cancel(),a.cancel(),l=null)};return{start:i,stop:c,scroll:o}},VS=function(e){var t=e.move,r=e.scrollDroppable,n=e.scrollWindow,a=function(h,u){var d=tt(h.current.client.selection,u);t({client:d})},l=function(h,u){if(!Sh(h,u))return u;var d=US(h,u);if(!d)return r(h.descriptor.id,u),null;var m=Pt(u,d);r(h.descriptor.id,m);var p=Pt(u,m);return p},o=function(h,u,d){if(!h||!_h(u,d))return d;var m=FS(u,d);if(!m)return n(d),null;var p=Pt(d,m);n(p);var f=Pt(d,p);return f},i=function(h){var u=h.scrollJumpRequest;if(u){var d=Tt(h.impact);d||H();var m=l(h.dimensions.droppables[d],u);if(m){var p=h.viewport,f=o(h.isWindowScrollAllowed,p,m);f&&a(h,f)}}};return i},qS=function(e){var t=e.scrollDroppable,r=e.scrollWindow,n=e.move,a=WS({scrollWindow:r,scrollDroppable:t}),l=VS({move:n,scrollWindow:r,scrollDroppable:t}),o=function(h){if(h.phase==="DRAGGING"){if(h.movementMode==="FLUID"){a.scroll(h);return}h.scrollJumpRequest&&l(h)}},i={scroll:o,start:a.start,stop:a.stop};return i},_n="data-rbd",Sn=function(){var e=_n+"-drag-handle";return{base:e,draggableId:e+"-draggable-id",contextId:e+"-context-id"}}(),zd=function(){var e=_n+"-draggable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),GS=function(){var e=_n+"-droppable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),Zm={contextId:_n+"-scroll-container-context-id"},HS=function(t){return function(r){return"["+r+'="'+t+'"]'}},Kn=function(t,r){return t.map(function(n){var a=n.styles[r];return a?n.selector+" { "+a+" }":""}).join(" ")},KS="pointer-events: none;",QS=function(e){var t=HS(e),r=function(){var i=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(Sn.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:i,dragging:KS,dropAnimating:i}}}(),n=function(){var i=`
      transition: `+fa.outOfTheWay+`;
    `;return{selector:t(zd.contextId),styles:{dragging:i,dropAnimating:i,userCancel:i}}}(),a={selector:t(GS.contextId),styles:{always:"overflow-anchor: none;"}},l={selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}},o=[n,r,a,l];return{always:Kn(o,"always"),resting:Kn(o,"resting"),dragging:Kn(o,"dragging"),dropAnimating:Kn(o,"dropAnimating"),userCancel:Kn(o,"userCancel")}},Rt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?j.useLayoutEffect:j.useEffect,_c=function(){var t=document.querySelector("head");return t||H(),t},ep=function(t){var r=document.createElement("style");return t&&r.setAttribute("nonce",t),r.type="text/css",r};function YS(e,t){var r=ge(function(){return QS(e)},[e]),n=j.useRef(null),a=j.useRef(null),l=ne(Ke(function(d){var m=a.current;m||H(),m.textContent=d}),[]),o=ne(function(d){var m=n.current;m||H(),m.textContent=d},[]);Rt(function(){!n.current&&!a.current||H();var d=ep(t),m=ep(t);return n.current=d,a.current=m,d.setAttribute(_n+"-always",e),m.setAttribute(_n+"-dynamic",e),_c().appendChild(d),_c().appendChild(m),o(r.always),l(r.resting),function(){var p=function(x){var b=x.current;b||H(),_c().removeChild(b),x.current=null};p(n),p(a)}},[t,o,l,r.always,r.resting,e]);var i=ne(function(){return l(r.dragging)},[l,r.dragging]),c=ne(function(d){if(d==="DROP"){l(r.dropAnimating);return}l(r.userCancel)},[l,r.dropAnimating,r.userCancel]),h=ne(function(){a.current&&l(r.resting)},[l,r.resting]),u=ge(function(){return{dragging:i,dropping:c,resting:h}},[i,c,h]);return u}var xv=function(e){return e&&e.ownerDocument?e.ownerDocument.defaultView:window};function Ii(e){return e instanceof xv(e).HTMLElement}function JS(e,t){var r="["+Sn.contextId+'="'+e+'"]',n=Fx(document.querySelectorAll(r));if(!n.length)return null;var a=ms(n,function(l){return l.getAttribute(Sn.draggableId)===t});return!a||!Ii(a)?null:a}function XS(e){var t=j.useRef({}),r=j.useRef(null),n=j.useRef(null),a=j.useRef(!1),l=ne(function(m,p){var f={id:m,focus:p};return t.current[m]=f,function(){var b=t.current,g=b[m];g!==f&&delete b[m]}},[]),o=ne(function(m){var p=JS(e,m);p&&p!==document.activeElement&&p.focus()},[e]),i=ne(function(m,p){r.current===m&&(r.current=p)},[]),c=ne(function(){n.current||a.current&&(n.current=requestAnimationFrame(function(){n.current=null;var m=r.current;m&&o(m)}))},[o]),h=ne(function(m){r.current=null;var p=document.activeElement;p&&p.getAttribute(Sn.draggableId)===m&&(r.current=m)},[]);Rt(function(){return a.current=!0,function(){a.current=!1;var m=n.current;m&&cancelAnimationFrame(m)}},[]);var u=ge(function(){return{register:l,tryRecordFocus:h,tryRestoreFocusRecorded:c,tryShiftRecord:i}},[l,h,c,i]);return u}function ZS(){var e={draggables:{},droppables:{}},t=[];function r(d){return t.push(d),function(){var p=t.indexOf(d);p!==-1&&t.splice(p,1)}}function n(d){t.length&&t.forEach(function(m){return m(d)})}function a(d){return e.draggables[d]||null}function l(d){var m=a(d);return m||H(),m}var o={register:function(m){e.draggables[m.descriptor.id]=m,n({type:"ADDITION",value:m})},update:function(m,p){var f=e.draggables[p.descriptor.id];f&&f.uniqueId===m.uniqueId&&(delete e.draggables[p.descriptor.id],e.draggables[m.descriptor.id]=m)},unregister:function(m){var p=m.descriptor.id,f=a(p);f&&m.uniqueId===f.uniqueId&&(delete e.draggables[p],n({type:"REMOVAL",value:m}))},getById:l,findById:a,exists:function(m){return!!a(m)},getAllByType:function(m){return Fo(e.draggables).filter(function(p){return p.descriptor.type===m})}};function i(d){return e.droppables[d]||null}function c(d){var m=i(d);return m||H(),m}var h={register:function(m){e.droppables[m.descriptor.id]=m},unregister:function(m){var p=i(m.descriptor.id);p&&m.uniqueId===p.uniqueId&&delete e.droppables[m.descriptor.id]},getById:c,findById:i,exists:function(m){return!!i(m)},getAllByType:function(m){return Fo(e.droppables).filter(function(p){return p.descriptor.type===m})}};function u(){e.draggables={},e.droppables={},t.length=0}return{draggable:o,droppable:h,subscribe:r,clean:u}}function ek(){var e=ge(ZS,[]);return j.useEffect(function(){return function(){requestAnimationFrame(e.clean)}},[e]),e}var kh=je.createContext(null),Bo=function(){var e=document.body;return e||H(),e},tk={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},rk=function(t){return"rbd-announcement-"+t};function sk(e){var t=ge(function(){return rk(e)},[e]),r=j.useRef(null);j.useEffect(function(){var l=document.createElement("div");return r.current=l,l.id=t,l.setAttribute("aria-live","assertive"),l.setAttribute("aria-atomic","true"),le(l.style,tk),Bo().appendChild(l),function(){setTimeout(function(){var c=Bo();c.contains(l)&&c.removeChild(l),l===r.current&&(r.current=null)})}},[t]);var n=ne(function(a){var l=r.current;if(l){l.textContent=a;return}},[]);return n}var nk=0,ak={separator:"::"};function Ch(e,t){return t===void 0&&(t=ak),ge(function(){return""+e+t.separator+nk++},[t.separator,e])}function lk(e){var t=e.contextId,r=e.uniqueId;return"rbd-hidden-text-"+t+"-"+r}function ok(e){var t=e.contextId,r=e.text,n=Ch("hidden-text",{separator:"-"}),a=ge(function(){return lk({contextId:t,uniqueId:n})},[n,t]);return j.useEffect(function(){var o=document.createElement("div");return o.id=a,o.textContent=r,o.style.display="none",Bo().appendChild(o),function(){var c=Bo();c.contains(o)&&c.removeChild(o)}},[a,r]),a}var Ti=je.createContext(null);function vv(e){var t=j.useRef(e);return j.useEffect(function(){t.current=e}),t}function ik(){var e=null;function t(){return!!e}function r(o){return o===e}function n(o){e&&H();var i={abandon:o};return e=i,i}function a(){e||H(),e=null}function l(){e&&(e.abandon(),a())}return{isClaimed:t,isActive:r,claim:n,release:a,tryAbandon:l}}var ck=9,dk=13,Dh=27,yv=32,uk=33,hk=34,mk=35,pk=36,fk=37,gk=38,xk=39,vk=40,Ul,yk=(Ul={},Ul[dk]=!0,Ul[ck]=!0,Ul),bv=function(e){yk[e.keyCode]&&e.preventDefault()},Ri=function(){var e="visibilitychange";if(typeof document>"u")return e;var t=[e,"ms"+e,"webkit"+e,"moz"+e,"o"+e],r=ms(t,function(n){return"on"+n in document});return r||e}(),wv=0,tp=5;function bk(e,t){return Math.abs(t.x-e.x)>=tp||Math.abs(t.y-e.y)>=tp}var rp={type:"IDLE"};function wk(e){var t=e.cancel,r=e.completed,n=e.getPhase,a=e.setPhase;return[{eventName:"mousemove",fn:function(o){var i=o.button,c=o.clientX,h=o.clientY;if(i===wv){var u={x:c,y:h},d=n();if(d.type==="DRAGGING"){o.preventDefault(),d.actions.move(u);return}d.type!=="PENDING"&&H();var m=d.point;if(bk(m,u)){o.preventDefault();var p=d.actions.fluidLift(u);a({type:"DRAGGING",actions:p})}}}},{eventName:"mouseup",fn:function(o){var i=n();if(i.type!=="DRAGGING"){t();return}o.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"mousedown",fn:function(o){n().type==="DRAGGING"&&o.preventDefault(),t()}},{eventName:"keydown",fn:function(o){var i=n();if(i.type==="PENDING"){t();return}if(o.keyCode===Dh){o.preventDefault(),t();return}bv(o)}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){n().type==="PENDING"&&t()}},{eventName:"webkitmouseforcedown",fn:function(o){var i=n();if(i.type==="IDLE"&&H(),i.actions.shouldRespectForcePress()){t();return}o.preventDefault()}},{eventName:Ri,fn:t}]}function jk(e){var t=j.useRef(rp),r=j.useRef(rs),n=ge(function(){return{eventName:"mousedown",fn:function(d){if(!d.defaultPrevented&&d.button===wv&&!(d.ctrlKey||d.metaKey||d.shiftKey||d.altKey)){var m=e.findClosestDraggableId(d);if(m){var p=e.tryGetLock(m,o,{sourceEvent:d});if(p){d.preventDefault();var f={x:d.clientX,y:d.clientY};r.current(),h(p,f)}}}}}},[e]),a=ge(function(){return{eventName:"webkitmouseforcewillbegin",fn:function(d){if(!d.defaultPrevented){var m=e.findClosestDraggableId(d);if(m){var p=e.findOptionsForDraggable(m);p&&(p.shouldRespectForcePress||e.canGetLock(m)&&d.preventDefault())}}}}},[e]),l=ne(function(){var d={passive:!1,capture:!0};r.current=Wt(window,[a,n],d)},[a,n]),o=ne(function(){var u=t.current;u.type!=="IDLE"&&(t.current=rp,r.current(),l())},[l]),i=ne(function(){var u=t.current;o(),u.type==="DRAGGING"&&u.actions.cancel({shouldBlockNextClick:!0}),u.type==="PENDING"&&u.actions.abort()},[o]),c=ne(function(){var d={capture:!0,passive:!1},m=wk({cancel:i,completed:o,getPhase:function(){return t.current},setPhase:function(f){t.current=f}});r.current=Wt(window,m,d)},[i,o]),h=ne(function(d,m){t.current.type!=="IDLE"&&H(),t.current={type:"PENDING",point:m,actions:d},c()},[c]);Rt(function(){return l(),function(){r.current()}},[l])}var qs;function Nk(){}var _k=(qs={},qs[hk]=!0,qs[uk]=!0,qs[pk]=!0,qs[mk]=!0,qs);function Sk(e,t){function r(){t(),e.cancel()}function n(){t(),e.drop()}return[{eventName:"keydown",fn:function(l){if(l.keyCode===Dh){l.preventDefault(),r();return}if(l.keyCode===yv){l.preventDefault(),n();return}if(l.keyCode===vk){l.preventDefault(),e.moveDown();return}if(l.keyCode===gk){l.preventDefault(),e.moveUp();return}if(l.keyCode===xk){l.preventDefault(),e.moveRight();return}if(l.keyCode===fk){l.preventDefault(),e.moveLeft();return}if(_k[l.keyCode]){l.preventDefault();return}bv(l)}},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:Ri,fn:r}]}function kk(e){var t=j.useRef(Nk),r=ge(function(){return{eventName:"keydown",fn:function(l){if(l.defaultPrevented||l.keyCode!==yv)return;var o=e.findClosestDraggableId(l);if(!o)return;var i=e.tryGetLock(o,u,{sourceEvent:l});if(!i)return;l.preventDefault();var c=!0,h=i.snapLift();t.current();function u(){c||H(),c=!1,t.current(),n()}t.current=Wt(window,Sk(h,u),{capture:!0,passive:!1})}}},[e]),n=ne(function(){var l={passive:!1,capture:!0};t.current=Wt(window,[r],l)},[r]);Rt(function(){return n(),function(){t.current()}},[n])}var Sc={type:"IDLE"},Ck=120,Dk=.15;function Ek(e){var t=e.cancel,r=e.getPhase;return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:function(a){a.preventDefault()}},{eventName:"keydown",fn:function(a){if(r().type!=="DRAGGING"){t();return}a.keyCode===Dh&&a.preventDefault(),t()}},{eventName:Ri,fn:t}]}function Pk(e){var t=e.cancel,r=e.completed,n=e.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(l){var o=n();if(o.type!=="DRAGGING"){t();return}o.hasMoved=!0;var i=l.touches[0],c=i.clientX,h=i.clientY,u={x:c,y:h};l.preventDefault(),o.actions.move(u)}},{eventName:"touchend",fn:function(l){var o=n();if(o.type!=="DRAGGING"){t();return}l.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"touchcancel",fn:function(l){if(n().type!=="DRAGGING"){t();return}l.preventDefault(),t()}},{eventName:"touchforcechange",fn:function(l){var o=n();o.type==="IDLE"&&H();var i=l.touches[0];if(i){var c=i.force>=Dk;if(c){var h=o.actions.shouldRespectForcePress();if(o.type==="PENDING"){h&&t();return}if(h){if(o.hasMoved){l.preventDefault();return}t();return}l.preventDefault()}}}},{eventName:Ri,fn:t}]}function Ik(e){var t=j.useRef(Sc),r=j.useRef(rs),n=ne(function(){return t.current},[]),a=ne(function(p){t.current=p},[]),l=ge(function(){return{eventName:"touchstart",fn:function(p){if(!p.defaultPrevented){var f=e.findClosestDraggableId(p);if(f){var x=e.tryGetLock(f,i,{sourceEvent:p});if(x){var b=p.touches[0],g=b.clientX,v=b.clientY,y={x:g,y:v};r.current(),d(x,y)}}}}}},[e]),o=ne(function(){var p={capture:!0,passive:!1};r.current=Wt(window,[l],p)},[l]),i=ne(function(){var m=t.current;m.type!=="IDLE"&&(m.type==="PENDING"&&clearTimeout(m.longPressTimerId),a(Sc),r.current(),o())},[o,a]),c=ne(function(){var m=t.current;i(),m.type==="DRAGGING"&&m.actions.cancel({shouldBlockNextClick:!0}),m.type==="PENDING"&&m.actions.abort()},[i]),h=ne(function(){var p={capture:!0,passive:!1},f={cancel:c,completed:i,getPhase:n},x=Wt(window,Pk(f),p),b=Wt(window,Ek(f),p);r.current=function(){x(),b()}},[c,n,i]),u=ne(function(){var p=n();p.type!=="PENDING"&&H();var f=p.actions.fluidLift(p.point);a({type:"DRAGGING",actions:f,hasMoved:!1})},[n,a]),d=ne(function(p,f){n().type!=="IDLE"&&H();var x=setTimeout(u,Ck);a({type:"PENDING",point:f,actions:p,longPressTimerId:x}),h()},[h,n,a,u]);Rt(function(){return o(),function(){r.current();var f=n();f.type==="PENDING"&&(clearTimeout(f.longPressTimerId),a(Sc))}},[n,o,a]),Rt(function(){var p=Wt(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}]);return p},[])}var Tk={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function jv(e,t){if(t==null)return!1;var r=!!Tk[t.tagName.toLowerCase()];if(r)return!0;var n=t.getAttribute("contenteditable");return n==="true"||n===""?!0:t===e?!1:jv(e,t.parentElement)}function Rk(e,t){var r=t.target;return Ii(r)?jv(e,r):!1}var Ok=function(e){return sr(e.getBoundingClientRect()).center};function Lk(e){return e instanceof xv(e).Element}var Ak=function(){var e="matches";if(typeof document>"u")return e;var t=[e,"msMatchesSelector","webkitMatchesSelector"],r=ms(t,function(n){return n in Element.prototype});return r||e}();function Nv(e,t){return e==null?null:e[Ak](t)?e:Nv(e.parentElement,t)}function $k(e,t){return e.closest?e.closest(t):Nv(e,t)}function Mk(e){return"["+Sn.contextId+'="'+e+'"]'}function Fk(e,t){var r=t.target;if(!Lk(r))return null;var n=Mk(e),a=$k(r,n);return!a||!Ii(a)?null:a}function Uk(e,t){var r=Fk(e,t);return r?r.getAttribute(Sn.draggableId):null}function Bk(e,t){var r="["+zd.contextId+'="'+e+'"]',n=Fx(document.querySelectorAll(r)),a=ms(n,function(l){return l.getAttribute(zd.id)===t});return!a||!Ii(a)?null:a}function zk(e){e.preventDefault()}function Bl(e){var t=e.expected,r=e.phase,n=e.isLockActive;return e.shouldWarn,!(!n()||t!==r)}function _v(e){var t=e.lockAPI,r=e.store,n=e.registry,a=e.draggableId;if(t.isClaimed())return!1;var l=n.draggable.findById(a);return!(!l||!l.options.isEnabled||!mv(r.getState(),a))}function Wk(e){var t=e.lockAPI,r=e.contextId,n=e.store,a=e.registry,l=e.draggableId,o=e.forceSensorStop,i=e.sourceEvent,c=_v({lockAPI:t,store:n,registry:a,draggableId:l});if(!c)return null;var h=a.draggable.getById(l),u=Bk(r,h.descriptor.id);if(!u||i&&!h.options.canDragInteractiveElements&&Rk(u,i))return null;var d=t.claim(o||rs),m="PRE_DRAG";function p(){return h.options.shouldRespectForcePress}function f(){return t.isActive(d)}function x(k,D){Bl({expected:k,phase:m,isLockActive:f,shouldWarn:!0})&&n.dispatch(D())}var b=x.bind(null,"DRAGGING");function g(k){function D(){t.release(),m="COMPLETED"}m!=="PRE_DRAG"&&(D(),m!=="PRE_DRAG"&&H()),n.dispatch(A4(k.liftActionArgs)),m="DRAGGING";function C(_,S){if(S===void 0&&(S={shouldBlockNextClick:!1}),k.cleanup(),S.shouldBlockNextClick){var O=Wt(window,[{eventName:"click",fn:zk,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(O)}D(),n.dispatch(lv({reason:_}))}return le({isActive:function(){return Bl({expected:"DRAGGING",phase:m,isLockActive:f,shouldWarn:!1})},shouldRespectForcePress:p,drop:function(S){return C("DROP",S)},cancel:function(S){return C("CANCEL",S)}},k.actions)}function v(k){var D=Fa(function(_){b(function(){return av({client:_})})}),C=g({liftActionArgs:{id:l,clientSelection:k,movementMode:"FLUID"},cleanup:function(){return D.cancel()},actions:{move:D}});return le({},C,{move:D})}function y(){var k={moveUp:function(){return b(q4)},moveRight:function(){return b(H4)},moveDown:function(){return b(G4)},moveLeft:function(){return b(K4)}};return g({liftActionArgs:{id:l,clientSelection:Ok(u),movementMode:"SNAP"},cleanup:rs,actions:k})}function w(){var k=Bl({expected:"PRE_DRAG",phase:m,isLockActive:f,shouldWarn:!0});k&&t.release()}var N={isActive:function(){return Bl({expected:"PRE_DRAG",phase:m,isLockActive:f,shouldWarn:!1})},shouldRespectForcePress:p,fluidLift:v,snapLift:y,abort:w};return N}var Vk=[jk,kk,Ik];function qk(e){var t=e.contextId,r=e.store,n=e.registry,a=e.customSensors,l=e.enableDefaultSensors,o=[].concat(l?Vk:[],a||[]),i=j.useState(function(){return ik()})[0],c=ne(function(v,y){v.isDragging&&!y.isDragging&&i.tryAbandon()},[i]);Rt(function(){var v=r.getState(),y=r.subscribe(function(){var w=r.getState();c(v,w),v=w});return y},[i,r,c]),Rt(function(){return i.tryAbandon},[i.tryAbandon]);for(var h=ne(function(g){return _v({lockAPI:i,registry:n,store:r,draggableId:g})},[i,n,r]),u=ne(function(g,v,y){return Wk({lockAPI:i,registry:n,contextId:t,store:r,draggableId:g,forceSensorStop:v,sourceEvent:y&&y.sourceEvent?y.sourceEvent:null})},[t,i,n,r]),d=ne(function(g){return Uk(t,g)},[t]),m=ne(function(g){var v=n.draggable.findById(g);return v?v.options:null},[n.draggable]),p=ne(function(){i.isClaimed()&&(i.tryAbandon(),r.getState().phase!=="IDLE"&&r.dispatch(vh()))},[i,r]),f=ne(i.isClaimed,[i]),x=ge(function(){return{canGetLock:h,tryGetLock:u,findClosestDraggableId:d,findOptionsForDraggable:m,tryReleaseLock:p,isLockClaimed:f}},[h,u,d,m,p,f]),b=0;b<o.length;b++)o[b](x)}var Gk=function(t){return{onBeforeCapture:t.onBeforeCapture,onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragEnd:t.onDragEnd,onDragUpdate:t.onDragUpdate}};function Qn(e){return e.current||H(),e.current}function Hk(e){var t=e.contextId,r=e.setCallbacks,n=e.sensors,a=e.nonce,l=e.dragHandleUsageInstructions,o=j.useRef(null),i=vv(e),c=ne(function(){return Gk(i.current)},[i]),h=sk(t),u=ok({contextId:t,text:l}),d=YS(t,a),m=ne(function(_){Qn(o).dispatch(_)},[]),p=ge(function(){return Sm({publishWhileDragging:M4,updateDroppableScroll:U4,updateDroppableIsEnabled:B4,updateDroppableIsCombineEnabled:z4,collectionStarting:F4},m)},[m]),f=ek(),x=ge(function(){return DS(f,p)},[f,p]),b=ge(function(){return qS(le({scrollWindow:ES,scrollDroppable:x.scrollDroppable},Sm({move:av},m)))},[x.scrollDroppable,m]),g=XS(t),v=ge(function(){return _S({announce:h,autoScroller:b,dimensionMarshal:x,focusMarshal:g,getResponders:c,styleMarshal:d})},[h,b,x,g,c,d]);o.current=v;var y=ne(function(){var _=Qn(o),S=_.getState();S.phase!=="IDLE"&&_.dispatch(vh())},[]),w=ne(function(){var _=Qn(o).getState();return _.isDragging||_.phase==="DROP_ANIMATING"},[]),N=ge(function(){return{isDragging:w,tryAbort:y}},[w,y]);r(N);var k=ne(function(_){return mv(Qn(o).getState(),_)},[]),D=ne(function(){return ys(Qn(o).getState())},[]),C=ge(function(){return{marshal:x,focus:g,contextId:t,canLift:k,isMovementAllowed:D,dragHandleUsageInstructionsId:u,registry:f}},[t,x,u,g,k,D,f]);return qk({contextId:t,store:v,registry:f,customSensors:n,enableDefaultSensors:e.enableDefaultSensors!==!1}),j.useEffect(function(){return y},[y]),je.createElement(Ti.Provider,{value:C},je.createElement(f_,{context:kh,store:v},e.children))}var Kk=0;function Qk(){return ge(function(){return""+Kk++},[])}function Yk(e){var t=Qk(),r=e.dragHandleUsageInstructions||to.dragHandleUsageInstructions;return je.createElement(k2,null,function(n){return je.createElement(Hk,{nonce:e.nonce,contextId:t,setCallbacks:n,dragHandleUsageInstructions:r,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd},e.children)})}var Sv=function(t){return function(r){return t===r}},Jk=Sv("scroll"),Xk=Sv("auto"),sp=function(t,r){return r(t.overflowX)||r(t.overflowY)},Zk=function(t){var r=window.getComputedStyle(t),n={overflowX:r.overflowX,overflowY:r.overflowY};return sp(n,Jk)||sp(n,Xk)},eC=function(){return!1},tC=function e(t){return t==null?null:t===document.body?eC()?t:null:t===document.documentElement?null:Zk(t)?t:e(t.parentElement)},Wd=function(e){return{x:e.scrollLeft,y:e.scrollTop}},rC=function e(t){if(!t)return!1;var r=window.getComputedStyle(t);return r.position==="fixed"?!0:e(t.parentElement)},sC=function(e){var t=tC(e),r=rC(e);return{closestScrollable:t,isFixedOnPage:r}},nC=function(e){var t=e.descriptor,r=e.isEnabled,n=e.isCombineEnabled,a=e.isFixedOnPage,l=e.direction,o=e.client,i=e.page,c=e.closest,h=function(){if(!c)return null;var p=c.scrollSize,f=c.client,x=dv({scrollHeight:p.scrollHeight,scrollWidth:p.scrollWidth,height:f.paddingBox.height,width:f.paddingBox.width});return{pageMarginBox:c.page.marginBox,frameClient:f,scrollSize:p,shouldClipSubject:c.shouldClipSubject,scroll:{initial:c.scroll,current:c.scroll,max:x,diff:{value:Qe,displacement:Qe}}}}(),u=l==="vertical"?mh:Vx,d=Nn({page:i,withPlaceholder:null,axis:u,frame:h}),m={descriptor:t,isCombineEnabled:n,isFixedOnPage:a,axis:u,isEnabled:r,client:o,page:i,frame:h,subject:d};return m},aC=function(t,r){var n=Ox(t);if(!r||t!==r)return n;var a=n.paddingBox.top-r.scrollTop,l=n.paddingBox.left-r.scrollLeft,o=a+r.scrollHeight,i=l+r.scrollWidth,c={top:a,right:i,bottom:o,left:l},h=ih(c,n.border),u=ch({borderBox:h,margin:n.margin,border:n.border,padding:n.padding});return u},lC=function(e){var t=e.ref,r=e.descriptor,n=e.env,a=e.windowScroll,l=e.direction,o=e.isDropDisabled,i=e.isCombineEnabled,c=e.shouldClipSubject,h=n.closestScrollable,u=aC(t,h),d=Ao(u,a),m=function(){if(!h)return null;var f=Ox(h),x={scrollHeight:h.scrollHeight,scrollWidth:h.scrollWidth};return{client:f,page:Ao(f,a),scroll:Wd(h),scrollSize:x,shouldClipSubject:c}}(),p=nC({descriptor:r,isEnabled:!o,isCombineEnabled:i,isFixedOnPage:n.isFixedOnPage,direction:l,client:u,page:d,closest:m});return p},oC={passive:!1},iC={passive:!0},np=function(e){return e.shouldPublishImmediately?oC:iC};function zo(e){var t=j.useContext(e);return t||H(),t}var zl=function(t){return t&&t.env.closestScrollable||null};function cC(e){var t=j.useRef(null),r=zo(Ti),n=Ch("droppable"),a=r.registry,l=r.marshal,o=vv(e),i=ge(function(){return{id:e.droppableId,type:e.type,mode:e.mode}},[e.droppableId,e.mode,e.type]),c=j.useRef(i),h=ge(function(){return Ke(function(w,N){t.current||H();var k={x:w,y:N};l.updateDroppableScroll(i.id,k)})},[i.id,l]),u=ne(function(){var w=t.current;return!w||!w.env.closestScrollable?Qe:Wd(w.env.closestScrollable)},[]),d=ne(function(){var w=u();h(w.x,w.y)},[u,h]),m=ge(function(){return Fa(d)},[d]),p=ne(function(){var w=t.current,N=zl(w);w&&N||H();var k=w.scrollOptions;if(k.shouldPublishImmediately){d();return}m()},[m,d]),f=ne(function(w,N){t.current&&H();var k=o.current,D=k.getDroppableRef();D||H();var C=sC(D),_={ref:D,descriptor:i,env:C,scrollOptions:N};t.current=_;var S=lC({ref:D,descriptor:i,env:C,windowScroll:w,direction:k.direction,isDropDisabled:k.isDropDisabled,isCombineEnabled:k.isCombineEnabled,shouldClipSubject:!k.ignoreContainerClipping}),O=C.closestScrollable;return O&&(O.setAttribute(Zm.contextId,r.contextId),O.addEventListener("scroll",p,np(_.scrollOptions))),S},[r.contextId,i,p,o]),x=ne(function(){var w=t.current,N=zl(w);return w&&N||H(),Wd(N)},[]),b=ne(function(){var w=t.current;w||H();var N=zl(w);t.current=null,N&&(m.cancel(),N.removeAttribute(Zm.contextId),N.removeEventListener("scroll",p,np(w.scrollOptions)))},[p,m]),g=ne(function(w){var N=t.current;N||H();var k=zl(N);k||H(),k.scrollTop+=w.y,k.scrollLeft+=w.x},[]),v=ge(function(){return{getDimensionAndWatchScroll:f,getScrollWhileDragging:x,dragStopped:b,scroll:g}},[b,f,x,g]),y=ge(function(){return{uniqueId:n,descriptor:i,callbacks:v}},[v,i,n]);Rt(function(){return c.current=y.descriptor,a.droppable.register(y),function(){t.current&&b(),a.droppable.unregister(y)}},[v,i,b,y,l,a.droppable]),Rt(function(){t.current&&l.updateDroppableIsEnabled(c.current.id,!e.isDropDisabled)},[e.isDropDisabled,l]),Rt(function(){t.current&&l.updateDroppableIsCombineEnabled(c.current.id,e.isCombineEnabled)},[e.isCombineEnabled,l])}function kc(){}var ap={width:0,height:0,margin:T2},dC=function(t){var r=t.isAnimatingOpenOnMount,n=t.placeholder,a=t.animate;return r||a==="close"?ap:{height:n.client.borderBox.height,width:n.client.borderBox.width,margin:n.client.margin}},uC=function(t){var r=t.isAnimatingOpenOnMount,n=t.placeholder,a=t.animate,l=dC({isAnimatingOpenOnMount:r,placeholder:n,animate:a});return{display:n.display,boxSizing:"border-box",width:l.width,height:l.height,marginTop:l.margin.top,marginRight:l.margin.right,marginBottom:l.margin.bottom,marginLeft:l.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:a!=="none"?fa.placeholder:null}};function hC(e){var t=j.useRef(null),r=ne(function(){t.current&&(clearTimeout(t.current),t.current=null)},[]),n=e.animate,a=e.onTransitionEnd,l=e.onClose,o=e.contextId,i=j.useState(e.animate==="open"),c=i[0],h=i[1];j.useEffect(function(){return c?n!=="open"?(r(),h(!1),kc):t.current?kc:(t.current=setTimeout(function(){t.current=null,h(!1)}),r):kc},[n,c,r]);var u=ne(function(m){m.propertyName==="height"&&(a(),n==="close"&&l())},[n,l,a]),d=uC({isAnimatingOpenOnMount:c,animate:e.animate,placeholder:e.placeholder});return je.createElement(e.placeholder.tagName,{style:d,"data-rbd-placeholder-context-id":o,onTransitionEnd:u,ref:e.innerRef})}var mC=je.memo(hC),Eh=je.createContext(null),pC=function(e){mx(t,e);function t(){for(var n,a=arguments.length,l=new Array(a),o=0;o<a;o++)l[o]=arguments[o];return n=e.call.apply(e,[this].concat(l))||this,n.state={isVisible:!!n.props.on,data:n.props.on,animate:n.props.shouldAnimate&&n.props.on?"open":"none"},n.onClose=function(){n.state.animate==="close"&&n.setState({isVisible:!1})},n}t.getDerivedStateFromProps=function(a,l){return a.shouldAnimate?a.on?{isVisible:!0,data:a.on,animate:"open"}:l.isVisible?{isVisible:!0,data:l.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!a.on,data:a.on,animate:"none"}};var r=t.prototype;return r.render=function(){if(!this.state.isVisible)return null;var a={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(a)},t}(je.PureComponent),lp={dragging:5e3,dropAnimating:4500},fC=function(t,r){return r?fa.drop(r.duration):t?fa.snap:fa.fluid},gC=function(t,r){return t?r?Wa.opacity.drop:Wa.opacity.combining:null},xC=function(t){return t.forceShouldAnimate!=null?t.forceShouldAnimate:t.mode==="SNAP"};function vC(e){var t=e.dimension,r=t.client,n=e.offset,a=e.combineWith,l=e.dropping,o=!!a,i=xC(e),c=!!l,h=c?Ud.drop(n,o):Ud.moveTo(n),u={position:"fixed",top:r.marginBox.top,left:r.marginBox.left,boxSizing:"border-box",width:r.borderBox.width,height:r.borderBox.height,transition:fC(i,l),transform:h,opacity:gC(o,c),zIndex:c?lp.dropAnimating:lp.dragging,pointerEvents:"none"};return u}function yC(e){return{transform:Ud.moveTo(e.offset),transition:e.shouldAnimateDisplacement?null:"none"}}function bC(e){return e.type==="DRAGGING"?vC(e):yC(e)}function wC(e,t,r){r===void 0&&(r=Qe);var n=window.getComputedStyle(t),a=t.getBoundingClientRect(),l=Rx(a,n),o=Ao(l,r),i={client:l,tagName:t.tagName.toLowerCase(),display:n.display},c={x:l.marginBox.width,y:l.marginBox.height},h={descriptor:e,placeholder:i,displaceBy:c,client:l,page:o};return h}function jC(e){var t=Ch("draggable"),r=e.descriptor,n=e.registry,a=e.getDraggableRef,l=e.canDragInteractiveElements,o=e.shouldRespectForcePress,i=e.isEnabled,c=ge(function(){return{canDragInteractiveElements:l,shouldRespectForcePress:o,isEnabled:i}},[l,i,o]),h=ne(function(p){var f=a();return f||H(),wC(r,f,p)},[r,a]),u=ge(function(){return{uniqueId:t,descriptor:r,options:c,getDimension:h}},[r,h,c,t]),d=j.useRef(u),m=j.useRef(!0);Rt(function(){return n.draggable.register(d.current),function(){return n.draggable.unregister(d.current)}},[n.draggable]),Rt(function(){if(m.current){m.current=!1;return}var p=d.current;d.current=u,n.draggable.update(u,p)},[u,n.draggable])}function NC(e){e.preventDefault()}function _C(e){var t=j.useRef(null),r=ne(function(_){t.current=_},[]),n=ne(function(){return t.current},[]),a=zo(Ti),l=a.contextId,o=a.dragHandleUsageInstructionsId,i=a.registry,c=zo(Eh),h=c.type,u=c.droppableId,d=ge(function(){return{id:e.draggableId,index:e.index,type:h,droppableId:u}},[e.draggableId,e.index,h,u]),m=e.children,p=e.draggableId,f=e.isEnabled,x=e.shouldRespectForcePress,b=e.canDragInteractiveElements,g=e.isClone,v=e.mapped,y=e.dropAnimationFinished;if(!g){var w=ge(function(){return{descriptor:d,registry:i,getDraggableRef:n,canDragInteractiveElements:b,shouldRespectForcePress:x,isEnabled:f}},[d,i,n,b,x,f]);jC(w)}var N=ge(function(){return f?{tabIndex:0,role:"button","aria-describedby":o,"data-rbd-drag-handle-draggable-id":p,"data-rbd-drag-handle-context-id":l,draggable:!1,onDragStart:NC}:null},[l,o,p,f]),k=ne(function(_){v.type==="DRAGGING"&&v.dropping&&_.propertyName==="transform"&&y()},[y,v]),D=ge(function(){var _=bC(v),S=v.type==="DRAGGING"&&v.dropping?k:null,O={innerRef:r,draggableProps:{"data-rbd-draggable-context-id":l,"data-rbd-draggable-id":p,style:_,onTransitionEnd:S},dragHandleProps:N};return O},[l,N,p,v,k,r]),C=ge(function(){return{draggableId:d.id,type:d.type,source:{index:d.index,droppableId:d.droppableId}}},[d.droppableId,d.id,d.index,d.type]);return m(D,v.snapshot,C)}var kv=function(e,t){return e===t},Cv=function(e){var t=e.combine,r=e.destination;return r?r.droppableId:t?t.droppableId:null},SC=function(t){return t.combine?t.combine.draggableId:null},kC=function(t){return t.at&&t.at.type==="COMBINE"?t.at.combine.draggableId:null};function CC(){var e=Ke(function(a,l){return{x:a,y:l}}),t=Ke(function(a,l,o,i,c){return{isDragging:!0,isClone:l,isDropAnimating:!!c,dropAnimation:c,mode:a,draggingOver:o,combineWith:i,combineTargetFor:null}}),r=Ke(function(a,l,o,i,c,h,u){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:c,combineWith:h,mode:l,offset:a,dimension:o,forceShouldAnimate:u,snapshot:t(l,i,c,h,null)}}}),n=function(l,o){if(l.isDragging){if(l.critical.draggable.id!==o.draggableId)return null;var i=l.current.client.offset,c=l.dimensions.draggables[o.draggableId],h=Tt(l.impact),u=kC(l.impact),d=l.forceShouldAnimate;return r(e(i.x,i.y),l.movementMode,c,o.isClone,h,u,d)}if(l.phase==="DROP_ANIMATING"){var m=l.completed;if(m.result.draggableId!==o.draggableId)return null;var p=o.isClone,f=l.dimensions.draggables[o.draggableId],x=m.result,b=x.mode,g=Cv(x),v=SC(x),y=l.dropDuration,w={duration:y,curve:bh.drop,moveTo:l.newHomeClientOffset,opacity:v?Wa.opacity.drop:null,scale:v?Wa.scale.drop:null};return{mapped:{type:"DRAGGING",offset:l.newHomeClientOffset,dimension:f,dropping:w,draggingOver:g,combineWith:v,mode:b,forceShouldAnimate:null,snapshot:t(b,p,g,v,w)}}}return null};return n}function Dv(e){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}var DC={mapped:{type:"SECONDARY",offset:Qe,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:Dv(null)}};function EC(){var e=Ke(function(o,i){return{x:o,y:i}}),t=Ke(Dv),r=Ke(function(o,i,c){return i===void 0&&(i=null),{mapped:{type:"SECONDARY",offset:o,combineTargetFor:i,shouldAnimateDisplacement:c,snapshot:t(i)}}}),n=function(i){return i?r(Qe,i,!0):null},a=function(i,c,h,u){var d=h.displaced.visible[i],m=!!(u.inVirtualList&&u.effected[i]),p=Di(h),f=p&&p.draggableId===i?c:null;if(!d){if(!m)return n(f);if(h.displaced.invisible[i])return null;var x=On(u.displacedBy.point),b=e(x.x,x.y);return r(b,f,!0)}if(m)return n(f);var g=h.displacedBy.point,v=e(g.x,g.y);return r(v,f,d.shouldAnimate)},l=function(i,c){if(i.isDragging)return i.critical.draggable.id===c.draggableId?null:a(c.draggableId,i.critical.draggable.id,i.impact,i.afterCritical);if(i.phase==="DROP_ANIMATING"){var h=i.completed;return h.result.draggableId===c.draggableId?null:a(c.draggableId,h.result.draggableId,h.impact,h.afterCritical)}return null};return l}var PC=function(){var t=CC(),r=EC(),n=function(l,o){return t(l,o)||r(l,o)||DC};return n},IC={dropAnimationFinished:ov},TC=Ix(PC,IC,null,{context:kh,pure:!0,areStatePropsEqual:kv})(_C);function Ev(e){var t=zo(Eh),r=t.isUsingCloneFor;return r===e.draggableId&&!e.isClone?null:je.createElement(TC,e)}function RC(e){var t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,r=!!e.disableInteractiveElementBlocking,n=!!e.shouldRespectForcePress;return je.createElement(Ev,le({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:r,shouldRespectForcePress:n}))}function OC(e){var t=j.useContext(Ti);t||H();var r=t.contextId,n=t.isMovementAllowed,a=j.useRef(null),l=j.useRef(null),o=e.children,i=e.droppableId,c=e.type,h=e.mode,u=e.direction,d=e.ignoreContainerClipping,m=e.isDropDisabled,p=e.isCombineEnabled,f=e.snapshot,x=e.useClone,b=e.updateViewportMaxScroll,g=e.getContainerForClone,v=ne(function(){return a.current},[]),y=ne(function(O){a.current=O},[]);ne(function(){return l.current},[]);var w=ne(function(O){l.current=O},[]),N=ne(function(){n()&&b({maxScroll:hv()})},[n,b]);cC({droppableId:i,type:c,mode:h,direction:u,isDropDisabled:m,isCombineEnabled:p,ignoreContainerClipping:d,getDroppableRef:v});var k=je.createElement(pC,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},function(O){var E=O.onClose,I=O.data,z=O.animate;return je.createElement(mC,{placeholder:I,onClose:E,innerRef:w,animate:z,contextId:r,onTransitionEnd:N})}),D=ge(function(){return{innerRef:y,placeholder:k,droppableProps:{"data-rbd-droppable-id":i,"data-rbd-droppable-context-id":r}}},[r,i,k,y]),C=x?x.dragging.draggableId:null,_=ge(function(){return{droppableId:i,type:c,isUsingCloneFor:C}},[i,C,c]);function S(){if(!x)return null;var O=x.dragging,E=x.render,I=je.createElement(Ev,{draggableId:O.draggableId,index:O.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},function(z,te){return E(z,te,O)});return iw.createPortal(I,g())}return je.createElement(Eh.Provider,{value:_},o(D,f),S())}var Cc=function(t,r){return t===r.droppable.type},op=function(t,r){return r.draggables[t.draggable.id]},LC=function(){var t={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},r=le({},t,{shouldAnimatePlaceholder:!1}),n=Ke(function(o){return{draggableId:o.id,type:o.type,source:{index:o.index,droppableId:o.droppableId}}}),a=Ke(function(o,i,c,h,u,d){var m=u.descriptor.id,p=u.descriptor.droppableId===o;if(p){var f=d?{render:d,dragging:n(u.descriptor)}:null,x={isDraggingOver:c,draggingOverWith:c?m:null,draggingFromThisWith:m,isUsingPlaceholder:!0};return{placeholder:u.placeholder,shouldAnimatePlaceholder:!1,snapshot:x,useClone:f}}if(!i)return r;if(!h)return t;var b={isDraggingOver:c,draggingOverWith:m,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:u.placeholder,shouldAnimatePlaceholder:!0,snapshot:b,useClone:null}}),l=function(i,c){var h=c.droppableId,u=c.type,d=!c.isDropDisabled,m=c.renderClone;if(i.isDragging){var p=i.critical;if(!Cc(u,p))return r;var f=op(p,i.dimensions),x=Tt(i.impact)===h;return a(h,d,x,x,f,m)}if(i.phase==="DROP_ANIMATING"){var b=i.completed;if(!Cc(u,b.critical))return r;var g=op(b.critical,i.dimensions);return a(h,d,Cv(b.result)===h,Tt(b.impact)===h,g,m)}if(i.phase==="IDLE"&&i.completed&&!i.shouldFlush){var v=i.completed;if(!Cc(u,v.critical))return r;var y=Tt(v.impact)===h,w=!!(v.impact.at&&v.impact.at.type==="COMBINE"),N=v.critical.droppable.id===h;return y?w?t:r:N?t:r}return r};return l},AC={updateViewportMaxScroll:V4};function $C(){return document.body||H(),document.body}var MC={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:$C},Pv=Ix(LC,AC,null,{context:kh,pure:!0,areStatePropsEqual:kv})(OC);Pv.defaultProps=MC;const FC=({deal:e,onClick:t,isDragging:r=!1})=>{const n=c=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(c),a=c=>c?new Date(c).toLocaleDateString("en-US",{month:"short",day:"numeric"}):null,l=c=>c>=80?"text-green-400 bg-green-900/30":c>=60?"text-yellow-400 bg-yellow-900/30":c>=40?"text-orange-400 bg-orange-900/30":"text-red-400 bg-red-900/30",o=c=>({"Growth Creator":"bg-blue-900/30 text-blue-400","AIGC Systems":"bg-purple-900/30 text-purple-400","Custom Projects":"bg-green-900/30 text-green-400","Ongoing Support":"bg-orange-900/30 text-orange-400","Business Consulting":"bg-teal-900/30 text-teal-400","System Optimization":"bg-indigo-900/30 text-indigo-400","CRM Implementation":"bg-pink-900/30 text-pink-400"})[c]||"bg-gray-900/30 text-gray-400",i=e.updated_at?Math.floor((Date.now()-new Date(e.updated_at).getTime())/864e5):0;return s.jsxs("div",{onClick:t,className:`
        glass-card p-4 cursor-pointer transition-all duration-300 group hover:scale-105 hover:shadow-xl
        ${r?"shadow-2xl shadow-teal-500/20 bg-gray-800/80":"hover:bg-gray-700/50"}
        border border-gray-700/50 hover:border-teal-500/30
      `,children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"font-semibold text-white text-sm truncate group-hover:text-teal-100 transition-colors",children:e.deal_name}),e.lead&&s.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[e.lead.first_name," ",e.lead.last_name]})]}),s.jsxs("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${l(e.probability)}`,children:[e.probability,"%"]})]}),s.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[s.jsx(oe,{className:"h-4 w-4 text-green-400"}),s.jsx("span",{className:"font-bold text-green-400 text-lg",children:n(e.deal_value)})]}),e.service_type&&s.jsx("div",{className:"mb-3",children:s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${o(e.service_type)}`,children:e.service_type})}),e.lead&&s.jsxs("div",{className:"space-y-1 mb-3",children:[e.lead.company&&s.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-400",children:[s.jsx(As,{className:"h-3 w-3"}),s.jsx("span",{className:"truncate",children:e.lead.company})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-400",children:[s.jsx(Qt,{className:"h-3 w-3"}),s.jsx("span",{className:"truncate",children:e.lead.email})]}),e.lead.phone&&s.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-400",children:[s.jsx(_t,{className:"h-3 w-3"}),s.jsx("span",{children:e.lead.phone})]})]}),e.owner&&s.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-400 mb-3",children:[s.jsx(Fe,{className:"h-3 w-3"}),s.jsx("span",{className:"truncate",children:e.owner.full_name||e.owner.email})]}),e.expected_close_date&&s.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-400 mb-3",children:[s.jsx(Ne,{className:"h-3 w-3"}),s.jsxs("span",{children:["Close: ",a(e.expected_close_date)]})]}),s.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-700/50",children:[s.jsxs("div",{className:"flex items-center space-x-1 text-xs text-gray-500",children:[s.jsx(lr,{className:"h-3 w-3"}),s.jsxs("span",{children:[i," days in stage"]})]}),e.deal_source&&s.jsx("div",{className:"text-xs text-gray-500 truncate max-w-20",children:e.deal_source})]}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-teal-400/5 to-cyan-600/5 rounded-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"})]})},UC=({deals:e,onDealUpdate:t,onDealClick:r})=>{const[n,a]=j.useState([]),l=[{id:"new_opportunity",label:"New Opportunity",color:"bg-blue-500",description:"Lead converted to active opportunity"},{id:"discovery_call_scheduled",label:"Discovery Scheduled",color:"bg-cyan-500",description:"Initial consultation booked"},{id:"discovery_call_completed",label:"Discovery Completed",color:"bg-teal-500",description:"Needs assessment finished"},{id:"proposal_preparation",label:"Proposal Prep",color:"bg-indigo-500",description:"Creating custom proposal"},{id:"proposal_sent",label:"Proposal Sent",color:"bg-purple-500",description:"Proposal delivered to prospect"},{id:"proposal_review",label:"Proposal Review",color:"bg-pink-500",description:"Client reviewing proposal"},{id:"negotiation",label:"Negotiation",color:"bg-orange-500",description:"Discussing terms and pricing"},{id:"contract_sent",label:"Contract Sent",color:"bg-yellow-500",description:"Legal documents sent"},{id:"contract_signed",label:"Contract Signed",color:"bg-green-500",description:"Deal closed won"},{id:"project_kickoff",label:"Project Kickoff",color:"bg-emerald-500",description:"Implementation started"},{id:"on_hold",label:"On Hold",color:"bg-gray-500",description:"Deal temporarily paused"},{id:"lost",label:"Lost",color:"bg-red-500",description:"Deal closed lost"}];j.useEffect(()=>{const c=l.map(h=>{const u=e.filter(p=>p.stage===h.id),d=u.reduce((p,f)=>p+f.deal_value,0),m=u.length>0?u.reduce((p,f)=>p+f.probability,0)/u.length:0;return{...h,deals:u,totalValue:d,averageProbability:m}});a(c)},[e]);const o=c=>{const{destination:h,source:u,draggableId:d}=c;if(!h||h.droppableId===u.droppableId)return;const m=h.droppableId,p=d,f={stage:m};m==="contract_signed"?(f.won_date=new Date().toISOString(),f.actual_close_date=new Date().toISOString()):m==="lost"&&(f.lost_date=new Date().toISOString()),t(p,f)},i=c=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(c);return s.jsx("div",{className:"h-full",children:s.jsx(Yk,{onDragEnd:o,children:s.jsx("div",{className:"flex space-x-4 overflow-x-auto pb-4 h-full",children:n.map(c=>s.jsx(Pv,{droppableId:c.id,children:(h,u)=>s.jsxs("div",{ref:h.innerRef,...h.droppableProps,className:`
                    flex-shrink-0 w-80 bg-gray-800/40 rounded-xl border border-gray-700/50 
                    transition-all duration-200 h-full flex flex-col
                    ${u.isDraggingOver?"bg-gray-700/60 border-teal-500/50":""}
                  `,children:[s.jsxs("div",{className:"p-4 border-b border-gray-700/50",children:[s.jsx("div",{className:"flex items-center justify-between mb-2",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${c.color}`}),s.jsx("h3",{className:"font-semibold text-white text-sm",children:c.label}),s.jsx("span",{className:"bg-gray-700 text-gray-300 text-xs px-2 py-1 rounded-full",children:c.deals.length})]})}),s.jsx("p",{className:"text-xs text-gray-400 mb-3",children:c.description}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(oe,{className:"h-3 w-3 text-green-400"}),s.jsx("span",{className:"text-gray-300",children:i(c.totalValue)})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(ye,{className:"h-3 w-3 text-blue-400"}),s.jsxs("span",{className:"text-gray-300",children:[Math.round(c.averageProbability),"%"]})]})]})]}),s.jsxs("div",{className:"flex-1 p-3 space-y-3 overflow-y-auto",children:[c.deals.map((d,m)=>s.jsx(RC,{draggableId:d.id,index:m,children:(p,f)=>s.jsx("div",{ref:p.innerRef,...p.draggableProps,...p.dragHandleProps,className:`
                              transition-all duration-200
                              ${f.isDragging?"rotate-2 scale-105 shadow-2xl":""}
                            `,children:s.jsx(FC,{deal:d,onClick:()=>r(d),isDragging:f.isDragging})})},d.id)),h.placeholder,c.deals.length===0&&s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx("div",{className:"w-12 h-12 mx-auto mb-2 rounded-full bg-gray-700/50 flex items-center justify-center",children:s.jsx(Ae,{className:"h-6 w-6"})}),s.jsx("p",{className:"text-sm",children:"No deals in this stage"})]})]})]})},c.id))})})})},BC=({lastUpdated:e,loading:t,viewMode:r,onRefresh:n,onViewModeChange:a,onNewDeal:l})=>s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-gradient-to-br from-emerald-400/20 to-green-600/20 rounded-xl",children:s.jsx(Ie,{className:"h-6 w-6 text-emerald-400"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold gradient-text section-gradient-sales",children:"Sales Pipeline"}),s.jsx("p",{className:"text-gray-400 text-sm",children:"Track deals through your consulting sales process"})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("button",{onClick:l,className:"group flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-emerald-400 to-green-600 hover:from-emerald-500 hover:to-green-700 text-white font-medium rounded-lg transition-all duration-300 hover:scale-105 hover:shadow-lg hover:shadow-emerald-500/25",children:[s.jsx(St,{className:"h-4 w-4 group-hover:rotate-90 transition-transform duration-300"}),s.jsx("span",{children:"New Deal"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-xs text-gray-400",children:"Last Updated"}),s.jsx("p",{className:"text-xs font-medium text-white",children:e.toLocaleTimeString()})]}),s.jsxs("button",{onClick:n,disabled:t,className:"flex items-center space-x-1 px-3 py-2 bg-gray-800 hover:bg-gray-700 text-white rounded-lg transition-all duration-200 hover:scale-105",children:[s.jsx(xr,{className:`h-4 w-4 ${t?"animate-spin":""}`}),s.jsx("span",{className:"text-sm",children:"Refresh"})]}),s.jsxs("div",{className:"flex bg-gray-800 rounded-lg p-1",children:[s.jsxs("button",{onClick:()=>a("board"),className:`flex items-center space-x-1 px-2 py-1 rounded-md transition-all duration-200 text-sm ${r==="board"?"bg-emerald-600 text-white":"text-gray-400 hover:text-white"}`,children:[s.jsx(Ie,{className:"h-3 w-3"}),s.jsx("span",{children:"Board"})]}),s.jsxs("button",{onClick:()=>a("list"),className:`flex items-center space-x-1 px-2 py-1 rounded-md transition-all duration-200 text-sm ${r==="list"?"bg-emerald-600 text-white":"text-gray-400 hover:text-white"}`,children:[s.jsx(R1,{className:"h-3 w-3"}),s.jsx("span",{children:"List"})]})]})]})]})]}),zC=({metrics:e})=>{const t=n=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(n),r=[{title:"Total Deals",value:e.totalDeals,icon:Ie,color:"from-emerald-400/20 to-green-600/20",iconColor:"text-emerald-400",subtitle:"Active pipeline"},{title:"Pipeline Value",value:t(e.totalValue),icon:oe,color:"from-blue-400/20 to-blue-600/20",iconColor:"text-blue-400",subtitle:"Total potential"},{title:"Weighted Value",value:t(e.weightedValue),icon:ye,color:"from-green-400/20 to-green-600/20",iconColor:"text-green-400",subtitle:"Probability adjusted"},{title:"Avg Deal Size",value:t(e.averageDealSize),icon:Ae,color:"from-purple-400/20 to-purple-600/20",iconColor:"text-purple-400",subtitle:"Per opportunity"},{title:"Win Rate",value:`${e.conversionRate.toFixed(1)}%`,icon:jn,color:"from-yellow-400/20 to-yellow-600/20",iconColor:"text-yellow-400",subtitle:"Conversion rate"}];return s.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-5 gap-3",children:r.map((n,a)=>s.jsxs("div",{className:"glass-card p-4 hover:bg-gray-800/60 transition-all duration-300 group hover:scale-105",children:[s.jsx("div",{className:"flex items-center justify-between mb-2",children:s.jsx("div",{className:`p-2 bg-gradient-to-br ${n.color} rounded-lg group-hover:scale-110 transition-transform duration-300`,children:s.jsx(n.icon,{className:`h-4 w-4 ${n.iconColor}`})})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-400 group-hover:text-gray-300 transition-colors",children:n.title}),s.jsx("p",{className:"text-lg font-bold text-white mt-1",children:n.value}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:n.subtitle})]})]},a))})},WC=({filters:e,onFilterChange:t})=>s.jsxs("div",{className:"glass-card p-4",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[s.jsx(ax,{className:"h-4 w-4 text-gray-400"}),s.jsx("span",{className:"text-sm font-medium text-gray-300",children:"Filters"})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-3",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Lr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search deals...",value:e.search,onChange:r=>t("search",r.target.value),className:"w-full pl-9 pr-3 py-2 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent text-white placeholder-gray-400 text-sm"})]}),s.jsxs("select",{value:e.stage,onChange:r=>t("stage",r.target.value),className:"px-3 py-2 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent text-white text-sm",children:[s.jsx("option",{value:"",children:"All Stages"}),s.jsx("option",{value:"new_opportunity",children:"New Opportunity"}),s.jsx("option",{value:"discovery_call_scheduled",children:"Discovery Scheduled"}),s.jsx("option",{value:"discovery_call_completed",children:"Discovery Completed"}),s.jsx("option",{value:"proposal_preparation",children:"Proposal Prep"}),s.jsx("option",{value:"proposal_sent",children:"Proposal Sent"}),s.jsx("option",{value:"proposal_review",children:"Proposal Review"}),s.jsx("option",{value:"negotiation",children:"Negotiation"}),s.jsx("option",{value:"contract_sent",children:"Contract Sent"}),s.jsx("option",{value:"contract_signed",children:"Contract Signed"}),s.jsx("option",{value:"project_kickoff",children:"Project Kickoff"}),s.jsx("option",{value:"on_hold",children:"On Hold"}),s.jsx("option",{value:"lost",children:"Lost"})]}),s.jsxs("select",{value:e.service_type,onChange:r=>t("service_type",r.target.value),className:"px-3 py-2 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent text-white text-sm",children:[s.jsx("option",{value:"",children:"All Services"}),s.jsx("option",{value:"Growth Creator",children:"Growth Creator"}),s.jsx("option",{value:"AIGC Systems",children:"AIGC Systems"}),s.jsx("option",{value:"Custom Projects",children:"Custom Projects"}),s.jsx("option",{value:"Ongoing Support",children:"Ongoing Support"}),s.jsx("option",{value:"Business Consulting",children:"Business Consulting"}),s.jsx("option",{value:"System Optimization",children:"System Optimization"}),s.jsx("option",{value:"CRM Implementation",children:"CRM Implementation"})]}),s.jsxs("select",{value:e.value_range,onChange:r=>t("value_range",r.target.value),className:"px-3 py-2 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent text-white text-sm",children:[s.jsx("option",{value:"all",children:"All Values"}),s.jsx("option",{value:"under_10k",children:"Under $10K"}),s.jsx("option",{value:"10k_50k",children:"$10K - $50K"}),s.jsx("option",{value:"50k_100k",children:"$50K - $100K"}),s.jsx("option",{value:"over_100k",children:"Over $100K"})]}),s.jsxs("select",{value:e.probability_range,onChange:r=>t("probability_range",r.target.value),className:"px-3 py-2 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent text-white text-sm",children:[s.jsx("option",{value:"all",children:"All Probabilities"}),s.jsx("option",{value:"low",children:"Low (0-39%)"}),s.jsx("option",{value:"medium",children:"Medium (40-79%)"}),s.jsx("option",{value:"high",children:"High (80-100%)"})]}),s.jsx("button",{className:"flex items-center justify-center space-x-1 px-3 py-2 bg-gray-800 hover:bg-gray-700 text-white rounded-lg transition-colors text-sm",children:s.jsx("span",{children:"Export"})})]})]}),VC=()=>{Oe();const{deals:e,loading:t,error:r,fetchDeals:n,updateDeal:a,createDeal:l}=pi(),o=a_(e),[i,c]=j.useState([]),[h,u]=j.useState(!1),[d,m]=j.useState(),[p,f]=j.useState("board"),[x,b]=j.useState(new Date),[g,v]=j.useState({search:"",stage:"",service_type:"",deal_owner:"",deal_source:"",value_range:"all",probability_range:"all"});j.useEffect(()=>{n()},[]),j.useEffect(()=>{let S=[...e];if(g.search){const O=g.search.toLowerCase();S=S.filter(E=>{var I,z,te;return E.deal_name.toLowerCase().includes(O)||((I=E.lead)==null?void 0:I.first_name)&&E.lead.first_name.toLowerCase().includes(O)||((z=E.lead)==null?void 0:z.last_name)&&E.lead.last_name.toLowerCase().includes(O)||((te=E.lead)==null?void 0:te.company)&&E.lead.company.toLowerCase().includes(O)})}g.stage&&(S=S.filter(O=>O.stage===g.stage)),g.service_type&&(S=S.filter(O=>O.service_type===g.service_type)),g.deal_owner&&(S=S.filter(O=>O.deal_owner===g.deal_owner)),g.deal_source&&(S=S.filter(O=>O.deal_source===g.deal_source)),g.value_range!=="all"&&(S=S.filter(O=>{const E=O.deal_value;switch(g.value_range){case"under_10k":return E<1e4;case"10k_50k":return E>=1e4&&E<5e4;case"50k_100k":return E>=5e4&&E<1e5;case"over_100k":return E>=1e5;default:return!0}})),g.probability_range!=="all"&&(S=S.filter(O=>{const E=O.probability;switch(g.probability_range){case"low":return E<40;case"medium":return E>=40&&E<80;case"high":return E>=80;default:return!0}})),c(S)},[e,g]);const y=(S,O)=>{v(E=>({...E,[S]:O}))},w=async(S,O)=>{const E=await a(S,O);E.error&&console.error("Error updating deal:",E.error)},N=S=>{m(S),u(!0)},k=S=>{m(void 0),b(new Date)},D=async()=>{await n(),b(new Date)},C=()=>{m(void 0),u(!0)},_=S=>{f(S)};return t?s.jsx("div",{className:"flex items-center justify-center p-8",children:s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-emerald-400/30 border-t-emerald-400"}),s.jsx("div",{className:"absolute inset-0 rounded-full bg-emerald-400/10 animate-pulse"})]})}):s.jsx(dr,{section:"sales",children:s.jsxs("div",{className:"space-y-4 h-full flex flex-col",children:[s.jsx(BC,{lastUpdated:x,loading:t,viewMode:p,onRefresh:D,onViewModeChange:_,onNewDeal:C}),s.jsx(zC,{metrics:o}),s.jsx(WC,{filters:g,onFilterChange:y}),r&&s.jsx("div",{className:"p-3 bg-red-900/20 border border-red-500/30 rounded-lg",children:s.jsx("p",{className:"text-red-400 text-sm",children:r})}),s.jsx("div",{className:"flex-1 min-h-0",children:p==="board"?s.jsx(UC,{deals:i,onDealUpdate:w,onDealClick:N}):s.jsx("div",{className:"glass-card p-6",children:s.jsx("p",{className:"text-gray-400 text-center",children:"List view coming soon..."})})}),s.jsx(Zu,{deal:d,isOpen:h,onClose:()=>{u(!1),m(void 0)},onSave:k})]})})},qC=({deal:e,onStatusChange:t})=>{const[r,n]=j.useState(!1),a=[{value:"new_opportunity",label:"New Opportunity",color:"bg-blue-900/30 text-blue-400 border-blue-500/30"},{value:"discovery_call_scheduled",label:"Discovery Scheduled",color:"bg-cyan-900/30 text-cyan-400 border-cyan-500/30"},{value:"discovery_call_completed",label:"Discovery Completed",color:"bg-teal-900/30 text-teal-400 border-teal-500/30"},{value:"proposal_preparation",label:"Proposal Prep",color:"bg-indigo-900/30 text-indigo-400 border-indigo-500/30"},{value:"proposal_sent",label:"Proposal Sent",color:"bg-purple-900/30 text-purple-400 border-purple-500/30"},{value:"proposal_review",label:"Proposal Review",color:"bg-pink-900/30 text-pink-400 border-pink-500/30"},{value:"negotiation",label:"Negotiation",color:"bg-orange-900/30 text-orange-400 border-orange-500/30"},{value:"contract_sent",label:"Contract Sent",color:"bg-yellow-900/30 text-yellow-400 border-yellow-500/30"},{value:"contract_signed",label:"Contract Signed",color:"bg-green-900/30 text-green-400 border-green-500/30"},{value:"project_kickoff",label:"Project Kickoff",color:"bg-emerald-900/30 text-emerald-400 border-emerald-500/30"},{value:"on_hold",label:"On Hold",color:"bg-gray-900/30 text-gray-400 border-gray-500/30"},{value:"lost",label:"Lost",color:"bg-red-900/30 text-red-400 border-red-500/30"}],l=a.find(o=>o.value===e.stage);return s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>n(!r),className:`
          group flex items-center space-x-2 px-3 py-1.5 rounded-full text-xs font-semibold border transition-all duration-200 
          hover:scale-105 hover:shadow-lg cursor-pointer
          ${(l==null?void 0:l.color)||a[0].color}
        `,children:[s.jsx("span",{children:(l==null?void 0:l.label)||"New Opportunity"}),s.jsx(To,{className:`h-3 w-3 transition-transform duration-200 ${r?"rotate-180":""}`})]}),r&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>n(!1)}),s.jsx("div",{className:"absolute top-full left-0 mt-1 w-48 bg-gray-800 border border-gray-700 rounded-lg shadow-xl z-20 overflow-hidden",children:a.map(o=>s.jsx("button",{onClick:()=>{t(e.id,o.value),n(!1)},className:`
                  w-full text-left px-4 py-3 text-sm transition-all duration-200 hover:bg-gray-700/50
                  ${o.value===e.stage?"bg-gray-700/30":""}
                  ${o.color.includes("blue")?"hover:bg-blue-900/20":""}
                  ${o.color.includes("cyan")?"hover:bg-cyan-900/20":""}
                  ${o.color.includes("teal")?"hover:bg-teal-900/20":""}
                  ${o.color.includes("indigo")?"hover:bg-indigo-900/20":""}
                  ${o.color.includes("purple")?"hover:bg-purple-900/20":""}
                  ${o.color.includes("pink")?"hover:bg-pink-900/20":""}
                  ${o.color.includes("orange")?"hover:bg-orange-900/20":""}
                  ${o.color.includes("yellow")?"hover:bg-yellow-900/20":""}
                  ${o.color.includes("green")?"hover:bg-green-900/20":""}
                  ${o.color.includes("emerald")?"hover:bg-emerald-900/20":""}
                  ${o.color.includes("red")?"hover:bg-red-900/20":""}
                  ${o.color.includes("gray")?"hover:bg-gray-700/20":""}
                `,children:s.jsx("span",{className:`font-medium ${o.color.split(" ")[1]}`,children:o.label})},o.value))})]})]})},GC=()=>{Oe();const{deals:e,loading:t,error:r,fetchDeals:n,updateDeal:a,deleteDeal:l}=pi(),[o,i]=j.useState([]),[c,h]=j.useState([]),[u,d]=j.useState(!1),[m,p]=j.useState(),[f,x]=j.useState(1),[b,g]=j.useState(10),[v,y]=j.useState({search:"",stage:"",service_type:"",deal_owner:"",deal_source:"",value_range:"all",probability_range:"all"}),w=[10,15,25,50];j.useEffect(()=>{n()},[]),j.useEffect(()=>{let R=[...e];if(v.search){const M=v.search.toLowerCase();R=R.filter(F=>{var A,T,W;return F.deal_name.toLowerCase().includes(M)||((A=F.lead)==null?void 0:A.first_name)&&F.lead.first_name.toLowerCase().includes(M)||((T=F.lead)==null?void 0:T.last_name)&&F.lead.last_name.toLowerCase().includes(M)||((W=F.lead)==null?void 0:W.company)&&F.lead.company.toLowerCase().includes(M)})}v.stage&&(R=R.filter(M=>M.stage===v.stage)),v.service_type&&(R=R.filter(M=>M.service_type===v.service_type)),v.deal_owner&&(R=R.filter(M=>M.deal_owner===v.deal_owner)),v.deal_source&&(R=R.filter(M=>M.deal_source===v.deal_source)),v.value_range!=="all"&&(R=R.filter(M=>{const F=M.deal_value;switch(v.value_range){case"under_10k":return F<1e4;case"10k_50k":return F>=1e4&&F<5e4;case"50k_100k":return F>=5e4&&F<1e5;case"over_100k":return F>=1e5;default:return!0}})),v.probability_range!=="all"&&(R=R.filter(M=>{const F=M.probability;switch(v.probability_range){case"low":return F<40;case"medium":return F>=40&&F<80;case"high":return F>=80;default:return!0}})),i(R),x(1)},[e,v]);const N=e.reduce((R,M)=>({totalValue:R.totalValue+M.deal_value,weightedValue:R.weightedValue+M.deal_value*M.probability/100,wonValue:R.wonValue+(M.stage==="contract_signed"?M.deal_value:0),wonCount:R.wonCount+(M.stage==="contract_signed"?1:0)}),{totalValue:0,weightedValue:0,wonValue:0,wonCount:0}),k=Math.ceil(o.length/b),D=(f-1)*b,C=o.slice(D,D+b),_=(R,M)=>{y(F=>({...F,[R]:M}))},S=R=>{g(R),x(1)},O=R=>{h(M=>M.includes(R)?M.filter(F=>F!==R):[...M,R])},E=()=>{c.length===C.length?h([]):h(C.map(R=>R.id))},I=async()=>{if(c.length&&confirm(`Delete ${c.length} selected deals?`))try{for(const R of c)await l(R);h([]),n()}catch(R){console.error("Error deleting deals:",R)}},z=R=>{p(R),d(!0)},te=R=>{n(),p(void 0)},se=async(R,M)=>{try{const F={stage:M,updated_at:new Date().toISOString()};M==="contract_signed"?(F.won_date=new Date().toISOString(),F.actual_close_date=new Date().toISOString()):M==="lost"&&(F.lost_date=new Date().toISOString());const A=await a(R,F);A.error&&console.error("Error updating deal stage:",A.error)}catch(F){console.error("Error updating deal stage:",F)}},de=R=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(R),$=R=>R?new Date(R).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"-",G=R=>({"Growth Creator":"bg-blue-900/30 text-blue-400","AIGC Systems":"bg-purple-900/30 text-purple-400","Custom Projects":"bg-green-900/30 text-green-400","Ongoing Support":"bg-orange-900/30 text-orange-400","Business Consulting":"bg-teal-900/30 text-teal-400","System Optimization":"bg-indigo-900/30 text-indigo-400","CRM Implementation":"bg-pink-900/30 text-pink-400"})[R]||"bg-gray-900/30 text-gray-400";return t?s.jsx("div",{className:"flex items-center justify-center p-8",children:s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-emerald-400/30 border-t-emerald-400"}),s.jsx("div",{className:"absolute inset-0 rounded-full bg-emerald-400/10 animate-pulse"})]})}):s.jsx(dr,{section:"sales",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"space-y-2",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-gradient-to-br from-emerald-400/20 to-green-600/20 rounded-xl",children:s.jsx(Ie,{className:"h-8 w-8 text-emerald-400"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold gradient-text section-gradient-sales",children:"Sales CRM"}),s.jsx("p",{className:"text-gray-400 mt-1",children:"Manage and track your deals through the sales pipeline."})]})]})}),s.jsxs("button",{onClick:()=>{p(void 0),d(!0)},className:"group flex items-center space-x-2 px-6 py-3 bg-gradient-to-r from-emerald-400 to-green-600 hover:from-emerald-500 hover:to-green-700 text-white font-semibold rounded-xl transition-all duration-300 hover:scale-105 hover:shadow-xl hover:shadow-emerald-500/25",children:[s.jsx(St,{className:"h-5 w-5 group-hover:rotate-90 transition-transform duration-300"}),s.jsx("span",{children:"Add Deal"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[s.jsx("div",{className:"glass-card p-6 hover:bg-gray-800/60 transition-all duration-300 group hover:scale-105 hover:shadow-xl hover:shadow-emerald-500/10",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors",children:"Total Deals"}),s.jsx("p",{className:"text-3xl font-bold text-white mt-1",children:e.length}),s.jsxs("p",{className:"text-xs text-emerald-400 mt-1 flex items-center",children:[s.jsx(Ae,{className:"h-3 w-3 mr-1"}),"Active pipeline"]})]}),s.jsx("div",{className:"p-3 bg-gradient-to-br from-emerald-400/20 to-green-600/20 rounded-xl group-hover:scale-110 transition-transform duration-300",children:s.jsx(Ie,{className:"h-8 w-8 text-emerald-400"})})]})}),s.jsx("div",{className:"glass-card p-6 hover:bg-gray-800/60 transition-all duration-300 group hover:scale-105 hover:shadow-xl hover:shadow-blue-500/10",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors",children:"Pipeline Value"}),s.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:de(N.totalValue)}),s.jsxs("p",{className:"text-xs text-blue-400 mt-1 flex items-center",children:[s.jsx(oe,{className:"h-3 w-3 mr-1"}),"Total potential"]})]}),s.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-400/20 to-blue-600/20 rounded-xl group-hover:scale-110 transition-transform duration-300",children:s.jsx(oe,{className:"h-8 w-8 text-blue-400"})})]})}),s.jsx("div",{className:"glass-card p-6 hover:bg-gray-800/60 transition-all duration-300 group hover:scale-105 hover:shadow-xl hover:shadow-green-500/10",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors",children:"Weighted Value"}),s.jsx("p",{className:"text-2xl font-bold text-green-400 mt-1",children:de(N.weightedValue)}),s.jsxs("p",{className:"text-xs text-green-400 mt-1 flex items-center",children:[s.jsx(ye,{className:"h-3 w-3 mr-1"}),"Probability adjusted"]})]}),s.jsx("div",{className:"p-3 bg-gradient-to-br from-green-400/20 to-green-600/20 rounded-xl group-hover:scale-110 transition-transform duration-300",children:s.jsx(ye,{className:"h-8 w-8 text-green-400"})})]})}),s.jsx("div",{className:"glass-card p-6 hover:bg-gray-800/60 transition-all duration-300 group hover:scale-105 hover:shadow-xl hover:shadow-emerald-500/10",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors",children:"Won Deals"}),s.jsx("p",{className:"text-3xl font-bold text-emerald-400 mt-1",children:N.wonCount}),s.jsxs("p",{className:"text-xs text-emerald-400 mt-1 flex items-center",children:[s.jsx(ct,{className:"h-3 w-3 mr-1"}),"Closed won"]})]}),s.jsx("div",{className:"p-3 bg-gradient-to-br from-emerald-400/20 to-emerald-600/20 rounded-xl group-hover:scale-110 transition-transform duration-300",children:s.jsx(ct,{className:"h-8 w-8 text-emerald-400"})})]})}),s.jsx("div",{className:"glass-card p-6 hover:bg-gray-800/60 transition-all duration-300 group hover:scale-105 hover:shadow-xl hover:shadow-yellow-500/10",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors",children:"Win Rate"}),s.jsxs("p",{className:"text-3xl font-bold text-yellow-400 mt-1",children:[e.length>0?(N.wonCount/e.length*100).toFixed(1):0,"%"]}),s.jsxs("p",{className:"text-xs text-yellow-400 mt-1 flex items-center",children:[s.jsx(Yt,{className:"h-3 w-3 mr-1"}),"Conversion rate"]})]}),s.jsx("div",{className:"p-3 bg-gradient-to-br from-yellow-400/20 to-yellow-600/20 rounded-xl group-hover:scale-110 transition-transform duration-300",children:s.jsx(Yt,{className:"h-8 w-8 text-yellow-400"})})]})})]}),s.jsx("div",{className:"glass-card p-6 hover:bg-gray-800/40 transition-all duration-300",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[s.jsxs("div",{className:"relative group",children:[s.jsx(Lr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400 group-hover:text-gray-300 transition-colors"}),s.jsx("input",{type:"text",placeholder:"Search deals...",value:v.search,onChange:R=>_("search",R.target.value),className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent text-white placeholder-gray-400 hover:bg-gray-700/50 transition-all duration-200"})]}),s.jsxs("select",{value:v.stage,onChange:R=>_("stage",R.target.value),className:"px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent text-white hover:bg-gray-700/50 transition-all duration-200",children:[s.jsx("option",{value:"",children:"All Stages"}),s.jsx("option",{value:"new_opportunity",children:"New Opportunity"}),s.jsx("option",{value:"discovery_call_scheduled",children:"Discovery Scheduled"}),s.jsx("option",{value:"discovery_call_completed",children:"Discovery Completed"}),s.jsx("option",{value:"proposal_preparation",children:"Proposal Prep"}),s.jsx("option",{value:"proposal_sent",children:"Proposal Sent"}),s.jsx("option",{value:"proposal_review",children:"Proposal Review"}),s.jsx("option",{value:"negotiation",children:"Negotiation"}),s.jsx("option",{value:"contract_sent",children:"Contract Sent"}),s.jsx("option",{value:"contract_signed",children:"Contract Signed"}),s.jsx("option",{value:"project_kickoff",children:"Project Kickoff"}),s.jsx("option",{value:"on_hold",children:"On Hold"}),s.jsx("option",{value:"lost",children:"Lost"})]}),s.jsxs("select",{value:v.service_type,onChange:R=>_("service_type",R.target.value),className:"px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent text-white hover:bg-gray-700/50 transition-all duration-200",children:[s.jsx("option",{value:"",children:"All Services"}),s.jsx("option",{value:"Growth Creator",children:"Growth Creator"}),s.jsx("option",{value:"AIGC Systems",children:"AIGC Systems"}),s.jsx("option",{value:"Custom Projects",children:"Custom Projects"}),s.jsx("option",{value:"Ongoing Support",children:"Ongoing Support"}),s.jsx("option",{value:"Business Consulting",children:"Business Consulting"}),s.jsx("option",{value:"System Optimization",children:"System Optimization"}),s.jsx("option",{value:"CRM Implementation",children:"CRM Implementation"})]}),s.jsxs("select",{value:v.value_range,onChange:R=>_("value_range",R.target.value),className:"px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent text-white hover:bg-gray-700/50 transition-all duration-200",children:[s.jsx("option",{value:"all",children:"All Values"}),s.jsx("option",{value:"under_10k",children:"Under $10K"}),s.jsx("option",{value:"10k_50k",children:"$10K - $50K"}),s.jsx("option",{value:"50k_100k",children:"$50K - $100K"}),s.jsx("option",{value:"over_100k",children:"Over $100K"})]}),s.jsxs("select",{value:v.probability_range,onChange:R=>_("probability_range",R.target.value),className:"px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent text-white hover:bg-gray-700/50 transition-all duration-200",children:[s.jsx("option",{value:"all",children:"All Probabilities"}),s.jsx("option",{value:"low",children:"Low (0-39%)"}),s.jsx("option",{value:"medium",children:"Medium (40-79%)"}),s.jsx("option",{value:"high",children:"High (80-100%)"})]}),s.jsx("div",{className:"flex space-x-2",children:c.length>0&&s.jsxs("button",{onClick:I,className:"flex items-center space-x-1 px-4 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-all duration-200 hover:scale-105 hover:shadow-lg hover:shadow-red-500/25",children:[s.jsx(Ir,{className:"h-4 w-4"}),s.jsxs("span",{children:["Delete (",c.length,")"]})]})})]})}),r&&s.jsx("div",{className:"p-4 bg-red-900/20 border border-red-500/30 rounded-lg animate-pulse",children:s.jsx("p",{className:"text-red-400 text-sm",children:r})}),s.jsxs("div",{className:"glass-card overflow-hidden hover:bg-gray-800/30 transition-all duration-300",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-800/60 backdrop-blur-sm",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-4 text-left",children:s.jsx("input",{type:"checkbox",checked:c.length===C.length&&C.length>0,onChange:E,className:"rounded border-gray-600 bg-gray-700 text-emerald-500 focus:ring-emerald-500 hover:scale-110 transition-transform duration-200"})}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300 hover:text-white transition-colors",children:"Deal Name"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300 hover:text-white transition-colors",children:"Stage"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300 hover:text-white transition-colors",children:"Service Type"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300 hover:text-white transition-colors",children:"Deal Value"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300 hover:text-white transition-colors",children:"Probability"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300 hover:text-white transition-colors",children:"Expected Close"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300 hover:text-white transition-colors",children:"Created"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300 hover:text-white transition-colors",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-800/50",children:C.map(R=>{var M;return s.jsxs("tr",{className:"hover:bg-gray-800/40 transition-all duration-300 group hover:shadow-lg hover:shadow-gray-900/20",children:[s.jsx("td",{className:"px-6 py-5",children:s.jsx("input",{type:"checkbox",checked:c.includes(R.id),onChange:()=>O(R.id),className:"rounded border-gray-600 bg-gray-700 text-emerald-500 focus:ring-emerald-500 hover:scale-110 transition-transform duration-200"})}),s.jsx("td",{className:"px-6 py-5",children:s.jsxs("div",{className:"group-hover:scale-105 transition-transform duration-200",children:[s.jsx("div",{className:"font-semibold text-white group-hover:text-emerald-100 transition-colors",children:R.deal_name}),R.lead&&s.jsxs("div",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors",children:[R.lead.first_name," ",R.lead.last_name]}),((M=R.lead)==null?void 0:M.company)&&s.jsx("div",{className:"text-sm text-gray-500 group-hover:text-gray-400 transition-colors",children:R.lead.company})]})}),s.jsx("td",{className:"px-6 py-5",children:s.jsx(qC,{deal:R,onStatusChange:se})}),s.jsx("td",{className:"px-6 py-5",children:R.service_type?s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${G(R.service_type)}`,children:R.service_type}):s.jsx("span",{className:"text-gray-500",children:"-"})}),s.jsxs("td",{className:"px-6 py-5",children:[s.jsx("div",{className:"font-semibold text-white group-hover:text-emerald-100 transition-colors",children:de(R.deal_value)}),s.jsxs("div",{className:"text-xs text-gray-400",children:["Weighted: ",de(R.deal_value*R.probability/100)]})]}),s.jsx("td",{className:"px-6 py-5",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("span",{className:"text-white font-medium",children:[R.probability,"%"]}),s.jsx("div",{className:"w-16 bg-gray-700 rounded-full h-2",children:s.jsx("div",{className:"h-2 bg-gradient-to-r from-red-400 via-yellow-400 to-green-400 rounded-full transition-all duration-300",style:{width:`${R.probability}%`}})})]})}),s.jsx("td",{className:"px-6 py-5 text-gray-400 text-sm group-hover:text-gray-300 transition-colors",children:$(R.expected_close_date)}),s.jsx("td",{className:"px-6 py-5 text-gray-400 text-sm group-hover:text-gray-300 transition-colors",children:$(R.created_at)}),s.jsx("td",{className:"px-6 py-5",children:s.jsx("div",{className:"flex items-center space-x-2",children:s.jsx("button",{onClick:()=>z(R),className:"text-gray-400 hover:text-emerald-400 transition-all duration-200 hover:scale-110 p-2 rounded-lg hover:bg-gray-700/50",title:"Edit deal",children:s.jsx(ix,{className:"h-4 w-4"})})})})]},R.id)})})]})}),s.jsxs("div",{className:"px-6 py-4 border-t border-gray-800/50 flex items-center justify-between bg-gray-800/20",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"text-sm text-gray-400",children:["Showing ",s.jsx("span",{className:"font-semibold text-white",children:D+1})," to"," ",s.jsx("span",{className:"font-semibold text-white",children:Math.min(D+b,o.length)})," of"," ",s.jsx("span",{className:"font-semibold text-white",children:o.length})," deals"]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-sm text-gray-400",children:"Show:"}),s.jsx("select",{value:b,onChange:R=>S(Number(R.target.value)),className:"px-3 py-1 bg-gray-700/50 border border-gray-600 rounded-lg text-white text-sm focus:ring-2 focus:ring-emerald-500 focus:border-transparent hover:bg-gray-600/50 transition-all duration-200",children:w.map(R=>s.jsx("option",{value:R,children:R},R))}),s.jsx("span",{className:"text-sm text-gray-400",children:"per page"})]})]}),k>1&&s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("button",{onClick:()=>x(R=>Math.max(R-1,1)),disabled:f===1,className:"p-2 text-gray-400 hover:text-white disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 hover:scale-110 hover:bg-gray-700/50 rounded-lg",children:s.jsx(Or,{className:"h-5 w-5"})}),s.jsxs("span",{className:"text-sm text-gray-300 px-3 py-1 bg-gray-700/50 rounded-lg",children:["Page ",s.jsx("span",{className:"font-semibold text-white",children:f})," of"," ",s.jsx("span",{className:"font-semibold text-white",children:k})]}),s.jsx("button",{onClick:()=>x(R=>Math.min(R+1,k)),disabled:f===k,className:"p-2 text-gray-400 hover:text-white disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 hover:scale-110 hover:bg-gray-700/50 rounded-lg",children:s.jsx(ir,{className:"h-5 w-5"})})]})]})]}),s.jsx(Zu,{deal:m,isOpen:u,onClose:()=>{d(!1),p(void 0)},onSave:te})]})})},Dc=({lastUpdated:e,loading:t,onRefresh:r})=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"space-y-2",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-gradient-to-br from-emerald-400/20 to-green-600/20 rounded-xl",children:s.jsx(Ie,{className:"h-8 w-8 text-emerald-400"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold gradient-text section-gradient-sales",children:"Sales Metrics Dashboard"}),s.jsx("p",{className:"text-gray-400 mt-1",children:"Comprehensive sales pipeline analytics with advanced data visualization"})]})]})}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm text-gray-400",children:"Last Updated"}),s.jsx("p",{className:"text-sm font-semibold text-white",children:e.toLocaleTimeString()})]}),s.jsxs("button",{onClick:r,disabled:t,className:"flex items-center space-x-2 px-4 py-2 bg-gray-800 hover:bg-gray-700 text-white rounded-lg transition-all duration-200 hover:scale-105",children:[s.jsx(xr,{className:`h-4 w-4 ${t?"animate-spin":""}`}),s.jsx("span",{children:"Refresh"})]})]})]}),HC=({currentMetrics:e,previousMetrics:t})=>{const r=(i,c)=>c===0?i>0?100:0:(i-c)/c*100,n=i=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(i),a=i=>`${i>=0?"+":""}${i.toFixed(1)}%`,l=i=>i>0?s.jsx(Za,{className:"h-4 w-4 text-green-400"}):i<0?s.jsx(Xa,{className:"h-4 w-4 text-red-400"}):s.jsx(wn,{className:"h-4 w-4 text-gray-400"}),o=i=>i>0?"text-green-400":i<0?"text-red-400":"text-gray-400";return s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[s.jsx("div",{className:"glass-card p-6 hover:bg-gray-800/60 transition-all duration-300 group hover:scale-105",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors",children:"Total Deals"}),s.jsx("p",{className:"text-3xl font-bold text-white mt-1",children:e.totalDeals}),s.jsxs("div",{className:"flex items-center space-x-1 mt-2",children:[l(r(e.totalDeals,t.totalDeals)),s.jsx("span",{className:`text-sm font-medium ${o(r(e.totalDeals,t.totalDeals))}`,children:a(r(e.totalDeals,t.totalDeals))})]})]}),s.jsx("div",{className:"p-3 bg-gradient-to-br from-emerald-400/20 to-green-600/20 rounded-xl",children:s.jsx(Ie,{className:"h-8 w-8 text-emerald-400"})})]})}),s.jsx("div",{className:"glass-card p-6 hover:bg-gray-800/60 transition-all duration-300 group hover:scale-105",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors",children:"Pipeline Value"}),s.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:n(e.totalValue)}),s.jsxs("div",{className:"flex items-center space-x-1 mt-2",children:[l(r(e.totalValue,t.totalValue)),s.jsx("span",{className:`text-sm font-medium ${o(r(e.totalValue,t.totalValue))}`,children:a(r(e.totalValue,t.totalValue))})]})]}),s.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-400/20 to-blue-600/20 rounded-xl",children:s.jsx(oe,{className:"h-8 w-8 text-blue-400"})})]})}),s.jsx("div",{className:"glass-card p-6 hover:bg-gray-800/60 transition-all duration-300 group hover:scale-105",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors",children:"Weighted Value"}),s.jsx("p",{className:"text-2xl font-bold text-green-400 mt-1",children:n(e.weightedValue)}),s.jsxs("div",{className:"flex items-center space-x-1 mt-2",children:[l(r(e.weightedValue,t.weightedValue)),s.jsx("span",{className:`text-sm font-medium ${o(r(e.weightedValue,t.weightedValue))}`,children:a(r(e.weightedValue,t.weightedValue))})]})]}),s.jsx("div",{className:"p-3 bg-gradient-to-br from-green-400/20 to-green-600/20 rounded-xl",children:s.jsx(ye,{className:"h-8 w-8 text-green-400"})})]})}),s.jsx("div",{className:"glass-card p-6 hover:bg-gray-800/60 transition-all duration-300 group hover:scale-105",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors",children:"Won Value"}),s.jsx("p",{className:"text-2xl font-bold text-emerald-400 mt-1",children:n(e.wonValue)}),s.jsxs("div",{className:"flex items-center space-x-1 mt-2",children:[s.jsx(ct,{className:"h-4 w-4 text-emerald-400"}),s.jsxs("span",{className:"text-sm text-emerald-400 font-medium",children:[e.contractSigned," deals"]})]})]}),s.jsx("div",{className:"p-3 bg-gradient-to-br from-emerald-400/20 to-emerald-600/20 rounded-xl",children:s.jsx(ct,{className:"h-8 w-8 text-emerald-400"})})]})}),s.jsx("div",{className:"glass-card p-6 hover:bg-gray-800/60 transition-all duration-300 group hover:scale-105",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors",children:"Win Rate"}),s.jsxs("p",{className:"text-3xl font-bold text-yellow-400 mt-1",children:[e.conversionRate.toFixed(1),"%"]}),s.jsxs("div",{className:"flex items-center space-x-1 mt-2",children:[s.jsx(Ae,{className:"h-4 w-4 text-yellow-400"}),s.jsx("span",{className:"text-sm text-yellow-400 font-medium",children:"Conversion rate"})]})]}),s.jsx("div",{className:"p-3 bg-gradient-to-br from-yellow-400/20 to-yellow-600/20 rounded-xl",children:s.jsx(Ae,{className:"h-8 w-8 text-yellow-400"})})]})})]})},KC=({currentMetrics:e,previousMetrics:t,selectedPeriod:r,periods:n})=>{var d,m;const a=(p,f)=>f===0?p>0?100:0:(p-f)/f*100,l=p=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(p),o=p=>`${p>=0?"+":""}${p.toFixed(1)}%`,i=p=>p>0?s.jsx(Za,{className:"h-4 w-4 text-green-400"}):p<0?s.jsx(Xa,{className:"h-4 w-4 text-red-400"}):s.jsx(wn,{className:"h-4 w-4 text-gray-400"}),c=p=>p>0?"text-green-400":p<0?"text-red-400":"text-gray-400",h=(p,f)=>f===0?0:p/f*100,u=[{key:"totalDeals",label:"Total Deals",icon:Ie,color:"text-emerald-400"},{key:"newOpportunities",label:"New Opportunities",icon:jn,color:"text-blue-400"},{key:"discoveryScheduled",label:"Discovery Scheduled",icon:ye,color:"text-cyan-400"},{key:"discoveryCompleted",label:"Discovery Completed",icon:Ae,color:"text-teal-400"},{key:"proposalPrep",label:"Proposal Preparation",icon:Ie,color:"text-indigo-400"},{key:"proposalSent",label:"Proposal Sent",icon:Ae,color:"text-purple-400"},{key:"proposalReview",label:"Proposal Review",icon:ye,color:"text-pink-400"},{key:"negotiation",label:"Negotiation",icon:Ae,color:"text-orange-400"},{key:"contractSent",label:"Contract Sent",icon:Ie,color:"text-yellow-400"},{key:"contractSigned",label:"Contract Signed",icon:Ae,color:"text-green-500"},{key:"projectKickoff",label:"Project Kickoff",icon:jn,color:"text-emerald-500"},{key:"onHold",label:"On Hold",icon:ye,color:"text-gray-400"},{key:"lost",label:"Lost",icon:$a,color:"text-red-400"},{key:"totalValue",label:"Total Pipeline Value",icon:Ie,color:"text-blue-500",isCurrency:!0},{key:"weightedValue",label:"Weighted Pipeline Value",icon:ye,color:"text-green-500",isCurrency:!0},{key:"wonValue",label:"Won Value",icon:Ae,color:"text-emerald-500",isCurrency:!0},{key:"lostValue",label:"Lost Value",icon:$a,color:"text-red-500",isCurrency:!0}];return s.jsxs("div",{className:"glass-card overflow-hidden",children:[s.jsx("div",{className:"p-6 border-b border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h2",{className:"text-xl font-semibold gradient-text section-gradient-sales",children:["Sales Pipeline Metrics - ",(d=n.find(p=>p.key===r))==null?void 0:d.label]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("span",{className:"text-sm text-gray-400",children:["vs ",(m=n.find(p=>p.key===r))==null?void 0:m.previousLabel]}),s.jsxs("button",{className:"flex items-center space-x-2 px-3 py-1 bg-gray-800 hover:bg-gray-700 text-white rounded-lg transition-colors",children:[s.jsx(rl,{className:"h-4 w-4"}),s.jsx("span",{children:"Export"})]})]})]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-800/60",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Pipeline Stage"}),s.jsx("th",{className:"px-6 py-4 text-center text-sm font-semibold text-gray-300",children:"Current"}),s.jsx("th",{className:"px-6 py-4 text-center text-sm font-semibold text-gray-300",children:"Previous"}),s.jsx("th",{className:"px-6 py-4 text-center text-sm font-semibold text-gray-300",children:"Change"}),s.jsx("th",{className:"px-6 py-4 text-center text-sm font-semibold text-gray-300",children:"Conversion Rate"}),s.jsx("th",{className:"px-6 py-4 text-center text-sm font-semibold text-gray-300",children:"Drop-off"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-800/50",children:u.map((p,f)=>{const x=e[p.key],b=t[p.key],g=a(x,b),v=f>0?e[u[f-1].key]:x,y=h(x,v),w=f>0?100-y:0;return s.jsxs("tr",{className:"hover:bg-gray-800/30 transition-colors group",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-gray-800/50 rounded-lg group-hover:scale-110 transition-transform duration-200",children:s.jsx(p.icon,{className:`h-5 w-5 ${p.color}`})}),s.jsx("span",{className:"font-medium text-white group-hover:text-gray-100 transition-colors",children:p.label})]})}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("span",{className:"text-lg font-bold text-white",children:p.isCurrency?l(x):x.toLocaleString()})}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("span",{className:"text-gray-400",children:p.isCurrency?l(b):b.toLocaleString()})}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[i(g),s.jsx("span",{className:`font-medium ${c(g)}`,children:o(g)})]})}),s.jsx("td",{className:"px-6 py-4 text-center",children:f>0&&!p.isCurrency?s.jsxs("span",{className:"text-emerald-400 font-medium",children:[y.toFixed(1),"%"]}):s.jsx("span",{className:"text-gray-500",children:"-"})}),s.jsx("td",{className:"px-6 py-4 text-center",children:f>0&&!p.isCurrency?s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsxs("span",{className:`font-medium ${w>50?"text-red-400":w>25?"text-yellow-400":"text-green-400"}`,children:[w.toFixed(1),"%"]}),s.jsx("div",{className:"w-16 bg-gray-700 rounded-full h-2",children:s.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${w>50?"bg-red-400":w>25?"bg-yellow-400":"bg-green-400"}`,style:{width:`${Math.min(w,100)}%`}})})]}):s.jsx("span",{className:"text-gray-500",children:"-"})})]},p.key)})})]})})]})},QC=({currentMetrics:e,previousMetrics:t})=>{const r=l=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(l),n=()=>e.contractSigned>0?"Closing":e.negotiation>0?"Negotiation":e.proposalSent>0?"Proposal":"Discovery",a=()=>{const l=e.proposalSent>e.negotiation,o=e.negotiation>e.contractSigned;return l&&o?"Negotiation":l?"Proposal Follow-up":o?"Closing":"Lead Generation"};return s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"glass-card p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[s.jsx(lr,{className:"h-5 w-5 mr-2 text-emerald-400"}),"Pipeline Velocity Insights"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-800/30 rounded-lg",children:[s.jsx("span",{className:"text-gray-300",children:"Deal to Close Rate"}),s.jsxs("span",{className:"text-white font-semibold",children:[e.totalDeals>0?(e.contractSigned/e.totalDeals*100).toFixed(1):0,"%"]})]}),s.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-800/30 rounded-lg",children:[s.jsx("span",{className:"text-gray-300",children:"Average Deal Size"}),s.jsx("span",{className:"text-white font-semibold",children:r(e.averageDealSize)})]}),s.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-800/30 rounded-lg",children:[s.jsx("span",{className:"text-gray-300",children:"Pipeline Efficiency"}),s.jsxs("span",{className:"text-white font-semibold",children:[e.totalValue>0?(e.weightedValue/e.totalValue*100).toFixed(1):0,"%"]})]}),s.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-800/30 rounded-lg",children:[s.jsx("span",{className:"text-gray-300",children:"Win/Loss Ratio"}),s.jsxs("span",{className:"text-green-400 font-semibold",children:[e.lostValue>0?(e.wonValue/e.lostValue).toFixed(2):"",":1"]})]})]})]}),s.jsxs("div",{className:"glass-card p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[s.jsx(Ie,{className:"h-5 w-5 mr-2 text-emerald-400"}),"Performance Summary"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"p-4 bg-gradient-to-r from-green-900/30 to-emerald-900/30 border border-green-500/30 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-green-400 font-medium",children:"Top Performing Stage"}),s.jsx("span",{className:"text-white font-semibold",children:n()})]}),s.jsx("p",{className:"text-sm text-gray-300 mt-1",children:"Highest conversion rate in the pipeline"})]}),s.jsxs("div",{className:"p-4 bg-gradient-to-r from-yellow-900/30 to-orange-900/30 border border-yellow-500/30 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-yellow-400 font-medium",children:"Needs Attention"}),s.jsx("span",{className:"text-white font-semibold",children:a()})]}),s.jsx("p",{className:"text-sm text-gray-300 mt-1",children:"Stage with highest drop-off rate"})]}),s.jsxs("div",{className:"p-4 bg-gradient-to-r from-blue-900/30 to-cyan-900/30 border border-blue-500/30 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-blue-400 font-medium",children:"Pipeline Health"}),s.jsx("span",{className:"text-white font-semibold",children:e.conversionRate>20?"Excellent":e.conversionRate>10?"Good":e.conversionRate>5?"Fair":"Needs Improvement"})]}),s.jsx("p",{className:"text-sm text-gray-300 mt-1",children:"Overall pipeline performance rating"})]}),s.jsxs("div",{className:"p-4 bg-gradient-to-r from-purple-900/30 to-indigo-900/30 border border-purple-500/30 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-purple-400 font-medium",children:"Revenue Forecast"}),s.jsx("span",{className:"text-white font-semibold",children:r(e.weightedValue)})]}),s.jsx("p",{className:"text-sm text-gray-300 mt-1",children:"Probability-weighted pipeline value"})]})]})]})]})},YC=()=>{var b;const{deals:e,loading:t,error:r,fetchDeals:n}=pi(),[a,l]=j.useState(null),[o,i]=j.useState("thisMonth"),[c,h]=j.useState(new Date),u=[{key:"today",label:"Today",previousLabel:"Yesterday"},{key:"thisWeek",label:"This Week",previousLabel:"Last Week"},{key:"thisMonth",label:"This Month",previousLabel:"Last Month"},{key:"last30Days",label:"Last 30 Days",previousLabel:"Previous 30 Days"},{key:"thisQuarter",label:"This Quarter",previousLabel:"Last Quarter"},{key:"allTime",label:"All Time",previousLabel:"N/A"}],d=async()=>{try{await n(),h(new Date)}catch(g){console.error("Error fetching metrics:",g)}},m=g=>{const v=new Date,y=new Date;y.setHours(0,0,0,0);const w=new Date(y);w.setDate(w.getDate()+1);const N=new Date(y);N.setDate(N.getDate()-1);const k=new Date(y.getTime()-y.getDay()*24*60*60*1e3),D=new Date(k.getTime()-7*24*60*60*1e3),C=new Date(k.getTime()-1),_=new Date(v.getFullYear(),v.getMonth(),1),S=new Date(v.getFullYear(),v.getMonth()-1,1),O=new Date(_.getTime()-1),E=new Date(v.getTime()-30*24*60*60*1e3),I=new Date(E.getTime()-30*24*60*60*1e3),z=new Date(E.getTime()-1),te=new Date(v.getFullYear(),Math.floor(v.getMonth()/3)*3,1),se=new Date(te.getFullYear(),te.getMonth()-3,1),de=new Date(te.getTime()-1),$=F=>{const A=F.length,T=F.filter(U=>U.stage==="new_opportunity").length,W=F.filter(U=>U.stage==="discovery_call_scheduled").length,Z=F.filter(U=>U.stage==="discovery_call_completed").length,P=F.filter(U=>U.stage==="proposal_preparation").length,Q=F.filter(U=>U.stage==="proposal_sent").length,ue=F.filter(U=>U.stage==="proposal_review").length,ve=F.filter(U=>U.stage==="negotiation").length,L=F.filter(U=>U.stage==="contract_sent").length,Y=F.filter(U=>U.stage==="contract_signed").length,ae=F.filter(U=>U.stage==="project_kickoff").length,q=F.filter(U=>U.stage==="on_hold").length,re=F.filter(U=>U.stage==="lost").length,pe=F.reduce((U,ie)=>U+ie.deal_value,0),$e=F.reduce((U,ie)=>U+ie.deal_value*ie.probability/100,0),vr=F.filter(U=>U.stage==="contract_signed").reduce((U,ie)=>U+ie.deal_value,0),Ve=F.filter(U=>U.stage==="lost").reduce((U,ie)=>U+ie.deal_value,0),kt=A>0?pe/A:0,B=45,X=A>0?Y/A*100:0;return{totalDeals:A,newOpportunities:T,discoveryScheduled:W,discoveryCompleted:Z,proposalPrep:P,proposalSent:Q,proposalReview:ue,negotiation:ve,contractSent:L,contractSigned:Y,projectKickoff:ae,onHold:q,lost:re,totalValue:pe,weightedValue:$e,wonValue:vr,lostValue:Ve,averageDealSize:kt,averageSalesCycle:B,conversionRate:X}},G=(F,A,T)=>F.filter(W=>{const Z=new Date(W.created_at);return T?Z>=A&&Z<=T:Z>=A}),R=G(g,y,w),M=G(g,N,y);return console.log("Date filtering debug:",{today:y.toISOString(),tomorrow:w.toISOString(),yesterday:N.toISOString(),totalDeals:g.length,todayDeals:R.length,yesterdayDeals:M.length}),{today:{current:$(R),previous:$(M)},thisWeek:{current:$(G(g,k)),previous:$(G(g,D,C))},thisMonth:{current:$(G(g,_)),previous:$(G(g,S,O))},last30Days:{current:$(G(g,E)),previous:$(G(g,I,z))},thisQuarter:{current:$(G(g,te)),previous:$(G(g,se,de))},allTime:{current:$(g),previous:{totalDeals:0,newOpportunities:0,discoveryScheduled:0,discoveryCompleted:0,proposalPrep:0,proposalSent:0,proposalReview:0,negotiation:0,contractSent:0,contractSigned:0,projectKickoff:0,onHold:0,lost:0,totalValue:0,weightedValue:0,wonValue:0,lostValue:0,averageDealSize:0,averageSalesCycle:0,conversionRate:0}}}},p=g=>({neuronData:{nodes:[{id:"total",value:g.totalDeals,label:"Total Deals",color:"#3b82f6",connections:["discovery","proposal"]},{id:"discovery",value:g.discoveryScheduled+g.discoveryCompleted,label:"Discovery",color:"#f59e0b",connections:["proposal","negotiation"]},{id:"proposal",value:g.proposalSent+g.proposalReview,label:"Proposal",color:"#8b5cf6",connections:["negotiation","contract"]},{id:"negotiation",value:g.negotiation,label:"Negotiation",color:"#ec4899",connections:["contract"]},{id:"contract",value:g.contractSent+g.contractSigned,label:"Contract",color:"#6366f1",connections:["won"]},{id:"won",value:g.contractSigned,label:"Won",color:"#10b981",connections:[]}]},spiderData:[{label:"Pipeline Volume",value:g.totalDeals,maxValue:Math.max(g.totalDeals,50),color:"#3b82f6"},{label:"Discovery Rate",value:g.discoveryCompleted,maxValue:g.totalDeals||1,color:"#f59e0b"},{label:"Proposal Rate",value:g.proposalSent,maxValue:g.totalDeals||1,color:"#8b5cf6"},{label:"Close Rate",value:g.contractSigned,maxValue:g.totalDeals||1,color:"#10b981"},{label:"Deal Value",value:g.totalValue,maxValue:Math.max(g.totalValue,1e5),color:"#dc2626"},{label:"Win Rate",value:g.conversionRate,maxValue:100,color:"#16a34a"}],funnelData:[{id:"total",label:"Total Deals",value:g.totalDeals,color:"#3b82f6"},{id:"discovery",label:"Discovery",value:g.discoveryScheduled+g.discoveryCompleted,color:"#f59e0b"},{id:"proposal",label:"Proposal",value:g.proposalSent+g.proposalReview,color:"#8b5cf6"},{id:"negotiation",label:"Negotiation",value:g.negotiation,color:"#ec4899"},{id:"contract",label:"Contract",value:g.contractSent,color:"#6366f1"},{id:"won",label:"Closed Won",value:g.contractSigned,color:"#10b981"}]});if(j.useEffect(()=>{n()},[]),j.useEffect(()=>{if(e.length>0){const g=m(e);l(g)}},[e]),t)return s.jsx("div",{className:"flex items-center justify-center p-8",children:s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-emerald-400/30 border-t-emerald-400"}),s.jsx("div",{className:"absolute inset-0 rounded-full bg-emerald-400/10 animate-pulse"})]})});if(r||!a)return s.jsxs("div",{className:"space-y-6",children:[s.jsx(Dc,{lastUpdated:c,loading:t,onRefresh:d}),s.jsxs("div",{className:"glass-card p-8 text-center",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-300 mb-4",children:"Error Loading Sales Metrics"}),s.jsx("p",{className:"text-gray-400 mb-4",children:r||"Unable to load sales metrics data."}),!1,s.jsx("button",{onClick:d,className:"px-6 py-2 bg-gradient-to-r from-emerald-400 to-green-600 hover:from-emerald-500 hover:to-green-700 text-white font-medium rounded-lg transition-all duration-200",children:"Retry"})]})]});const f=a[o].current,x=a[o].previous;return!f||f.totalDeals===void 0?s.jsxs("div",{className:"space-y-6",children:[s.jsx(Dc,{lastUpdated:c,loading:t,onRefresh:d}),s.jsxs("div",{className:"glass-card p-8 text-center",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-300 mb-4",children:"No Data Available"}),s.jsxs("p",{className:"text-gray-400 mb-4",children:["No deals found for the selected time period: ",(b=u.find(g=>g.key===o))==null?void 0:b.label]}),s.jsx("button",{onClick:()=>i("allTime"),className:"px-6 py-2 bg-gradient-to-r from-emerald-400 to-green-600 hover:from-emerald-500 hover:to-green-700 text-white font-medium rounded-lg transition-all duration-200",children:"View All Time"})]})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsx(Dc,{lastUpdated:c,loading:t,onRefresh:d}),s.jsx("div",{className:"glass-card p-6",children:s.jsx("div",{className:"flex flex-wrap gap-2",children:u.map(g=>s.jsx("button",{onClick:()=>i(g.key),className:`
                px-4 py-2 rounded-lg font-medium transition-all duration-200 hover:scale-105
                ${o===g.key?"bg-gradient-to-r from-emerald-400 to-green-600 text-white shadow-lg shadow-emerald-500/25":"bg-gray-800/50 text-gray-300 hover:bg-gray-700/50 hover:text-white"}
              `,children:g.label},g.key))})}),s.jsx(HC,{currentMetrics:f,previousMetrics:x}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Yt,{className:"h-6 w-6 text-emerald-400"}),s.jsx("h2",{className:"text-2xl font-bold gradient-text section-gradient-sales",children:"Advanced Sales Analytics"})]}),s.jsx(eh,{data:p(f)})]}),s.jsx(KC,{currentMetrics:f,previousMetrics:x,selectedPeriod:o,periods:u}),s.jsx(QC,{currentMetrics:f,previousMetrics:x})]})};class JC{constructor(){this.webhookUrl=void 0,this.retryAttempts=3,this.retryDelay=1e3}async sendSetterReportSubmission(t,r){try{const n=t.calls_expected>0?t.calls_made/t.calls_expected*100:0,a=t.calls_made>0?(t.calls_made-t.calls_not_qualified)/t.calls_made*100:0,l=t.calls_made>0?t.sales_appointments_booked/t.calls_made*100:0,o=t.calls_made+t.linkedin_connections+t.loom_explanations_sent,i={report:{id:t.id,setter_name:t.setter_name,setter_role:t.setter_role,new_leads_received:t.new_leads_received,calls_expected:t.calls_expected,calls_made:t.calls_made,cancelled_appointments:t.cancelled_appointments,calls_not_qualified:t.calls_not_qualified,linkedin_connections:t.linkedin_connections,loom_explanations_sent:t.loom_explanations_sent,sales_appointments_booked:t.sales_appointments_booked,notes:t.notes,report_date:t.report_date,created_at:t.created_at,call_completion_rate:Math.round(n*100)/100,qualification_rate:Math.round(a*100)/100,booking_rate:Math.round(l*100)/100,total_activities:o},user:{id:r.id,email:r.email,full_name:r.full_name,role:r.role,phone:r.phone,job_title:r.job_title},metadata:{timestamp:new Date().toISOString(),source:"vertical_systems_crm",version:"1.0",environment:"production",action:"setter_report_submitted"}};await this.sendWithRetry(i),console.log("Setter report webhook sent successfully:",{reportId:t.id,setterName:t.setter_name,timestamp:i.metadata.timestamp})}catch(n){console.error("Failed to send setter report webhook:",n),this.logFailedWebhook(t,r,n)}}async sendWithRetry(t,r=1){try{const n=await fetch(this.webhookUrl,{method:"POST",headers:{"Content-Type":"application/json","User-Agent":"VerticalSystems-CRM/1.0"},body:JSON.stringify(t)});if(!n.ok)throw new Error(`Webhook failed with status: ${n.status} ${n.statusText}`);const a=await n.text();console.log("Setter report webhook response:",a)}catch(n){if(console.error(`Setter report webhook attempt ${r} failed:`,n),r<this.retryAttempts)return await new Promise(a=>setTimeout(a,this.retryDelay*r)),this.sendWithRetry(t,r+1);throw n}}logFailedWebhook(t,r,n){console.error("Failed setter report webhook logged:",{reportId:t.id,setterName:t.setter_name,userEmail:r.email,timestamp:new Date().toISOString(),error:n.message})}}const XC=new JC,ZC=()=>{const[e,t]=j.useState([]),[r,n]=j.useState(!1),[a,l]=j.useState(null);return{reports:e,loading:r,error:a,fetchReports:async d=>{n(!0),l(null);try{let m=K.from("setter_reports").select(`
          *,
          submitter:submitted_by(id, email, full_name, role)
        `).order("created_at",{ascending:!1});if(d){const x=new Date;let b;switch(d){case"today":b=new Date(x.getFullYear(),x.getMonth(),x.getDate()),m=m.gte("report_date",b.toISOString().split("T")[0]);break;case"this_week":b=new Date(x.getTime()-x.getDay()*24*60*60*1e3),m=m.gte("report_date",b.toISOString().split("T")[0]);break;case"this_month":b=new Date(x.getFullYear(),x.getMonth(),1),m=m.gte("report_date",b.toISOString().split("T")[0]);break}}const{data:p,error:f}=await m;if(f)throw f;t(p||[])}catch(m){console.error("Error fetching setter reports:",m),l(m.message)}finally{n(!1)}},createReport:async d=>{try{const{data:m,error:p}=await K.from("users").select("id, email, full_name, role, phone, job_title").eq("id",d.submitted_by).single();p&&console.warn("Could not fetch user data for webhook:",p);const{data:f,error:x}=await K.from("setter_reports").insert(d).select(`
          *,
          submitter:submitted_by(id, email, full_name, role)
        `).single();if(x)throw x;if(m)try{await XC.sendSetterReportSubmission(f,m)}catch(b){console.error("Webhook failed, but report was saved:",b)}return t(b=>[f,...b]),{data:f,error:null}}catch(m){return console.error("Error creating setter report:",m),{data:null,error:m}}},updateReport:async(d,m)=>{try{const{data:p,error:f}=await K.from("setter_reports").update({...m,updated_at:new Date().toISOString()}).eq("id",d).select(`
          *,
          submitter:submitted_by(id, email, full_name, role)
        `).single();if(f)throw f;return t(x=>x.map(b=>b.id===d?p:b)),{data:p,error:null}}catch(p){return console.error("Error updating setter report:",p),{data:null,error:p}}},deleteReport:async d=>{try{const{error:m}=await K.from("setter_reports").delete().eq("id",d);if(m)throw m;return t(p=>p.filter(f=>f.id!==d)),{error:null}}catch(m){return console.error("Error deleting setter report:",m),{error:m}}},fetchDailySummary:async()=>{try{const{data:d,error:m}=await K.from("daily_setter_summary").select("*").order("report_date",{ascending:!1}).limit(30);if(m)throw m;return d||[]}catch(d){return console.error("Error fetching daily summary:",d),[]}}}},e3=({isOpen:e,onClose:t,onSave:r,loading:n=!1})=>{var m;const{user:a}=Oe(),[l,o]=j.useState({setter_name:((m=a==null?void 0:a.user_metadata)==null?void 0:m.full_name)||"",setter_role:"",new_leads_received:0,calls_expected:0,calls_made:0,cancelled_appointments:0,calls_not_qualified:0,linkedin_connections:0,loom_explanations_sent:0,sales_appointments_booked:0,notes:""}),i=p=>{const{name:f,value:x,type:b}=p.target;o(g=>({...g,[f]:b==="number"?parseInt(x)||0:x}))},c=p=>{p.preventDefault(),r(l)},h=()=>{var p;o({setter_name:((p=a==null?void 0:a.user_metadata)==null?void 0:p.full_name)||"",setter_role:"",new_leads_received:0,calls_expected:0,calls_made:0,cancelled_appointments:0,calls_not_qualified:0,linkedin_connections:0,loom_explanations_sent:0,sales_appointments_booked:0,notes:""})},u=()=>{h(),t()};if(!e)return null;const d=["Lead Generation Specialist","Appointment Setter","Sales Development Representative","Business Development Representative","Inside Sales Representative","Outbound Sales Specialist","Other"];return s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"glass-card w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-700",children:[s.jsx("h2",{className:"text-xl font-semibold gradient-text section-gradient-sales",children:"Submit Setter Report"}),s.jsx("button",{onClick:u,className:"text-gray-400 hover:text-white transition-colors",children:s.jsx(cr,{className:"h-6 w-6"})})]}),s.jsxs("form",{onSubmit:c,className:"p-6 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Your Name *"}),s.jsxs("div",{className:"relative",children:[s.jsx(Fe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"text",name:"setter_name",value:l.setter_name,onChange:i,className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent text-white placeholder-gray-400",placeholder:"Enter your full name",required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Your Role *"}),s.jsxs("div",{className:"relative",children:[s.jsx(el,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsxs("select",{name:"setter_role",value:l.setter_role,onChange:i,className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent text-white",required:!0,children:[s.jsx("option",{value:"",children:"Select your role..."}),d.map(p=>s.jsx("option",{value:p,children:p},p))]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"New Leads Received"}),s.jsxs("div",{className:"relative",children:[s.jsx(bt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"number",name:"new_leads_received",value:l.new_leads_received,onChange:i,min:"0",className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent text-white placeholder-gray-400",placeholder:"0"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Number of Calls Expected"}),s.jsxs("div",{className:"relative",children:[s.jsx(ye,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"number",name:"calls_expected",value:l.calls_expected,onChange:i,min:"0",className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent text-white placeholder-gray-400",placeholder:"0"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Number of Calls Made"}),s.jsxs("div",{className:"relative",children:[s.jsx(_t,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"number",name:"calls_made",value:l.calls_made,onChange:i,min:"0",className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent text-white placeholder-gray-400",placeholder:"0"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Number of Cancelled Appointments"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ne,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"number",name:"cancelled_appointments",value:l.cancelled_appointments,onChange:i,min:"0",className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent text-white placeholder-gray-400",placeholder:"0"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Call/Person NOT Qualified"}),s.jsxs("div",{className:"relative",children:[s.jsx(cr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"number",name:"calls_not_qualified",value:l.calls_not_qualified,onChange:i,min:"0",className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent text-white placeholder-gray-400",placeholder:"0"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"LinkedIn Connections"}),s.jsxs("div",{className:"relative",children:[s.jsx(lx,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"number",name:"linkedin_connections",value:l.linkedin_connections,onChange:i,min:"0",className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent text-white placeholder-gray-400",placeholder:"0"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Number of Loom Value/Explanation Sent"}),s.jsxs("div",{className:"relative",children:[s.jsx(M1,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"number",name:"loom_explanations_sent",value:l.loom_explanations_sent,onChange:i,min:"0",className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent text-white placeholder-gray-400",placeholder:"0"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Number of Sales Appointments Booked"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ne,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"number",name:"sales_appointments_booked",value:l.sales_appointments_booked,onChange:i,min:"0",className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent text-white placeholder-gray-400",placeholder:"0"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Notes (how was your day?)"}),s.jsx("textarea",{name:"notes",value:l.notes,onChange:i,rows:4,className:"w-full px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent text-white placeholder-gray-400 resize-none",placeholder:"Share how your day went, any challenges, wins, or observations..."})]}),s.jsxs("div",{className:"p-4 bg-gradient-to-r from-orange-900/20 to-yellow-900/20 border border-orange-500/30 rounded-lg",children:[s.jsx("h3",{className:"font-semibold text-orange-400 mb-3",children:"Performance Summary"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400",children:"Call Completion:"}),s.jsx("p",{className:"text-white font-semibold",children:l.calls_expected>0?`${Math.round(l.calls_made/l.calls_expected*100)}%`:"0%"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400",children:"Qualification Rate:"}),s.jsx("p",{className:"text-white font-semibold",children:l.calls_made>0?`${Math.round((l.calls_made-l.calls_not_qualified)/l.calls_made*100)}%`:"0%"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400",children:"Booking Rate:"}),s.jsx("p",{className:"text-white font-semibold",children:l.calls_made>0?`${Math.round(l.sales_appointments_booked/l.calls_made*100)}%`:"0%"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400",children:"Total Activities:"}),s.jsx("p",{className:"text-white font-semibold",children:l.calls_made+l.linkedin_connections+l.loom_explanations_sent})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t border-gray-700",children:[s.jsx("button",{type:"button",onClick:u,className:"px-6 py-2 text-gray-400 hover:text-white transition-colors",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:n,className:"flex items-center space-x-2 px-6 py-2 bg-gradient-to-r from-orange-400 to-yellow-600 hover:from-orange-500 hover:to-yellow-700 text-white font-medium rounded-lg transition-all duration-200 disabled:opacity-50",children:n?s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):s.jsxs(s.Fragment,{children:[s.jsx($s,{className:"h-5 w-5"}),s.jsx("span",{children:"Submit Setter Report"})]})})]})]})]})})},t3=()=>{const{user:e}=Oe(),{reports:t,loading:r,error:n,fetchReports:a,createReport:l,fetchDailySummary:o}=ZC(),[i,c]=j.useState(!1),[h,u]=j.useState([]),[d,m]=j.useState("today"),[p,f]=j.useState(1),[x]=j.useState(10),[b,g]=j.useState(new Date);j.useEffect(()=>{v()},[d]);const v=async()=>{await a(d);const E=await o();u(E),g(new Date)},y=async E=>{try{const I=await l({...E,submitted_by:(e==null?void 0:e.id)||"",report_date:new Date().toISOString().split("T")[0]});if(I.error){console.error("Error creating report:",I.error);return}c(!1),v()}catch(I){console.error("Error saving report:",I)}},w=()=>{v()},k=t.filter(E=>{const I=new Date(E.report_date),z=new Date;return I.toDateString()===z.toDateString()}).reduce((E,I)=>({totalReports:E.totalReports+1,totalLeads:E.totalLeads+I.new_leads_received,totalCalls:E.totalCalls+I.calls_made,totalAppointments:E.totalAppointments+I.sales_appointments_booked,totalLinkedInConnections:E.totalLinkedInConnections+I.linkedin_connections,totalLoomsSent:E.totalLoomsSent+I.loom_explanations_sent}),{totalReports:0,totalLeads:0,totalCalls:0,totalAppointments:0,totalLinkedInConnections:0,totalLoomsSent:0}),D=Math.ceil(t.length/x),C=(p-1)*x,_=t.slice(C,C+x),S=E=>new Date(E).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),O=E=>new Date(E).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"});return r&&t.length===0?s.jsx("div",{className:"flex items-center justify-center p-8",children:s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-orange-400/30 border-t-orange-400"}),s.jsx("div",{className:"absolute inset-0 rounded-full bg-orange-400/10 animate-pulse"})]})}):s.jsx(dr,{section:"sales",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"space-y-2",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-gradient-to-br from-orange-400/20 to-yellow-600/20 rounded-xl",children:s.jsx(Ie,{className:"h-8 w-8 text-orange-400"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold gradient-text section-gradient-sales",children:"Setter Reports"}),s.jsx("p",{className:"text-gray-400 mt-1",children:"Track daily performance and appointment setting activities."})]})]})}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm text-gray-400",children:"Last Updated"}),s.jsx("p",{className:"text-sm font-semibold text-white",children:b.toLocaleTimeString()})]}),s.jsxs("button",{onClick:w,disabled:r,className:"flex items-center space-x-2 px-4 py-2 bg-gray-800 hover:bg-gray-700 text-white rounded-lg transition-all duration-200 hover:scale-105",children:[s.jsx(xr,{className:`h-4 w-4 ${r?"animate-spin":""}`}),s.jsx("span",{children:"Refresh"})]}),s.jsxs("button",{onClick:()=>c(!0),className:"group flex items-center space-x-2 px-6 py-3 bg-gradient-to-r from-orange-400 to-yellow-600 hover:from-orange-500 hover:to-yellow-700 text-white font-semibold rounded-xl transition-all duration-300 hover:scale-105 hover:shadow-xl hover:shadow-orange-500/25",children:[s.jsx(St,{className:"h-5 w-5 group-hover:rotate-90 transition-transform duration-300"}),s.jsx("span",{children:"Submit Report"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-6",children:[s.jsx("div",{className:"glass-card p-6 hover:bg-gray-800/60 transition-all duration-300 group hover:scale-105 hover:shadow-xl hover:shadow-orange-500/10",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors",children:"Reports Today"}),s.jsx("p",{className:"text-3xl font-bold text-white mt-1",children:k.totalReports}),s.jsxs("p",{className:"text-xs text-orange-400 mt-1 flex items-center",children:[s.jsx(bt,{className:"h-3 w-3 mr-1"}),"Team submissions"]})]}),s.jsx("div",{className:"p-3 bg-gradient-to-br from-orange-400/20 to-yellow-600/20 rounded-xl group-hover:scale-110 transition-transform duration-300",children:s.jsx(Ie,{className:"h-8 w-8 text-orange-400"})})]})}),s.jsx("div",{className:"glass-card p-6 hover:bg-gray-800/60 transition-all duration-300 group hover:scale-105 hover:shadow-xl hover:shadow-blue-500/10",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors",children:"New Leads"}),s.jsx("p",{className:"text-3xl font-bold text-white mt-1",children:k.totalLeads}),s.jsxs("p",{className:"text-xs text-blue-400 mt-1 flex items-center",children:[s.jsx(Yt,{className:"h-3 w-3 mr-1"}),"Fresh prospects"]})]}),s.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-400/20 to-blue-600/20 rounded-xl group-hover:scale-110 transition-transform duration-300",children:s.jsx(bt,{className:"h-8 w-8 text-blue-400"})})]})}),s.jsx("div",{className:"glass-card p-6 hover:bg-gray-800/60 transition-all duration-300 group hover:scale-105 hover:shadow-xl hover:shadow-green-500/10",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors",children:"Calls Made"}),s.jsx("p",{className:"text-3xl font-bold text-white mt-1",children:k.totalCalls}),s.jsxs("p",{className:"text-xs text-green-400 mt-1 flex items-center",children:[s.jsx(_t,{className:"h-3 w-3 mr-1"}),"Outreach activity"]})]}),s.jsx("div",{className:"p-3 bg-gradient-to-br from-green-400/20 to-green-600/20 rounded-xl group-hover:scale-110 transition-transform duration-300",children:s.jsx(_t,{className:"h-8 w-8 text-green-400"})})]})}),s.jsx("div",{className:"glass-card p-6 hover:bg-gray-800/60 transition-all duration-300 group hover:scale-105 hover:shadow-xl hover:shadow-purple-500/10",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors",children:"Appointments"}),s.jsx("p",{className:"text-3xl font-bold text-white mt-1",children:k.totalAppointments}),s.jsxs("p",{className:"text-xs text-purple-400 mt-1 flex items-center",children:[s.jsx(Ne,{className:"h-3 w-3 mr-1"}),"Booked today"]})]}),s.jsx("div",{className:"p-3 bg-gradient-to-br from-purple-400/20 to-purple-600/20 rounded-xl group-hover:scale-110 transition-transform duration-300",children:s.jsx(Ne,{className:"h-8 w-8 text-purple-400"})})]})}),s.jsx("div",{className:"glass-card p-6 hover:bg-gray-800/60 transition-all duration-300 group hover:scale-105 hover:shadow-xl hover:shadow-cyan-500/10",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors",children:"LinkedIn"}),s.jsx("p",{className:"text-3xl font-bold text-white mt-1",children:k.totalLinkedInConnections}),s.jsxs("p",{className:"text-xs text-cyan-400 mt-1 flex items-center",children:[s.jsx(bt,{className:"h-3 w-3 mr-1"}),"Connections"]})]}),s.jsx("div",{className:"p-3 bg-gradient-to-br from-cyan-400/20 to-cyan-600/20 rounded-xl group-hover:scale-110 transition-transform duration-300",children:s.jsx(bt,{className:"h-8 w-8 text-cyan-400"})})]})}),s.jsx("div",{className:"glass-card p-6 hover:bg-gray-800/60 transition-all duration-300 group hover:scale-105 hover:shadow-xl hover:shadow-yellow-500/10",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors",children:"Looms Sent"}),s.jsx("p",{className:"text-3xl font-bold text-white mt-1",children:k.totalLoomsSent}),s.jsxs("p",{className:"text-xs text-yellow-400 mt-1 flex items-center",children:[s.jsx(ye,{className:"h-3 w-3 mr-1"}),"Video explanations"]})]}),s.jsx("div",{className:"p-3 bg-gradient-to-br from-yellow-400/20 to-yellow-600/20 rounded-xl group-hover:scale-110 transition-transform duration-300",children:s.jsx(ye,{className:"h-8 w-8 text-yellow-400"})})]})})]}),s.jsx("div",{className:"glass-card p-6",children:s.jsx("div",{className:"flex flex-wrap gap-2",children:[{key:"today",label:"Today"},{key:"this_week",label:"This Week"},{key:"this_month",label:"This Month"}].map(E=>s.jsx("button",{onClick:()=>m(E.key),className:`
                  px-4 py-2 rounded-lg font-medium transition-all duration-200 hover:scale-105
                  ${d===E.key?"bg-gradient-to-r from-orange-400 to-yellow-600 text-white shadow-lg shadow-orange-500/25":"bg-gray-800/50 text-gray-300 hover:bg-gray-700/50 hover:text-white"}
                `,children:E.label},E.key))})}),n&&s.jsx("div",{className:"p-4 bg-red-900/20 border border-red-500/30 rounded-lg animate-pulse",children:s.jsx("p",{className:"text-red-400 text-sm",children:n})}),s.jsxs("div",{className:"glass-card overflow-hidden hover:bg-gray-800/30 transition-all duration-300",children:[s.jsx("div",{className:"p-6 border-b border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h2",{className:"text-xl font-semibold gradient-text section-gradient-sales",children:["Setter Reports - ",d.replace("_"," ").replace(/\b\w/g,E=>E.toUpperCase())]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("span",{className:"text-sm text-gray-400",children:[t.length," report",t.length!==1?"s":""]}),s.jsxs("button",{className:"flex items-center space-x-2 px-3 py-1 bg-gray-800 hover:bg-gray-700 text-white rounded-lg transition-colors",children:[s.jsx(rl,{className:"h-4 w-4"}),s.jsx("span",{children:"Export"})]})]})]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-800/60 backdrop-blur-sm",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Setter"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Role"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Leads"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Calls"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Appointments"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"LinkedIn"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Looms"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Date"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-800/50",children:_.map(E=>{var I;return s.jsxs("tr",{className:"hover:bg-gray-800/40 transition-all duration-300 group hover:shadow-lg hover:shadow-gray-900/20",children:[s.jsx("td",{className:"px-6 py-5",children:s.jsxs("div",{className:"group-hover:scale-105 transition-transform duration-200",children:[s.jsx("div",{className:"font-semibold text-white group-hover:text-orange-100 transition-colors",children:E.setter_name}),s.jsx("div",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors",children:(I=E.submitter)==null?void 0:I.email})]})}),s.jsx("td",{className:"px-6 py-5 text-gray-300 group-hover:text-white transition-colors",children:E.setter_role}),s.jsx("td",{className:"px-6 py-5",children:s.jsx("span",{className:"text-blue-400 font-semibold",children:E.new_leads_received})}),s.jsx("td",{className:"px-6 py-5",children:s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"text-white font-semibold",children:[E.calls_made,"/",E.calls_expected]}),s.jsxs("div",{className:"text-xs text-green-400",children:[E.calls_expected>0?`${Math.round(E.calls_made/E.calls_expected*100)}%`:"0%"," completion"]})]})}),s.jsx("td",{className:"px-6 py-5",children:s.jsx("span",{className:"text-purple-400 font-semibold",children:E.sales_appointments_booked})}),s.jsx("td",{className:"px-6 py-5",children:s.jsx("span",{className:"text-cyan-400 font-semibold",children:E.linkedin_connections})}),s.jsx("td",{className:"px-6 py-5",children:s.jsx("span",{className:"text-yellow-400 font-semibold",children:E.loom_explanations_sent})}),s.jsx("td",{className:"px-6 py-5",children:s.jsxs("div",{className:"text-gray-400 text-sm group-hover:text-gray-300 transition-colors",children:[s.jsx("div",{children:S(E.report_date)}),s.jsx("div",{className:"text-xs",children:O(E.created_at)})]})}),s.jsx("td",{className:"px-6 py-5",children:s.jsx("div",{className:"flex items-center space-x-2",children:s.jsx("button",{className:"text-gray-400 hover:text-orange-400 transition-all duration-200 hover:scale-110 p-2 rounded-lg hover:bg-gray-700/50",title:"View details",children:s.jsx(Is,{className:"h-4 w-4"})})})})]},E.id)})})]})}),D>1&&s.jsxs("div",{className:"px-6 py-4 border-t border-gray-800/50 flex items-center justify-between bg-gray-800/20",children:[s.jsxs("div",{className:"text-sm text-gray-400",children:["Showing ",s.jsx("span",{className:"font-semibold text-white",children:C+1})," to"," ",s.jsx("span",{className:"font-semibold text-white",children:Math.min(C+x,t.length)})," of"," ",s.jsx("span",{className:"font-semibold text-white",children:t.length})," reports"]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("button",{onClick:()=>f(E=>Math.max(E-1,1)),disabled:p===1,className:"p-2 text-gray-400 hover:text-white disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 hover:scale-110 hover:bg-gray-700/50 rounded-lg",children:s.jsx(Or,{className:"h-5 w-5"})}),s.jsxs("span",{className:"text-sm text-gray-300 px-3 py-1 bg-gray-700/50 rounded-lg",children:["Page ",s.jsx("span",{className:"font-semibold text-white",children:p})," of"," ",s.jsx("span",{className:"font-semibold text-white",children:D})]}),s.jsx("button",{onClick:()=>f(E=>Math.min(E+1,D)),disabled:p===D,className:"p-2 text-gray-400 hover:text-white disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 hover:scale-110 hover:bg-gray-700/50 rounded-lg",children:s.jsx(ir,{className:"h-5 w-5"})})]})]})]}),s.jsx(e3,{isOpen:i,onClose:()=>c(!1),onSave:y,loading:r})]})})};class r3{constructor(){this.webhookUrl="https://hook.eu2.make.com/9uhnaxxnsh5qrrab4pay9nghyuzds8m2",this.retryAttempts=3,this.retryDelay=1e3}async sendCloserReportSubmission(t,r){try{const n=t.total_calls_scheduled>0?t.calls_completed/t.total_calls_scheduled*100:0,a=t.revenue_generated>0?t.cash_collected/t.revenue_generated*100:0,l=t.sales_team_meetings+t.leadership_meetings+t.training_sessions,o=t.revenue_generated-t.cash_collected,i={report:{id:t.id,closer_name:t.closer_name,closer_role:t.closer_role,total_calls_scheduled:t.total_calls_scheduled,calls_completed:t.calls_completed,follow_up_calls_scheduled:t.follow_up_calls_scheduled,revenue_generated:t.revenue_generated,cash_collected:t.cash_collected,deposits:t.deposits,sales_team_meetings:t.sales_team_meetings,leadership_meetings:t.leadership_meetings,training_sessions:t.training_sessions,follow_up_actions_required:t.follow_up_actions_required,challenges_faced:t.challenges_faced,key_achievements:t.key_achievements,next_day_priorities:t.next_day_priorities,report_date:t.report_date,created_at:t.created_at,call_completion_rate:Math.round(n*100)/100,collection_rate:Math.round(a*100)/100,total_meetings_attended:l,outstanding_revenue:o},user:{id:r.id,email:r.email,full_name:r.full_name,role:r.role,phone:r.phone,job_title:r.job_title},metadata:{timestamp:new Date().toISOString(),source:"vertical_systems_crm",version:"1.0",environment:"production",action:"closer_report_submitted"}};await this.sendWithRetry(i),console.log("Closer report webhook sent successfully:",{reportId:t.id,closerName:t.closer_name,timestamp:i.metadata.timestamp})}catch(n){console.error("Failed to send closer report webhook:",n),this.logFailedWebhook(t,r,n)}}async sendWithRetry(t,r=1){try{const n=await fetch(this.webhookUrl,{method:"POST",headers:{"Content-Type":"application/json","User-Agent":"VerticalSystems-CRM/1.0"},body:JSON.stringify(t)});if(!n.ok)throw new Error(`Webhook failed with status: ${n.status} ${n.statusText}`);const a=await n.text();console.log("Closer report webhook response:",a)}catch(n){if(console.error(`Closer report webhook attempt ${r} failed:`,n),r<this.retryAttempts)return await new Promise(a=>setTimeout(a,this.retryDelay*r)),this.sendWithRetry(t,r+1);throw n}}logFailedWebhook(t,r,n){console.error("Failed closer report webhook logged:",{reportId:t.id,closerName:t.closer_name,userEmail:r.email,timestamp:new Date().toISOString(),error:n.message})}}const s3=new r3,n3=()=>{const[e,t]=j.useState([]),[r,n]=j.useState(!1),[a,l]=j.useState(null);return{reports:e,loading:r,error:a,fetchReports:async d=>{n(!0),l(null);try{let m=K.from("closer_reports").select(`
          *,
          submitter:submitted_by(id, email, full_name, role)
        `).order("created_at",{ascending:!1});if(d){const x=new Date;let b;switch(d){case"today":b=new Date(x.getFullYear(),x.getMonth(),x.getDate()),m=m.gte("report_date",b.toISOString().split("T")[0]);break;case"this_week":b=new Date(x.getTime()-x.getDay()*24*60*60*1e3),m=m.gte("report_date",b.toISOString().split("T")[0]);break;case"this_month":b=new Date(x.getFullYear(),x.getMonth(),1),m=m.gte("report_date",b.toISOString().split("T")[0]);break}}const{data:p,error:f}=await m;if(f)throw f;t(p||[])}catch(m){console.error("Error fetching closer reports:",m),l(m.message)}finally{n(!1)}},createReport:async d=>{try{const{data:m,error:p}=await K.from("users").select("id, email, full_name, role, phone, job_title").eq("id",d.submitted_by).single();p&&console.warn("Could not fetch user data for webhook:",p);const{data:f,error:x}=await K.from("closer_reports").insert(d).select(`
          *,
          submitter:submitted_by(id, email, full_name, role)
        `).single();if(x)throw x;if(m)try{await s3.sendCloserReportSubmission(f,m)}catch(b){console.error("Webhook failed, but report was saved:",b)}return t(b=>[f,...b]),{data:f,error:null}}catch(m){return console.error("Error creating closer report:",m),{data:null,error:m}}},updateReport:async(d,m)=>{try{const{data:p,error:f}=await K.from("closer_reports").update({...m,updated_at:new Date().toISOString()}).eq("id",d).select(`
          *,
          submitter:submitted_by(id, email, full_name, role)
        `).single();if(f)throw f;return t(x=>x.map(b=>b.id===d?p:b)),{data:p,error:null}}catch(p){return console.error("Error updating closer report:",p),{data:null,error:p}}},deleteReport:async d=>{try{const{error:m}=await K.from("closer_reports").delete().eq("id",d);if(m)throw m;return t(p=>p.filter(f=>f.id!==d)),{error:null}}catch(m){return console.error("Error deleting closer report:",m),{error:m}}},fetchDailySummary:async()=>{try{const{data:d,error:m}=await K.from("daily_closer_summary").select("*").order("report_date",{ascending:!1}).limit(30);if(m)throw m;return d||[]}catch(d){return console.error("Error fetching daily summary:",d),[]}}}},a3=({isOpen:e,onClose:t,onSave:r,loading:n=!1})=>{var m;const{user:a}=Oe(),[l,o]=j.useState({closer_name:((m=a==null?void 0:a.user_metadata)==null?void 0:m.full_name)||"",closer_role:"",total_calls_scheduled:0,calls_completed:0,follow_up_calls_scheduled:0,revenue_generated:0,cash_collected:0,deposits:0,sales_team_meetings:0,leadership_meetings:0,training_sessions:0,follow_up_actions_required:"",challenges_faced:"",key_achievements:"",next_day_priorities:""}),i=p=>{const{name:f,value:x,type:b}=p.target;o(g=>({...g,[f]:b==="number"?f.includes("revenue")||f.includes("cash")||f.includes("deposits")?parseFloat(x)||0:parseInt(x)||0:x}))},c=p=>{p.preventDefault(),r(l)},h=()=>{var p;o({closer_name:((p=a==null?void 0:a.user_metadata)==null?void 0:p.full_name)||"",closer_role:"",total_calls_scheduled:0,calls_completed:0,follow_up_calls_scheduled:0,revenue_generated:0,cash_collected:0,deposits:0,sales_team_meetings:0,leadership_meetings:0,training_sessions:0,follow_up_actions_required:"",challenges_faced:"",key_achievements:"",next_day_priorities:""})},u=()=>{h(),t()};if(!e)return null;const d=["Sales Closer","Senior Sales Closer","Sales Manager","Account Executive","Business Development Manager","Sales Director","Other"];return s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"glass-card w-full max-w-6xl max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-700",children:[s.jsx("h2",{className:"text-xl font-semibold gradient-text section-gradient-sales",children:"Submit Closer Report"}),s.jsx("button",{onClick:u,className:"text-gray-400 hover:text-white transition-colors",children:s.jsx(cr,{className:"h-6 w-6"})})]}),s.jsxs("form",{onSubmit:c,className:"p-6 space-y-8",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Your Name *"}),s.jsxs("div",{className:"relative",children:[s.jsx(Fe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"text",name:"closer_name",value:l.closer_name,onChange:i,className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-white placeholder-gray-400",placeholder:"Enter your full name",required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Your Role *"}),s.jsxs("div",{className:"relative",children:[s.jsx(el,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsxs("select",{name:"closer_role",value:l.closer_role,onChange:i,className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-white",required:!0,children:[s.jsx("option",{value:"",children:"Select your role..."}),d.map(p=>s.jsx("option",{value:p,children:p},p))]})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center",children:[s.jsx(_t,{className:"h-5 w-5 mr-2 text-purple-400"}),"Call Statistics"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Total Calls Scheduled"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ne,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"number",name:"total_calls_scheduled",value:l.total_calls_scheduled,onChange:i,min:"0",className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-white placeholder-gray-400",placeholder:"0"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Calls Completed"}),s.jsxs("div",{className:"relative",children:[s.jsx(_t,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"number",name:"calls_completed",value:l.calls_completed,onChange:i,min:"0",className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-white placeholder-gray-400",placeholder:"0"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Follow-up Calls Scheduled"}),s.jsxs("div",{className:"relative",children:[s.jsx(ye,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"number",name:"follow_up_calls_scheduled",value:l.follow_up_calls_scheduled,onChange:i,min:"0",className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-white placeholder-gray-400",placeholder:"0"})]})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center",children:[s.jsx(oe,{className:"h-5 w-5 mr-2 text-green-400"}),"Sales Metrics"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Revenue Generated"}),s.jsxs("div",{className:"relative",children:[s.jsx(oe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"number",name:"revenue_generated",value:l.revenue_generated,onChange:i,min:"0",step:"0.01",className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-white placeholder-gray-400",placeholder:"0.00"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Cash Collected"}),s.jsxs("div",{className:"relative",children:[s.jsx(oe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-green-400"}),s.jsx("input",{type:"number",name:"cash_collected",value:l.cash_collected,onChange:i,min:"0",max:l.revenue_generated,step:"0.01",className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-white placeholder-gray-400",placeholder:"0.00"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Deposits"}),s.jsxs("div",{className:"relative",children:[s.jsx(oe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-blue-400"}),s.jsx("input",{type:"number",name:"deposits",value:l.deposits,onChange:i,min:"0",step:"0.01",className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-white placeholder-gray-400",placeholder:"0.00"})]})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center",children:[s.jsx(bt,{className:"h-5 w-5 mr-2 text-blue-400"}),"Meeting Attendance"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Sales Team Meetings"}),s.jsxs("div",{className:"relative",children:[s.jsx(bt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"number",name:"sales_team_meetings",value:l.sales_team_meetings,onChange:i,min:"0",className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-white placeholder-gray-400",placeholder:"0"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Leadership Meetings"}),s.jsxs("div",{className:"relative",children:[s.jsx(ct,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"number",name:"leadership_meetings",value:l.leadership_meetings,onChange:i,min:"0",className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-white placeholder-gray-400",placeholder:"0"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Training Sessions"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ae,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"number",name:"training_sessions",value:l.training_sessions,onChange:i,min:"0",className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-white placeholder-gray-400",placeholder:"0"})]})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center",children:[s.jsx(lx,{className:"h-5 w-5 mr-2 text-yellow-400"}),"Notes"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Follow-up Actions Required"}),s.jsx("textarea",{name:"follow_up_actions_required",value:l.follow_up_actions_required,onChange:i,rows:4,className:"w-full px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-white placeholder-gray-400 resize-none",placeholder:"List any follow-up actions needed..."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Challenges Faced"}),s.jsx("textarea",{name:"challenges_faced",value:l.challenges_faced,onChange:i,rows:4,className:"w-full px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-white placeholder-gray-400 resize-none",placeholder:"Describe any challenges you encountered..."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Key Achievements"}),s.jsx("textarea",{name:"key_achievements",value:l.key_achievements,onChange:i,rows:4,className:"w-full px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-white placeholder-gray-400 resize-none",placeholder:"Share your key wins and achievements..."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Next Day Priorities"}),s.jsx("textarea",{name:"next_day_priorities",value:l.next_day_priorities,onChange:i,rows:4,className:"w-full px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-white placeholder-gray-400 resize-none",placeholder:"What are your priorities for tomorrow?"})]})]})]}),s.jsxs("div",{className:"p-4 bg-gradient-to-r from-purple-900/20 to-blue-900/20 border border-purple-500/30 rounded-lg",children:[s.jsx("h3",{className:"font-semibold text-purple-400 mb-3",children:"Performance Summary"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400",children:"Call Completion:"}),s.jsx("p",{className:"text-white font-semibold",children:l.total_calls_scheduled>0?`${Math.round(l.calls_completed/l.total_calls_scheduled*100)}%`:"0%"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400",children:"Collection Rate:"}),s.jsx("p",{className:"text-white font-semibold",children:l.revenue_generated>0?`${Math.round(l.cash_collected/l.revenue_generated*100)}%`:"0%"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400",children:"Outstanding:"}),s.jsxs("p",{className:"text-white font-semibold",children:["$",(l.revenue_generated-l.cash_collected).toFixed(2)]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400",children:"Total Meetings:"}),s.jsx("p",{className:"text-white font-semibold",children:l.sales_team_meetings+l.leadership_meetings+l.training_sessions})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t border-gray-700",children:[s.jsx("button",{type:"button",onClick:u,className:"px-6 py-2 text-gray-400 hover:text-white transition-colors",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:n,className:"flex items-center space-x-2 px-6 py-2 bg-gradient-to-r from-purple-400 to-blue-600 hover:from-purple-500 hover:to-blue-700 text-white font-medium rounded-lg transition-all duration-200 disabled:opacity-50",children:n?s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):s.jsxs(s.Fragment,{children:[s.jsx($s,{className:"h-5 w-5"}),s.jsx("span",{children:"Submit Closer Report"})]})})]})]})]})})},l3=()=>{const{user:e}=Oe(),{reports:t,loading:r,error:n,fetchReports:a,createReport:l,fetchDailySummary:o}=n3(),[i,c]=j.useState(!1),[h,u]=j.useState([]),[d,m]=j.useState("today"),[p,f]=j.useState(1),[x]=j.useState(10),[b,g]=j.useState(new Date);j.useEffect(()=>{v()},[d]);const v=async()=>{await a(d);const I=await o();u(I),g(new Date)},y=async I=>{try{const z=await l({...I,submitted_by:(e==null?void 0:e.id)||"",report_date:new Date().toISOString().split("T")[0]});if(z.error){console.error("Error creating report:",z.error);return}c(!1),v()}catch(z){console.error("Error saving report:",z)}},w=()=>{v()},k=t.filter(I=>{const z=new Date(I.report_date),te=new Date;return z.toDateString()===te.toDateString()}).reduce((I,z)=>({totalReports:I.totalReports+1,totalCalls:I.totalCalls+z.calls_completed,totalRevenue:I.totalRevenue+z.revenue_generated,totalCashCollected:I.totalCashCollected+z.cash_collected,totalDeposits:I.totalDeposits+z.deposits,totalMeetings:I.totalMeetings+z.sales_team_meetings+z.leadership_meetings+z.training_sessions}),{totalReports:0,totalCalls:0,totalRevenue:0,totalCashCollected:0,totalDeposits:0,totalMeetings:0}),D=Math.ceil(t.length/x),C=(p-1)*x,_=t.slice(C,C+x),S=I=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(I),O=I=>new Date(I).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),E=I=>new Date(I).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"});return r&&t.length===0?s.jsx("div",{className:"flex items-center justify-center p-8",children:s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-purple-400/30 border-t-purple-400"}),s.jsx("div",{className:"absolute inset-0 rounded-full bg-purple-400/10 animate-pulse"})]})}):s.jsx(dr,{section:"sales",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"space-y-2",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-gradient-to-br from-purple-400/20 to-blue-600/20 rounded-xl",children:s.jsx(Ie,{className:"h-8 w-8 text-purple-400"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold gradient-text section-gradient-sales",children:"Closer Reports"}),s.jsx("p",{className:"text-gray-400 mt-1",children:"Track daily sales performance and closing activities."})]})]})}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm text-gray-400",children:"Last Updated"}),s.jsx("p",{className:"text-sm font-semibold text-white",children:b.toLocaleTimeString()})]}),s.jsxs("button",{onClick:w,disabled:r,className:"flex items-center space-x-2 px-4 py-2 bg-gray-800 hover:bg-gray-700 text-white rounded-lg transition-all duration-200 hover:scale-105",children:[s.jsx(xr,{className:`h-4 w-4 ${r?"animate-spin":""}`}),s.jsx("span",{children:"Refresh"})]}),s.jsxs("button",{onClick:()=>c(!0),className:"group flex items-center space-x-2 px-6 py-3 bg-gradient-to-r from-purple-400 to-blue-600 hover:from-purple-500 hover:to-blue-700 text-white font-semibold rounded-xl transition-all duration-300 hover:scale-105 hover:shadow-xl hover:shadow-purple-500/25",children:[s.jsx(St,{className:"h-5 w-5 group-hover:rotate-90 transition-transform duration-300"}),s.jsx("span",{children:"Submit Report"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-6",children:[s.jsx("div",{className:"glass-card p-6 hover:bg-gray-800/60 transition-all duration-300 group hover:scale-105 hover:shadow-xl hover:shadow-purple-500/10",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors",children:"Reports Today"}),s.jsx("p",{className:"text-3xl font-bold text-white mt-1",children:k.totalReports}),s.jsxs("p",{className:"text-xs text-purple-400 mt-1 flex items-center",children:[s.jsx(bt,{className:"h-3 w-3 mr-1"}),"Team submissions"]})]}),s.jsx("div",{className:"p-3 bg-gradient-to-br from-purple-400/20 to-blue-600/20 rounded-xl group-hover:scale-110 transition-transform duration-300",children:s.jsx(Ie,{className:"h-8 w-8 text-purple-400"})})]})}),s.jsx("div",{className:"glass-card p-6 hover:bg-gray-800/60 transition-all duration-300 group hover:scale-105 hover:shadow-xl hover:shadow-green-500/10",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors",children:"Calls Completed"}),s.jsx("p",{className:"text-3xl font-bold text-white mt-1",children:k.totalCalls}),s.jsxs("p",{className:"text-xs text-green-400 mt-1 flex items-center",children:[s.jsx(_t,{className:"h-3 w-3 mr-1"}),"Sales calls"]})]}),s.jsx("div",{className:"p-3 bg-gradient-to-br from-green-400/20 to-green-600/20 rounded-xl group-hover:scale-110 transition-transform duration-300",children:s.jsx(_t,{className:"h-8 w-8 text-green-400"})})]})}),s.jsx("div",{className:"glass-card p-6 hover:bg-gray-800/60 transition-all duration-300 group hover:scale-105 hover:shadow-xl hover:shadow-emerald-500/10",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors",children:"Revenue"}),s.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:S(k.totalRevenue)}),s.jsxs("p",{className:"text-xs text-emerald-400 mt-1 flex items-center",children:[s.jsx(oe,{className:"h-3 w-3 mr-1"}),"Generated"]})]}),s.jsx("div",{className:"p-3 bg-gradient-to-br from-emerald-400/20 to-emerald-600/20 rounded-xl group-hover:scale-110 transition-transform duration-300",children:s.jsx(oe,{className:"h-8 w-8 text-emerald-400"})})]})}),s.jsx("div",{className:"glass-card p-6 hover:bg-gray-800/60 transition-all duration-300 group hover:scale-105 hover:shadow-xl hover:shadow-green-500/10",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors",children:"Cash Collected"}),s.jsx("p",{className:"text-2xl font-bold text-green-400 mt-1",children:S(k.totalCashCollected)}),s.jsxs("p",{className:"text-xs text-green-400 mt-1 flex items-center",children:[s.jsx(ct,{className:"h-3 w-3 mr-1"}),"Collected"]})]}),s.jsx("div",{className:"p-3 bg-gradient-to-br from-green-400/20 to-green-600/20 rounded-xl group-hover:scale-110 transition-transform duration-300",children:s.jsx(ct,{className:"h-8 w-8 text-green-400"})})]})}),s.jsx("div",{className:"glass-card p-6 hover:bg-gray-800/60 transition-all duration-300 group hover:scale-105 hover:shadow-xl hover:shadow-blue-500/10",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors",children:"Deposits"}),s.jsx("p",{className:"text-2xl font-bold text-blue-400 mt-1",children:S(k.totalDeposits)}),s.jsxs("p",{className:"text-xs text-blue-400 mt-1 flex items-center",children:[s.jsx(ye,{className:"h-3 w-3 mr-1"}),"Secured"]})]}),s.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-400/20 to-blue-600/20 rounded-xl group-hover:scale-110 transition-transform duration-300",children:s.jsx(ye,{className:"h-8 w-8 text-blue-400"})})]})}),s.jsx("div",{className:"glass-card p-6 hover:bg-gray-800/60 transition-all duration-300 group hover:scale-105 hover:shadow-xl hover:shadow-cyan-500/10",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors",children:"Meetings"}),s.jsx("p",{className:"text-3xl font-bold text-white mt-1",children:k.totalMeetings}),s.jsxs("p",{className:"text-xs text-cyan-400 mt-1 flex items-center",children:[s.jsx(Ne,{className:"h-3 w-3 mr-1"}),"Attended"]})]}),s.jsx("div",{className:"p-3 bg-gradient-to-br from-cyan-400/20 to-cyan-600/20 rounded-xl group-hover:scale-110 transition-transform duration-300",children:s.jsx(Ne,{className:"h-8 w-8 text-cyan-400"})})]})})]}),s.jsx("div",{className:"glass-card p-6",children:s.jsx("div",{className:"flex flex-wrap gap-2",children:[{key:"today",label:"Today"},{key:"this_week",label:"This Week"},{key:"this_month",label:"This Month"}].map(I=>s.jsx("button",{onClick:()=>m(I.key),className:`
                  px-4 py-2 rounded-lg font-medium transition-all duration-200 hover:scale-105
                  ${d===I.key?"bg-gradient-to-r from-purple-400 to-blue-600 text-white shadow-lg shadow-purple-500/25":"bg-gray-800/50 text-gray-300 hover:bg-gray-700/50 hover:text-white"}
                `,children:I.label},I.key))})}),n&&s.jsx("div",{className:"p-4 bg-red-900/20 border border-red-500/30 rounded-lg animate-pulse",children:s.jsx("p",{className:"text-red-400 text-sm",children:n})}),s.jsxs("div",{className:"glass-card overflow-hidden hover:bg-gray-800/30 transition-all duration-300",children:[s.jsx("div",{className:"p-6 border-b border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h2",{className:"text-xl font-semibold gradient-text section-gradient-sales",children:["Closer Reports - ",d.replace("_"," ").replace(/\b\w/g,I=>I.toUpperCase())]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("span",{className:"text-sm text-gray-400",children:[t.length," report",t.length!==1?"s":""]}),s.jsxs("button",{className:"flex items-center space-x-2 px-3 py-1 bg-gray-800 hover:bg-gray-700 text-white rounded-lg transition-colors",children:[s.jsx(rl,{className:"h-4 w-4"}),s.jsx("span",{children:"Export"})]})]})]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-800/60 backdrop-blur-sm",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Closer"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Role"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Calls"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Revenue"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Cash Collected"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Meetings"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Date"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-800/50",children:_.map(I=>{var z;return s.jsxs("tr",{className:"hover:bg-gray-800/40 transition-all duration-300 group hover:shadow-lg hover:shadow-gray-900/20",children:[s.jsx("td",{className:"px-6 py-5",children:s.jsxs("div",{className:"group-hover:scale-105 transition-transform duration-200",children:[s.jsx("div",{className:"font-semibold text-white group-hover:text-purple-100 transition-colors",children:I.closer_name}),s.jsx("div",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors",children:(z=I.submitter)==null?void 0:z.email})]})}),s.jsx("td",{className:"px-6 py-5 text-gray-300 group-hover:text-white transition-colors",children:I.closer_role}),s.jsx("td",{className:"px-6 py-5",children:s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"text-white font-semibold",children:[I.calls_completed,"/",I.total_calls_scheduled]}),s.jsxs("div",{className:"text-xs text-green-400",children:[I.total_calls_scheduled>0?`${Math.round(I.calls_completed/I.total_calls_scheduled*100)}%`:"0%"," completion"]})]})}),s.jsx("td",{className:"px-6 py-5",children:s.jsx("span",{className:"text-emerald-400 font-semibold",children:S(I.revenue_generated)})}),s.jsx("td",{className:"px-6 py-5",children:s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-green-400 font-semibold",children:S(I.cash_collected)}),s.jsxs("div",{className:"text-xs text-gray-400",children:[I.revenue_generated>0?`${Math.round(I.cash_collected/I.revenue_generated*100)}%`:"0%"," collected"]})]})}),s.jsx("td",{className:"px-6 py-5",children:s.jsx("span",{className:"text-cyan-400 font-semibold",children:I.sales_team_meetings+I.leadership_meetings+I.training_sessions})}),s.jsx("td",{className:"px-6 py-5",children:s.jsxs("div",{className:"text-gray-400 text-sm group-hover:text-gray-300 transition-colors",children:[s.jsx("div",{children:O(I.report_date)}),s.jsx("div",{className:"text-xs",children:E(I.created_at)})]})}),s.jsx("td",{className:"px-6 py-5",children:s.jsx("div",{className:"flex items-center space-x-2",children:s.jsx("button",{className:"text-gray-400 hover:text-purple-400 transition-all duration-200 hover:scale-110 p-2 rounded-lg hover:bg-gray-700/50",title:"View details",children:s.jsx(Is,{className:"h-4 w-4"})})})})]},I.id)})})]})}),D>1&&s.jsxs("div",{className:"px-6 py-4 border-t border-gray-800/50 flex items-center justify-between bg-gray-800/20",children:[s.jsxs("div",{className:"text-sm text-gray-400",children:["Showing ",s.jsx("span",{className:"font-semibold text-white",children:C+1})," to"," ",s.jsx("span",{className:"font-semibold text-white",children:Math.min(C+x,t.length)})," of"," ",s.jsx("span",{className:"font-semibold text-white",children:t.length})," reports"]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("button",{onClick:()=>f(I=>Math.max(I-1,1)),disabled:p===1,className:"p-2 text-gray-400 hover:text-white disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 hover:scale-110 hover:bg-gray-700/50 rounded-lg",children:s.jsx(Or,{className:"h-5 w-5"})}),s.jsxs("span",{className:"text-sm text-gray-300 px-3 py-1 bg-gray-700/50 rounded-lg",children:["Page ",s.jsx("span",{className:"font-semibold text-white",children:p})," of"," ",s.jsx("span",{className:"font-semibold text-white",children:D})]}),s.jsx("button",{onClick:()=>f(I=>Math.min(I+1,D)),disabled:p===D,className:"p-2 text-gray-400 hover:text-white disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 hover:scale-110 hover:bg-gray-700/50 rounded-lg",children:s.jsx(ir,{className:"h-5 w-5"})})]})]})]}),s.jsx(a3,{isOpen:i,onClose:()=>c(!1),onSave:y,loading:r})]})})},o3=()=>{const[e,t]=j.useState([]),[r,n]=j.useState(!1),[a,l]=j.useState(null),o=async p=>{try{n(!0),l(null);let f=K.from("proposals").select(`
          *,
          deals:deal_id(id, deal_name, deal_value, stage, lead_id),
          lead:deals!inner(lead_id(id, first_name, last_name, email, company)),
          creator:created_by(id, email, full_name),
          assignee:assigned_to(id, email, full_name)
        `).order("created_at",{ascending:!1});if(p){if(p.search&&(f=f.or(`title.ilike.%${p.search}%,proposal_text.ilike.%${p.search}%`)),p.status&&(f=f.eq("status",p.status)),p.deal_id&&(f=f.eq("deal_id",p.deal_id)),p.assigned_to&&(f=f.eq("assigned_to",p.assigned_to)),p.date_range&&p.date_range!=="all"){const g=new Date;let v;switch(p.date_range){case"last_7_days":v=new Date(g.getTime()-7*24*60*60*1e3),f=f.gte("created_at",v.toISOString());break;case"last_30_days":v=new Date(g.getTime()-30*24*60*60*1e3),f=f.gte("created_at",v.toISOString());break;case"last_90_days":v=new Date(g.getTime()-90*24*60*60*1e3),f=f.gte("created_at",v.toISOString());break;case"custom":p.start_date&&(f=f.gte("created_at",new Date(p.start_date).toISOString())),p.end_date&&(f=f.lte("created_at",new Date(p.end_date).toISOString()));break}}if(p.value_range&&p.value_range!=="all")switch(p.value_range){case"under_10k":f=f.lt("proposal_value",1e4);break;case"10k_50k":f=f.gte("proposal_value",1e4).lt("proposal_value",5e4);break;case"50k_100k":f=f.gte("proposal_value",5e4).lt("proposal_value",1e5);break;case"over_100k":f=f.gte("proposal_value",1e5);break}}const{data:x,error:b}=await f;if(b)throw b;t(x||[])}catch(f){console.error("Error fetching proposals:",f),l(f.message)}finally{n(!1)}},i=async p=>{try{const{data:f,error:x}=await K.from("proposals").insert(p).select(`
          *,
          deals:deal_id(id, deal_name, deal_value, stage, lead_id),
          lead:deals!inner(lead_id(id, first_name, last_name, email, company)),
          creator:created_by(id, email, full_name),
          assignee:assigned_to(id, email, full_name)
        `).single();if(x)throw x;return t(b=>[f,...b]),{data:f,error:null}}catch(f){return console.error("Error creating proposal:",f),{data:null,error:f}}};return{proposals:e,loading:r,setLoading:n,error:a,fetchProposals:o,createProposal:i,updateProposal:async(p,f)=>{try{const{data:x,error:b}=await K.from("proposals").update({...f,updated_at:new Date().toISOString()}).eq("id",p).select(`
          *,
          deals:deal_id(id, deal_name, deal_value, stage, lead_id),
          lead:deals!inner(lead_id(id, first_name, last_name, email, company)),
          creator:created_by(id, email, full_name),
          assignee:assigned_to(id, email, full_name)
        `).single();if(b)throw b;return t(g=>g.map(v=>v.id===p?x:v)),{data:x,error:null}}catch(x){return console.error("Error updating proposal:",x),{data:null,error:x}}},deleteProposal:async p=>{try{const{error:f}=await K.from("proposals").delete().eq("id",p);if(f)throw f;return t(x=>x.filter(b=>b.id!==p)),{error:null}}catch(f){return console.error("Error deleting proposal:",f),{error:f}}},updateProposalStatus:async(p,f)=>{try{const x={status:f,updated_at:new Date().toISOString()};f==="sent"?x.sent_date=new Date().toISOString():f==="viewed"&&(x.last_viewed_date=new Date().toISOString());const{error:b}=await K.from("proposals").update(x).eq("id",p);if(b)throw b;return t(g=>g.map(v=>v.id===p?{...v,...x}:v)),{error:null}}catch(x){return console.error("Error updating proposal status:",x),{error:x}}},incrementFollowUp:async p=>{try{const{data:f,error:x}=await K.from("proposals").select("follow_up_count").eq("id",p).single();if(x)throw x;const{error:b}=await K.from("proposals").update({follow_up_count:(f.follow_up_count||0)+1,updated_at:new Date().toISOString()}).eq("id",p);if(b)throw b;return t(g=>g.map(v=>v.id===p?{...v,follow_up_count:(v.follow_up_count||0)+1}:v)),{error:null}}catch(f){return console.error("Error incrementing follow-up count:",f),{error:f}}},createProposalFromDeal:async(p,f)=>{try{const{data:x,error:b}=await K.from("deals").select(`
          *,
          lead:lead_id(id, first_name, last_name, email, company)
        `).eq("id",p).single();if(b)throw b;const g={deal_id:p,title:`Proposal for ${x.deal_name}`,proposal_value:x.deal_value,status:"draft",created_by:f,assigned_to:x.deal_owner||f,deliverables:[],timelines:[],proposal_text:`# Proposal for ${x.deal_name}

## Overview

Thank you for the opportunity to submit this proposal. We are excited to work with you on this project.

## Scope of Work

Please define the scope of work here.

## Investment

$${x.deal_value.toLocaleString()}`};return await i(g)}catch(x){return console.error("Error creating proposal from deal:",x),{data:null,error:x}}}}},i3=()=>{const[e,t]=j.useState([]),[r,n]=j.useState(!1),[a,l]=j.useState(null);return{leads:e,loading:r,error:a,fetchLeads:async u=>{n(!0),l(null);try{let d=K.from("leads").select("*").order("created_at",{ascending:!1});u&&(u.search&&(d=d.or(`first_name.ilike.%${u.search}%,last_name.ilike.%${u.search}%,email.ilike.%${u.search}%,company.ilike.%${u.search}%`)),u.status&&(d=d.eq("status",u.status)),u.lead_source&&(d=d.eq("lead_source",u.lead_source)),u.assigned_to&&(d=d.eq("assigned_to",u.assigned_to)));const{data:m,error:p}=await d;if(p)throw p;t(m||[])}catch(d){console.error("Error fetching leads:",d),l(d.message)}finally{n(!1)}},createLead:async u=>{try{const{data:d,error:m}=await K.from("leads").insert(u).select().single();if(m)throw m;return t(p=>[d,...p]),{data:d,error:null}}catch(d){return console.error("Error creating lead:",d),{data:null,error:d}}},updateLead:async(u,d)=>{try{const{data:m,error:p}=await K.from("leads").update({...d,updated_at:new Date().toISOString()}).eq("id",u).select().single();if(p)throw p;return t(f=>f.map(x=>x.id===u?m:x)),{data:m,error:null}}catch(m){return console.error("Error updating lead:",m),{data:null,error:m}}},deleteLead:async u=>{try{const{error:d}=await K.from("leads").delete().eq("id",u);if(d)throw d;return t(m=>m.filter(p=>p.id!==u)),{error:null}}catch(d){return console.error("Error deleting lead:",d),{error:d}}}}},Ze=[];for(let e=0;e<256;++e)Ze.push((e+256).toString(16).slice(1));function c3(e,t=0){return(Ze[e[t+0]]+Ze[e[t+1]]+Ze[e[t+2]]+Ze[e[t+3]]+"-"+Ze[e[t+4]]+Ze[e[t+5]]+"-"+Ze[e[t+6]]+Ze[e[t+7]]+"-"+Ze[e[t+8]]+Ze[e[t+9]]+"-"+Ze[e[t+10]]+Ze[e[t+11]]+Ze[e[t+12]]+Ze[e[t+13]]+Ze[e[t+14]]+Ze[e[t+15]]).toLowerCase()}let Ec;const d3=new Uint8Array(16);function u3(){if(!Ec){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Ec=crypto.getRandomValues.bind(crypto)}return Ec(d3)}const h3=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ip={randomUUID:h3};function cp(e,t,r){var a;if(ip.randomUUID&&!t&&!e)return ip.randomUUID();e=e||{};const n=e.random??((a=e.rng)==null?void 0:a.call(e))??u3();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,c3(n)}const m3=({proposal:e,dealId:t,isOpen:r,onClose:n,onSave:a})=>{const{user:l}=Oe(),{users:o,fetchUsers:i}=sl(),[c,h]=j.useState(!1),[u,d]=j.useState(""),[m,p]=j.useState(null),[f,x]=j.useState({title:"",proposal_text:"",deliverables:[],timelines:[],proposal_value:0,assigned_to:"",expiration_date:"",client_notes:"",internal_notes:"",proposal_link:""});j.useEffect(()=>{r&&i()},[r,i]),j.useEffect(()=>{t&&(async()=>{if(t)try{const{data:_,error:S}=await K.from("deals").select(`
            *,
            lead:leads(id, first_name, last_name, email, company)
          `).eq("id",t).single();if(S)throw S;p(_),x(O=>({...O,title:`Proposal for ${_.deal_name}`,proposal_value:_.deal_value,assigned_to:_.deal_owner||(l==null?void 0:l.id)||"",proposal_text:`# Proposal for ${_.deal_name}

## Overview

Thank you for the opportunity to submit this proposal. We are excited to work with you on this project.

## Scope of Work

Please define the scope of work here.

## Investment

$${_.deal_value.toLocaleString()}`}))}catch(_){console.error("Error fetching deal data:",_)}})()},[t,l]),j.useEffect(()=>{x(e?{title:e.title||"",proposal_text:e.proposal_text||"",deliverables:e.deliverables||[],timelines:e.timelines||[],proposal_value:e.proposal_value||0,assigned_to:e.assigned_to||"",expiration_date:e.expiration_date?e.expiration_date.split("T")[0]:"",client_notes:e.client_notes||"",internal_notes:e.internal_notes||"",proposal_link:e.proposal_link||""}:{title:m?`Proposal for ${m.deal_name}`:"",proposal_text:m?`# Proposal for ${m.deal_name}

## Overview

Thank you for the opportunity to submit this proposal. We are excited to work with you on this project.

## Scope of Work

Please define the scope of work here.

## Investment

$${m.deal_value.toLocaleString()}`:"",deliverables:[],timelines:[],proposal_value:m?m.deal_value:0,assigned_to:m?m.deal_owner||(l==null?void 0:l.id)||"":(l==null?void 0:l.id)||"",expiration_date:"",client_notes:"",internal_notes:"",proposal_link:""}),d("")},[e,r,m,l]);const b=C=>{const{name:_,value:S,type:O}=C.target;x(E=>({...E,[_]:O==="number"?parseFloat(S)||0:S}))},g=()=>{const C={id:cp(),title:"",description:"",included:!0,price:0};x(_=>({..._,deliverables:[..._.deliverables,C]}))},v=C=>{x(_=>({..._,deliverables:_.deliverables.filter(S=>S.id!==C)}))},y=(C,_,S)=>{x(O=>({...O,deliverables:O.deliverables.map(E=>E.id===C?{...E,[_]:_==="price"?parseFloat(S)||0:S}:E)}))},w=()=>{const C={id:cp(),title:"",description:"",duration:7,start_offset:0};x(_=>({..._,timelines:[..._.timelines,C]}))},N=C=>{x(_=>({..._,timelines:_.timelines.filter(S=>S.id!==C)}))},k=(C,_,S)=>{x(O=>({...O,timelines:O.timelines.map(E=>E.id===C?{...E,[_]:_==="duration"||_==="start_offset"?parseInt(S)||0:S}:E)}))},D=async C=>{if(C.preventDefault(),!!l){h(!0),d("");try{const _={...f,deal_id:t||(e==null?void 0:e.deal_id),status:(e==null?void 0:e.status)||"draft",expiration_date:f.expiration_date?new Date(f.expiration_date).toISOString():null,updated_at:new Date().toISOString()};if(e){const{data:S,error:O}=await K.from("proposals").update(_).eq("id",e.id).select(`
            *,
            deals:deal_id(id, deal_name, deal_value, stage, lead_id),
            lead:deals!inner(lead_id(id, first_name, last_name, email, company)),
            creator:created_by(id, email, full_name),
            assignee:assigned_to(id, email, full_name)
          `).single();if(O)throw O;a(S)}else{const{data:S,error:O}=await K.from("proposals").insert({..._,created_by:l.id}).select(`
            *,
            deals:deal_id(id, deal_name, deal_value, stage, lead_id),
            lead:deals!inner(lead_id(id, first_name, last_name, email, company)),
            creator:created_by(id, email, full_name),
            assignee:assigned_to(id, email, full_name)
          `).single();if(O)throw O;t&&(m==null?void 0:m.stage)==="proposal_preparation"&&await K.from("deals").update({stage:"proposal_sent",updated_at:new Date().toISOString()}).eq("id",t),a(S)}n()}catch(_){d(_.message)}finally{h(!1)}}};return r?s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"glass-card w-full max-w-6xl max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-700",children:[s.jsx("h2",{className:"text-xl font-semibold gradient-text section-gradient-documents",children:e?"Edit Proposal":"Create New Proposal"}),s.jsx("button",{onClick:n,className:"text-gray-400 hover:text-white transition-colors",children:s.jsx(cr,{className:"h-6 w-6"})})]}),s.jsxs("form",{onSubmit:D,className:"p-6 space-y-6",children:[u&&s.jsx("div",{className:"p-4 bg-red-900/20 border border-red-500/30 rounded-lg",children:s.jsx("p",{className:"text-red-400 text-sm",children:u})}),m&&s.jsxs("div",{className:"p-4 bg-gradient-to-r from-purple-900/20 to-blue-900/20 border border-purple-500/30 rounded-lg",children:[s.jsx("h3",{className:"font-semibold text-purple-400 mb-3",children:"Deal Information"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400",children:"Deal:"}),s.jsx("p",{className:"text-white font-semibold",children:m.deal_name})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400",children:"Value:"}),s.jsxs("p",{className:"text-white font-semibold",children:["$",m.deal_value.toLocaleString()]})]}),m.lead&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400",children:"Client:"}),s.jsxs("p",{className:"text-white",children:[m.lead.first_name," ",m.lead.last_name]})]}),m.lead.company&&s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400",children:"Company:"}),s.jsx("p",{className:"text-white",children:m.lead.company})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Proposal Title *"}),s.jsxs("div",{className:"relative",children:[s.jsx(Dt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"text",name:"title",value:f.title,onChange:b,className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-white placeholder-gray-400",placeholder:"Enter proposal title",required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Proposal Content"}),s.jsx("textarea",{name:"proposal_text",value:f.proposal_text,onChange:b,rows:12,className:"w-full px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-white placeholder-gray-400 font-mono text-sm",placeholder:"Enter proposal content (supports Markdown)"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Supports Markdown formatting for rich text content."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Deliverables"}),s.jsxs("button",{type:"button",onClick:g,className:"flex items-center space-x-1 text-sm text-purple-400 hover:text-purple-300 transition-colors",children:[s.jsx(St,{className:"h-4 w-4"}),s.jsx("span",{children:"Add Deliverable"})]})]}),s.jsxs("div",{className:"space-y-4",children:[f.deliverables.map((C,_)=>s.jsxs("div",{className:"p-4 bg-gray-800/30 border border-gray-700 rounded-lg",children:[s.jsxs("div",{className:"flex justify-between mb-3",children:[s.jsxs("h4",{className:"text-sm font-medium text-white",children:["Deliverable ",_+1]}),s.jsx("button",{type:"button",onClick:()=>v(C.id),className:"text-gray-400 hover:text-red-400 transition-colors",children:s.jsx(Ir,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-xs text-gray-400",children:"Title"}),s.jsx("input",{type:"text",value:C.title,onChange:S=>y(C.id,"title",S.target.value),className:"w-full px-3 py-2 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-white placeholder-gray-400 text-sm",placeholder:"Deliverable title"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-xs text-gray-400",children:"Price (Optional)"}),s.jsxs("div",{className:"relative",children:[s.jsx(oe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx("input",{type:"number",value:C.price||"",onChange:S=>y(C.id,"price",S.target.value),className:"w-full pl-8 pr-3 py-2 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-white placeholder-gray-400 text-sm",placeholder:"0.00",min:"0",step:"0.01"})]})]})]}),s.jsxs("div",{className:"mt-3 space-y-2",children:[s.jsx("label",{className:"block text-xs text-gray-400",children:"Description"}),s.jsx("textarea",{value:C.description,onChange:S=>y(C.id,"description",S.target.value),rows:2,className:"w-full px-3 py-2 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-white placeholder-gray-400 text-sm resize-none",placeholder:"Describe this deliverable"})]}),s.jsxs("div",{className:"mt-3 flex items-center",children:[s.jsx("input",{type:"checkbox",id:`included-${C.id}`,checked:C.included,onChange:S=>y(C.id,"included",S.target.checked),className:"rounded border-gray-600 bg-gray-700 text-purple-500 focus:ring-purple-500"}),s.jsx("label",{htmlFor:`included-${C.id}`,className:"ml-2 text-xs text-gray-300",children:"Included in proposal"})]})]},C.id)),f.deliverables.length===0&&s.jsxs("div",{className:"text-center p-4 bg-gray-800/30 border border-gray-700 rounded-lg",children:[s.jsx("p",{className:"text-gray-400 text-sm",children:"No deliverables added yet."}),s.jsx("button",{type:"button",onClick:g,className:"mt-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white text-sm rounded-lg transition-colors",children:"Add First Deliverable"})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Project Timeline"}),s.jsxs("button",{type:"button",onClick:w,className:"flex items-center space-x-1 text-sm text-purple-400 hover:text-purple-300 transition-colors",children:[s.jsx(St,{className:"h-4 w-4"}),s.jsx("span",{children:"Add Timeline Item"})]})]}),s.jsxs("div",{className:"space-y-4",children:[f.timelines.map((C,_)=>s.jsxs("div",{className:"p-4 bg-gray-800/30 border border-gray-700 rounded-lg",children:[s.jsxs("div",{className:"flex justify-between mb-3",children:[s.jsxs("h4",{className:"text-sm font-medium text-white",children:["Phase ",_+1]}),s.jsx("button",{type:"button",onClick:()=>N(C.id),className:"text-gray-400 hover:text-red-400 transition-colors",children:s.jsx(Ir,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-xs text-gray-400",children:"Phase Title"}),s.jsx("input",{type:"text",value:C.title,onChange:S=>k(C.id,"title",S.target.value),className:"w-full px-3 py-2 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-white placeholder-gray-400 text-sm",placeholder:"Phase title"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-xs text-gray-400",children:"Start (days from kickoff)"}),s.jsx("input",{type:"number",value:C.start_offset,onChange:S=>k(C.id,"start_offset",S.target.value),className:"w-full px-3 py-2 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-white placeholder-gray-400 text-sm",placeholder:"0",min:"0"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-xs text-gray-400",children:"Duration (days)"}),s.jsx("input",{type:"number",value:C.duration,onChange:S=>k(C.id,"duration",S.target.value),className:"w-full px-3 py-2 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-white placeholder-gray-400 text-sm",placeholder:"7",min:"1"})]})]})]}),s.jsxs("div",{className:"mt-3 space-y-2",children:[s.jsx("label",{className:"block text-xs text-gray-400",children:"Description"}),s.jsx("textarea",{value:C.description,onChange:S=>k(C.id,"description",S.target.value),rows:2,className:"w-full px-3 py-2 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-white placeholder-gray-400 text-sm resize-none",placeholder:"Describe this phase"})]})]},C.id)),f.timelines.length===0&&s.jsxs("div",{className:"text-center p-4 bg-gray-800/30 border border-gray-700 rounded-lg",children:[s.jsx("p",{className:"text-gray-400 text-sm",children:"No timeline items added yet."}),s.jsx("button",{type:"button",onClick:w,className:"mt-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white text-sm rounded-lg transition-colors",children:"Add First Timeline Item"})]})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Proposal Value *"}),s.jsxs("div",{className:"relative",children:[s.jsx(oe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"number",name:"proposal_value",value:f.proposal_value,onChange:b,min:"0",step:"0.01",className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-white placeholder-gray-400",placeholder:"0.00",required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Assigned To"}),s.jsxs("div",{className:"relative",children:[s.jsx(Fe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsxs("select",{name:"assigned_to",value:f.assigned_to,onChange:b,className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-white",children:[s.jsx("option",{value:"",children:"Unassigned"}),o.map(C=>s.jsx("option",{value:C.id,children:C.full_name||C.email},C.id))]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Expiration Date"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ne,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"date",name:"expiration_date",value:f.expiration_date,onChange:b,className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-white"})]}),s.jsx("p",{className:"text-xs text-gray-500",children:"Date after which this proposal is no longer valid."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Client Notes"}),s.jsx("textarea",{name:"client_notes",value:f.client_notes,onChange:b,rows:3,className:"w-full px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-white placeholder-gray-400 resize-none",placeholder:"Notes visible to the client..."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Internal Notes"}),s.jsx("textarea",{name:"internal_notes",value:f.internal_notes,onChange:b,rows:3,className:"w-full px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-white placeholder-gray-400 resize-none",placeholder:"Private notes for internal use only..."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Proposal Link (Optional)"}),s.jsx("input",{type:"url",name:"proposal_link",value:f.proposal_link,onChange:b,className:"w-full px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-white placeholder-gray-400",placeholder:"https://example.com/proposal/..."}),s.jsx("p",{className:"text-xs text-gray-500",children:"Custom URL for sharing this proposal externally."})]}),e&&s.jsxs("div",{className:"p-4 bg-gradient-to-r from-purple-900/20 to-blue-900/20 border border-purple-500/30 rounded-lg",children:[s.jsx("h3",{className:"font-semibold text-purple-400 mb-3",children:"Proposal Status"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-400",children:"Status:"}),s.jsx("span",{className:"text-white font-semibold capitalize",children:e.status})]}),e.sent_date&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-400",children:"Sent:"}),s.jsx("span",{className:"text-white",children:new Date(e.sent_date).toLocaleDateString()})]}),e.last_viewed_date&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-400",children:"Last Viewed:"}),s.jsx("span",{className:"text-white",children:new Date(e.last_viewed_date).toLocaleDateString()})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-400",children:"Follow-ups:"}),s.jsx("span",{className:"text-white",children:e.follow_up_count||0})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-400",children:"Created:"}),s.jsx("span",{className:"text-white",children:new Date(e.created_at).toLocaleDateString()})]})]})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t border-gray-700",children:[s.jsx("button",{type:"button",onClick:n,className:"px-6 py-2 text-gray-400 hover:text-white transition-colors",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:c,className:"flex items-center space-x-2 px-6 py-2 bg-gradient-to-r from-purple-400 to-blue-600 hover:from-purple-500 hover:to-blue-700 text-white font-medium rounded-lg transition-all duration-200 disabled:opacity-50",children:c?s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):s.jsxs(s.Fragment,{children:[s.jsx($s,{className:"h-5 w-5"}),s.jsx("span",{children:e?"Update Proposal":"Create Proposal"})]})})]})]})]})}):null},Iv=({status:e,size:t="md"})=>{const r=a=>{const l={draft:"bg-gray-900/30 text-gray-400 border-gray-500/30",review:"bg-yellow-900/30 text-yellow-400 border-yellow-500/30",approved:"bg-blue-900/30 text-blue-400 border-blue-500/30",sent:"bg-purple-900/30 text-purple-400 border-purple-500/30",viewed:"bg-indigo-900/30 text-indigo-400 border-indigo-500/30",accepted:"bg-green-900/30 text-green-400 border-green-500/30",rejected:"bg-red-900/30 text-red-400 border-red-500/30",expired:"bg-orange-900/30 text-orange-400 border-orange-500/30",revised:"bg-teal-900/30 text-teal-400 border-teal-500/30"};return l[a]||l.draft},n={sm:"px-2 py-1 text-xs",md:"px-3 py-1.5 text-sm",lg:"px-4 py-2 text-base"};return s.jsx("span",{className:`
      inline-flex items-center rounded-full font-medium border
      ${r(e)}
      ${n[t]}
    `,children:e.charAt(0).toUpperCase()+e.slice(1)})},p3=({proposal:e,onClick:t})=>{const r=l=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(l),n=l=>l?new Date(l).toLocaleDateString("en-US",{month:"short",day:"numeric"}):null,a=l=>{const o=new Date(l),c=new Date().getTime()-o.getTime(),h=Math.floor(c/(1e3*60*60*24));if(h===0){const u=Math.floor(c/36e5);if(u===0){const d=Math.floor(c/6e4);return`${d} minute${d!==1?"s":""} ago`}return`${u} hour${u!==1?"s":""} ago`}else return h<30?`${h} day${h!==1?"s":""} ago`:n(l)||""};return s.jsxs("div",{onClick:t,className:"glass-card p-4 cursor-pointer transition-all duration-300 group hover:scale-105 hover:shadow-xl hover:bg-gray-700/50 border border-gray-700/50 hover:border-purple-500/30",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"font-semibold text-white text-sm truncate group-hover:text-purple-100 transition-colors",children:e.title}),e.deal&&s.jsx("p",{className:"text-xs text-gray-400 mt-1 truncate",children:e.deal.deal_name})]}),s.jsx(Iv,{status:e.status,size:"sm"})]}),s.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[s.jsx(oe,{className:"h-4 w-4 text-purple-400"}),s.jsx("span",{className:"font-bold text-purple-400 text-lg",children:r(e.proposal_value)})]}),e.lead&&s.jsxs("div",{className:"space-y-1 mb-3",children:[s.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-400",children:[s.jsx(Fe,{className:"h-3 w-3"}),s.jsxs("span",{className:"truncate",children:[e.lead.first_name," ",e.lead.last_name]})]}),e.lead.company&&s.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-400",children:[s.jsx(As,{className:"h-3 w-3"}),s.jsx("span",{className:"truncate",children:e.lead.company})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-400",children:[s.jsx(Qt,{className:"h-3 w-3"}),s.jsx("span",{className:"truncate",children:e.lead.email})]})]}),s.jsxs("div",{className:"space-y-1 mb-3",children:[e.sent_date&&s.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-400",children:[s.jsx(lr,{className:"h-3 w-3"}),s.jsxs("span",{children:["Sent: ",n(e.sent_date)]})]}),e.expiration_date&&s.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-400",children:[s.jsx(Ne,{className:"h-3 w-3"}),s.jsxs("span",{children:["Expires: ",n(e.expiration_date)]})]}),e.last_viewed_date&&s.jsxs("div",{className:"flex items-center space-x-2 text-xs text-green-400",children:[s.jsx(Is,{className:"h-3 w-3"}),s.jsxs("span",{children:["Viewed: ",n(e.last_viewed_date)]})]})]}),s.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-700/50",children:[s.jsxs("div",{className:"flex items-center space-x-1 text-xs text-gray-500",children:[s.jsx(lr,{className:"h-3 w-3"}),s.jsx("span",{children:a(e.created_at)})]}),s.jsx("div",{className:"text-xs text-gray-500",children:e.follow_up_count>0&&s.jsxs("span",{className:"px-2 py-0.5 bg-purple-900/30 text-purple-400 rounded-full",children:[e.follow_up_count," follow-up",e.follow_up_count!==1?"s":""]})})]}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-400/5 to-blue-600/5 rounded-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"})]})},f3=({filters:e,onFilterChange:t,onDateRangeChange:r,users:n,deals:a})=>s.jsxs("div",{className:"glass-card p-4",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[s.jsx(ax,{className:"h-4 w-4 text-gray-400"}),s.jsx("span",{className:"text-sm font-medium text-gray-300",children:"Filters"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-3",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Lr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search proposals...",value:e.search,onChange:l=>t("search",l.target.value),className:"w-full pl-9 pr-3 py-2 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-white placeholder-gray-400 text-sm"})]}),s.jsxs("select",{value:e.status,onChange:l=>t("status",l.target.value),className:"px-3 py-2 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-white text-sm",children:[s.jsx("option",{value:"",children:"All Statuses"}),s.jsx("option",{value:"draft",children:"Draft"}),s.jsx("option",{value:"review",children:"Review"}),s.jsx("option",{value:"approved",children:"Approved"}),s.jsx("option",{value:"sent",children:"Sent"}),s.jsx("option",{value:"viewed",children:"Viewed"}),s.jsx("option",{value:"accepted",children:"Accepted"}),s.jsx("option",{value:"rejected",children:"Rejected"}),s.jsx("option",{value:"expired",children:"Expired"}),s.jsx("option",{value:"revised",children:"Revised"})]}),s.jsxs("select",{value:e.deal_id,onChange:l=>t("deal_id",l.target.value),className:"px-3 py-2 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-white text-sm",children:[s.jsx("option",{value:"",children:"All Deals"}),a.map(l=>s.jsx("option",{value:l.id,children:l.deal_name},l.id))]}),s.jsxs("select",{value:e.assigned_to,onChange:l=>t("assigned_to",l.target.value),className:"px-3 py-2 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-white text-sm",children:[s.jsx("option",{value:"",children:"All Users"}),n.map(l=>s.jsx("option",{value:l.id,children:l.full_name||l.email},l.id))]}),s.jsxs("select",{value:e.date_range,onChange:l=>r(l.target.value),className:"px-3 py-2 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-white text-sm",children:[s.jsx("option",{value:"all",children:"All Time"}),s.jsx("option",{value:"last_7_days",children:"Last 7 Days"}),s.jsx("option",{value:"last_30_days",children:"Last 30 Days"}),s.jsx("option",{value:"last_90_days",children:"Last 90 Days"}),s.jsx("option",{value:"custom",children:"Custom Range"})]}),s.jsxs("select",{value:e.value_range,onChange:l=>t("value_range",l.target.value),className:"px-3 py-2 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-white text-sm",children:[s.jsx("option",{value:"all",children:"All Values"}),s.jsx("option",{value:"under_10k",children:"Under $10K"}),s.jsx("option",{value:"10k_50k",children:"$10K - $50K"}),s.jsx("option",{value:"50k_100k",children:"$50K - $100K"}),s.jsx("option",{value:"over_100k",children:"Over $100K"})]})]}),e.date_range==="custom"&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-3",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-xs text-gray-400",children:"Start Date"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ne,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx("input",{type:"date",value:e.start_date||"",onChange:l=>t("start_date",l.target.value),className:"w-full pl-9 pr-3 py-2 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-white text-sm"})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-xs text-gray-400",children:"End Date"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ne,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx("input",{type:"date",value:e.end_date||"",onChange:l=>t("end_date",l.target.value),className:"w-full pl-9 pr-3 py-2 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-white text-sm"})]})]})]})]}),g3=({isOpen:e,proposal:t,leads:r,onClose:n,onGenerate:a})=>{const[l,o]=j.useState("leadSelection"),[i,c]=j.useState(null),[h,u]=j.useState(""),[d,m]=j.useState([]),[p,f]=j.useState(""),[x,b]=j.useState(""),[g,v]=j.useState("transcript"),[y,w]=j.useState(!1),[N,k]=j.useState("");j.useEffect(()=>{if(h){const E=r.filter(I=>I.first_name.toLowerCase().includes(h.toLowerCase())||I.last_name.toLowerCase().includes(h.toLowerCase())||I.email.toLowerCase().includes(h.toLowerCase())||I.company&&I.company.toLowerCase().includes(h.toLowerCase()));m(E)}else m(r)},[h,r]),j.useEffect(()=>{if(t&&t.lead&&r.length>0){const E=r.find(I=>{var z;return I.id===((z=t.lead)==null?void 0:z.id)});E&&(c(E),o("inputDetails"))}},[t,r]),j.useEffect(()=>{e&&((!t||!t.lead)&&(o("leadSelection"),c(null)),u(""),f(""),b(""),v("transcript"),k(""),w(!1))},[e,t]);const D=E=>{c(E),o("inputDetails")},C=()=>{o("leadSelection"),k("")},_=async()=>{if(k(""),g==="transcript"&&!p.trim()){k("Please enter a meeting transcript");return}if(g==="meeting_number"&&!x.trim()){k("Please enter a meeting number");return}if(!i){k("Please select a lead");return}w(!0);try{const E=g==="transcript"?{transcript:p.trim()}:{meetingNumber:x.trim()};await a(i,E,t==null?void 0:t.id),n()}catch(E){k(E.message||"Failed to generate AI proposal")}finally{w(!1)}},S=()=>{o("leadSelection"),c(null),u(""),f(""),b(""),k(""),w(!1),n()},O=E=>{const I={new:"bg-blue-900/30 text-blue-400",contacted:"bg-yellow-900/30 text-yellow-400",qualified:"bg-green-900/30 text-green-400",proposal_sent:"bg-purple-900/30 text-purple-400",closed_won:"bg-emerald-900/30 text-emerald-400",closed_lost:"bg-red-900/30 text-red-400",nurturing:"bg-orange-900/30 text-orange-400",unqualified:"bg-gray-900/30 text-gray-400"};return I[E]||I.new};return e?s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"glass-card w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-700",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-gradient-to-br from-cyan-400/20 to-blue-500/20 rounded-xl",children:s.jsx(Yt,{className:"h-6 w-6 text-cyan-400"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold gradient-text bg-gradient-to-r from-cyan-400 to-blue-500",children:"Generate AI Proposal"}),s.jsx("p",{className:"text-sm text-gray-400 mt-1",children:t?"Enhance existing proposal with AI":"Create new proposal using AI"})]})]}),s.jsx("button",{onClick:S,className:"text-gray-400 hover:text-white transition-colors",children:s.jsx(cr,{className:"h-6 w-6"})})]}),s.jsx("div",{className:"p-6 border-b border-gray-700",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:`flex items-center space-x-2 ${l==="leadSelection"?"text-cyan-400":"text-green-400"}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold ${l==="leadSelection"?"bg-cyan-400/20 border-2 border-cyan-400":"bg-green-400/20 border-2 border-green-400"}`,children:"1"}),s.jsx("span",{className:"font-medium",children:"Select Lead"})]}),s.jsx(ir,{className:"h-5 w-5 text-gray-400"}),s.jsxs("div",{className:`flex items-center space-x-2 ${l==="inputDetails"?"text-cyan-400":"text-gray-400"}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold ${l==="inputDetails"?"bg-cyan-400/20 border-2 border-cyan-400":"bg-gray-700 border-2 border-gray-600"}`,children:"2"}),s.jsx("span",{className:"font-medium",children:"Meeting Details"})]})]})}),t&&s.jsxs("div",{className:"p-6 bg-gradient-to-r from-purple-900/20 to-blue-900/20 border-b border-purple-500/30",children:[s.jsx("h3",{className:"font-semibold text-purple-400 mb-3",children:"Current Proposal"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400",children:"Title:"}),s.jsx("p",{className:"text-white font-semibold",children:t.title})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400",children:"Value:"}),s.jsxs("p",{className:"text-white font-semibold",children:["$",t.proposal_value.toLocaleString()]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400",children:"Status:"}),s.jsx("p",{className:"text-white capitalize",children:t.status})]})]})]}),N&&s.jsx("div",{className:"p-6 border-b border-gray-700",children:s.jsxs("div",{className:"p-4 bg-red-900/20 border border-red-500/30 rounded-lg flex items-center space-x-2",children:[s.jsx(D1,{className:"h-5 w-5 text-red-400 flex-shrink-0"}),s.jsx("p",{className:"text-red-400 text-sm",children:N})]})}),l==="leadSelection"&&s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Select Lead"}),s.jsx("p",{className:"text-gray-400 text-sm",children:"Choose the lead/client for whom you want to generate the AI proposal."})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Lr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search leads by name, email, or company...",value:h,onChange:E=>u(E.target.value),className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent text-white placeholder-gray-400",autoFocus:!0})]}),s.jsx("div",{className:"max-h-96 overflow-y-auto",children:d.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Fe,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-400",children:h?"No leads found matching your search.":"No leads available."})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:d.map(E=>s.jsx("button",{onClick:()=>D(E),className:`text-left p-4 border-2 rounded-lg transition-all duration-200 hover:scale-105 ${(i==null?void 0:i.id)===E.id?"border-cyan-500 bg-cyan-900/20 text-white":"border-gray-700/50 bg-gray-800/30 text-gray-300 hover:border-gray-600/50 hover:bg-gray-700/50"}`,children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"p-2 bg-cyan-900/30 rounded-lg",children:s.jsx(Fe,{className:"h-5 w-5 text-cyan-400"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"font-semibold text-white",children:[E.first_name," ",E.last_name]}),s.jsxs("div",{className:"text-sm text-gray-400 flex items-center space-x-1 mt-1",children:[s.jsx(Qt,{className:"h-3 w-3"}),s.jsx("span",{className:"truncate",children:E.email})]}),E.company&&s.jsxs("div",{className:"text-sm text-gray-400 flex items-center space-x-1 mt-1",children:[s.jsx(As,{className:"h-3 w-3"}),s.jsx("span",{className:"truncate",children:E.company})]}),E.phone&&s.jsxs("div",{className:"text-sm text-gray-400 flex items-center space-x-1 mt-1",children:[s.jsx(_t,{className:"h-3 w-3"}),s.jsx("span",{children:E.phone})]}),s.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${O(E.status)}`,children:E.status.replace("_"," ").toUpperCase()}),E.revenue_generated>0&&s.jsxs("span",{className:"text-xs text-green-400 font-medium",children:["$",E.revenue_generated.toLocaleString()]})]})]})]})},E.id))})}),s.jsxs("div",{className:"flex justify-between pt-4 border-t border-gray-700",children:[s.jsx("button",{onClick:S,className:"px-6 py-2 text-gray-400 hover:text-white transition-colors",children:"Cancel"}),s.jsxs("button",{onClick:()=>o("inputDetails"),disabled:!i,className:"flex items-center space-x-2 px-6 py-2 bg-gradient-to-r from-cyan-400 to-blue-500 hover:from-cyan-500 hover:to-blue-600 text-white font-medium rounded-lg transition-all duration-200 disabled:opacity-50",children:[s.jsx("span",{children:"Next"}),s.jsx(ir,{className:"h-4 w-4"})]})]})]}),l==="inputDetails"&&s.jsxs("div",{className:"p-6 space-y-6",children:[i&&s.jsxs("div",{className:"p-4 bg-gradient-to-r from-cyan-900/20 to-blue-900/20 border border-cyan-500/30 rounded-lg",children:[s.jsx("h3",{className:"font-semibold text-cyan-400 mb-3",children:"Selected Lead"}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-cyan-900/30 rounded-lg",children:s.jsx(Fe,{className:"h-5 w-5 text-cyan-400"})}),s.jsxs("div",{children:[s.jsxs("div",{className:"font-semibold text-white",children:[i.first_name," ",i.last_name]}),s.jsx("div",{className:"text-sm text-gray-400",children:i.email}),i.company&&s.jsx("div",{className:"text-sm text-gray-400",children:i.company})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Meeting Information"}),s.jsx("p",{className:"text-gray-400 text-sm",children:"Provide either the meeting transcript or meeting number for AI analysis."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"text-md font-semibold text-white",children:"Choose Input Method"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("button",{type:"button",onClick:()=>v("transcript"),className:`
                    p-4 rounded-xl border-2 transition-all duration-200 text-left
                    ${g==="transcript"?"border-cyan-500 bg-cyan-900/20 text-white":"border-gray-700 bg-gray-800/30 text-gray-300 hover:border-gray-600 hover:bg-gray-700/30"}
                  `,children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[s.jsx(Dt,{className:"h-6 w-6 text-cyan-400"}),s.jsx("span",{className:"font-semibold",children:"Meeting Transcript"})]}),s.jsx("p",{className:"text-sm text-gray-400",children:"Paste the full transcript from your meeting with the client"})]}),s.jsxs("button",{type:"button",onClick:()=>v("meeting_number"),className:`
                    p-4 rounded-xl border-2 transition-all duration-200 text-left
                    ${g==="meeting_number"?"border-cyan-500 bg-cyan-900/20 text-white":"border-gray-700 bg-gray-800/30 text-gray-300 hover:border-gray-600 hover:bg-gray-700/30"}
                  `,children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[s.jsx(vm,{className:"h-6 w-6 text-blue-400"}),s.jsx("span",{className:"font-semibold",children:"Meeting Number"})]}),s.jsx("p",{className:"text-sm text-gray-400",children:"Enter the meeting ID or reference number"})]})]})]}),s.jsx("div",{className:"space-y-4",children:g==="transcript"?s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Meeting Transcript *"}),s.jsxs("div",{className:"relative",children:[s.jsx(Dt,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),s.jsx("textarea",{value:p,onChange:E=>f(E.target.value),rows:12,className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent text-white placeholder-gray-400 resize-none font-mono text-sm",placeholder:`Paste the meeting transcript here...

Example:
[00:00] John: Hi, thanks for taking the time to meet with us today.
[00:15] Client: Of course, I'm excited to learn more about your services.
[00:30] John: Let me start by understanding your current challenges...`,required:!0})]}),s.jsx("p",{className:"text-xs text-gray-500",children:"Include timestamps and speaker names for best AI analysis results."})]}):s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Meeting Number *"}),s.jsxs("div",{className:"relative",children:[s.jsx(vm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"text",value:x,onChange:E=>b(E.target.value),className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent text-white placeholder-gray-400",placeholder:"Enter meeting ID, reference number, or identifier",required:!0})]}),s.jsx("p",{className:"text-xs text-gray-500",children:"This should be a unique identifier for the meeting in your system."})]})}),s.jsx("div",{className:"p-4 bg-gradient-to-r from-cyan-900/20 to-blue-900/20 border border-cyan-500/30 rounded-lg",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(Yt,{className:"h-5 w-5 text-cyan-400 mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-cyan-400 mb-2",children:"AI Proposal Generation"}),s.jsx("p",{className:"text-sm text-gray-300 mb-2",children:"Our AI will analyze the meeting content and generate a customized proposal including:"}),s.jsxs("ul",{className:"text-sm text-gray-400 space-y-1",children:[s.jsx("li",{children:" Identified client needs and pain points"}),s.jsx("li",{children:" Recommended service packages and solutions"}),s.jsx("li",{children:" Customized pricing and timeline"}),s.jsx("li",{children:" Relevant deliverables and project scope"}),s.jsx("li",{children:" Personalized proposal content and messaging"}),s.jsx("li",{children:" Shareable proposal link for client access"})]})]})]})}),s.jsxs("div",{className:"flex justify-between pt-4 border-t border-gray-700",children:[s.jsxs("button",{onClick:C,className:"flex items-center space-x-2 px-6 py-2 text-gray-400 hover:text-white transition-colors",children:[s.jsx(Or,{className:"h-4 w-4"}),s.jsx("span",{children:"Back"})]}),s.jsx("button",{onClick:_,disabled:y||g==="transcript"&&!p.trim()||g==="meeting_number"&&!x.trim(),className:"flex items-center space-x-2 px-6 py-2 bg-gradient-to-r from-cyan-400 to-blue-500 hover:from-cyan-500 hover:to-blue-600 text-white font-medium rounded-lg transition-all duration-200 disabled:opacity-50",children:y?s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):s.jsxs(s.Fragment,{children:[s.jsx(jn,{className:"h-5 w-5"}),s.jsx("span",{children:"Generate AI Proposal"})]})})]})]})]})}):null};class x3{constructor(){this.webhookUrl="https://hook.eu2.make.com/6qljcipjqxr9lsgy5kv1r2goyeot8urx",this.retryAttempts=3,this.retryDelay=1e3}async sendAIProposalRequest(t,r,n,a,l){try{const o=await this.getUserData(n);if(!o)throw new Error("User data not found");const i=r.transcript?"transcript":"meeting_number",c={proposal:a?this.sanitizeProposalData(a):void 0,deal:l?this.sanitizeDealData(l):void 0,lead:this.sanitizeLeadData(t),user:this.sanitizeUserData(o),input:{type:i,transcript:r.transcript,meeting_number:r.meetingNumber},metadata:{timestamp:new Date().toISOString(),source:"vertical_systems_crm",version:"1.0",environment:"production",action:"ai_proposal_generation_requested",context:a?"enhance_existing_proposal":"new_proposal"}},h=await this.sendWithRetry(c);return console.log("AI proposal webhook sent successfully:",{proposalId:a==null?void 0:a.id,dealId:l==null?void 0:l.id,leadId:t.id,inputType:i,timestamp:c.metadata.timestamp}),h}catch(o){throw console.error("Failed to send AI proposal webhook:",o),o}}async getUserData(t){try{const{data:r,error:n}=await K.from("users").select("id, email, full_name, role, phone, job_title").eq("id",t).single();return n?(console.error("Error fetching user data:",n),null):r}catch(r){return console.error("Supabase request failed:",r),null}}sanitizeProposalData(t){return{id:t.id,title:t.title,proposal_value:t.proposal_value,status:t.status,created_at:t.created_at,updated_at:t.updated_at,deliverables:t.deliverables||[],timelines:t.timelines||[],proposal_text:t.proposal_text,client_notes:t.client_notes,internal_notes:t.internal_notes,proposal_link:t.proposal_link,sent_date:t.sent_date,last_viewed_date:t.last_viewed_date,expiration_date:t.expiration_date,follow_up_count:t.follow_up_count||0}}sanitizeDealData(t){return{id:t.id,deal_name:t.deal_name,deal_value:t.deal_value,stage:t.stage,service_type:t.service_type,deal_source:t.deal_source,probability:t.probability,expected_close_date:t.expected_close_date,notes:t.notes,created_at:t.created_at,updated_at:t.updated_at}}sanitizeLeadData(t){return{id:t.id,first_name:t.first_name,last_name:t.last_name,email:t.email,phone:t.phone,company:t.company,job_title:t.job_title,status:t.status,lead_source:t.lead_source,lead_type:t.lead_type,priority:t.priority,revenue_generated:t.revenue_generated||0,cash_collected:t.cash_collected||0,notes:t.notes,tags:t.tags,website:t.website,address:t.address,city:t.city,state:t.state,country:t.country,zip_code:t.zip_code,lead_checklist:t.lead_checklist||{},checklist_dates:t.checklist_dates||{},follow_ups_completed:t.follow_ups_completed||[],follow_up_dates:t.follow_up_dates||[],created_at:t.created_at,updated_at:t.updated_at,follow_up_completion_rate:this.calculateFollowUpRate(t.follow_ups_completed),checklist_completion_rate:this.calculateChecklistRate(t.lead_checklist),outstanding_revenue:(t.revenue_generated||0)-(t.cash_collected||0),collection_rate:t.revenue_generated>0?(t.cash_collected||0)/t.revenue_generated*100:0}}sanitizeUserData(t){return{id:t.id,email:t.email,full_name:t.full_name,role:t.role,phone:t.phone,job_title:t.job_title}}calculateFollowUpRate(t){return!t||t.length===0?0:t.filter(Boolean).length/t.length*100}calculateChecklistRate(t){if(!t)return 0;const r=Object.values(t),n=r.filter(Boolean).length;return r.length>0?n/r.length*100:0}async sendWithRetry(t,r=1){try{const n=await fetch(this.webhookUrl,{method:"POST",headers:{"Content-Type":"application/json","User-Agent":"VerticalSystems-CRM/1.0"},body:JSON.stringify(t)});if(!n.ok)throw new Error(`AI proposal webhook failed with status: ${n.status} ${n.statusText}`);const a=await n.text();console.log("AI proposal webhook response (raw):",a);try{const l=JSON.parse(a);return console.log("AI proposal webhook response (parsed):",l),l}catch{if(console.log("Non-JSON response received:",a),a.trim().toLowerCase()==="accepted")return console.log("Webhook accepted but returned no structured data"),{success:!0,proposal_link:void 0,proposal_text:void 0,title:void 0,proposal_value:void 0,deliverables:void 0,timelines:void 0};if(a.trim().startsWith("http"))return console.log("Webhook returned a URL as proposal link"),{success:!0,proposal_link:a.trim(),proposal_text:void 0,title:void 0,proposal_value:void 0,deliverables:void 0,timelines:void 0};throw new Error(`Unexpected webhook response format. Expected JSON but received: ${a.substring(0,100)}${a.length>100?"...":""}`)}}catch(n){if(console.error(`AI proposal webhook attempt ${r} failed:`,n),r<this.retryAttempts)return await new Promise(a=>setTimeout(a,this.retryDelay*r)),this.sendWithRetry(t,r+1);throw n}}}const v3=new x3,y3=()=>{const{user:e}=Oe(),{proposals:t,loading:r,error:n,fetchProposals:a,createProposal:l,updateProposal:o,updateProposalStatus:i,deleteProposal:c,incrementFollowUp:h,setLoading:u}=o3(),{users:d,fetchUsers:m}=sl(),{deals:p,fetchDeals:f}=pi(),{leads:x,fetchLeads:b}=i3(),[g,v]=j.useState([]),[y,w]=j.useState([]),[N,k]=j.useState(!1),[D,C]=j.useState(),[_,S]=j.useState(1),[O,E]=j.useState(10),[I,z]=j.useState("list"),[te,se]=j.useState(new Date),[de,$]=j.useState(!1),[G,R]=j.useState(),[M,F]=j.useState({search:"",status:"",deal_id:"",assigned_to:"",date_range:"all",value_range:"all"}),A=[10,15,25,50];j.useEffect(()=>{a(),m(),f(),b()},[]),j.useEffect(()=>{let B=[...t];if(M.search){const X=M.search.toLowerCase();B=B.filter(U=>{var ie,$n,Mt;return U.title.toLowerCase().includes(X)||U.proposal_text&&U.proposal_text.toLowerCase().includes(X)||((ie=U.lead)==null?void 0:ie.first_name)&&U.lead.first_name.toLowerCase().includes(X)||(($n=U.lead)==null?void 0:$n.last_name)&&U.lead.last_name.toLowerCase().includes(X)||((Mt=U.lead)==null?void 0:Mt.company)&&U.lead.company.toLowerCase().includes(X)})}M.status&&(B=B.filter(X=>X.status===M.status)),M.deal_id&&(B=B.filter(X=>X.deal_id===M.deal_id)),M.assigned_to&&(B=B.filter(X=>X.assigned_to===M.assigned_to)),M.value_range!=="all"&&(B=B.filter(X=>{const U=X.proposal_value;switch(M.value_range){case"under_10k":return U<1e4;case"10k_50k":return U>=1e4&&U<5e4;case"50k_100k":return U>=5e4&&U<1e5;case"over_100k":return U>=1e5;default:return!0}})),v(B),S(1)},[t,M]);const T=t.reduce((B,X)=>({totalValue:B.totalValue+X.proposal_value,draftValue:B.draftValue+(X.status==="draft"?X.proposal_value:0),sentValue:B.sentValue+(X.status==="sent"||X.status==="viewed"?X.proposal_value:0),acceptedValue:B.acceptedValue+(X.status==="accepted"?X.proposal_value:0),rejectedValue:B.rejectedValue+(X.status==="rejected"?X.proposal_value:0)}),{totalValue:0,draftValue:0,sentValue:0,acceptedValue:0,rejectedValue:0}),W=Math.ceil(g.length/O),Z=(_-1)*O,P=g.slice(Z,Z+O),Q=(B,X)=>{F(U=>({...U,[B]:X}))},ue=B=>{F(X=>({...X,date_range:B,start_date:B==="custom"?X.start_date:void 0,end_date:B==="custom"?X.end_date:void 0}))},ve=B=>{E(B),S(1)},L=B=>{w(X=>X.includes(B)?X.filter(U=>U!==B):[...X,B])},Y=()=>{y.length===P.length?w([]):w(P.map(B=>B.id))},ae=B=>{C(B),k(!0)},q=B=>{a(),C(void 0)},re=async B=>{try{const{error:X}=await h(B);X?console.error("Error incrementing follow-up count:",X):a()}catch(X){console.error("Error incrementing follow-up count:",X)}},pe=async()=>{await a(),se(new Date)},$e=B=>{R(B),$(!0)},vr=async(B,X,U)=>{if(e)try{u(!0);let ie=null;if(B.id){const{data:yr,error:Oi}=await K.from("deals").select("*").eq("lead_id",B.id).order("created_at",{ascending:!1}).limit(1).single();!Oi&&yr&&(ie=yr)}let $n=null;if(U){const yr=t.find(Oi=>Oi.id===U);yr&&($n=yr)}const Mt=await v3.sendAIProposalRequest(B,X,e.id,$n,ie);if(!Mt.success)throw new Error(Mt.error||"AI proposal generation failed");const Ih={title:Mt.title||`Proposal for ${B.company||`${B.first_name} ${B.last_name}`}`,proposal_text:Mt.proposal_text||"",proposal_value:Mt.proposal_value||(ie==null?void 0:ie.deal_value)||15e3,deliverables:Mt.deliverables||[],timelines:Mt.timelines||[],proposal_link:Mt.proposal_link||"",status:"draft",assigned_to:e.id,deal_id:(ie==null?void 0:ie.id)||null};if(U){const{error:yr}=await o(U,Ih);if(yr)throw new Error("Failed to update proposal with AI content")}else{const{error:yr}=await l({...Ih,created_by:e.id});if(yr)throw new Error("Failed to create new proposal with AI content")}await a(),console.log("AI Proposal generated successfully:",{leadId:B.id,proposalLink:Mt.proposal_link,existingProposalId:U})}catch(ie){console.error("Error generating AI proposal:",ie)}finally{u(!1),$(!1),R(void 0)}},Ve=B=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(B),kt=B=>B?new Date(B).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"-";return r&&t.length===0?s.jsx("div",{className:"flex items-center justify-center p-8",children:s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-purple-400/30 border-t-purple-400"}),s.jsx("div",{className:"absolute inset-0 rounded-full bg-purple-400/10 animate-pulse"})]})}):s.jsx(dr,{section:"documents",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"space-y-2",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-gradient-to-br from-purple-400/20 to-blue-600/20 rounded-xl",children:s.jsx(Dt,{className:"h-8 w-8 text-purple-400"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold gradient-text section-gradient-documents",children:"Proposals"}),s.jsx("p",{className:"text-gray-400 mt-1",children:"Create, manage, and track client proposals through the sales process."})]})]})}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm text-gray-400",children:"Last Updated"}),s.jsx("p",{className:"text-sm font-semibold text-white",children:te.toLocaleTimeString()})]}),s.jsxs("button",{onClick:pe,disabled:r,className:"flex items-center space-x-2 px-4 py-2 bg-gray-800 hover:bg-gray-700 text-white rounded-lg transition-all duration-200 hover:scale-105",children:[s.jsx(xr,{className:`h-4 w-4 ${r?"animate-spin":""}`}),s.jsx("span",{children:"Refresh"})]}),s.jsxs("button",{onClick:()=>{C(void 0),k(!0)},className:"group flex items-center space-x-2 px-6 py-3 bg-gradient-to-r from-purple-400 to-blue-600 hover:from-purple-500 hover:to-blue-700 text-white font-semibold rounded-xl transition-all duration-300 hover:scale-105 hover:shadow-xl hover:shadow-purple-500/25",children:[s.jsx(St,{className:"h-5 w-5 group-hover:rotate-90 transition-transform duration-300"}),s.jsx("span",{children:"Create Proposal"})]}),s.jsxs("button",{onClick:()=>$e(),className:"group flex items-center space-x-2 px-6 py-3 bg-gradient-to-r from-cyan-400 to-blue-500 hover:from-cyan-500 hover:to-blue-600 text-white font-semibold rounded-xl transition-all duration-300 hover:scale-105 hover:shadow-xl hover:shadow-cyan-500/25",children:[s.jsx(Yt,{className:"h-5 w-5 group-hover:rotate-12 transition-transform duration-300"}),s.jsx("span",{children:"Generate AI Proposal"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[s.jsx("div",{className:"glass-card p-6 hover:bg-gray-800/60 transition-all duration-300 group hover:scale-105 hover:shadow-xl hover:shadow-purple-500/10",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors",children:"Total Proposals"}),s.jsx("p",{className:"text-3xl font-bold text-white mt-1",children:t.length}),s.jsxs("p",{className:"text-xs text-purple-400 mt-1 flex items-center",children:[s.jsx(Dt,{className:"h-3 w-3 mr-1"}),"All proposals"]})]}),s.jsx("div",{className:"p-3 bg-gradient-to-br from-purple-400/20 to-blue-600/20 rounded-xl group-hover:scale-110 transition-transform duration-300",children:s.jsx(Dt,{className:"h-8 w-8 text-purple-400"})})]})}),s.jsx("div",{className:"glass-card p-6 hover:bg-gray-800/60 transition-all duration-300 group hover:scale-105 hover:shadow-xl hover:shadow-blue-500/10",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors",children:"Total Value"}),s.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:Ve(T.totalValue)}),s.jsxs("p",{className:"text-xs text-blue-400 mt-1 flex items-center",children:[s.jsx(oe,{className:"h-3 w-3 mr-1"}),"Proposed value"]})]}),s.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-400/20 to-blue-600/20 rounded-xl group-hover:scale-110 transition-transform duration-300",children:s.jsx(oe,{className:"h-8 w-8 text-blue-400"})})]})}),s.jsx("div",{className:"glass-card p-6 hover:bg-gray-800/60 transition-all duration-300 group hover:scale-105 hover:shadow-xl hover:shadow-yellow-500/10",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors",children:"Sent Value"}),s.jsx("p",{className:"text-2xl font-bold text-yellow-400 mt-1",children:Ve(T.sentValue)}),s.jsxs("p",{className:"text-xs text-yellow-400 mt-1 flex items-center",children:[s.jsx(Qt,{className:"h-3 w-3 mr-1"}),"Awaiting response"]})]}),s.jsx("div",{className:"p-3 bg-gradient-to-br from-yellow-400/20 to-yellow-600/20 rounded-xl group-hover:scale-110 transition-transform duration-300",children:s.jsx(Qt,{className:"h-8 w-8 text-yellow-400"})})]})}),s.jsx("div",{className:"glass-card p-6 hover:bg-gray-800/60 transition-all duration-300 group hover:scale-105 hover:shadow-xl hover:shadow-green-500/10",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors",children:"Accepted Value"}),s.jsx("p",{className:"text-2xl font-bold text-green-400 mt-1",children:Ve(T.acceptedValue)}),s.jsxs("p",{className:"text-xs text-green-400 mt-1 flex items-center",children:[s.jsx(ct,{className:"h-3 w-3 mr-1"}),"Closed won"]})]}),s.jsx("div",{className:"p-3 bg-gradient-to-br from-green-400/20 to-green-600/20 rounded-xl group-hover:scale-110 transition-transform duration-300",children:s.jsx(ct,{className:"h-8 w-8 text-green-400"})})]})}),s.jsx("div",{className:"glass-card p-6 hover:bg-gray-800/60 transition-all duration-300 group hover:scale-105 hover:shadow-xl hover:shadow-red-500/10",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors",children:"Rejected Value"}),s.jsx("p",{className:"text-2xl font-bold text-red-400 mt-1",children:Ve(T.rejectedValue)}),s.jsxs("p",{className:"text-xs text-red-400 mt-1 flex items-center",children:[s.jsx(ye,{className:"h-3 w-3 mr-1"}),"Lost opportunities"]})]}),s.jsx("div",{className:"p-3 bg-gradient-to-br from-red-400/20 to-red-600/20 rounded-xl group-hover:scale-110 transition-transform duration-300",children:s.jsx(ye,{className:"h-8 w-8 text-red-400"})})]})})]}),s.jsx(f3,{filters:M,onFilterChange:Q,onDateRangeChange:ue,users:d,deals:p}),n&&s.jsx("div",{className:"p-4 bg-red-900/20 border border-red-500/30 rounded-lg animate-pulse",children:s.jsx("p",{className:"text-red-400 text-sm",children:n})}),s.jsx("div",{className:"flex justify-end",children:s.jsxs("div",{className:"flex bg-gray-800 rounded-lg p-1",children:[s.jsxs("button",{onClick:()=>z("list"),className:`flex items-center space-x-1 px-3 py-1.5 rounded-md transition-all duration-200 text-sm ${I==="list"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:[s.jsx(Ie,{className:"h-4 w-4"}),s.jsx("span",{children:"List"})]}),s.jsxs("button",{onClick:()=>z("grid"),className:`flex items-center space-x-1 px-3 py-1.5 rounded-md transition-all duration-200 text-sm ${I==="grid"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:[s.jsx(Dt,{className:"h-4 w-4"}),s.jsx("span",{children:"Grid"})]})]})}),I==="grid"&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[P.map(B=>s.jsx(p3,{proposal:B,onClick:()=>ae(B)},B.id)),P.length===0&&s.jsxs("div",{className:"col-span-full glass-card p-8 text-center",children:[s.jsx(Dt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-300 mb-2",children:"No Proposals Found"}),s.jsx("p",{className:"text-gray-400 text-sm mb-4",children:M.search||M.status||M.deal_id||M.assigned_to||M.date_range!=="all"||M.value_range!=="all"?"Try adjusting your filters to see more results.":"Get started by creating your first proposal."}),s.jsx("button",{onClick:()=>{C(void 0),k(!0)},className:"px-4 py-2 bg-gradient-to-r from-purple-400 to-blue-600 hover:from-purple-500 hover:to-blue-700 text-white font-medium rounded-lg transition-all duration-200",children:"Create Proposal"})]})]}),I==="list"&&s.jsxs("div",{className:"glass-card overflow-hidden hover:bg-gray-800/30 transition-all duration-300",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-800/60 backdrop-blur-sm",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-4 text-left",children:s.jsx("input",{type:"checkbox",checked:y.length===P.length&&P.length>0,onChange:Y,className:"rounded border-gray-600 bg-gray-700 text-purple-500 focus:ring-purple-500 hover:scale-110 transition-transform duration-200"})}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300 hover:text-white transition-colors",children:"Title"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300 hover:text-white transition-colors",children:"Status"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300 hover:text-white transition-colors",children:"Client"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300 hover:text-white transition-colors",children:"Value"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300 hover:text-white transition-colors",children:"Created"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300 hover:text-white transition-colors",children:"Sent"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300 hover:text-white transition-colors",children:"Follow-ups"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300 hover:text-white transition-colors",children:"Proposal Link"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300 hover:text-white transition-colors",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-800/50",children:P.map(B=>s.jsxs("tr",{className:"hover:bg-gray-800/40 transition-all duration-300 group hover:shadow-lg hover:shadow-gray-900/20",children:[s.jsx("td",{className:"px-6 py-5",children:s.jsx("input",{type:"checkbox",checked:y.includes(B.id),onChange:()=>L(B.id),className:"rounded border-gray-600 bg-gray-700 text-purple-500 focus:ring-purple-500 hover:scale-110 transition-transform duration-200"})}),s.jsx("td",{className:"px-6 py-5",children:s.jsxs("div",{className:"group-hover:scale-105 transition-transform duration-200",children:[s.jsx("div",{className:"font-semibold text-white group-hover:text-purple-100 transition-colors",children:B.title}),B.deal&&s.jsx("div",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors",children:B.deal.deal_name})]})}),s.jsx("td",{className:"px-6 py-5",children:s.jsx(Iv,{status:B.status})}),s.jsx("td",{className:"px-6 py-5",children:B.lead?s.jsxs("div",{children:[s.jsxs("div",{className:"text-white font-medium",children:[B.lead.first_name," ",B.lead.last_name]}),B.lead.company&&s.jsx("div",{className:"text-sm text-gray-400",children:B.lead.company})]}):s.jsx("span",{className:"text-gray-500",children:"-"})}),s.jsx("td",{className:"px-6 py-5",children:s.jsx("span",{className:"text-purple-400 font-semibold",children:Ve(B.proposal_value)})}),s.jsx("td",{className:"px-6 py-5 text-gray-400 text-sm group-hover:text-gray-300 transition-colors",children:kt(B.created_at)}),s.jsx("td",{className:"px-6 py-5 text-gray-400 text-sm group-hover:text-gray-300 transition-colors",children:B.sent_date?kt(B.sent_date):"-"}),s.jsx("td",{className:"px-6 py-5",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-gray-300",children:B.follow_up_count||0}),s.jsx("button",{onClick:X=>{X.stopPropagation(),re(B.id)},className:"p-1 text-gray-400 hover:text-purple-400 transition-colors rounded-full hover:bg-gray-700/50",title:"Add follow-up",children:s.jsx(St,{className:"h-4 w-4"})})]})}),s.jsx("td",{className:"px-6 py-5",children:s.jsx("div",{className:"flex items-center space-x-2",children:B.proposal_link?s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("a",{href:B.proposal_link,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 transition-all duration-200 hover:scale-110 p-2 rounded-lg hover:bg-gray-700/50",title:"Open proposal link",onClick:X=>X.stopPropagation(),children:s.jsx(Is,{className:"h-4 w-4"})}),s.jsx("button",{onClick:X=>{X.stopPropagation(),navigator.clipboard.writeText(B.proposal_link||"")},className:"text-gray-400 hover:text-purple-400 transition-all duration-200 hover:scale-110 p-1 rounded-lg hover:bg-gray-700/50",title:"Copy link",children:s.jsx("span",{className:"text-xs",children:""})})]}):s.jsx("span",{className:"text-gray-500 text-sm",children:"No link"})})}),s.jsx("td",{className:"px-6 py-5",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>ae(B),className:"text-gray-400 hover:text-purple-400 transition-all duration-200 hover:scale-110 p-2 rounded-lg hover:bg-gray-700/50",title:"Edit proposal",children:s.jsx(tl,{className:"h-4 w-4"})}),s.jsx("button",{onClick:X=>{X.stopPropagation(),confirm("Are you sure you want to delete this proposal?")&&c(B.id)},className:"text-gray-400 hover:text-red-400 transition-all duration-200 hover:scale-110 p-2 rounded-lg hover:bg-gray-700/50",title:"Delete proposal",children:s.jsx(Ir,{className:"h-4 w-4"})})]})})]},B.id))})]})}),P.length===0&&s.jsxs("div",{className:"p-8 text-center",children:[s.jsx(Dt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-300 mb-2",children:"No Proposals Found"}),s.jsx("p",{className:"text-gray-400 text-sm mb-4",children:M.search||M.status||M.deal_id||M.assigned_to||M.date_range!=="all"||M.value_range!=="all"?"Try adjusting your filters to see more results.":"Get started by creating your first proposal."}),s.jsx("button",{onClick:()=>{C(void 0),k(!0)},className:"px-4 py-2 bg-gradient-to-r from-purple-400 to-blue-600 hover:from-purple-500 hover:to-blue-700 text-white font-medium rounded-lg transition-all duration-200",children:"Create Proposal"})]}),P.length>0&&s.jsxs("div",{className:"px-6 py-4 border-t border-gray-800/50 flex items-center justify-between bg-gray-800/20",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"text-sm text-gray-400",children:["Showing ",s.jsx("span",{className:"font-semibold text-white",children:Z+1})," to"," ",s.jsx("span",{className:"font-semibold text-white",children:Math.min(Z+O,g.length)})," of"," ",s.jsx("span",{className:"font-semibold text-white",children:g.length})," proposals"]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-sm text-gray-400",children:"Show:"}),s.jsx("select",{value:O,onChange:B=>ve(Number(B.target.value)),className:"px-3 py-1 bg-gray-700/50 border border-gray-600 rounded-lg text-white text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent hover:bg-gray-600/50 transition-all duration-200",children:A.map(B=>s.jsx("option",{value:B,children:B},B))}),s.jsx("span",{className:"text-sm text-gray-400",children:"per page"})]})]}),W>1&&s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("button",{onClick:()=>S(B=>Math.max(B-1,1)),disabled:_===1,className:"p-2 text-gray-400 hover:text-white disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 hover:scale-110 hover:bg-gray-700/50 rounded-lg",children:s.jsx(Or,{className:"h-5 w-5"})}),s.jsxs("span",{className:"text-sm text-gray-300 px-3 py-1 bg-gray-700/50 rounded-lg",children:["Page ",s.jsx("span",{className:"font-semibold text-white",children:_})," of"," ",s.jsx("span",{className:"font-semibold text-white",children:W})]}),s.jsx("button",{onClick:()=>S(B=>Math.min(B+1,W)),disabled:_===W,className:"p-2 text-gray-400 hover:text-white disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 hover:scale-110 hover:bg-gray-700/50 rounded-lg",children:s.jsx(ir,{className:"h-5 w-5"})})]})]})]}),s.jsx(m3,{proposal:D,isOpen:N,onClose:()=>{k(!1),C(void 0)},onSave:q}),s.jsx(g3,{isOpen:de,proposal:G,leads:x,onClose:()=>{$(!1),R(void 0)},onGenerate:(B,X,U)=>vr(B,X,U)})]})})},Tv=()=>{const[e,t]=j.useState([]),[r,n]=j.useState(!1),[a,l]=j.useState(null);return{cashEntries:e,loading:r,error:a,fetchCashEntries:async u=>{n(!0),l(null);try{let d=K.from("cash_entries").select(`
          *,
          offer:offers(id, name, description),
          creator:created_by(id, email, full_name),
          setter:setter_id(id, email, full_name)
        `).order("date",{ascending:!1});if(u){if(u.search&&(d=d.or(`client_name.ilike.%${u.search}%,client_email.ilike.%${u.search}%`)),u.status&&(d=d.eq("status",u.status)),u.payment_type&&(d=d.eq("payment_type",u.payment_type)),u.offer_id&&(d=d.eq("offer_id",u.offer_id)),u.setter_id&&(d=d.eq("setter_id",u.setter_id)),u.date_range&&u.date_range!=="all"){const f=new Date;let x;switch(u.date_range){case"today":x=new Date(f.getFullYear(),f.getMonth(),f.getDate()),d=d.gte("date",x.toISOString().split("T")[0]);break;case"this_week":x=new Date(f.getTime()-f.getDay()*24*60*60*1e3),d=d.gte("date",x.toISOString().split("T")[0]);break;case"this_month":x=new Date(f.getFullYear(),f.getMonth(),1),d=d.gte("date",x.toISOString().split("T")[0]);break;case"custom":u.start_date&&(d=d.gte("date",u.start_date)),u.end_date&&(d=d.lte("date",u.end_date));break}}if(u.due_date_range&&u.due_date_range!=="all"){const f=new Date;let x;switch(u.due_date_range){case"overdue":d=d.lt("due_date",f.toISOString().split("T")[0]);break;case"due_this_week":x=new Date(f.getTime()-f.getDay()*24*60*60*1e3);const b=new Date(x.getTime()+6*24*60*60*1e3);d=d.gte("due_date",x.toISOString().split("T")[0]).lte("due_date",b.toISOString().split("T")[0]);break;case"due_this_month":x=new Date(f.getFullYear(),f.getMonth(),1);const g=new Date(f.getFullYear(),f.getMonth()+1,0);d=d.gte("due_date",x.toISOString().split("T")[0]).lte("due_date",g.toISOString().split("T")[0]);break;case"custom":u.due_start_date&&(d=d.gte("due_date",u.due_start_date)),u.due_end_date&&(d=d.lte("due_date",u.due_end_date));break}}}const{data:m,error:p}=await d;if(p)throw p;t(m||[])}catch(d){console.error("Error fetching cash entries:",d),l(d.message)}finally{n(!1)}},createCashEntry:async u=>{try{const d=u.gross_profit||0,m=u.setter_percentage||0,p=u.closer_percentage||0,f=d*m/100,x=d*p/100,b=f+x,{data:g,error:v}=await K.from("cash_entries").insert({...u,setter_payment:f,closer_payment:x,total_commissions:b}).select(`
          *,
          offer:offers(id, name, description),
          creator:created_by(id, email, full_name),
          setter:setter_id(id, email, full_name)
        `).single();if(v)throw v;return t(y=>[g,...y]),{data:g,error:null}}catch(d){return console.error("Error creating cash entry:",d),{data:null,error:d}}},updateCashEntry:async(u,d)=>{try{const m=d.gross_profit!==void 0?d.gross_profit:0,p=d.setter_percentage!==void 0?d.setter_percentage:0,f=d.closer_percentage!==void 0?d.closer_percentage:0;if(d.gross_profit!==void 0||d.setter_percentage!==void 0||d.closer_percentage!==void 0){const g=m*p/100,v=m*f/100,y=g+v;d.setter_payment=g,d.closer_payment=v,d.total_commissions=y}const{data:x,error:b}=await K.from("cash_entries").update({...d,updated_at:new Date().toISOString()}).eq("id",u).select(`
          *,
          offer:offers(id, name, description),
          creator:created_by(id, email, full_name),
          setter:setter_id(id, email, full_name)
        `).single();if(b)throw b;return t(g=>g.map(v=>v.id===u?x:v)),{data:x,error:null}}catch(m){return console.error("Error updating cash entry:",m),{data:null,error:m}}},deleteCashEntry:async u=>{try{const{error:d}=await K.from("cash_entries").delete().eq("id",u);if(d)throw d;return t(m=>m.filter(p=>p.id!==u)),{error:null}}catch(d){return console.error("Error deleting cash entry:",d),{error:d}}}}},Ph=()=>{const[e,t]=j.useState([]),[r,n]=j.useState(!1),[a,l]=j.useState(null);return{offers:e,loading:r,error:a,fetchOffers:async()=>{n(!0),l(null);try{const{data:u,error:d}=await K.from("offers").select("*").order("name");if(d)throw d;t(u||[])}catch(u){console.error("Error fetching offers:",u),l(u.message)}finally{n(!1)}},createOffer:async u=>{try{const{data:d,error:m}=await K.from("offers").insert(u).select().single();if(m)throw m;return t(p=>[...p,d].sort((f,x)=>f.name.localeCompare(x.name))),{data:d,error:null}}catch(d){return console.error("Error creating offer:",d),{data:null,error:d}}},updateOffer:async(u,d)=>{try{const{data:m,error:p}=await K.from("offers").update({...d,updated_at:new Date().toISOString()}).eq("id",u).select().single();if(p)throw p;return t(f=>f.map(x=>x.id===u?m:x).sort((x,b)=>x.name.localeCompare(b.name))),{data:m,error:null}}catch(m){return console.error("Error updating offer:",m),{data:null,error:m}}},deleteOffer:async u=>{try{const{error:d}=await K.from("offers").delete().eq("id",u);if(d)throw d;return t(m=>m.filter(p=>p.id!==u)),{error:null}}catch(d){return console.error("Error deleting offer:",d),{error:d}}}}},Rv=({entry:e,isOpen:t,onClose:r,onSave:n})=>{const{user:a}=Oe(),{offers:l,fetchOffers:o,createOffer:i}=Ph(),{users:c,fetchUsers:h}=sl(),[u,d]=j.useState(!1),[m,p]=j.useState(""),[f,x]=j.useState(!1),[b,g]=j.useState({name:"",description:""}),[v,y]=j.useState({date:new Date().toISOString().split("T")[0],due_date:"",income:0,offer_id:"",client_name:"",client_email:"",payment_type:"Deposit",status:"Paid",contracted_amount:0,gross_profit:0,setter_percentage:0,closer_percentage:0,setter_id:""});j.useEffect(()=>{t&&(o(),h())},[t,o,h]),j.useEffect(()=>{y(e?{date:e.date,due_date:e.due_date||"",income:e.income,offer_id:e.offer_id||"",client_name:e.client_name,client_email:e.client_email,payment_type:e.payment_type,status:e.status,contracted_amount:e.contracted_amount,gross_profit:e.gross_profit,setter_percentage:e.setter_percentage,closer_percentage:e.closer_percentage,setter_id:e.setter_id||""}:{date:new Date().toISOString().split("T")[0],due_date:"",income:0,offer_id:"",client_name:"",client_email:"",payment_type:"Deposit",status:"Paid",contracted_amount:0,gross_profit:0,setter_percentage:0,closer_percentage:0,setter_id:""}),p(""),x(!1)},[e,t]);const w=["Deposit","Installment","1","2","3","4","5","6","7","8","9","10"],N=["Paid","Canceled","Refunded"],k=I=>{const{name:z,value:te,type:se}=I.target;y(de=>({...de,[z]:se==="number"?parseFloat(te)||0:te}))},D=async()=>{if(!b.name.trim()){p("Offer name is required");return}try{const I=await i({...b,created_by:(a==null?void 0:a.id)||""});if(I.error){p(I.error.message);return}y(z=>{var te;return{...z,offer_id:((te=I.data)==null?void 0:te.id)||""}}),g({name:"",description:""}),x(!1)}catch(I){p(I.message)}},C=()=>{const I=v.gross_profit,z=I*v.setter_percentage/100,te=I*v.closer_percentage/100,se=z+te;return{setterPayment:z,closerPayment:te,totalCommissions:se}},_=async I=>{if(I.preventDefault(),!!a){if(v.income<0){p("Income must be positive");return}if(v.gross_profit>v.income){p("Gross profit cannot exceed income");return}if(v.setter_percentage+v.closer_percentage>100){p("Total commission percentages cannot exceed 100%");return}d(!0),p("");try{const{setterPayment:z,closerPayment:te,totalCommissions:se}=C(),de={...v,offer_id:v.offer_id||null,setter_payment:z,closer_payment:te,total_commissions:se,updated_at:new Date().toISOString()};if(e){const{data:$,error:G}=await K.from("cash_entries").update(de).eq("id",e.id).select(`
            *,
            offer:offers(id, name, description),
            creator:created_by(id, email, full_name)
          `).single();if(G)throw G;n($)}else{const{data:$,error:G}=await K.from("cash_entries").insert({...de,created_by:a.id}).select(`
            *,
            offer:offers(id, name, description),
            creator:created_by(id, email, full_name)
          `).single();if(G)throw G;n($)}r()}catch(z){p(z.message)}finally{d(!1)}}};if(!t)return null;const{setterPayment:S,closerPayment:O,totalCommissions:E}=C();return s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"glass-card w-full max-w-5xl max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-700",children:[s.jsx("h2",{className:"text-xl font-semibold gradient-text section-gradient-finances",children:e?"Edit Cash Entry":"Add New Cash Entry"}),s.jsx("button",{onClick:r,className:"text-gray-400 hover:text-white transition-colors",children:s.jsx(cr,{className:"h-6 w-6"})})]}),s.jsxs("form",{onSubmit:_,className:"p-6 space-y-6",children:[m&&s.jsx("div",{className:"p-4 bg-red-900/20 border border-red-500/30 rounded-lg",children:s.jsx("p",{className:"text-red-400 text-sm",children:m})}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Date *"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ne,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"date",name:"date",value:v.date,onChange:k,className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent text-white",required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Due Date"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ne,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"date",name:"due_date",value:v.due_date,onChange:k,className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent text-white"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Income *"}),s.jsxs("div",{className:"relative",children:[s.jsx(oe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"number",name:"income",value:v.income,onChange:k,min:"0",step:"0.01",className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent text-white placeholder-gray-400",placeholder:"0.00",required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Setter"}),s.jsxs("div",{className:"relative",children:[s.jsx(Fe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsxs("select",{name:"setter_id",value:v.setter_id,onChange:k,className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent text-white",children:[s.jsx("option",{value:"",children:"Select setter..."}),c.map(I=>s.jsx("option",{value:I.id,children:I.full_name||I.email},I.id))]})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Offer"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(As,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsxs("select",{name:"offer_id",value:v.offer_id,onChange:k,className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent text-white",children:[s.jsx("option",{value:"",children:"Select offer..."}),l.map(I=>s.jsx("option",{value:I.id,children:I.name},I.id))]})]}),s.jsxs("button",{type:"button",onClick:()=>x(!0),className:"flex items-center space-x-1 px-4 py-3 bg-rose-600 hover:bg-rose-700 text-white rounded-lg transition-colors",children:[s.jsx(St,{className:"h-4 w-4"}),s.jsx("span",{children:"New"})]})]})]}),f&&s.jsxs("div",{className:"p-4 bg-gray-800/30 border border-gray-700 rounded-lg space-y-4",children:[s.jsx("h4",{className:"font-semibold text-white",children:"Create New Offer"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Offer Name *"}),s.jsx("input",{type:"text",value:b.name,onChange:I=>g(z=>({...z,name:I.target.value})),className:"w-full px-4 py-2 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent text-white placeholder-gray-400",placeholder:"Enter offer name"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Description"}),s.jsx("input",{type:"text",value:b.description,onChange:I=>g(z=>({...z,description:I.target.value})),className:"w-full px-4 py-2 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent text-white placeholder-gray-400",placeholder:"Enter description"})]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{type:"button",onClick:D,className:"px-4 py-2 bg-rose-600 hover:bg-rose-700 text-white rounded-lg transition-colors",children:"Create Offer"}),s.jsx("button",{type:"button",onClick:()=>{x(!1),g({name:"",description:""})},className:"px-4 py-2 text-gray-400 hover:text-white transition-colors",children:"Cancel"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Client Name *"}),s.jsxs("div",{className:"relative",children:[s.jsx(Fe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"text",name:"client_name",value:v.client_name,onChange:k,className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent text-white placeholder-gray-400",placeholder:"Client full name",required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Client Email *"}),s.jsxs("div",{className:"relative",children:[s.jsx(Qt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"email",name:"client_email",value:v.client_email,onChange:k,className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent text-white placeholder-gray-400",placeholder:"client@example.com",required:!0})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Payment Type *"}),s.jsx("select",{name:"payment_type",value:v.payment_type,onChange:k,className:"w-full px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent text-white",required:!0,children:w.map(I=>s.jsx("option",{value:I,children:I},I))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Status *"}),s.jsx("select",{name:"status",value:v.status,onChange:k,className:"w-full px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent text-white",required:!0,children:N.map(I=>s.jsx("option",{value:I,children:I},I))})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Contracted Amount *"}),s.jsxs("div",{className:"relative",children:[s.jsx(oe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"number",name:"contracted_amount",value:v.contracted_amount,onChange:k,min:"0",step:"0.01",className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent text-white placeholder-gray-400",placeholder:"0.00",required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Gross Profit *"}),s.jsxs("div",{className:"relative",children:[s.jsx(oe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-green-400"}),s.jsx("input",{type:"number",name:"gross_profit",value:v.gross_profit,onChange:k,min:"0",max:v.income,step:"0.01",className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent text-white placeholder-gray-400",placeholder:"0.00",required:!0})]}),s.jsxs("p",{className:"text-xs text-gray-400",children:["Cannot exceed income ($",v.income.toFixed(2),")"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Setter Percentage"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ro,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"number",name:"setter_percentage",value:v.setter_percentage,onChange:k,min:"0",max:"100",step:"0.01",className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent text-white placeholder-gray-400",placeholder:"0.00"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Closer Percentage"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ro,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"number",name:"closer_percentage",value:v.closer_percentage,onChange:k,min:"0",max:"100",step:"0.01",className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent text-white placeholder-gray-400",placeholder:"0.00"})]})]})]}),s.jsxs("div",{className:"text-xs text-gray-400",children:["Total commission percentage: ",(v.setter_percentage+v.closer_percentage).toFixed(2),"%",v.setter_percentage+v.closer_percentage>100&&s.jsx("span",{className:"text-red-400 ml-2",children:" Cannot exceed 100%"})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"glass-card p-4",children:[s.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[s.jsx(oe,{className:"h-5 w-5 mr-2 text-rose-400"}),"Commission Summary"]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-400",children:"Gross Profit:"}),s.jsxs("span",{className:"text-white font-semibold",children:["$",v.gross_profit.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-400",children:"Setter Payment:"}),s.jsxs("span",{className:"text-blue-400 font-semibold",children:["$",S.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-400",children:"Closer Payment:"}),s.jsxs("span",{className:"text-green-400 font-semibold",children:["$",O.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-gray-700",children:[s.jsx("span",{className:"text-gray-400",children:"Total Commissions:"}),s.jsxs("span",{className:"text-rose-400 font-semibold",children:["$",E.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-400",children:"Net Profit:"}),s.jsxs("span",{className:"text-emerald-400 font-semibold",children:["$",(v.gross_profit-E).toFixed(2)]})]})]}),v.gross_profit>0&&s.jsxs("div",{className:"mt-4",children:[s.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Commission Breakdown"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:s.jsx("div",{className:"h-2 bg-blue-400 rounded-l-full transition-all duration-500",style:{width:`${S/v.gross_profit*100}%`}})}),s.jsxs("span",{className:"text-xs text-blue-400 min-w-[3rem]",children:[(S/v.gross_profit*100).toFixed(1),"%"]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:s.jsx("div",{className:"h-2 bg-green-400 rounded-l-full transition-all duration-500",style:{width:`${O/v.gross_profit*100}%`}})}),s.jsxs("span",{className:"text-xs text-green-400 min-w-[3rem]",children:[(O/v.gross_profit*100).toFixed(1),"%"]})]})]})]})]}),s.jsxs("div",{className:"glass-card p-4",children:[s.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[s.jsx(oe,{className:"h-5 w-5 mr-2 text-amber-400"}),"Financial Summary"]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-400",children:"Income:"}),s.jsxs("span",{className:"text-white font-semibold",children:["$",v.income.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-400",children:"Contracted Amount:"}),s.jsxs("span",{className:"text-white font-semibold",children:["$",v.contracted_amount.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-400",children:"Status:"}),s.jsx("span",{className:`font-semibold ${v.status==="Paid"?"text-green-400":v.status==="Canceled"?"text-red-400":"text-yellow-400"}`,children:v.status})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-400",children:"Payment Type:"}),s.jsx("span",{className:"text-white font-semibold",children:v.payment_type})]})]})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t border-gray-700",children:[s.jsx("button",{type:"button",onClick:r,className:"px-6 py-2 text-gray-400 hover:text-white transition-colors",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:u,className:"flex items-center space-x-2 px-6 py-2 bg-gradient-to-r from-rose-400 to-amber-500 hover:from-rose-500 hover:to-amber-600 text-white font-medium rounded-lg transition-all duration-200 disabled:opacity-50",children:u?s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):s.jsxs(s.Fragment,{children:[s.jsx($s,{className:"h-5 w-5"}),s.jsx("span",{children:e?"Update Entry":"Create Entry"})]})})]})]})]})})},b3=()=>{Oe();const{cashEntries:e,loading:t,error:r,fetchCashEntries:n,deleteCashEntry:a}=Tv(),{offers:l,fetchOffers:o}=Ph(),[i,c]=j.useState([]),[h,u]=j.useState([]),[d,m]=j.useState(!1),[p,f]=j.useState(),[x,b]=j.useState(1),[g,v]=j.useState(10),[y,w]=j.useState(new Date),[N,k]=j.useState({search:"",status:"",payment_type:"",offer_id:"",date_range:"all"}),D=[10,15,25,50];j.useEffect(()=>{n(),o()},[]),j.useEffect(()=>{let T=[...e];if(N.search){const W=N.search.toLowerCase();T=T.filter(Z=>{var P;return Z.client_name.toLowerCase().includes(W)||Z.client_email.toLowerCase().includes(W)||((P=Z.offer)==null?void 0:P.name)&&Z.offer.name.toLowerCase().includes(W)})}if(N.status&&(T=T.filter(W=>W.status===N.status)),N.payment_type&&(T=T.filter(W=>W.payment_type===N.payment_type)),N.offer_id&&(T=T.filter(W=>W.offer_id===N.offer_id)),N.date_range!=="all"){const W=new Date;let Z;switch(N.date_range){case"today":Z=new Date(W.getFullYear(),W.getMonth(),W.getDate()),T=T.filter(P=>new Date(P.date)>=Z);break;case"this_week":Z=new Date(W.getTime()-W.getDay()*24*60*60*1e3),T=T.filter(P=>new Date(P.date)>=Z);break;case"this_month":Z=new Date(W.getFullYear(),W.getMonth(),1),T=T.filter(P=>new Date(P.date)>=Z);break;case"custom":N.start_date&&(T=T.filter(P=>new Date(P.date)>=new Date(N.start_date))),N.end_date&&(T=T.filter(P=>new Date(P.date)<=new Date(N.end_date)));break}}c(T),b(1)},[e,N]);const C=e.reduce((T,W)=>({totalIncome:T.totalIncome+W.income,totalGrossProfit:T.totalGrossProfit+W.gross_profit,totalCommissions:T.totalCommissions+W.total_commissions,totalSetterPayments:T.totalSetterPayments+W.setter_payment,totalCloserPayments:T.totalCloserPayments+W.closer_payment,paidEntries:T.paidEntries+(W.status==="Paid"?1:0),canceledEntries:T.canceledEntries+(W.status==="Canceled"?1:0),refundedEntries:T.refundedEntries+(W.status==="Refunded"?1:0)}),{totalIncome:0,totalGrossProfit:0,totalCommissions:0,totalSetterPayments:0,totalCloserPayments:0,paidEntries:0,canceledEntries:0,refundedEntries:0}),_=Math.ceil(i.length/g),S=(x-1)*g,O=i.slice(S,S+g),E=(T,W)=>{k(Z=>({...Z,[T]:W}))},I=T=>{v(T),b(1)},z=T=>{u(W=>W.includes(T)?W.filter(Z=>Z!==T):[...W,T])},te=()=>{h.length===O.length?u([]):u(O.map(T=>T.id))},se=async()=>{if(h.length&&confirm(`Delete ${h.length} selected entries?`))try{for(const T of h)await a(T);u([]),n()}catch(T){console.error("Error deleting entries:",T)}},de=T=>{f(T),m(!0)},$=T=>{n(),f(void 0),w(new Date)},G=async()=>{await n(),await o(),w(new Date)},R=T=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(T),M=T=>new Date(T).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),F=T=>({Paid:"bg-green-900/30 text-green-400 border-green-500/30",Canceled:"bg-red-900/30 text-red-400 border-red-500/30",Refunded:"bg-yellow-900/30 text-yellow-400 border-yellow-500/30"})[T],A=T=>T==="Deposit"?"bg-blue-900/30 text-blue-400":T==="Installment"?"bg-purple-900/30 text-purple-400":"bg-gray-900/30 text-gray-400";return t&&e.length===0?s.jsx("div",{className:"flex items-center justify-center p-8",children:s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-rose-400/30 border-t-rose-400"}),s.jsx("div",{className:"absolute inset-0 rounded-full bg-rose-400/10 animate-pulse"})]})}):s.jsx(dr,{section:"finances",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"space-y-2",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-gradient-to-br from-rose-400/20 to-amber-500/20 rounded-xl",children:s.jsx(oe,{className:"h-8 w-8 text-rose-400"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold gradient-text section-gradient-finances",children:"Cash In"}),s.jsx("p",{className:"text-gray-400 mt-1",children:"Track incoming payments and revenue with commission calculations."})]})]})}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm text-gray-400",children:"Last Updated"}),s.jsx("p",{className:"text-sm font-semibold text-white",children:y.toLocaleTimeString()})]}),s.jsxs("button",{onClick:G,disabled:t,className:"flex items-center space-x-2 px-4 py-2 bg-gray-800 hover:bg-gray-700 text-white rounded-lg transition-all duration-200 hover:scale-105",children:[s.jsx(xr,{className:`h-4 w-4 ${t?"animate-spin":""}`}),s.jsx("span",{children:"Refresh"})]}),s.jsxs("button",{onClick:()=>{f(void 0),m(!0)},className:"group flex items-center space-x-2 px-6 py-3 bg-gradient-to-r from-rose-400 to-amber-500 hover:from-rose-500 hover:to-amber-600 text-white font-semibold rounded-xl transition-all duration-300 hover:scale-105 hover:shadow-xl hover:shadow-rose-500/25",children:[s.jsx(St,{className:"h-5 w-5 group-hover:rotate-90 transition-transform duration-300"}),s.jsx("span",{children:"Add Cash Entry"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[s.jsx("div",{className:"glass-card p-6 hover:bg-gray-800/60 transition-all duration-300 group hover:scale-105 hover:shadow-xl hover:shadow-rose-500/10",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors",children:"Total Entries"}),s.jsx("p",{className:"text-3xl font-bold text-white mt-1",children:e.length}),s.jsxs("p",{className:"text-xs text-rose-400 mt-1 flex items-center",children:[s.jsx(Ae,{className:"h-3 w-3 mr-1"}),"All transactions"]})]}),s.jsx("div",{className:"p-3 bg-gradient-to-br from-rose-400/20 to-amber-500/20 rounded-xl group-hover:scale-110 transition-transform duration-300",children:s.jsx(oe,{className:"h-8 w-8 text-rose-400"})})]})}),s.jsx("div",{className:"glass-card p-6 hover:bg-gray-800/60 transition-all duration-300 group hover:scale-105 hover:shadow-xl hover:shadow-green-500/10",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors",children:"Total Income"}),s.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:R(C.totalIncome)}),s.jsxs("p",{className:"text-xs text-green-400 mt-1 flex items-center",children:[s.jsx(oe,{className:"h-3 w-3 mr-1"}),"Revenue received"]})]}),s.jsx("div",{className:"p-3 bg-gradient-to-br from-green-400/20 to-green-600/20 rounded-xl group-hover:scale-110 transition-transform duration-300",children:s.jsx(oe,{className:"h-8 w-8 text-green-400"})})]})}),s.jsx("div",{className:"glass-card p-6 hover:bg-gray-800/60 transition-all duration-300 group hover:scale-105 hover:shadow-xl hover:shadow-emerald-500/10",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors",children:"Gross Profit"}),s.jsx("p",{className:"text-2xl font-bold text-emerald-400 mt-1",children:R(C.totalGrossProfit)}),s.jsxs("p",{className:"text-xs text-emerald-400 mt-1 flex items-center",children:[s.jsx(ye,{className:"h-3 w-3 mr-1"}),"Before commissions"]})]}),s.jsx("div",{className:"p-3 bg-gradient-to-br from-emerald-400/20 to-emerald-600/20 rounded-xl group-hover:scale-110 transition-transform duration-300",children:s.jsx(ye,{className:"h-8 w-8 text-emerald-400"})})]})}),s.jsx("div",{className:"glass-card p-6 hover:bg-gray-800/60 transition-all duration-300 group hover:scale-105 hover:shadow-xl hover:shadow-blue-500/10",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors",children:"Total Commissions"}),s.jsx("p",{className:"text-2xl font-bold text-blue-400 mt-1",children:R(C.totalCommissions)}),s.jsxs("p",{className:"text-xs text-blue-400 mt-1 flex items-center",children:[s.jsx(Ro,{className:"h-3 w-3 mr-1"}),"Paid out"]})]}),s.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-400/20 to-blue-600/20 rounded-xl group-hover:scale-110 transition-transform duration-300",children:s.jsx(Ro,{className:"h-8 w-8 text-blue-400"})})]})}),s.jsx("div",{className:"glass-card p-6 hover:bg-gray-800/60 transition-all duration-300 group hover:scale-105 hover:shadow-xl hover:shadow-amber-500/10",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors",children:"Net Profit"}),s.jsx("p",{className:"text-2xl font-bold text-amber-400 mt-1",children:R(C.totalGrossProfit-C.totalCommissions)}),s.jsxs("p",{className:"text-xs text-amber-400 mt-1 flex items-center",children:[s.jsx(ct,{className:"h-3 w-3 mr-1"}),"After commissions"]})]}),s.jsx("div",{className:"p-3 bg-gradient-to-br from-amber-400/20 to-amber-600/20 rounded-xl group-hover:scale-110 transition-transform duration-300",children:s.jsx(ct,{className:"h-8 w-8 text-amber-400"})})]})})]}),s.jsxs("div",{className:"glass-card p-6 hover:bg-gray-800/40 transition-all duration-300",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[s.jsxs("div",{className:"relative group",children:[s.jsx(Lr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400 group-hover:text-gray-300 transition-colors"}),s.jsx("input",{type:"text",placeholder:"Search entries...",value:N.search,onChange:T=>E("search",T.target.value),className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent text-white placeholder-gray-400 hover:bg-gray-700/50 transition-all duration-200"})]}),s.jsxs("select",{value:N.status,onChange:T=>E("status",T.target.value),className:"px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent text-white hover:bg-gray-700/50 transition-all duration-200",children:[s.jsx("option",{value:"",children:"All Statuses"}),s.jsx("option",{value:"Paid",children:"Paid"}),s.jsx("option",{value:"Canceled",children:"Canceled"}),s.jsx("option",{value:"Refunded",children:"Refunded"})]}),s.jsxs("select",{value:N.payment_type,onChange:T=>E("payment_type",T.target.value),className:"px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent text-white hover:bg-gray-700/50 transition-all duration-200",children:[s.jsx("option",{value:"",children:"All Payment Types"}),s.jsx("option",{value:"Deposit",children:"Deposit"}),s.jsx("option",{value:"Installment",children:"Installment"}),[1,2,3,4,5,6,7,8,9,10].map(T=>s.jsx("option",{value:T.toString(),children:T},T))]}),s.jsxs("select",{value:N.offer_id,onChange:T=>E("offer_id",T.target.value),className:"px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent text-white hover:bg-gray-700/50 transition-all duration-200",children:[s.jsx("option",{value:"",children:"All Offers"}),l.map(T=>s.jsx("option",{value:T.id,children:T.name},T.id))]}),s.jsxs("select",{value:N.date_range,onChange:T=>E("date_range",T.target.value),className:"px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent text-white hover:bg-gray-700/50 transition-all duration-200",children:[s.jsx("option",{value:"all",children:"All Time"}),s.jsx("option",{value:"today",children:"Today"}),s.jsx("option",{value:"this_week",children:"This Week"}),s.jsx("option",{value:"this_month",children:"This Month"}),s.jsx("option",{value:"custom",children:"Custom Range"})]}),s.jsx("div",{className:"flex space-x-2",children:h.length>0&&s.jsxs("button",{onClick:se,className:"flex items-center space-x-1 px-4 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-all duration-200 hover:scale-105 hover:shadow-lg hover:shadow-red-500/25",children:[s.jsx(Ir,{className:"h-4 w-4"}),s.jsxs("span",{children:["Delete (",h.length,")"]})]})})]}),N.date_range==="custom"&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-xs text-gray-400",children:"Start Date"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ne,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx("input",{type:"date",value:N.start_date||"",onChange:T=>E("start_date",T.target.value),className:"w-full pl-9 pr-3 py-2 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent text-white text-sm"})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-xs text-gray-400",children:"End Date"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ne,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx("input",{type:"date",value:N.end_date||"",onChange:T=>E("end_date",T.target.value),className:"w-full pl-9 pr-3 py-2 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent text-white text-sm"})]})]})]})]}),r&&s.jsx("div",{className:"p-4 bg-red-900/20 border border-red-500/30 rounded-lg animate-pulse",children:s.jsx("p",{className:"text-red-400 text-sm",children:r})}),s.jsxs("div",{className:"glass-card overflow-hidden hover:bg-gray-800/30 transition-all duration-300",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-800/60 backdrop-blur-sm",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-4 text-left",children:s.jsx("input",{type:"checkbox",checked:h.length===O.length&&O.length>0,onChange:te,className:"rounded border-gray-600 bg-gray-700 text-rose-500 focus:ring-rose-500 hover:scale-110 transition-transform duration-200"})}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300 hover:text-white transition-colors",children:"Date"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300 hover:text-white transition-colors",children:"Income"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300 hover:text-white transition-colors",children:"Offer"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300 hover:text-white transition-colors",children:"Client"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300 hover:text-white transition-colors",children:"Payment Type"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300 hover:text-white transition-colors",children:"Status"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300 hover:text-white transition-colors",children:"Contracted"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300 hover:text-white transition-colors",children:"Gross Profit"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300 hover:text-white transition-colors",children:"Setter"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300 hover:text-white transition-colors",children:"Closer"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300 hover:text-white transition-colors",children:"Total Commissions"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300 hover:text-white transition-colors",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-800/50",children:O.map(T=>s.jsxs("tr",{className:"hover:bg-gray-800/40 transition-all duration-300 group hover:shadow-lg hover:shadow-gray-900/20",children:[s.jsx("td",{className:"px-6 py-5",children:s.jsx("input",{type:"checkbox",checked:h.includes(T.id),onChange:()=>z(T.id),className:"rounded border-gray-600 bg-gray-700 text-rose-500 focus:ring-rose-500 hover:scale-110 transition-transform duration-200"})}),s.jsx("td",{className:"px-6 py-5 text-gray-300 group-hover:text-white transition-colors",children:M(T.date)}),s.jsx("td",{className:"px-6 py-5",children:s.jsx("span",{className:"text-green-400 font-semibold",children:R(T.income)})}),s.jsx("td",{className:"px-6 py-5",children:T.offer?s.jsx("span",{className:"text-white font-medium",children:T.offer.name}):s.jsx("span",{className:"text-gray-500",children:"-"})}),s.jsx("td",{className:"px-6 py-5",children:s.jsxs("div",{className:"group-hover:scale-105 transition-transform duration-200",children:[s.jsx("div",{className:"font-semibold text-white group-hover:text-rose-100 transition-colors",children:T.client_name}),s.jsx("div",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors",children:T.client_email})]})}),s.jsx("td",{className:"px-6 py-5",children:s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${A(T.payment_type)}`,children:T.payment_type})}),s.jsx("td",{className:"px-6 py-5",children:s.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${F(T.status)}`,children:T.status})}),s.jsx("td",{className:"px-6 py-5",children:s.jsx("span",{className:"text-white font-medium",children:R(T.contracted_amount)})}),s.jsx("td",{className:"px-6 py-5",children:s.jsx("span",{className:"text-emerald-400 font-semibold",children:R(T.gross_profit)})}),s.jsx("td",{className:"px-6 py-5",children:s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-blue-400 font-medium",children:R(T.setter_payment)}),s.jsxs("div",{className:"text-xs text-gray-400",children:[T.setter_percentage,"%"]})]})}),s.jsx("td",{className:"px-6 py-5",children:s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-green-400 font-medium",children:R(T.closer_payment)}),s.jsxs("div",{className:"text-xs text-gray-400",children:[T.closer_percentage,"%"]})]})}),s.jsx("td",{className:"px-6 py-5",children:s.jsx("span",{className:"text-rose-400 font-semibold",children:R(T.total_commissions)})}),s.jsx("td",{className:"px-6 py-5",children:s.jsx("div",{className:"flex items-center space-x-2",children:s.jsx("button",{onClick:()=>de(T),className:"text-gray-400 hover:text-rose-400 transition-all duration-200 hover:scale-110 p-2 rounded-lg hover:bg-gray-700/50",title:"Edit entry",children:s.jsx(tl,{className:"h-4 w-4"})})})})]},T.id))})]})}),O.length===0&&s.jsxs("div",{className:"p-8 text-center",children:[s.jsx(oe,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-300 mb-2",children:"No Cash Entries Found"}),s.jsx("p",{className:"text-gray-400 text-sm mb-4",children:N.search||N.status||N.payment_type||N.offer_id||N.date_range!=="all"?"Try adjusting your filters to see more results.":"Get started by adding your first cash entry."}),s.jsx("button",{onClick:()=>{f(void 0),m(!0)},className:"px-4 py-2 bg-gradient-to-r from-rose-400 to-amber-500 hover:from-rose-500 hover:to-amber-600 text-white font-medium rounded-lg transition-all duration-200",children:"Add Cash Entry"})]}),O.length>0&&s.jsxs("div",{className:"px-6 py-4 border-t border-gray-800/50 flex items-center justify-between bg-gray-800/20",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"text-sm text-gray-400",children:["Showing ",s.jsx("span",{className:"font-semibold text-white",children:S+1})," to"," ",s.jsx("span",{className:"font-semibold text-white",children:Math.min(S+g,i.length)})," of"," ",s.jsx("span",{className:"font-semibold text-white",children:i.length})," entries"]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-sm text-gray-400",children:"Show:"}),s.jsx("select",{value:g,onChange:T=>I(Number(T.target.value)),className:"px-3 py-1 bg-gray-700/50 border border-gray-600 rounded-lg text-white text-sm focus:ring-2 focus:ring-rose-500 focus:border-transparent hover:bg-gray-600/50 transition-all duration-200",children:D.map(T=>s.jsx("option",{value:T,children:T},T))}),s.jsx("span",{className:"text-sm text-gray-400",children:"per page"})]})]}),_>1&&s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("button",{onClick:()=>b(T=>Math.max(T-1,1)),disabled:x===1,className:"p-2 text-gray-400 hover:text-white disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 hover:scale-110 hover:bg-gray-700/50 rounded-lg",children:s.jsx(Or,{className:"h-5 w-5"})}),s.jsxs("span",{className:"text-sm text-gray-300 px-3 py-1 bg-gray-700/50 rounded-lg",children:["Page ",s.jsx("span",{className:"font-semibold text-white",children:x})," of"," ",s.jsx("span",{className:"font-semibold text-white",children:_})]}),s.jsx("button",{onClick:()=>b(T=>Math.min(T+1,_)),disabled:x===_,className:"p-2 text-gray-400 hover:text-white disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 hover:scale-110 hover:bg-gray-700/50 rounded-lg",children:s.jsx(ir,{className:"h-5 w-5"})})]})]})]}),s.jsx(Rv,{entry:p,isOpen:d,onClose:()=>{m(!1),f(void 0)},onSave:$})]})})},w3=()=>{const[e,t]=j.useState([]),[r,n]=j.useState(!1),[a,l]=j.useState(null);return{expenses:e,loading:r,error:a,fetchExpenses:async u=>{n(!0),l(null);try{let d=K.from("expenses").select(`
          *,
          creator:created_by(id, email, full_name)
        `).order("date",{ascending:!1});if(u&&(u.search&&(d=d.or(`expense_name.ilike.%${u.search}%,notes.ilike.%${u.search}%`)),u.expense_type&&(d=d.eq("expense_type",u.expense_type)),u.invoice_filed!=="all"&&(d=d.eq("invoice_filed",u.invoice_filed==="yes")),u.date_range&&u.date_range!=="all")){const f=new Date;let x;switch(u.date_range){case"today":x=new Date(f.getFullYear(),f.getMonth(),f.getDate()),d=d.gte("date",x.toISOString().split("T"));break;case"this_week":x=new Date(f.getTime()-f.getDay()*24*60*60*1e3),d=d.gte("date",x.toISOString().split("T"));break;case"this_month":x=new Date(f.getFullYear(),f.getMonth(),1),d=d.gte("date",x.toISOString().split("T"));break;case"custom":u.start_date&&(d=d.gte("date",u.start_date)),u.end_date&&(d=d.lte("date",u.end_date));break}}const{data:m,error:p}=await d;if(p)throw p;t(m||[])}catch(d){console.error("Error fetching expenses:",d),l(d.message)}finally{n(!1)}},createExpense:async u=>{try{const{data:d,error:m}=await K.from("expenses").insert(u).select(`
          *,
          creator:created_by(id, email, full_name)
        `).single();if(m)throw m;return t(p=>[d,...p]),{data:d,error:null}}catch(d){return console.error("Error creating expense:",d),{data:null,error:d}}},updateExpense:async(u,d)=>{try{const{data:m,error:p}=await K.from("expenses").update({...d,updated_at:new Date().toISOString()}).eq("id",u).select(`
          *,
          creator:created_by(id, email, full_name)
        `).single();if(p)throw p;return t(f=>f.map(x=>x.id===u?m:x)),{data:m,error:null}}catch(m){return console.error("Error updating expense:",m),{data:null,error:m}}},deleteExpense:async u=>{try{const{error:d}=await K.from("expenses").delete().eq("id",u);if(d)throw d;return t(m=>m.filter(p=>p.id!==u)),{error:null}}catch(d){return console.error("Error deleting expense:",d),{error:d}}}}},j3=({expense:e,isOpen:t,onClose:r,onSave:n,createExpense:a,updateExpense:l})=>{const{user:o}=Oe(),[i,c]=j.useState(!1),[h,u]=j.useState(""),[d,m]=j.useState({date:new Date().toISOString().split("T")[0],amount:0,expense_name:"",expense_type:"",invoice_filed:!1,notes:""});j.useEffect(()=>{m(e?{date:e.date,amount:e.amount,expense_name:e.expense_name,expense_type:e.expense_type,invoice_filed:e.invoice_filed,notes:e.notes||""}:{date:new Date().toISOString().split("T")[0],amount:0,expense_name:"",expense_type:"",invoice_filed:!1,notes:""}),u("")},[e,t]);const p=["Bank fees","Course","Done with you program","Done for you program","Meta ads","Agency fees","Loan","Misk","Monthly software","Other","Personal","Referral free","Refund","Taxes","Team payroll","Yearly software","YouTube ads"],f=b=>{const{name:g,value:v,type:y}=b.target,w=b.target.checked;m(N=>({...N,[g]:y==="checkbox"?w:y==="number"?parseFloat(v)||0:v}))},x=async b=>{if(b.preventDefault(),!!o){if(d.amount<=0){u("Amount must be greater than zero");return}if(!d.expense_type){u("Expense type is required");return}c(!0),u("");try{const g={...d,expense_type:d.expense_type,updated_at:new Date().toISOString()};if(e){const v=await l(e.id,g);if(v.error)throw v.error;v.data&&n(v.data)}else{const v=await a({...g,created_by:o.id});if(v.error)throw v.error;v.data&&n(v.data)}r()}catch(g){u(g.message)}finally{c(!1)}}};return t?s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"glass-card w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-700",children:[s.jsx("h2",{className:"text-xl font-semibold gradient-text section-gradient-finances",children:e?"Edit Expense":"Add New Expense"}),s.jsx("button",{onClick:r,className:"text-gray-400 hover:text-white transition-colors",children:s.jsx(cr,{className:"h-6 w-6"})})]}),s.jsxs("form",{onSubmit:x,className:"p-6 space-y-6",children:[h&&s.jsx("div",{className:"p-4 bg-red-900/20 border border-red-500/30 rounded-lg",children:s.jsx("p",{className:"text-red-400 text-sm",children:h})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Date *"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ne,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"date",name:"date",value:d.date,onChange:f,className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent text-white",required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Amount *"}),s.jsxs("div",{className:"relative",children:[s.jsx(oe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"number",name:"amount",value:d.amount,onChange:f,min:"0.01",step:"0.01",className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent text-white placeholder-gray-400",placeholder:"0.00",required:!0})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Expense Name *"}),s.jsxs("div",{className:"relative",children:[s.jsx(cx,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"text",name:"expense_name",value:d.expense_name,onChange:f,className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent text-white placeholder-gray-400",placeholder:"e.g., Monthly SaaS subscription",required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Expense Type *"}),s.jsxs("div",{className:"relative",children:[s.jsx(Dt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsxs("select",{name:"expense_type",value:d.expense_type,onChange:f,className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent text-white",required:!0,children:[s.jsx("option",{value:"",children:"Select expense type..."}),p.map(b=>s.jsx("option",{value:b,children:b},b))]})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Invoice Filed"}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("input",{type:"checkbox",name:"invoice_filed",checked:d.invoice_filed,onChange:f,id:"invoice_filed",className:"rounded border-gray-600 bg-gray-700 text-rose-500 focus:ring-rose-500 h-5 w-5"}),s.jsx("label",{htmlFor:"invoice_filed",className:"text-white",children:"Yes, invoice has been filed"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Notes"}),s.jsx("textarea",{name:"notes",value:d.notes,onChange:f,rows:4,className:"w-full px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent text-white placeholder-gray-400 resize-none",placeholder:"Any additional notes about this expense..."})]}),s.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t border-gray-700",children:[s.jsx("button",{type:"button",onClick:r,className:"px-6 py-2 text-gray-400 hover:text-white transition-colors",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:i,className:"flex items-center space-x-2 px-6 py-2 bg-gradient-to-r from-rose-400 to-amber-500 hover:from-rose-500 hover:to-amber-600 text-white font-medium rounded-lg transition-all duration-200 disabled:opacity-50",children:i?s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):s.jsxs(s.Fragment,{children:[s.jsx($s,{className:"h-5 w-5"}),s.jsx("span",{children:e?"Update Expense":"Create Expense"})]})})]})]})]})}):null},N3=()=>{Oe();const{expenses:e,loading:t,error:r,fetchExpenses:n,createExpense:a,updateExpense:l,deleteExpense:o}=w3(),[i,c]=j.useState([]),[h,u]=j.useState([]),[d,m]=j.useState(!1),[p,f]=j.useState(),[x,b]=j.useState(1),[g,v]=j.useState(10),[y,w]=j.useState(new Date),[N,k]=j.useState({search:"",expense_type:"",invoice_filed:"all",date_range:"all"}),D=[10,15,25,50];j.useEffect(()=>{n()},[]),j.useEffect(()=>{let A=[...e];if(N.search){const T=N.search.toLowerCase();A=A.filter(W=>W.expense_name.toLowerCase().includes(T)||W.notes&&W.notes.toLowerCase().includes(T))}if(N.expense_type&&(A=A.filter(T=>T.expense_type===N.expense_type)),N.invoice_filed!=="all"&&(A=A.filter(T=>T.invoice_filed===(N.invoice_filed==="yes"))),N.date_range!=="all"){const T=new Date;let W,Z=new Date(T.getFullYear(),T.getMonth(),T.getDate(),23,59,59,999);switch(N.date_range){case"today":W=new Date(T.getFullYear(),T.getMonth(),T.getDate()),A=A.filter(P=>{const Q=new Date(P.date);return Q>=W&&Q<=Z});break;case"this_week":W=new Date(T.getTime()-T.getDay()*24*60*60*1e3),W.setHours(0,0,0,0),A=A.filter(P=>{const Q=new Date(P.date);return Q>=W&&Q<=Z});break;case"this_month":W=new Date(T.getFullYear(),T.getMonth(),1),W.setHours(0,0,0,0),A=A.filter(P=>{const Q=new Date(P.date);return Q>=W&&Q<=Z});break;case"custom":if(N.start_date){const P=new Date(N.start_date);P.setHours(0,0,0,0),A=A.filter(Q=>new Date(Q.date)>=P)}if(N.end_date){const P=new Date(N.end_date);P.setHours(23,59,59,999),A=A.filter(Q=>new Date(Q.date)<=P)}break}}c(A),b(1)},[e,N]);const C=e.reduce((A,T)=>({totalAmount:A.totalAmount+T.amount,filedInvoices:A.filedInvoices+(T.invoice_filed?1:0),unfiledInvoices:A.unfiledInvoices+(T.invoice_filed?0:1)}),{totalAmount:0,filedInvoices:0,unfiledInvoices:0}),_=Math.ceil(i.length/g),S=(x-1)*g,O=i.slice(S,S+g),E=(A,T)=>{k(W=>({...W,[A]:T}))},I=A=>{v(A),b(1)},z=A=>{u(T=>T.includes(A)?T.filter(W=>W!==A):[...T,A])},te=()=>{h.length===O.length?u([]):u(O.map(A=>A.id))},se=async()=>{if(h.length&&confirm(`Delete ${h.length} selected expenses?`))try{for(const A of h)await o(A);u([]),n()}catch(A){console.error("Error deleting expenses:",A)}},de=A=>{f(A),m(!0)},$=A=>{n(),f(void 0),w(new Date)},G=async()=>{await n(),w(new Date)},R=A=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(A),M=A=>new Date(A).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),F=["Bank fees","Course","Done with you program","Done for you program","Meta ads","Agency fees","Loan","Misk","Monthly software","Other","Personal","Referral free","Refund","Taxes","Team payroll","Yearly software","YouTube ads"];return t&&e.length===0?s.jsx("div",{className:"flex items-center justify-center p-8",children:s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-rose-400/30 border-t-rose-400"}),s.jsx("div",{className:"absolute inset-0 rounded-full bg-rose-400/10 animate-pulse"})]})}):s.jsx(dr,{section:"finances",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"space-y-2",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-gradient-to-br from-rose-400/20 to-amber-500/20 rounded-xl",children:s.jsx(oe,{className:"h-8 w-8 text-rose-400"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold gradient-text section-gradient-finances",children:"Cash Out"}),s.jsx("p",{className:"text-gray-400 mt-1",children:"Track outgoing payments and manage business expenses."})]})]})}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm text-gray-400",children:"Last Updated"}),s.jsx("p",{className:"text-sm font-semibold text-white",children:y.toLocaleTimeString()})]}),s.jsxs("button",{onClick:G,disabled:t,className:"flex items-center space-x-2 px-4 py-2 bg-gray-800 hover:bg-gray-700 text-white rounded-lg transition-all duration-200 hover:scale-105",children:[s.jsx(xr,{className:`h-4 w-4 ${t?"animate-spin":""}`}),s.jsx("span",{children:"Refresh"})]}),s.jsxs("button",{onClick:()=>{f(void 0),m(!0)},className:"group flex items-center space-x-2 px-6 py-3 bg-gradient-to-r from-rose-400 to-amber-500 hover:from-rose-500 hover:to-amber-600 text-white font-semibold rounded-xl transition-all duration-300 hover:scale-105 hover:shadow-xl hover:shadow-rose-500/25",children:[s.jsx(St,{className:"h-5 w-5 group-hover:rotate-90 transition-transform duration-300"}),s.jsx("span",{children:"Add Expense"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx("div",{className:"glass-card p-6 hover:bg-gray-800/60 transition-all duration-300 group hover:scale-105 hover:shadow-xl hover:shadow-rose-500/10",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors",children:"Total Expenses"}),s.jsx("p",{className:"text-3xl font-bold text-white mt-1",children:e.length}),s.jsxs("p",{className:"text-xs text-rose-400 mt-1 flex items-center",children:[s.jsx(Ae,{className:"h-3 w-3 mr-1"}),"All recorded expenses"]})]}),s.jsx("div",{className:"p-3 bg-gradient-to-br from-rose-400/20 to-amber-500/20 rounded-xl group-hover:scale-110 transition-transform duration-300",children:s.jsx(oe,{className:"h-8 w-8 text-rose-400"})})]})}),s.jsx("div",{className:"glass-card p-6 hover:bg-gray-800/60 transition-all duration-300 group hover:scale-105 hover:shadow-xl hover:shadow-red-500/10",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors",children:"Total Amount"}),s.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:R(C.totalAmount)}),s.jsxs("p",{className:"text-xs text-red-400 mt-1 flex items-center",children:[s.jsx(oe,{className:"h-3 w-3 mr-1"}),"Total cash out"]})]}),s.jsx("div",{className:"p-3 bg-gradient-to-br from-red-400/20 to-red-600/20 rounded-xl group-hover:scale-110 transition-transform duration-300",children:s.jsx(oe,{className:"h-8 w-8 text-red-400"})})]})}),s.jsx("div",{className:"glass-card p-6 hover:bg-gray-800/60 transition-all duration-300 group hover:scale-105 hover:shadow-xl hover:shadow-green-500/10",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors",children:"Invoices Filed"}),s.jsx("p",{className:"text-3xl font-bold text-white mt-1",children:C.filedInvoices}),s.jsxs("p",{className:"text-xs text-green-400 mt-1 flex items-center",children:[s.jsx(pc,{className:"h-3 w-3 mr-1"}),"For accounting"]})]}),s.jsx("div",{className:"p-3 bg-gradient-to-br from-green-400/20 to-green-600/20 rounded-xl group-hover:scale-110 transition-transform duration-300",children:s.jsx(pc,{className:"h-8 w-8 text-green-400"})})]})}),s.jsx("div",{className:"glass-card p-6 hover:bg-gray-800/60 transition-all duration-300 group hover:scale-105 hover:shadow-xl hover:shadow-yellow-500/10",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors",children:"Invoices Pending"}),s.jsx("p",{className:"text-3xl font-bold text-yellow-400 mt-1",children:C.unfiledInvoices}),s.jsxs("p",{className:"text-xs text-yellow-400 mt-1 flex items-center",children:[s.jsx(fc,{className:"h-3 w-3 mr-1"}),"Action required"]})]}),s.jsx("div",{className:"p-3 bg-gradient-to-br from-yellow-400/20 to-yellow-600/20 rounded-xl group-hover:scale-110 transition-transform duration-300",children:s.jsx(fc,{className:"h-8 w-8 text-yellow-400"})})]})})]}),s.jsxs("div",{className:"glass-card p-6 hover:bg-gray-800/40 transition-all duration-300",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[s.jsxs("div",{className:"relative group",children:[s.jsx(Lr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400 group-hover:text-gray-300 transition-colors"}),s.jsx("input",{type:"text",placeholder:"Search expenses...",value:N.search,onChange:A=>E("search",A.target.value),className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent text-white placeholder-gray-400 hover:bg-gray-700/50 transition-all duration-200"})]}),s.jsxs("select",{value:N.expense_type,onChange:A=>E("expense_type",A.target.value),className:"px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent text-white hover:bg-gray-700/50 transition-all duration-200",children:[s.jsx("option",{value:"",children:"All Types"}),F.map(A=>s.jsx("option",{value:A,children:A},A))]}),s.jsxs("select",{value:N.invoice_filed,onChange:A=>E("invoice_filed",A.target.value),className:"px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent text-white hover:bg-gray-700/50 transition-all duration-200",children:[s.jsx("option",{value:"all",children:"All Invoices"}),s.jsx("option",{value:"yes",children:"Filed"}),s.jsx("option",{value:"no",children:"Not Filed"})]}),s.jsxs("select",{value:N.date_range,onChange:A=>E("date_range",A.target.value),className:"px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent text-white hover:bg-gray-700/50 transition-all duration-200",children:[s.jsx("option",{value:"all",children:"All Time"}),s.jsx("option",{value:"today",children:"Today"}),s.jsx("option",{value:"this_week",children:"This Week"}),s.jsx("option",{value:"this_month",children:"This Month"}),s.jsx("option",{value:"custom",children:"Custom Range"})]}),s.jsx("div",{className:"flex space-x-2",children:h.length>0&&s.jsxs("button",{onClick:se,className:"flex items-center space-x-1 px-4 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-all duration-200 hover:scale-105 hover:shadow-lg hover:shadow-red-500/25",children:[s.jsx(Ir,{className:"h-4 w-4"}),s.jsxs("span",{children:["Delete (",h.length,")"]})]})})]}),N.date_range==="custom"&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-xs text-gray-400",children:"Start Date"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ne,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx("input",{type:"date",value:N.start_date||"",onChange:A=>E("start_date",A.target.value),className:"w-full pl-9 pr-3 py-2 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent text-white text-sm"})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-xs text-gray-400",children:"End Date"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ne,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx("input",{type:"date",value:N.end_date||"",onChange:A=>E("end_date",A.target.value),className:"w-full pl-9 pr-3 py-2 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent text-white text-sm"})]})]})]})]}),r&&s.jsx("div",{className:"p-4 bg-red-900/20 border border-red-500/30 rounded-lg animate-pulse",children:s.jsx("p",{className:"text-red-400 text-sm",children:r})}),s.jsxs("div",{className:"glass-card overflow-hidden hover:bg-gray-800/30 transition-all duration-300",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-800/60 backdrop-blur-sm",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-4 text-left",children:s.jsx("input",{type:"checkbox",checked:h.length===O.length&&O.length>0,onChange:te,className:"rounded border-gray-600 bg-gray-700 text-rose-500 focus:ring-rose-500 hover:scale-110 transition-transform duration-200"})}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300 hover:text-white transition-colors",children:"Date"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300 hover:text-white transition-colors",children:"Amount"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300 hover:text-white transition-colors",children:"Expense Name"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300 hover:text-white transition-colors",children:"Expense Type"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300 hover:text-white transition-colors",children:"Invoice Filed"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300 hover:text-white transition-colors",children:"Notes"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300 hover:text-white transition-colors",children:"Created By"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300 hover:text-white transition-colors",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-800/50",children:O.map(A=>{var T,W;return s.jsxs("tr",{className:"hover:bg-gray-800/40 transition-all duration-300 group hover:shadow-lg hover:shadow-gray-900/20",children:[s.jsx("td",{className:"px-6 py-5",children:s.jsx("input",{type:"checkbox",checked:h.includes(A.id),onChange:()=>z(A.id),className:"rounded border-gray-600 bg-gray-700 text-rose-500 focus:ring-rose-500 hover:scale-110 transition-transform duration-200"})}),s.jsx("td",{className:"px-6 py-5 text-gray-300 group-hover:text-white transition-colors",children:M(A.date)}),s.jsx("td",{className:"px-6 py-5",children:s.jsx("span",{className:"text-red-400 font-semibold",children:R(A.amount)})}),s.jsx("td",{className:"px-6 py-5",children:s.jsx("div",{className:"font-semibold text-white group-hover:text-rose-100 transition-colors",children:A.expense_name})}),s.jsx("td",{className:"px-6 py-5",children:s.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-gray-900/30 text-gray-400 border border-gray-500/30",children:A.expense_type})}),s.jsx("td",{className:"px-6 py-5",children:A.invoice_filed?s.jsx(pc,{className:"h-5 w-5 text-green-400"}):s.jsx(fc,{className:"h-5 w-5 text-yellow-400"})}),s.jsx("td",{className:"px-6 py-5 text-gray-400 text-sm group-hover:text-gray-300 transition-colors max-w-xs truncate",children:A.notes||"-"}),s.jsx("td",{className:"px-6 py-5 text-gray-400 text-sm group-hover:text-gray-300 transition-colors",children:((T=A.creator)==null?void 0:T.full_name)||((W=A.creator)==null?void 0:W.email)||"N/A"}),s.jsx("td",{className:"px-6 py-5",children:s.jsx("div",{className:"flex items-center space-x-2",children:s.jsx("button",{onClick:()=>de(A),className:"text-gray-400 hover:text-rose-400 transition-all duration-200 hover:scale-110 p-2 rounded-lg hover:bg-gray-700/50",title:"Edit expense",children:s.jsx(tl,{className:"h-4 w-4"})})})})]},A.id)})})]})}),O.length===0&&s.jsxs("div",{className:"p-8 text-center",children:[s.jsx(oe,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-300 mb-2",children:"No Expenses Found"}),s.jsx("p",{className:"text-gray-400 text-sm mb-4",children:N.search||N.expense_type||N.invoice_filed!=="all"||N.date_range!=="all"?"Try adjusting your filters to see more results.":"Get started by adding your first expense entry."}),s.jsx("button",{onClick:()=>{f(void 0),m(!0)},className:"px-4 py-2 bg-gradient-to-r from-rose-400 to-amber-500 hover:from-rose-500 hover:to-amber-600 text-white font-medium rounded-lg transition-all duration-200",children:"Add Expense"})]}),O.length>0&&s.jsxs("div",{className:"px-6 py-4 border-t border-gray-800/50 flex items-center justify-between bg-gray-800/20",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"text-sm text-gray-400",children:["Showing ",s.jsx("span",{className:"font-semibold text-white",children:S+1})," to"," ",s.jsx("span",{className:"font-semibold text-white",children:Math.min(S+g,i.length)})," of"," ",s.jsx("span",{className:"font-semibold text-white",children:i.length})," entries"]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-sm text-gray-400",children:"Show:"}),s.jsx("select",{value:g,onChange:A=>I(Number(A.target.value)),className:"px-3 py-1 bg-gray-700/50 border border-gray-600 rounded-lg text-white text-sm focus:ring-2 focus:ring-rose-500 focus:border-transparent hover:bg-gray-600/50 transition-all duration-200",children:D.map(A=>s.jsx("option",{value:A,children:A},A))}),s.jsx("span",{className:"text-sm text-gray-400",children:"per page"})]})]}),_>1&&s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("button",{onClick:()=>b(A=>Math.max(A-1,1)),disabled:x===1,className:"p-2 text-gray-400 hover:text-white disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 hover:scale-110 hover:bg-gray-700/50 rounded-lg",children:s.jsx(Or,{className:"h-5 w-5"})}),s.jsxs("span",{className:"text-sm text-gray-300 px-3 py-1 bg-gray-700/50 rounded-lg",children:["Page ",s.jsx("span",{className:"font-semibold text-white",children:x})," of"," ",s.jsx("span",{className:"font-semibold text-white",children:_})]}),s.jsx("button",{onClick:()=>b(A=>Math.min(A+1,_)),disabled:x===_,className:"p-2 text-gray-400 hover:text-white disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 hover:scale-110 hover:bg-gray-700/50 rounded-lg",children:s.jsx(ir,{className:"h-5 w-5"})})]})]})]}),s.jsx(j3,{expense:p,isOpen:d,onClose:()=>{m(!1),f(void 0)},onSave:$,createExpense:a,updateExpense:l})]})})},_3=()=>{Oe();const{cashEntries:e,loading:t,error:r,fetchCashEntries:n,deleteCashEntry:a}=Tv(),{offers:l,fetchOffers:o}=Ph(),{users:i,fetchUsers:c}=sl(),[h,u]=j.useState([]),[d,m]=j.useState([]),[p,f]=j.useState(!1),[x,b]=j.useState(),[g,v]=j.useState(1),[y,w]=j.useState(10),[N,k]=j.useState(new Date),[D,C]=j.useState({search:"",status:"",payment_type:"",offer_id:"",setter_id:"",date_range:"all",due_date_range:"all"}),_=[10,15,25,50];j.useEffect(()=>{n(),o(),c()},[]),j.useEffect(()=>{let P=[...e];if(P=P.filter(Q=>Q.due_date),D.search){const Q=D.search.toLowerCase();P=P.filter(ue=>{var ve,L;return ue.client_name.toLowerCase().includes(Q)||ue.client_email.toLowerCase().includes(Q)||((ve=ue.offer)==null?void 0:ve.name)&&ue.offer.name.toLowerCase().includes(Q)||((L=ue.setter)==null?void 0:L.full_name)&&ue.setter.full_name.toLowerCase().includes(Q)})}if(D.status&&(P=P.filter(Q=>Q.status===D.status)),D.payment_type&&(P=P.filter(Q=>Q.payment_type===D.payment_type)),D.offer_id&&(P=P.filter(Q=>Q.offer_id===D.offer_id)),D.setter_id&&(P=P.filter(Q=>Q.setter_id===D.setter_id)),D.due_date_range!=="all"){const Q=new Date;let ue,ve;switch(D.due_date_range){case"overdue":P=P.filter(L=>L.due_date?new Date(L.due_date)<Q:!1);break;case"due_this_week":ue=new Date(Q.getTime()-Q.getDay()*24*60*60*1e3),ve=new Date(ue.getTime()+6*24*60*60*1e3),P=P.filter(L=>{if(!L.due_date)return!1;const Y=new Date(L.due_date);return Y>=ue&&Y<=ve});break;case"due_this_month":ue=new Date(Q.getFullYear(),Q.getMonth(),1),ve=new Date(Q.getFullYear(),Q.getMonth()+1,0),P=P.filter(L=>{if(!L.due_date)return!1;const Y=new Date(L.due_date);return Y>=ue&&Y<=ve});break;case"custom":D.due_start_date&&(P=P.filter(L=>L.due_date?new Date(L.due_date)>=new Date(D.due_start_date):!1)),D.due_end_date&&(P=P.filter(L=>L.due_date?new Date(L.due_date)<=new Date(D.due_end_date):!1));break}}u(P),v(1)},[e,D]);const S=h.reduce((P,Q)=>{const ue=Q.due_date&&new Date(Q.due_date)<new Date,ve=Q.due_date&&(()=>{const L=new Date,Y=new Date(L.getTime()-L.getDay()*24*60*60*1e3),ae=new Date(Y.getTime()+6*24*60*60*1e3),q=new Date(Q.due_date);return q>=Y&&q<=ae})();return{totalReceivables:P.totalReceivables+Q.income,totalOutstanding:P.totalOutstanding+(Q.status==="Paid"?0:Q.income),overdueAmount:P.overdueAmount+(ue&&Q.status!=="Paid"?Q.income:0),dueThisWeekAmount:P.dueThisWeekAmount+(ve&&Q.status!=="Paid"?Q.income:0),overdueCount:P.overdueCount+(ue&&Q.status!=="Paid"?1:0),dueThisWeekCount:P.dueThisWeekCount+(ve&&Q.status!=="Paid"?1:0)}},{totalReceivables:0,totalOutstanding:0,overdueAmount:0,dueThisWeekAmount:0,overdueCount:0,dueThisWeekCount:0}),O=Math.ceil(h.length/y),E=(g-1)*y,I=h.slice(E,E+y),z=(P,Q)=>{C(ue=>({...ue,[P]:Q}))},te=P=>{w(P),v(1)},se=P=>{m(Q=>Q.includes(P)?Q.filter(ue=>ue!==P):[...Q,P])},de=()=>{d.length===I.length?m([]):m(I.map(P=>P.id))},$=async()=>{if(d.length&&confirm(`Delete ${d.length} selected receivables?`))try{for(const P of d)await a(P);m([]),n()}catch(P){console.error("Error deleting receivables:",P)}},G=P=>{b(P),f(!0)},R=P=>{n(),b(void 0),k(new Date)},M=async()=>{await n(),await o(),await c(),k(new Date)},F=P=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(P),A=P=>P?new Date(P).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"-",T=P=>({Paid:"bg-green-900/30 text-green-400 border-green-500/30",Canceled:"bg-red-900/30 text-red-400 border-red-500/30",Refunded:"bg-yellow-900/30 text-yellow-400 border-yellow-500/30"})[P],W=P=>P==="Deposit"?"bg-blue-900/30 text-blue-400":P==="Installment"?"bg-purple-900/30 text-purple-400":"bg-gray-900/30 text-gray-400",Z=(P,Q)=>!P||Q==="Paid"?!1:new Date(P)<new Date;return t&&e.length===0?s.jsx("div",{className:"flex items-center justify-center p-8",children:s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-rose-400/30 border-t-rose-400"}),s.jsx("div",{className:"absolute inset-0 rounded-full bg-rose-400/10 animate-pulse"})]})}):s.jsx(dr,{section:"finances",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"space-y-2",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-gradient-to-br from-rose-400/20 to-amber-500/20 rounded-xl",children:s.jsx(lr,{className:"h-8 w-8 text-rose-400"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold gradient-text section-gradient-finances",children:"Receivables"}),s.jsx("p",{className:"text-gray-400 mt-1",children:"Manage outstanding invoices and track payment due dates."})]})]})}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm text-gray-400",children:"Last Updated"}),s.jsx("p",{className:"text-sm font-semibold text-white",children:N.toLocaleTimeString()})]}),s.jsxs("button",{onClick:M,disabled:t,className:"flex items-center space-x-2 px-4 py-2 bg-gray-800 hover:bg-gray-700 text-white rounded-lg transition-all duration-200 hover:scale-105",children:[s.jsx(xr,{className:`h-4 w-4 ${t?"animate-spin":""}`}),s.jsx("span",{children:"Refresh"})]}),s.jsxs("button",{onClick:()=>{b(void 0),f(!0)},className:"group flex items-center space-x-2 px-6 py-3 bg-gradient-to-r from-rose-400 to-amber-500 hover:from-rose-500 hover:to-amber-600 text-white font-semibold rounded-xl transition-all duration-300 hover:scale-105 hover:shadow-xl hover:shadow-rose-500/25",children:[s.jsx(St,{className:"h-5 w-5 group-hover:rotate-90 transition-transform duration-300"}),s.jsx("span",{children:"Add Receivable"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx("div",{className:"glass-card p-6 hover:bg-gray-800/60 transition-all duration-300 group hover:scale-105 hover:shadow-xl hover:shadow-rose-500/10",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors",children:"Total Receivables"}),s.jsx("p",{className:"text-3xl font-bold text-white mt-1",children:h.length}),s.jsxs("p",{className:"text-xs text-rose-400 mt-1 flex items-center",children:[s.jsx(Ae,{className:"h-3 w-3 mr-1"}),"Outstanding invoices"]})]}),s.jsx("div",{className:"p-3 bg-gradient-to-br from-rose-400/20 to-amber-500/20 rounded-xl group-hover:scale-110 transition-transform duration-300",children:s.jsx(lr,{className:"h-8 w-8 text-rose-400"})})]})}),s.jsx("div",{className:"glass-card p-6 hover:bg-gray-800/60 transition-all duration-300 group hover:scale-105 hover:shadow-xl hover:shadow-blue-500/10",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors",children:"Total Outstanding"}),s.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:F(S.totalOutstanding)}),s.jsxs("p",{className:"text-xs text-blue-400 mt-1 flex items-center",children:[s.jsx(oe,{className:"h-3 w-3 mr-1"}),"Unpaid amount"]})]}),s.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-400/20 to-blue-600/20 rounded-xl group-hover:scale-110 transition-transform duration-300",children:s.jsx(oe,{className:"h-8 w-8 text-blue-400"})})]})}),s.jsx("div",{className:"glass-card p-6 hover:bg-gray-800/60 transition-all duration-300 group hover:scale-105 hover:shadow-xl hover:shadow-red-500/10",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors",children:"Overdue Payments"}),s.jsx("p",{className:"text-2xl font-bold text-red-400 mt-1",children:F(S.overdueAmount)}),s.jsxs("p",{className:"text-xs text-red-400 mt-1 flex items-center",children:[s.jsx(hn,{className:"h-3 w-3 mr-1"}),S.overdueCount," overdue"]})]}),s.jsx("div",{className:"p-3 bg-gradient-to-br from-red-400/20 to-red-600/20 rounded-xl group-hover:scale-110 transition-transform duration-300",children:s.jsx(hn,{className:"h-8 w-8 text-red-400"})})]})}),s.jsx("div",{className:"glass-card p-6 hover:bg-gray-800/60 transition-all duration-300 group hover:scale-105 hover:shadow-xl hover:shadow-yellow-500/10",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors",children:"Due This Week"}),s.jsx("p",{className:"text-2xl font-bold text-yellow-400 mt-1",children:F(S.dueThisWeekAmount)}),s.jsxs("p",{className:"text-xs text-yellow-400 mt-1 flex items-center",children:[s.jsx(Ne,{className:"h-3 w-3 mr-1"}),S.dueThisWeekCount," due"]})]}),s.jsx("div",{className:"p-3 bg-gradient-to-br from-yellow-400/20 to-yellow-600/20 rounded-xl group-hover:scale-110 transition-transform duration-300",children:s.jsx(Ne,{className:"h-8 w-8 text-yellow-400"})})]})})]}),s.jsxs("div",{className:"glass-card p-6 hover:bg-gray-800/40 transition-all duration-300",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[s.jsxs("div",{className:"relative group",children:[s.jsx(Lr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400 group-hover:text-gray-300 transition-colors"}),s.jsx("input",{type:"text",placeholder:"Search receivables...",value:D.search,onChange:P=>z("search",P.target.value),className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent text-white placeholder-gray-400 hover:bg-gray-700/50 transition-all duration-200"})]}),s.jsxs("select",{value:D.status,onChange:P=>z("status",P.target.value),className:"px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent text-white hover:bg-gray-700/50 transition-all duration-200",children:[s.jsx("option",{value:"",children:"All Statuses"}),s.jsx("option",{value:"Paid",children:"Paid"}),s.jsx("option",{value:"Canceled",children:"Canceled"}),s.jsx("option",{value:"Refunded",children:"Refunded"})]}),s.jsxs("select",{value:D.payment_type,onChange:P=>z("payment_type",P.target.value),className:"px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent text-white hover:bg-gray-700/50 transition-all duration-200",children:[s.jsx("option",{value:"",children:"All Payment Types"}),s.jsx("option",{value:"Deposit",children:"Deposit"}),s.jsx("option",{value:"Installment",children:"Installment"}),[1,2,3,4,5,6,7,8,9,10].map(P=>s.jsx("option",{value:P.toString(),children:P},P))]}),s.jsxs("select",{value:D.setter_id,onChange:P=>z("setter_id",P.target.value),className:"px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent text-white hover:bg-gray-700/50 transition-all duration-200",children:[s.jsx("option",{value:"",children:"All Setters"}),i.map(P=>s.jsx("option",{value:P.id,children:P.full_name||P.email},P.id))]}),s.jsxs("select",{value:D.due_date_range,onChange:P=>z("due_date_range",P.target.value),className:"px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent text-white hover:bg-gray-700/50 transition-all duration-200",children:[s.jsx("option",{value:"all",children:"All Due Dates"}),s.jsx("option",{value:"overdue",children:"Overdue"}),s.jsx("option",{value:"due_this_week",children:"Due This Week"}),s.jsx("option",{value:"due_this_month",children:"Due This Month"}),s.jsx("option",{value:"custom",children:"Custom Range"})]}),s.jsx("div",{className:"flex space-x-2",children:d.length>0&&s.jsxs("button",{onClick:$,className:"flex items-center space-x-1 px-4 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-all duration-200 hover:scale-105 hover:shadow-lg hover:shadow-red-500/25",children:[s.jsx(Ir,{className:"h-4 w-4"}),s.jsxs("span",{children:["Delete (",d.length,")"]})]})})]}),D.due_date_range==="custom"&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-xs text-gray-400",children:"Due Start Date"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ne,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx("input",{type:"date",value:D.due_start_date||"",onChange:P=>z("due_start_date",P.target.value),className:"w-full pl-9 pr-3 py-2 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent text-white text-sm"})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-xs text-gray-400",children:"Due End Date"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ne,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx("input",{type:"date",value:D.due_end_date||"",onChange:P=>z("due_end_date",P.target.value),className:"w-full pl-9 pr-3 py-2 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-transparent text-white text-sm"})]})]})]})]}),r&&s.jsx("div",{className:"p-4 bg-red-900/20 border border-red-500/30 rounded-lg animate-pulse",children:s.jsx("p",{className:"text-red-400 text-sm",children:r})}),s.jsxs("div",{className:"glass-card overflow-hidden hover:bg-gray-800/30 transition-all duration-300",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-800/60 backdrop-blur-sm",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-4 text-left",children:s.jsx("input",{type:"checkbox",checked:d.length===I.length&&I.length>0,onChange:de,className:"rounded border-gray-600 bg-gray-700 text-rose-500 focus:ring-rose-500 hover:scale-110 transition-transform duration-200"})}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300 hover:text-white transition-colors",children:"Due Date"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300 hover:text-white transition-colors",children:"Client Name"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300 hover:text-white transition-colors",children:"Client Email"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300 hover:text-white transition-colors",children:"Payment Type"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300 hover:text-white transition-colors",children:"Status"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300 hover:text-white transition-colors",children:"Setter"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300 hover:text-white transition-colors",children:"Income"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300 hover:text-white transition-colors",children:"Contracted"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300 hover:text-white transition-colors",children:"Gross Profit"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300 hover:text-white transition-colors",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-800/50",children:I.map(P=>s.jsxs("tr",{className:`hover:bg-gray-800/40 transition-all duration-300 group hover:shadow-lg hover:shadow-gray-900/20 ${Z(P.due_date,P.status)?"bg-red-900/10 border-l-4 border-red-500":""}`,children:[s.jsx("td",{className:"px-6 py-5",children:s.jsx("input",{type:"checkbox",checked:d.includes(P.id),onChange:()=>se(P.id),className:"rounded border-gray-600 bg-gray-700 text-rose-500 focus:ring-rose-500 hover:scale-110 transition-transform duration-200"})}),s.jsx("td",{className:"px-6 py-5",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:`text-sm font-medium ${Z(P.due_date,P.status)?"text-red-400":"text-gray-300"} group-hover:text-white transition-colors`,children:A(P.due_date)}),Z(P.due_date,P.status)&&s.jsx(hn,{className:"h-4 w-4 text-red-400"})]})}),s.jsx("td",{className:"px-6 py-5",children:s.jsx("div",{className:"group-hover:scale-105 transition-transform duration-200",children:s.jsx("div",{className:"font-semibold text-white group-hover:text-rose-100 transition-colors",children:P.client_name})})}),s.jsx("td",{className:"px-6 py-5",children:s.jsx("div",{className:"text-gray-400 group-hover:text-gray-300 transition-colors",children:P.client_email})}),s.jsx("td",{className:"px-6 py-5",children:s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${W(P.payment_type)}`,children:P.payment_type})}),s.jsx("td",{className:"px-6 py-5",children:s.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${T(P.status)}`,children:P.status})}),s.jsx("td",{className:"px-6 py-5",children:P.setter?s.jsx("div",{className:"text-white font-medium",children:P.setter.full_name||P.setter.email}):s.jsx("span",{className:"text-gray-500",children:"-"})}),s.jsx("td",{className:"px-6 py-5",children:s.jsx("span",{className:"text-green-400 font-semibold",children:F(P.income)})}),s.jsx("td",{className:"px-6 py-5",children:s.jsx("span",{className:"text-white font-medium",children:F(P.contracted_amount)})}),s.jsx("td",{className:"px-6 py-5",children:s.jsx("span",{className:"text-emerald-400 font-semibold",children:F(P.gross_profit)})}),s.jsx("td",{className:"px-6 py-5",children:s.jsx("div",{className:"flex items-center space-x-2",children:s.jsx("button",{onClick:()=>G(P),className:"text-gray-400 hover:text-rose-400 transition-all duration-200 hover:scale-110 p-2 rounded-lg hover:bg-gray-700/50",title:"Edit receivable",children:s.jsx(tl,{className:"h-4 w-4"})})})})]},P.id))})]})}),I.length===0&&s.jsxs("div",{className:"p-8 text-center",children:[s.jsx(lr,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-300 mb-2",children:"No Receivables Found"}),s.jsx("p",{className:"text-gray-400 text-sm mb-4",children:D.search||D.status||D.payment_type||D.setter_id||D.due_date_range!=="all"?"Try adjusting your filters to see more results.":"Get started by adding your first receivable entry."}),s.jsx("button",{onClick:()=>{b(void 0),f(!0)},className:"px-4 py-2 bg-gradient-to-r from-rose-400 to-amber-500 hover:from-rose-500 hover:to-amber-600 text-white font-medium rounded-lg transition-all duration-200",children:"Add Receivable"})]}),I.length>0&&s.jsxs("div",{className:"px-6 py-4 border-t border-gray-800/50 flex items-center justify-between bg-gray-800/20",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"text-sm text-gray-400",children:["Showing ",s.jsx("span",{className:"font-semibold text-white",children:E+1})," to"," ",s.jsx("span",{className:"font-semibold text-white",children:Math.min(E+y,h.length)})," of"," ",s.jsx("span",{className:"font-semibold text-white",children:h.length})," receivables"]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-sm text-gray-400",children:"Show:"}),s.jsx("select",{value:y,onChange:P=>te(Number(P.target.value)),className:"px-3 py-1 bg-gray-700/50 border border-gray-600 rounded-lg text-white text-sm focus:ring-2 focus:ring-rose-500 focus:border-transparent hover:bg-gray-600/50 transition-all duration-200",children:_.map(P=>s.jsx("option",{value:P,children:P},P))}),s.jsx("span",{className:"text-sm text-gray-400",children:"per page"})]})]}),O>1&&s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("button",{onClick:()=>v(P=>Math.max(P-1,1)),disabled:g===1,className:"p-2 text-gray-400 hover:text-white disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 hover:scale-110 hover:bg-gray-700/50 rounded-lg",children:s.jsx(Or,{className:"h-5 w-5"})}),s.jsxs("span",{className:"text-sm text-gray-300 px-3 py-1 bg-gray-700/50 rounded-lg",children:["Page ",s.jsx("span",{className:"font-semibold text-white",children:g})," of"," ",s.jsx("span",{className:"font-semibold text-white",children:O})]}),s.jsx("button",{onClick:()=>v(P=>Math.min(P+1,O)),disabled:g===O,className:"p-2 text-gray-400 hover:text-white disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 hover:scale-110 hover:bg-gray-700/50 rounded-lg",children:s.jsx(ir,{className:"h-5 w-5"})})]})]})]}),s.jsx(Rv,{entry:x,isOpen:p,onClose:()=>{f(!1),b(void 0)},onSave:R})]})})},S3=()=>{const[e,t]=j.useState(null),[r,n]=j.useState(!1),[a,l]=j.useState(null),o=async()=>{n(!0),l(null);try{const{data:c,error:h}=await K.from("cash_entries").select(`
          *,
          offer:offers(id, name),
          setter:setter_id(id, email, full_name),
          creator:created_by(id, email, full_name)
        `).order("date",{ascending:!1});if(h)throw h;const{data:u,error:d}=await K.from("expenses").select(`
          *,
          creator:created_by(id, email, full_name)
        `).order("date",{ascending:!1});if(d)throw d;const m=i(c||[],u||[]);t(m)}catch(c){console.error("Error fetching financial data:",c),l(c.message)}finally{n(!1)}},i=(c,h)=>{const u=new Date,d=new Date(u.getFullYear(),u.getMonth(),u.getDate()),m=new Date(d.getTime()-24*60*60*1e3),p=new Date(d.getTime()-d.getDay()*24*60*60*1e3),f=new Date(p.getTime()-7*24*60*60*1e3),x=new Date(p.getTime()-1),b=new Date(u.getFullYear(),u.getMonth(),1),g=new Date(u.getFullYear(),u.getMonth()-1,1),v=new Date(b.getTime()-1),y=new Date(u.getTime()-30*24*60*60*1e3),w=new Date(y.getTime()-30*24*60*60*1e3),N=new Date(y.getTime()-1),k=new Date(u.getFullYear(),Math.floor(u.getMonth()/3)*3,1),D=new Date(k.getFullYear(),k.getMonth()-3,1),C=new Date(k.getTime()-1),_=(O,E)=>{const I=O.reduce((q,re)=>q+re.income,0),z=O.reduce((q,re)=>q+re.gross_profit,0),te=O.reduce((q,re)=>q+re.total_commissions,0),se=E.reduce((q,re)=>q+re.amount,0),de=z-te-se,$=O.filter(q=>q.due_date),G=$.reduce((q,re)=>q+re.income,0),R=$.filter(q=>q.due_date&&new Date(q.due_date)<u&&q.status!=="Paid").reduce((q,re)=>q+re.income,0),M=new Date(p.getTime()+6*24*60*60*1e3),F=$.filter(q=>{if(!q.due_date||q.status==="Paid")return!1;const re=new Date(q.due_date);return re>=p&&re<=M}).reduce((q,re)=>q+re.income,0),A=new Date(u.getFullYear(),u.getMonth()+1,0),T=$.filter(q=>{if(!q.due_date||q.status==="Paid")return!1;const re=new Date(q.due_date);return re>=b&&re<=A}).reduce((q,re)=>q+re.income,0),W=G>0?O.filter(q=>q.status==="Paid").reduce((q,re)=>q+re.income,0)/G*100:0,Z=I>0?de/I*100:0,P={},Q={},ue={},ve={};O.forEach(q=>{var pe;const re=((pe=q.offer)==null?void 0:pe.name)||"No Offer";if(P[re]=(P[re]||0)+q.income,q.setter&&q.setter_payment>0){const $e=q.setter.full_name||q.setter.email;Q[$e]=(Q[$e]||0)+q.setter_payment}if(q.creator&&q.closer_payment>0){const $e=q.creator.full_name||q.creator.email;ue[$e]=(ue[$e]||0)+q.closer_payment}ve[q.status]=(ve[q.status]||0)+q.income});const L={};E.forEach(q=>{L[q.expense_type]=(L[q.expense_type]||0)+q.amount});const Y={};$.forEach(q=>{Y[q.status]=(Y[q.status]||0)+q.income});const ae=[];for(let q=5;q>=0;q--){const re=new Date(u.getFullYear(),u.getMonth()-q,1),pe=new Date(u.getFullYear(),u.getMonth()-q+1,0),$e=O.filter(X=>{const U=new Date(X.date);return U>=re&&U<=pe}),vr=E.filter(X=>{const U=new Date(X.date);return U>=re&&U<=pe}),Ve=$e.reduce((X,U)=>X+U.income,0),kt=vr.reduce((X,U)=>X+U.amount,0),B=Ve-kt;ae.push({month:re.toLocaleDateString("en-US",{month:"short",year:"numeric"}),income:Ve,expenses:kt,profit:B})}return{totalIncome:I,totalExpenses:se,netProfit:de,grossProfit:z,totalCommissions:te,totalReceivables:G,overdueReceivables:R,dueThisWeek:F,dueThisMonth:T,collectionRate:W,profitMargin:Z,incomeByOffer:P,expensesByType:L,commissionsBySetter:Q,commissionsByCloser:ue,monthlyTrends:ae,incomeByStatus:ve,receivablesByStatus:Y}},S=(O,E,I,z="date")=>O.filter(te=>{const se=new Date(te[z]);return I?se>=E&&se<=I:se>=E});return{today:{current:_(S(c,d),S(h,d)),previous:_(S(c,m,d),S(h,m,d))},thisWeek:{current:_(S(c,p),S(h,p)),previous:_(S(c,f,x),S(h,f,x))},thisMonth:{current:_(S(c,b),S(h,b)),previous:_(S(c,g,v),S(h,g,v))},last30Days:{current:_(S(c,y),S(h,y)),previous:_(S(c,w,N),S(h,w,N))},thisQuarter:{current:_(S(c,k),S(h,k)),previous:_(S(c,D,C),S(h,D,C))},allTime:{current:_(c,h),previous:{totalIncome:0,totalExpenses:0,netProfit:0,grossProfit:0,totalCommissions:0,totalReceivables:0,overdueReceivables:0,dueThisWeek:0,dueThisMonth:0,collectionRate:0,profitMargin:0,incomeByOffer:{},expensesByType:{},commissionsBySetter:{},commissionsByCloser:{},monthlyTrends:[],incomeByStatus:{},receivablesByStatus:{}}}}};return{metricsData:e,loading:r,error:a,fetchFinancialData:o}},k3=({currentMetrics:e,previousMetrics:t})=>{const r=(i,c)=>c===0?i>0?100:0:(i-c)/c*100,n=i=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(i),a=i=>`${i>=0?"+":""}${i.toFixed(1)}%`,l=i=>i>0?s.jsx(Za,{className:"h-4 w-4 text-green-400"}):i<0?s.jsx(Xa,{className:"h-4 w-4 text-red-400"}):s.jsx(wn,{className:"h-4 w-4 text-gray-400"}),o=i=>i>0?"text-green-400":i<0?"text-red-400":"text-gray-400";return s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-6",children:[s.jsx("div",{className:"glass-card p-6 hover:bg-gray-800/60 transition-all duration-300 group hover:scale-105 hover:shadow-xl hover:shadow-green-500/10",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors",children:"Total Income"}),s.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:n(e.totalIncome)}),s.jsxs("div",{className:"flex items-center space-x-1 mt-2",children:[l(r(e.totalIncome,t.totalIncome)),s.jsx("span",{className:`text-sm font-medium ${o(r(e.totalIncome,t.totalIncome))}`,children:a(r(e.totalIncome,t.totalIncome))})]})]}),s.jsx("div",{className:"p-3 bg-gradient-to-br from-green-400/20 to-green-600/20 rounded-xl group-hover:scale-110 transition-transform duration-300",children:s.jsx(oe,{className:"h-8 w-8 text-green-400"})})]})}),s.jsx("div",{className:"glass-card p-6 hover:bg-gray-800/60 transition-all duration-300 group hover:scale-105 hover:shadow-xl hover:shadow-red-500/10",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors",children:"Total Expenses"}),s.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:n(e.totalExpenses)}),s.jsxs("div",{className:"flex items-center space-x-1 mt-2",children:[l(r(e.totalExpenses,t.totalExpenses)),s.jsx("span",{className:`text-sm font-medium ${o(r(e.totalExpenses,t.totalExpenses))}`,children:a(r(e.totalExpenses,t.totalExpenses))})]})]}),s.jsx("div",{className:"p-3 bg-gradient-to-br from-red-400/20 to-red-600/20 rounded-xl group-hover:scale-110 transition-transform duration-300",children:s.jsx($a,{className:"h-8 w-8 text-red-400"})})]})}),s.jsx("div",{className:"glass-card p-6 hover:bg-gray-800/60 transition-all duration-300 group hover:scale-105 hover:shadow-xl hover:shadow-amber-500/10",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors",children:"Net Profit"}),s.jsx("p",{className:`text-2xl font-bold mt-1 ${e.netProfit>=0?"text-amber-400":"text-red-400"}`,children:n(e.netProfit)}),s.jsxs("div",{className:"flex items-center space-x-1 mt-2",children:[l(r(e.netProfit,t.netProfit)),s.jsx("span",{className:`text-sm font-medium ${o(r(e.netProfit,t.netProfit))}`,children:a(r(e.netProfit,t.netProfit))})]})]}),s.jsx("div",{className:"p-3 bg-gradient-to-br from-amber-400/20 to-amber-600/20 rounded-xl group-hover:scale-110 transition-transform duration-300",children:s.jsx(ct,{className:"h-8 w-8 text-amber-400"})})]})}),s.jsx("div",{className:"glass-card p-6 hover:bg-gray-800/60 transition-all duration-300 group hover:scale-105 hover:shadow-xl hover:shadow-blue-500/10",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors",children:"Total Commissions"}),s.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:n(e.totalCommissions)}),s.jsxs("div",{className:"flex items-center space-x-1 mt-2",children:[s.jsx(ye,{className:"h-4 w-4 text-blue-400"}),s.jsxs("span",{className:"text-sm text-blue-400 font-medium",children:[e.totalIncome>0?(e.totalCommissions/e.totalIncome*100).toFixed(1):0,"% of income"]})]})]}),s.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-400/20 to-blue-600/20 rounded-xl group-hover:scale-110 transition-transform duration-300",children:s.jsx(ye,{className:"h-8 w-8 text-blue-400"})})]})}),s.jsx("div",{className:"glass-card p-6 hover:bg-gray-800/60 transition-all duration-300 group hover:scale-105 hover:shadow-xl hover:shadow-red-500/10",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors",children:"Overdue Receivables"}),s.jsx("p",{className:"text-2xl font-bold text-red-400 mt-1",children:n(e.overdueReceivables)}),s.jsxs("div",{className:"flex items-center space-x-1 mt-2",children:[s.jsx(hn,{className:"h-4 w-4 text-red-400"}),s.jsx("span",{className:"text-sm text-red-400 font-medium",children:"Needs attention"})]})]}),s.jsx("div",{className:"p-3 bg-gradient-to-br from-red-400/20 to-red-600/20 rounded-xl group-hover:scale-110 transition-transform duration-300",children:s.jsx(hn,{className:"h-8 w-8 text-red-400"})})]})}),s.jsx("div",{className:"glass-card p-6 hover:bg-gray-800/60 transition-all duration-300 group hover:scale-105 hover:shadow-xl hover:shadow-cyan-500/10",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors",children:"Collection Rate"}),s.jsxs("p",{className:"text-2xl font-bold text-cyan-400 mt-1",children:[e.collectionRate.toFixed(1),"%"]}),s.jsxs("div",{className:"flex items-center space-x-1 mt-2",children:[s.jsx(Aa,{className:"h-4 w-4 text-cyan-400"}),s.jsx("span",{className:"text-sm text-cyan-400 font-medium",children:"Payment efficiency"})]})]}),s.jsx("div",{className:"p-3 bg-gradient-to-br from-cyan-400/20 to-cyan-600/20 rounded-xl group-hover:scale-110 transition-transform duration-300",children:s.jsx(Aa,{className:"h-8 w-8 text-cyan-400"})})]})})]})},C3=({currentMetrics:e,previousMetrics:t,selectedPeriod:r,periods:n})=>{var u,d;const a=(m,p)=>p===0?m>0?100:0:(m-p)/p*100,l=m=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(m),o=m=>`${m>=0?"+":""}${m.toFixed(1)}%`,i=m=>m>0?s.jsx(Za,{className:"h-4 w-4 text-green-400"}):m<0?s.jsx(Xa,{className:"h-4 w-4 text-red-400"}):s.jsx(wn,{className:"h-4 w-4 text-gray-400"}),c=m=>m>0?"text-green-400":m<0?"text-red-400":"text-gray-400",h=[{key:"totalIncome",label:"Total Income",icon:oe,color:"text-green-400",isCurrency:!0},{key:"grossProfit",label:"Gross Profit",icon:Ae,color:"text-emerald-400",isCurrency:!0},{key:"totalCommissions",label:"Total Commissions",icon:ye,color:"text-blue-400",isCurrency:!0},{key:"totalExpenses",label:"Total Expenses",icon:$a,color:"text-red-400",isCurrency:!0},{key:"netProfit",label:"Net Profit",icon:ct,color:"text-amber-400",isCurrency:!0},{key:"totalReceivables",label:"Total Receivables",icon:$1,color:"text-purple-400",isCurrency:!0},{key:"overdueReceivables",label:"Overdue Receivables",icon:hn,color:"text-red-500",isCurrency:!0},{key:"dueThisWeek",label:"Due This Week",icon:Rd,color:"text-yellow-400",isCurrency:!0},{key:"dueThisMonth",label:"Due This Month",icon:Rd,color:"text-orange-400",isCurrency:!0},{key:"collectionRate",label:"Collection Rate (%)",icon:ye,color:"text-cyan-400",isPercentage:!0},{key:"profitMargin",label:"Profit Margin (%)",icon:Ae,color:"text-emerald-500",isPercentage:!0}];return s.jsxs("div",{className:"glass-card overflow-hidden",children:[s.jsx("div",{className:"p-6 border-b border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h2",{className:"text-xl font-semibold gradient-text section-gradient-finances",children:["Financial Metrics - ",(u=n.find(m=>m.key===r))==null?void 0:u.label]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("span",{className:"text-sm text-gray-400",children:["vs ",(d=n.find(m=>m.key===r))==null?void 0:d.previousLabel]}),s.jsxs("button",{className:"flex items-center space-x-2 px-3 py-1 bg-gray-800 hover:bg-gray-700 text-white rounded-lg transition-colors",children:[s.jsx(rl,{className:"h-4 w-4"}),s.jsx("span",{children:"Export"})]})]})]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-800/60",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Financial Metric"}),s.jsx("th",{className:"px-6 py-4 text-center text-sm font-semibold text-gray-300",children:"Current"}),s.jsx("th",{className:"px-6 py-4 text-center text-sm font-semibold text-gray-300",children:"Previous"}),s.jsx("th",{className:"px-6 py-4 text-center text-sm font-semibold text-gray-300",children:"Change"}),s.jsx("th",{className:"px-6 py-4 text-center text-sm font-semibold text-gray-300",children:"Performance"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-800/50",children:h.map(m=>{const p=e[m.key],f=t[m.key],x=a(p,f),g=m.key==="totalExpenses"||m.key==="overdueReceivables"?x<-10?{text:"Excellent",color:"text-green-400"}:x<0?{text:"Good",color:"text-green-400"}:x<10?{text:"Fair",color:"text-yellow-400"}:{text:"Poor",color:"text-red-400"}:x>20?{text:"Excellent",color:"text-green-400"}:x>10?{text:"Good",color:"text-green-400"}:x>0?{text:"Fair",color:"text-yellow-400"}:{text:"Poor",color:"text-red-400"};return s.jsxs("tr",{className:"hover:bg-gray-800/30 transition-colors group",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-gray-800/50 rounded-lg group-hover:scale-110 transition-transform duration-200",children:s.jsx(m.icon,{className:`h-5 w-5 ${m.color}`})}),s.jsx("span",{className:"font-medium text-white group-hover:text-gray-100 transition-colors",children:m.label})]})}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("span",{className:"text-lg font-bold text-white",children:m.isCurrency?l(p):m.isPercentage?`${p.toFixed(1)}%`:p.toLocaleString()})}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("span",{className:"text-gray-400",children:m.isCurrency?l(f):m.isPercentage?`${f.toFixed(1)}%`:f.toLocaleString()})}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[i(x),s.jsx("span",{className:`font-medium ${c(x)}`,children:o(x)})]})}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("span",{className:`font-medium ${g.color}`,children:g.text})})]},m.key)})})]})})]})},D3=({currentMetrics:e,previousMetrics:t})=>{const r=u=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(u),n=()=>{const u=Object.entries(e.incomeByOffer);return u.length===0?"No offers":u.reduce((d,m)=>m[1]>d[1]?m:d)[0]},a=()=>{const u=Object.entries(e.expensesByType);return u.length===0?"No expenses":u.reduce((d,m)=>m[1]>d[1]?m:d)[0]},l=()=>{const u=Object.entries(e.commissionsBySetter);return u.length===0?"No setters":u.reduce((d,m)=>m[1]>d[1]?m:d)[0]},o=()=>{const u=e.overdueReceivables/(e.totalReceivables||1);return u<.05?{status:"Excellent",color:"text-green-400",description:"Very low overdue rate"}:u<.15?{status:"Good",color:"text-green-400",description:"Manageable overdue rate"}:u<.3?{status:"Fair",color:"text-yellow-400",description:"Monitor overdue payments"}:{status:"Poor",color:"text-red-400",description:"High overdue rate needs attention"}},i=()=>e.profitMargin>30?{status:"Excellent",color:"text-green-400"}:e.profitMargin>20?{status:"Good",color:"text-green-400"}:e.profitMargin>10?{status:"Fair",color:"text-yellow-400"}:e.profitMargin>0?{status:"Poor",color:"text-orange-400"}:{status:"Loss",color:"text-red-400"},c=o(),h=i();return s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"glass-card p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[s.jsx(Rd,{className:"h-5 w-5 mr-2 text-rose-400"}),"Financial Health Overview"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:`p-4 bg-gradient-to-r ${h.status==="Excellent"||h.status==="Good"?"from-green-900/30 to-emerald-900/30 border-green-500/30":h.status==="Fair"?"from-yellow-900/30 to-orange-900/30 border-yellow-500/30":"from-red-900/30 to-red-900/30 border-red-500/30"} border rounded-lg`,children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:`font-medium ${h.color}`,children:"Profitability"}),s.jsx("span",{className:"text-white font-semibold",children:h.status})]}),s.jsxs("p",{className:"text-sm text-gray-300 mt-1",children:[e.profitMargin.toFixed(1),"% profit margin"]})]}),s.jsxs("div",{className:`p-4 bg-gradient-to-r ${c.status==="Excellent"||c.status==="Good"?"from-green-900/30 to-emerald-900/30 border-green-500/30":c.status==="Fair"?"from-yellow-900/30 to-orange-900/30 border-yellow-500/30":"from-red-900/30 to-red-900/30 border-red-500/30"} border rounded-lg`,children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:`font-medium ${c.color}`,children:"Cash Flow"}),s.jsx("span",{className:"text-white font-semibold",children:c.status})]}),s.jsx("p",{className:"text-sm text-gray-300 mt-1",children:c.description})]}),s.jsxs("div",{className:"p-4 bg-gradient-to-r from-blue-900/30 to-cyan-900/30 border border-blue-500/30 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-blue-400 font-medium",children:"Commission Efficiency"}),s.jsx("span",{className:"text-white font-semibold",children:e.totalIncome>0?`${(e.totalCommissions/e.totalIncome*100).toFixed(1)}%`:"0%"})]}),s.jsx("p",{className:"text-sm text-gray-300 mt-1",children:"Commission rate of total income"})]}),s.jsxs("div",{className:"p-4 bg-gradient-to-r from-purple-900/30 to-indigo-900/30 border border-purple-500/30 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-purple-400 font-medium",children:"Outstanding Revenue"}),s.jsx("span",{className:"text-white font-semibold",children:r(e.totalReceivables-(e.totalIncome-e.totalReceivables))})]}),s.jsx("p",{className:"text-sm text-gray-300 mt-1",children:"Revenue yet to be collected"})]})]})]}),s.jsxs("div",{className:"glass-card p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[s.jsx(ct,{className:"h-5 w-5 mr-2 text-rose-400"}),"Top Performers & Insights"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"p-4 bg-gradient-to-r from-green-900/30 to-emerald-900/30 border border-green-500/30 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-green-400 font-medium",children:"Top Revenue Source"}),s.jsx("span",{className:"text-white font-semibold",children:n()})]}),s.jsx("p",{className:"text-sm text-gray-300 mt-1",children:"Highest performing offer/service"})]}),s.jsxs("div",{className:"p-4 bg-gradient-to-r from-blue-900/30 to-cyan-900/30 border border-blue-500/30 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-blue-400 font-medium",children:"Top Setter"}),s.jsx("span",{className:"text-white font-semibold",children:l()})]}),s.jsx("p",{className:"text-sm text-gray-300 mt-1",children:"Highest commission earner"})]}),s.jsxs("div",{className:"p-4 bg-gradient-to-r from-orange-900/30 to-red-900/30 border border-orange-500/30 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-orange-400 font-medium",children:"Largest Expense Category"}),s.jsx("span",{className:"text-white font-semibold",children:a()})]}),s.jsx("p",{className:"text-sm text-gray-300 mt-1",children:"Monitor for cost optimization"})]}),s.jsxs("div",{className:"p-4 bg-gradient-to-r from-purple-900/30 to-pink-900/30 border border-purple-500/30 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-purple-400 font-medium",children:"Monthly Growth Rate"}),s.jsx("span",{className:"text-white font-semibold",children:e.monthlyTrends.length>=2?(()=>{const u=e.monthlyTrends[e.monthlyTrends.length-1],d=e.monthlyTrends[e.monthlyTrends.length-2],m=d.income>0?(u.income-d.income)/d.income*100:0;return`${m>=0?"+":""}${m.toFixed(1)}%`})():"N/A"})]}),s.jsx("p",{className:"text-sm text-gray-300 mt-1",children:"Month-over-month income growth"})]})]})]})]})},E3=()=>{const{metricsData:e,loading:t,error:r,fetchFinancialData:n}=S3(),[a,l]=j.useState("thisMonth"),[o,i]=j.useState(new Date),c=[{key:"today",label:"Today",previousLabel:"Yesterday"},{key:"thisWeek",label:"This Week",previousLabel:"Last Week"},{key:"thisMonth",label:"This Month",previousLabel:"Last Month"},{key:"last30Days",label:"Last 30 Days",previousLabel:"Previous 30 Days"},{key:"thisQuarter",label:"This Quarter",previousLabel:"Last Quarter"},{key:"allTime",label:"All Time",previousLabel:"N/A"}];j.useEffect(()=>{n()},[]);const h=async()=>{await n(),i(new Date)},u=p=>({neuronData:{nodes:[{id:"income",value:p.totalIncome,label:"Total Income",color:"#10b981",connections:["profit","commissions"]},{id:"expenses",value:p.totalExpenses,label:"Expenses",color:"#ef4444",connections:["profit"]},{id:"commissions",value:p.totalCommissions,label:"Commissions",color:"#3b82f6",connections:["profit"]},{id:"profit",value:Math.max(0,p.netProfit),label:"Net Profit",color:"#f59e0b",connections:["growth"]},{id:"receivables",value:p.totalReceivables,label:"Receivables",color:"#8b5cf6",connections:["income"]},{id:"growth",value:Math.max(0,p.profitMargin),label:"Growth",color:"#06b6d4",connections:[]}]},spiderData:[{label:"Revenue",value:p.totalIncome,maxValue:Math.max(p.totalIncome,1e5),color:"#10b981"},{label:"Profitability",value:Math.max(0,p.profitMargin),maxValue:100,color:"#f59e0b"},{label:"Collection Rate",value:p.collectionRate,maxValue:100,color:"#06b6d4"},{label:"Commission Efficiency",value:p.totalIncome>0?p.totalCommissions/p.totalIncome*100:0,maxValue:50,color:"#3b82f6"},{label:"Expense Control",value:p.totalIncome>0?100-p.totalExpenses/p.totalIncome*100:0,maxValue:100,color:"#8b5cf6"},{label:"Cash Flow",value:p.totalReceivables>0?(p.totalReceivables-p.overdueReceivables)/p.totalReceivables*100:100,maxValue:100,color:"#ec4899"}],funnelData:[{id:"gross",label:"Gross Income",value:p.totalIncome,color:"#10b981"},{id:"after_commissions",label:"After Commissions",value:p.totalIncome-p.totalCommissions,color:"#06b6d4"},{id:"after_expenses",label:"After Expenses",value:p.totalIncome-p.totalCommissions-p.totalExpenses,color:"#f59e0b"},{id:"net_profit",label:"Net Profit",value:Math.max(0,p.netProfit),color:"#8b5cf6"}]});if(t&&!e)return s.jsx("div",{className:"flex items-center justify-center p-8",children:s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-rose-400/30 border-t-rose-400"}),s.jsx("div",{className:"absolute inset-0 rounded-full bg-rose-400/10 animate-pulse"})]})});if(r||!e)return s.jsx(dr,{section:"finances",children:s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsx("div",{className:"space-y-2",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-gradient-to-br from-rose-400/20 to-amber-500/20 rounded-xl",children:s.jsx(Ie,{className:"h-8 w-8 text-rose-400"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold gradient-text section-gradient-finances",children:"Financial Dashboard"}),s.jsx("p",{className:"text-gray-400 mt-1",children:"Comprehensive financial analytics with futuristic data visualization"})]})]})})}),s.jsxs("div",{className:"glass-card p-8 text-center",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-300 mb-4",children:"Error Loading Financial Data"}),s.jsx("p",{className:"text-gray-400 mb-4",children:r||"Unable to load financial metrics data."}),s.jsx("button",{onClick:h,className:"px-6 py-2 bg-gradient-to-r from-rose-400 to-amber-500 hover:from-rose-500 hover:to-amber-600 text-white font-medium rounded-lg transition-all duration-200",children:"Retry"})]})]})});const d=e[a].current,m=e[a].previous;return s.jsx(dr,{section:"finances",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"space-y-2",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-gradient-to-br from-rose-400/20 to-amber-500/20 rounded-xl",children:s.jsx(Ie,{className:"h-8 w-8 text-rose-400"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold gradient-text section-gradient-finances",children:"Financial Dashboard"}),s.jsx("p",{className:"text-gray-400 mt-1",children:"Comprehensive financial analytics with futuristic data visualization"})]})]})}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm text-gray-400",children:"Last Updated"}),s.jsx("p",{className:"text-sm font-semibold text-white",children:o.toLocaleTimeString()})]}),s.jsxs("button",{onClick:h,disabled:t,className:"flex items-center space-x-2 px-4 py-2 bg-gray-800 hover:bg-gray-700 text-white rounded-lg transition-all duration-200 hover:scale-105",children:[s.jsx(xr,{className:`h-4 w-4 ${t?"animate-spin":""}`}),s.jsx("span",{children:"Refresh"})]})]})]}),s.jsx("div",{className:"glass-card p-6",children:s.jsx("div",{className:"flex flex-wrap gap-2",children:c.map(p=>s.jsx("button",{onClick:()=>l(p.key),className:`
                  px-4 py-2 rounded-lg font-medium transition-all duration-200 hover:scale-105
                  ${a===p.key?"bg-gradient-to-r from-rose-400 to-amber-500 text-white shadow-lg shadow-rose-500/25":"bg-gray-800/50 text-gray-300 hover:bg-gray-700/50 hover:text-white"}
                `,children:p.label},p.key))})}),s.jsx(k3,{currentMetrics:d,previousMetrics:m}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Yt,{className:"h-6 w-6 text-rose-400"}),s.jsx("h2",{className:"text-2xl font-bold gradient-text section-gradient-finances",children:"Advanced Financial Analytics"})]}),s.jsx(eh,{data:u(d)})]}),s.jsx(C3,{currentMetrics:d,previousMetrics:m,selectedPeriod:a,periods:c}),s.jsx(D3,{currentMetrics:d,previousMetrics:m})]})})},Xe=({title:e,subtitle:t,gradientClass:r})=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:`text-3xl font-bold gradient-text ${r}`,children:e}),s.jsx("p",{className:"text-gray-400 mt-2",children:t})]}),s.jsxs("div",{className:"glass-card p-8 text-center",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-300 mb-4",children:[e," Coming Soon"]}),s.jsx("p",{className:"text-gray-400",children:"This feature is currently under development."})]})]}),P3=()=>{const{user:e,loading:t}=Oe();return t?s.jsx("div",{className:"min-h-screen bg-gray-950 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-400",children:"Loading..."})]})}):e?s.jsx(S1,{children:s.jsx(Q0,{children:s.jsxs("div",{className:"min-h-screen bg-gray-950 text-white font-space-grotesk",children:[s.jsx(F1,{}),s.jsxs("div",{className:"flex",children:[s.jsx(W1,{}),s.jsx("main",{className:"flex-1 ml-16 lg:ml-64 p-6 min-h-[calc(100vh-4rem)]",children:s.jsxs(H0,{children:[s.jsx(fe,{path:"/",element:s.jsx(G0,{to:"/dashboard",replace:!0})}),s.jsx(fe,{path:"/dashboard",element:s.jsx(H1,{})}),s.jsx(fe,{path:"/leads/crm",element:s.jsx(J1,{})}),s.jsx(fe,{path:"/leads/:id",element:s.jsx(e_,{})}),s.jsx(fe,{path:"/leads/metrics",element:s.jsx(n_,{})}),s.jsx(fe,{path:"/sales/pipeline",element:s.jsx(VC,{})}),s.jsx(fe,{path:"/sales/crm",element:s.jsx(GC,{})}),s.jsx(fe,{path:"/sales/metrics",element:s.jsx(YC,{})}),s.jsx(fe,{path:"/sales/setter-reports",element:s.jsx(t3,{})}),s.jsx(fe,{path:"/sales/closer-reports",element:s.jsx(l3,{})}),s.jsx(fe,{path:"/documents/proposals",element:s.jsx(j.Suspense,{fallback:s.jsx("div",{className:"min-h-screen bg-gray-950 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-400",children:"Loading..."})]})}),children:s.jsx(y3,{})})}),s.jsx(fe,{path:"/documents/contracts",element:s.jsx(Xe,{title:"Contracts",subtitle:"Manage legal contracts and agreements.",gradientClass:"section-gradient-documents"})}),s.jsx(fe,{path:"/documents/invoices",element:s.jsx(Xe,{title:"Invoices",subtitle:"Generate and track invoices.",gradientClass:"section-gradient-documents"})}),s.jsx(fe,{path:"/finances/dashboard",element:s.jsx(E3,{})}),s.jsx(fe,{path:"/finances/cash-in",element:s.jsx(b3,{})}),s.jsx(fe,{path:"/finances/cash-out",element:s.jsx(N3,{})}),s.jsx(fe,{path:"/finances/receivables",element:s.jsx(_3,{})}),s.jsx(fe,{path:"/finances/calendar",element:s.jsx(Xe,{title:"Financial Calendar",subtitle:"Schedule and track financial events.",gradientClass:"section-gradient-finances"})}),s.jsx(fe,{path:"/onboarding/one-click",element:s.jsx(Xe,{title:"One Click Onboarding",subtitle:"Streamlined client onboarding process.",gradientClass:"section-gradient-onboarding"})}),s.jsx(fe,{path:"/onboarding/employee",element:s.jsx(Xe,{title:"Employee Onboarding",subtitle:"Manage new employee onboarding.",gradientClass:"section-gradient-onboarding"})}),s.jsx(fe,{path:"/fulfillment/service-delivery",element:s.jsx(Xe,{title:"Service Delivery",subtitle:"Manage service delivery and client satisfaction.",gradientClass:"section-gradient-fulfillment"})}),s.jsx(fe,{path:"/fulfillment/templates",element:s.jsx(Xe,{title:"Templates",subtitle:"Create and manage service templates.",gradientClass:"section-gradient-fulfillment"})}),s.jsx(fe,{path:"/ai-tools/content-companion",element:s.jsx(Xe,{title:"AI Content Companion",subtitle:"AI-powered content creation and optimization.",gradientClass:"section-gradient-ai-tools"})}),s.jsx(fe,{path:"/ai-tools/audit-tool",element:s.jsx(Xe,{title:"Audit Tool",subtitle:"Comprehensive business auditing with AI.",gradientClass:"section-gradient-ai-tools"})}),s.jsx(fe,{path:"/team/daily-reports",element:s.jsx(Xe,{title:"Daily Reports",subtitle:"Track daily team performance and activities.",gradientClass:"section-gradient-team"})}),s.jsx(fe,{path:"/team/consulting-log",element:s.jsx(Xe,{title:"Consulting Log",subtitle:"Log and track consulting activities.",gradientClass:"section-gradient-team"})}),s.jsx(fe,{path:"/team/sops",element:s.jsx(Xe,{title:"SOPs",subtitle:"Standard Operating Procedures management.",gradientClass:"section-gradient-team"})}),s.jsx(fe,{path:"/offer/creation-tool",element:s.jsx(Xe,{title:"Offer Creation Tool",subtitle:"Create compelling service offers.",gradientClass:"section-gradient-offer"})}),s.jsx(fe,{path:"/offer/revenue-calculator",element:s.jsx(Xe,{title:"Revenue Calculator",subtitle:"Calculate potential revenue from offers.",gradientClass:"section-gradient-offer"})}),s.jsx(fe,{path:"/offer/ideas",element:s.jsx(Xe,{title:"Ideas",subtitle:"Brainstorm and develop new offer ideas.",gradientClass:"section-gradient-offer"})}),s.jsx(fe,{path:"/payment/processing",element:s.jsx(Xe,{title:"Payment Processing",subtitle:"Process and manage payments.",gradientClass:"section-gradient-finances"})}),s.jsx(fe,{path:"/payment/history",element:s.jsx(Xe,{title:"Payment History",subtitle:"View payment transaction history.",gradientClass:"section-gradient-finances"})})]})})]}),s.jsx(V1,{})]})})}):s.jsx(Q0,{children:s.jsxs(H0,{children:[s.jsx(fe,{path:"/login",element:s.jsx(q1,{})}),s.jsx(fe,{path:"/signup",element:s.jsx(G1,{})}),s.jsx(fe,{path:"*",element:s.jsx(G0,{to:"/login",replace:!0})})]})})};function I3(){return s.jsx(N1,{children:s.jsx(P3,{})})}Ng(document.getElementById("root")).render(s.jsx(j.StrictMode,{children:s.jsx(I3,{})}));
